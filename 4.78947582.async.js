(self.webpackChunkdipeak_design=self.webpackChunkdipeak_design||[]).push([[4],{81548:function(At,yt,O){"use strict";O.d(yt,{iN:function(){return lr},R_:function(){return Gt}});var V=O(36914),ft=O(31105),rt=2,wt=.16,Tt=.05,Zt=.05,K=.15,Z=5,ot=4,gt=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function $t(jt){var Dt=jt.r,on=jt.g,Oe=jt.b,Jn=(0,V.py)(Dt,on,Oe);return{h:Jn.h*360,s:Jn.s,v:Jn.v}}function ht(jt){var Dt=jt.r,on=jt.g,Oe=jt.b;return"#".concat((0,V.vq)(Dt,on,Oe,!1))}function bt(jt,Dt,on){var Oe=on/100,Jn={r:(Dt.r-jt.r)*Oe+jt.r,g:(Dt.g-jt.g)*Oe+jt.g,b:(Dt.b-jt.b)*Oe+jt.b};return Jn}function Ut(jt,Dt,on){var Oe;return Math.round(jt.h)>=60&&Math.round(jt.h)<=240?Oe=on?Math.round(jt.h)-rt*Dt:Math.round(jt.h)+rt*Dt:Oe=on?Math.round(jt.h)+rt*Dt:Math.round(jt.h)-rt*Dt,Oe<0?Oe+=360:Oe>=360&&(Oe-=360),Oe}function ut(jt,Dt,on){if(jt.h===0&&jt.s===0)return jt.s;var Oe;return on?Oe=jt.s-wt*Dt:Dt===ot?Oe=jt.s+wt:Oe=jt.s+Tt*Dt,Oe>1&&(Oe=1),on&&Dt===Z&&Oe>.1&&(Oe=.1),Oe<.06&&(Oe=.06),Number(Oe.toFixed(2))}function Bt(jt,Dt,on){var Oe;return on?Oe=jt.v+Zt*Dt:Oe=jt.v-K*Dt,Oe>1&&(Oe=1),Number(Oe.toFixed(2))}function Gt(jt){for(var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},on=[],Oe=(0,ft.uA)(jt),Jn=Z;Jn>0;Jn-=1){var Cn=$t(Oe),Tn=ht((0,ft.uA)({h:Ut(Cn,Jn,!0),s:ut(Cn,Jn,!0),v:Bt(Cn,Jn,!0)}));on.push(Tn)}on.push(ht(Oe));for(var zn=1;zn<=ot;zn+=1){var Rn=$t(Oe),si=ht((0,ft.uA)({h:Ut(Rn,zn),s:ut(Rn,zn),v:Bt(Rn,zn)}));on.push(si)}return Dt.theme==="dark"?gt.map(function(Kr){var qr=Kr.index,Fi=Kr.opacity,to=ht(bt((0,ft.uA)(Dt.backgroundColor||"#141414"),(0,ft.uA)(on[qr]),Fi*100));return to}):on}var fe={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ue={},xe={};Object.keys(fe).forEach(function(jt){ue[jt]=Gt(fe[jt]),ue[jt].primary=ue[jt][5],xe[jt]=Gt(fe[jt],{theme:"dark",backgroundColor:"#141414"}),xe[jt].primary=xe[jt][5]});var Qe=ue.red,Pn=ue.volcano,yn=ue.gold,Ht=ue.orange,Yn=ue.yellow,Hn=ue.lime,_r=ue.green,rn=ue.cyan,lr=ue.blue,bn=ue.geekblue,Je=ue.purple,kt=ue.magenta,vt=ue.grey,Qt=ue.grey},72613:function(At,yt,O){"use strict";O.d(yt,{E4:function(){return xi},jG:function(){return Mu},fp:function(){return qr},xy:function(){return $o}});var V=O(185),ft=O(52529);function rt(Ct){for(var Jt=0,ne,me=0,Me=Ct.length;Me>=4;++me,Me-=4)ne=Ct.charCodeAt(me)&255|(Ct.charCodeAt(++me)&255)<<8|(Ct.charCodeAt(++me)&255)<<16|(Ct.charCodeAt(++me)&255)<<24,ne=(ne&65535)*1540483477+((ne>>>16)*59797<<16),ne^=ne>>>24,Jt=(ne&65535)*1540483477+((ne>>>16)*59797<<16)^(Jt&65535)*1540483477+((Jt>>>16)*59797<<16);switch(Me){case 3:Jt^=(Ct.charCodeAt(me+2)&255)<<16;case 2:Jt^=(Ct.charCodeAt(me+1)&255)<<8;case 1:Jt^=Ct.charCodeAt(me)&255,Jt=(Jt&65535)*1540483477+((Jt>>>16)*59797<<16)}return Jt^=Jt>>>13,Jt=(Jt&65535)*1540483477+((Jt>>>16)*59797<<16),((Jt^Jt>>>15)>>>0).toString(36)}var wt=rt,Tt=O(93236),Zt=O(48466),K=O(93117),Z=O(27915),ot=O(92449),gt=O(45389),$t=function(){function Ct(Jt){(0,Z.Z)(this,Ct),(0,gt.Z)(this,"instanceId",void 0),(0,gt.Z)(this,"cache",new Map),this.instanceId=Jt}return(0,ot.Z)(Ct,[{key:"get",value:function(ne){return this.cache.get(ne.join("%"))||null}},{key:"update",value:function(ne,me){var Me=ne.join("%"),An=this.cache.get(Me),On=me(An);On===null?this.cache.delete(Me):this.cache.set(Me,On)}}]),Ct}(),ht=$t,bt=null,Ut="data-token-hash",ut="data-css-hash",Bt="data-dev-cache-path",Gt="__cssinjs_instance__";function fe(){var Ct=Math.random().toString(12).slice(2);if(typeof document!="undefined"&&document.head&&document.body){var Jt=document.body.querySelectorAll("style[".concat(ut,"]"))||[],ne=document.head.firstChild;Array.from(Jt).forEach(function(Me){Me[Gt]=Me[Gt]||Ct,Me[Gt]===Ct&&document.head.insertBefore(Me,ne)});var me={};Array.from(document.querySelectorAll("style[".concat(ut,"]"))).forEach(function(Me){var An=Me.getAttribute(ut);if(me[An]){if(Me[Gt]===Ct){var On;(On=Me.parentNode)===null||On===void 0||On.removeChild(Me)}}else me[An]=!0})}return new ht(Ct)}var ue=Tt.createContext({hashPriority:"low",cache:fe(),defaultCache:!0}),xe=function(Jt){var ne=Jt.children,me=_objectWithoutProperties(Jt,bt),Me=React.useContext(ue),An=useMemo(function(){var On=_objectSpread({},Me);Object.keys(me).forEach(function($n){var er=me[$n];me[$n]!==void 0&&(On[$n]=er)});var Nn=me.cache;return On.cache=On.cache||fe(),On.defaultCache=!Nn&&Me.defaultCache,On},[Me,me],function(On,Nn){return!isEqual(On[0],Nn[0],!0)||!isEqual(On[1],Nn[1],!0)});return React.createElement(ue.Provider,{value:An},ne)},Qe=ue,Pn=O(96268),yn=O(57917),Ht=O(26869);function Yn(Ct){var Jt="";return Object.keys(Ct).forEach(function(ne){var me=Ct[ne];Jt+=ne,me&&(0,Pn.Z)(me)==="object"?Jt+=Yn(me):Jt+=me}),Jt}function Hn(Ct,Jt){return wt("".concat(Jt,"_").concat(Yn(Ct)))}var _r="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),rn="903px";function lr(Ct,Jt){if((0,yn.Z)()){var ne;(0,Ht.hq)(Ct,_r);var me=document.createElement("div");me.style.position="fixed",me.style.left="0",me.style.top="0",Jt==null||Jt(me),document.body.appendChild(me);var Me=getComputedStyle(me).width===rn;return(ne=me.parentNode)===null||ne===void 0||ne.removeChild(me),(0,Ht.jL)(_r),Me}return!1}var bn=void 0;function Je(){return bn===void 0&&(bn=lr("@layer ".concat(_r," { .").concat(_r," { width: ").concat(rn,"!important; } }"),function(Ct){Ct.className=_r})),bn}var kt=O(66441);function vt(){return!1}var Qt=!1;function jt(){return Qt}var Dt=vt;if(!1)var on,Oe;function Jn(Ct,Jt,ne,me){var Me=Tt.useContext(Qe),An=Me.cache,On=[Ct].concat((0,ft.Z)(Jt)),Nn=Dt();return Tt.useMemo(function(){An.update(On,function($n){var er=$n||[],Cr=(0,kt.Z)(er,2),mr=Cr[0],br=mr===void 0?0:mr,Qr=Cr[1],hi=Qr,or=hi||ne();return[br+1,or]})},[On.join("_")]),Tt.useEffect(function(){return function(){An.update(On,function($n){var er=$n||[],Cr=(0,kt.Z)(er,2),mr=Cr[0],br=mr===void 0?0:mr,Qr=Cr[1],hi=br-1;return hi===0?(me==null||me(Qr,!1),null):[br-1,Qr]})}},On),An.get(On)[1]}var Cn={},Tn="css",zn=new Map;function Rn(Ct){zn.set(Ct,(zn.get(Ct)||0)+1)}function si(Ct,Jt){if(typeof document!="undefined"){var ne=document.querySelectorAll("style[".concat(Ut,'="').concat(Ct,'"]'));ne.forEach(function(me){if(me[Gt]===Jt){var Me;(Me=me.parentNode)===null||Me===void 0||Me.removeChild(me)}})}}function Kr(Ct,Jt){zn.set(Ct,(zn.get(Ct)||0)-1);var ne=Array.from(zn.keys()),me=ne.filter(function(Me){var An=zn.get(Me)||0;return An<=0});me.length<ne.length&&me.forEach(function(Me){si(Me,Jt),zn.delete(Me)})}function qr(Ct,Jt){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},me=(0,Tt.useContext)(Qe),Me=me.cache.instanceId,An=ne.salt,On=An===void 0?"":An,Nn=ne.override,$n=Nn===void 0?Cn:Nn,er=ne.formatToken,Cr=Tt.useMemo(function(){return Object.assign.apply(Object,[{}].concat((0,ft.Z)(Jt)))},[Jt]),mr=Tt.useMemo(function(){return Yn(Cr)},[Cr]),br=Tt.useMemo(function(){return Yn($n)},[$n]),Qr=Jn("token",[On,Ct.id,mr,br],function(){var hi=Ct.getDerivativeToken(Cr),or=(0,V.Z)((0,V.Z)({},hi),$n);er&&(or=er(or));var Ei=Hn(or,On);or._tokenKey=Ei,Rn(Ei);var Zr="".concat(Tn,"-").concat(wt(Ei));return or._hashId=Zr,[or,Zr]},function(hi){Kr(hi[0]._tokenKey,Me)});return Qr}var Fi=O(72564),to={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ks=to,ps="-ms-",Oi="-moz-",Ls="-webkit-",jo="comm",ba="rule",ks="decl",Q="@page",kc="@media",Bi="@import",yo="@charset",Fc="@viewport",ii="@supports",Bc="@document",vs="@namespace",za="@keyframes",ja="@font-face",Tu="@counter-style",Hi="@font-feature-values",ai="@layer",xa=Math.abs,Fs=String.fromCharCode,Ea=Object.assign;function Gc(Ct,Jt){return eo(Ct,0)^45?(((Jt<<2^eo(Ct,0))<<2^eo(Ct,1))<<2^eo(Ct,2))<<2^eo(Ct,3):0}function qs(Ct){return Ct.trim()}function vc(Ct,Jt){return(Ct=Jt.exec(Ct))?Ct[0]:Ct}function Qo(Ct,Jt,ne){return Ct.replace(Jt,ne)}function To(Ct,Jt){return Ct.indexOf(Jt)}function eo(Ct,Jt){return Ct.charCodeAt(Jt)|0}function Uo(Ct,Jt,ne){return Ct.slice(Jt,ne)}function ao(Ct){return Ct.length}function ci(Ct){return Ct.length}function ms(Ct,Jt){return Jt.push(Ct),Ct}function Or(Ct,Jt){return Ct.map(Jt).join("")}function Vo(Ct,Jt){for(var ne="",me=ci(Ct),Me=0;Me<me;Me++)ne+=Jt(Ct[Me],Me,Ct,Jt)||"";return ne}function wa(Ct,Jt,ne,me){switch(Ct.type){case ai:if(Ct.children.length)break;case Bi:case ks:return Ct.return=Ct.return||Ct.value;case jo:return"";case za:return Ct.return=Ct.value+"{"+Vo(Ct.children,me)+"}";case ba:Ct.value=Ct.props.join(",")}return ao(ne=Vo(Ct.children,me))?Ct.return=Ct.value+"{"+ne+"}":""}var ys=1,Bs=1,Ua=0,bo=0,Vr=0,bs="";function Jr(Ct,Jt,ne,me,Me,An,On){return{value:Ct,root:Jt,parent:ne,type:me,props:Me,children:An,line:ys,column:Bs,length:On,return:""}}function zc(Ct,Jt){return assign(Jr("",null,null,"",null,null,0),Ct,{length:-Ct.length},Jt)}function jc(){return Vr}function Js(){return Vr=bo>0?eo(bs,--bo):0,Bs--,Vr===10&&(Bs=1,ys--),Vr}function no(){return Vr=bo<Ua?eo(bs,bo++):0,Bs++,Vr===10&&(Bs=1,ys++),Vr}function Zo(){return eo(bs,bo)}function Qs(){return bo}function xs(Ct,Jt){return Uo(bs,Ct,Jt)}function Es(Ct){switch(Ct){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Sa(Ct){return ys=Bs=1,Ua=ao(bs=Ct),bo=0,[]}function _a(Ct){return bs="",Ct}function ts(Ct){return qs(xs(bo-1,Gs(Ct===91?Ct+2:Ct===40?Ct+1:Ct)))}function Ao(Ct){return _a(No(Sa(Ct)))}function Ca(Ct){for(;(Vr=Zo())&&Vr<33;)no();return Es(Ct)>2||Es(Vr)>3?"":" "}function No(Ct){for(;no();)switch(Es(Vr)){case 0:append(yc(bo-1),Ct);break;case 2:append(ts(Vr),Ct);break;default:append(from(Vr),Ct)}return Ct}function mc(Ct,Jt){for(;--Jt&&no()&&!(Vr<48||Vr>102||Vr>57&&Vr<65||Vr>70&&Vr<97););return xs(Ct,Qs()+(Jt<6&&Zo()==32&&no()==32))}function Gs(Ct){for(;no();)switch(Vr){case Ct:return bo;case 34:case 39:Ct!==34&&Ct!==39&&Gs(Vr);break;case 40:Ct===41&&Gs(Ct);break;case 92:no();break}return bo}function Mi(Ct,Jt){for(;no()&&Ct+Vr!==47+10;)if(Ct+Vr===42+42&&Zo()===47)break;return"/*"+xs(Jt,bo-1)+"*"+Fs(Ct===47?Ct:no())}function yc(Ct){for(;!Es(Zo());)no();return xs(Ct,bo)}function oa(Ct){return _a(Ro("",null,null,null,[""],Ct=Sa(Ct),0,[0],Ct))}function Ro(Ct,Jt,ne,me,Me,An,On,Nn,$n){for(var er=0,Cr=0,mr=On,br=0,Qr=0,hi=0,or=1,Ei=1,Zr=1,ui=0,Dr="",_s=Me,Ci=An,ti=me,Tr=Dr;Ei;)switch(hi=ui,ui=no()){case 40:if(hi!=108&&eo(Tr,mr-1)==58){To(Tr+=Qo(ts(ui),"&","&\f"),"&\f")!=-1&&(Zr=-1);break}case 34:case 39:case 91:Tr+=ts(ui);break;case 9:case 10:case 13:case 32:Tr+=Ca(hi);break;case 92:Tr+=mc(Qs()-1,7);continue;case 47:switch(Zo()){case 42:case 47:ms(Ta(Mi(no(),Qs()),Jt,ne),$n);break;default:Tr+="/"}break;case 123*or:Nn[er++]=ao(Tr)*Zr;case 125*or:case 59:case 0:switch(ui){case 0:case 125:Ei=0;case 59+Cr:Zr==-1&&(Tr=Qo(Tr,/\f/g,"")),Qr>0&&ao(Tr)-mr&&ms(Qr>32?Va(Tr+";",me,ne,mr-1):Va(Qo(Tr," ","")+";",me,ne,mr-2),$n);break;case 59:Tr+=";";default:if(ms(ti=es(Tr,Jt,ne,er,Cr,Me,Nn,Dr,_s=[],Ci=[],mr),An),ui===123)if(Cr===0)Ro(Tr,Jt,ti,ti,_s,An,mr,Nn,Ci);else switch(br===99&&eo(Tr,3)===110?100:br){case 100:case 108:case 109:case 115:Ro(Ct,ti,ti,me&&ms(es(Ct,ti,ti,0,0,Me,Nn,Dr,Me,_s=[],mr),Ci),Me,Ci,mr,Nn,me?_s:Ci);break;default:Ro(Tr,ti,ti,ti,[""],Ci,0,Nn,Ci)}}er=Cr=Qr=0,or=Zr=1,Dr=Tr="",mr=On;break;case 58:mr=1+ao(Tr),Qr=hi;default:if(or<1){if(ui==123)--or;else if(ui==125&&or++==0&&Js()==125)continue}switch(Tr+=Fs(ui),ui*or){case 38:Zr=Cr>0?1:(Tr+="\f",-1);break;case 44:Nn[er++]=(ao(Tr)-1)*Zr,Zr=1;break;case 64:Zo()===45&&(Tr+=ts(no())),br=Zo(),Cr=mr=ao(Dr=Tr+=yc(Qs())),ui++;break;case 45:hi===45&&ao(Tr)==2&&(or=0)}}return An}function es(Ct,Jt,ne,me,Me,An,On,Nn,$n,er,Cr){for(var mr=Me-1,br=Me===0?An:[""],Qr=ci(br),hi=0,or=0,Ei=0;hi<me;++hi)for(var Zr=0,ui=Uo(Ct,mr+1,mr=xa(or=On[hi])),Dr=Ct;Zr<Qr;++Zr)(Dr=qs(or>0?br[Zr]+" "+ui:Qo(ui,/&\f/g,br[Zr])))&&($n[Ei++]=Dr);return Jr(Ct,Jt,ne,Me===0?ba:Nn,$n,er,Cr)}function Ta(Ct,Jt,ne){return Jr(Ct,Jt,ne,jo,Fs(jc()),Uo(Ct,2,-2),0)}function Va(Ct,Jt,ne,me){return Jr(Ct,Jt,ne,ks,Uo(Ct,0,me),Uo(Ct,me+1,-1),me)}var Xr=O(2557);function sa(Ct,Jt){var ne=Jt.path,me=Jt.parentSelectors;devWarning(!1,"[Ant Design CSS-in-JS] ".concat(ne?"Error in ".concat(ne,": "):"").concat(Ct).concat(me.length?" Selector: ".concat(me.join(" | ")):""))}var yi=function(Jt,ne,me){if(Jt==="content"){var Me=/(attr|counters?|url|(((repeating-)?(linear|radial))|conic)-gradient)\(|(no-)?(open|close)-quote/,An=["normal","none","initial","inherit","unset"];(typeof ne!="string"||An.indexOf(ne)===-1&&!Me.test(ne)&&(ne.charAt(0)!==ne.charAt(ne.length-1)||ne.charAt(0)!=='"'&&ne.charAt(0)!=="'"))&&lintWarning("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\"".concat(ne,"\"'`."),me)}},Ke=null,Ir=function(Jt,ne,me){Jt==="animation"&&me.hashId&&ne!=="none"&&lintWarning("You seem to be using hashed animation '".concat(ne,"', in which case 'animationName' with Keyframe as value is recommended."),me)},bi=null;function ns(Ct){var Jt,ne=((Jt=Ct.match(/:not\(([^)]*)\)/))===null||Jt===void 0?void 0:Jt[1])||"",me=ne.split(/(\[[^[]*])|(?=[.#])/).filter(function(Me){return Me});return me.length>1}function Ii(Ct){return Ct.parentSelectors.reduce(function(Jt,ne){return Jt?ne.includes("&")?ne.replace(/&/g,Jt):"".concat(Jt," ").concat(ne):ne},"")}var co=function(Jt,ne,me){var Me=Ii(me),An=Me.match(/:not\([^)]*\)/g)||[];An.length>0&&An.some(ns)&&lintWarning("Concat ':not' selector not support in legacy browsers.",me)},ro=null,ta=function(Jt,ne,me){switch(Jt){case"marginLeft":case"marginRight":case"paddingLeft":case"paddingRight":case"left":case"right":case"borderLeft":case"borderLeftWidth":case"borderLeftStyle":case"borderLeftColor":case"borderRight":case"borderRightWidth":case"borderRightStyle":case"borderRightColor":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":lintWarning("You seem to be using non-logical property '".concat(Jt,"' which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),me);return;case"margin":case"padding":case"borderWidth":case"borderStyle":if(typeof ne=="string"){var Me=ne.split(" ").map(function(Nn){return Nn.trim()});Me.length===4&&Me[1]!==Me[3]&&lintWarning("You seem to be using '".concat(Jt,"' property with different left ").concat(Jt," and right ").concat(Jt,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),me)}return;case"clear":case"textAlign":(ne==="left"||ne==="right")&&lintWarning("You seem to be using non-logical value '".concat(ne,"' of ").concat(Jt,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),me);return;case"borderRadius":if(typeof ne=="string"){var An=ne.split("/").map(function(Nn){return Nn.trim()}),On=An.reduce(function(Nn,$n){if(Nn)return Nn;var er=$n.split(" ").map(function(Cr){return Cr.trim()});return er.length>=2&&er[0]!==er[1]||er.length===3&&er[1]!==er[2]||er.length===4&&er[2]!==er[3]?!0:Nn},!1);On&&lintWarning("You seem to be using non-logical value '".concat(ne,"' of ").concat(Jt,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),me)}return;default:}},zs=null,Za=function(Jt,ne,me){me.parentSelectors.some(function(Me){var An=Me.split(",");return An.some(function(On){return On.split("&").length>2})})&&lintWarning("Should not use more than one `&` in a selector.",me)},bc=null,ws=(0,yn.Z)(),rs="_skip_check_",Wi="_multi_value_";function Xi(Ct){var Jt=Vo(oa(Ct),wa);return Jt.replace(/\{%%%\:[^;];}/g,";")}function Ss(Ct){return(0,Pn.Z)(Ct)==="object"&&Ct&&(rs in Ct||Wi in Ct)}function Do(Ct,Jt,ne){if(!Jt)return Ct;var me=".".concat(Jt),Me=ne==="low"?":where(".concat(me,")"):me,An=Ct.split(",").map(function(On){var Nn,$n=On.trim().split(/\s+/),er=$n[0]||"",Cr=((Nn=er.match(/^\w+/))===null||Nn===void 0?void 0:Nn[0])||"";return er="".concat(Cr).concat(Me).concat(er.slice(Cr.length)),[er].concat((0,ft.Z)($n.slice(1))).join(" ")});return An.join(",")}var uo=function Ct(Jt){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},Me=me.root,An=me.injectHash,On=me.parentSelectors,Nn=ne.hashId,$n=ne.layer,er=ne.path,Cr=ne.hashPriority,mr=ne.transformers,br=mr===void 0?[]:mr,Qr=ne.linters,hi=Qr===void 0?[]:Qr,or="",Ei={};function Zr(ti){var Tr=ti.getName(Nn);if(!Ei[Tr]){var Cs=Ct(ti.style,ne,{root:!1,parentSelectors:On}),io=(0,kt.Z)(Cs,1),$r=io[0];Ei[Tr]="@keyframes ".concat(ti.getName(Nn)).concat($r)}}function ui(ti){var Tr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return ti.forEach(function(Cs){Array.isArray(Cs)?ui(Cs,Tr):Cs&&Tr.push(Cs)}),Tr}var Dr=ui(Array.isArray(Jt)?Jt:[Jt]);if(Dr.forEach(function(ti){var Tr=typeof ti=="string"&&!Me?{}:ti;if(typeof Tr=="string")or+="".concat(Tr,`
`);else if(Tr._keyframe)Zr(Tr);else{var Cs=br.reduce(function(io,$r){var fo;return($r==null||(fo=$r.visit)===null||fo===void 0?void 0:fo.call($r,io))||io},Tr);Object.keys(Cs).forEach(function(io){var $r=Cs[io];if((0,Pn.Z)($r)==="object"&&$r&&(io!=="animationName"||!$r._keyframe)&&!Ss($r)){var fo=!1,Ho=io.trim(),aa=!1;(Me||An)&&Nn?Ho.startsWith("@")?fo=!0:Ho=Do(io,Nn,Cr):Me&&!Nn&&(Ho==="&"||Ho==="")&&(Ho="",aa=!0);var Hr=Ct($r,ne,{root:aa,injectHash:fo,parentSelectors:[].concat((0,ft.Z)(On),[Ho])}),ca=(0,kt.Z)(Hr,2),ho=ca[0],xo=ca[1];Ei=(0,V.Z)((0,V.Z)({},Ei),xo),or+="".concat(Ho).concat(ho)}else{let ea=function(na,as){var qa=na.replace(/[A-Z]/g,function(Ja){return"-".concat(Ja.toLowerCase())}),wi=as;!Ks[na]&&typeof wi=="number"&&wi!==0&&(wi="".concat(wi,"px")),na==="animationName"&&as!==null&&as!==void 0&&as._keyframe&&(Zr(as),wi=as.getName(Nn)),or+="".concat(qa,":").concat(wi,";")};var ss,js=(ss=$r==null?void 0:$r.value)!==null&&ss!==void 0?ss:$r;(0,Pn.Z)($r)==="object"&&$r!==null&&$r!==void 0&&$r[Wi]&&Array.isArray(js)?js.forEach(function(na){ea(io,na)}):ea(io,js)}})}}),!Me)or="{".concat(or,"}");else if($n&&Je()){var _s=$n.split(","),Ci=_s[_s.length-1].trim();or="@layer ".concat(Ci," {").concat(or,"}"),_s.length>1&&(or="@layer ".concat($n,"{%%%:%}").concat(or))}return[or,Ei]};function $a(Ct,Jt){return wt("".concat(Ct.join("%")).concat(Jt))}function Ha(){return null}function $o(Ct,Jt){var ne=Ct.token,me=Ct.path,Me=Ct.hashId,An=Ct.layer,On=Ct.nonce,Nn=Tt.useContext(Qe),$n=Nn.autoClear,er=Nn.mock,Cr=Nn.defaultCache,mr=Nn.hashPriority,br=Nn.container,Qr=Nn.ssrInline,hi=Nn.transformers,or=Nn.linters,Ei=Nn.cache,Zr=ne._tokenKey,ui=[Zr].concat((0,ft.Z)(me)),Dr=ws,_s=Jn("style",ui,function(){var io=Jt(),$r=uo(io,{hashId:Me,hashPriority:mr,layer:An,path:me.join("-"),transformers:hi,linters:or}),fo=(0,kt.Z)($r,2),Ho=fo[0],aa=fo[1],Hr=Xi(Ho),ca=$a(ui,Hr);if(Dr){var ho={mark:ut,prepend:"queue",attachTo:br},xo=typeof On=="function"?On():On;xo&&(ho.csp={nonce:xo});var ss=(0,Ht.hq)(Hr,ca,ho);ss[Gt]=Ei.instanceId,ss.setAttribute(Ut,Zr),Object.keys(aa).forEach(function(js){(0,Ht.hq)(Xi(aa[js]),"_effect-".concat(js),ho)})}return[Hr,Zr,ca]},function(io,$r){var fo=(0,kt.Z)(io,3),Ho=fo[2];($r||$n)&&ws&&(0,Ht.jL)(Ho,{mark:ut})}),Ci=(0,kt.Z)(_s,3),ti=Ci[0],Tr=Ci[1],Cs=Ci[2];return function(io){var $r;if(!Qr||Dr||!Cr)$r=Tt.createElement(Ha,null);else{var fo;$r=Tt.createElement("style",(0,Fi.Z)({},(fo={},(0,gt.Z)(fo,Ut,Tr),(0,gt.Z)(fo,ut,Cs),fo),{dangerouslySetInnerHTML:{__html:ti}}))}return Tt.createElement(Tt.Fragment,null,$r,io)}}function Au(Ct){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ne=Array.from(Ct.cache.keys()).filter(function(Me){return Me.startsWith("style%")}),me="";return ne.forEach(function(Me){var An=_slicedToArray(Ct.cache.get(Me)[1],3),On=An[0],Nn=An[1],$n=An[2];me+=Jt?On:"<style ".concat(ATTR_TOKEN,'="').concat(Nn,'" ').concat(ATTR_MARK,'="').concat($n,'">').concat(On,"</style>")}),me}var Wa=function(){function Ct(Jt,ne){(0,Z.Z)(this,Ct),(0,gt.Z)(this,"name",void 0),(0,gt.Z)(this,"style",void 0),(0,gt.Z)(this,"_keyframe",!0),this.name=Jt,this.style=ne}return(0,ot.Z)(Ct,[{key:"getName",value:function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ne?"".concat(ne,"-").concat(this.name):this.name}}]),Ct}(),xi=Wa;function Uc(Ct,Jt){if(Ct.length!==Jt.length)return!1;for(var ne=0;ne<Ct.length;ne++)if(Ct[ne]!==Jt[ne])return!1;return!0}var Vc=function(){function Ct(){(0,Z.Z)(this,Ct),(0,gt.Z)(this,"cache",void 0),(0,gt.Z)(this,"keys",void 0),(0,gt.Z)(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return(0,ot.Z)(Ct,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(ne){var me,Me,An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,On={map:this.cache};return ne.forEach(function(Nn){if(!On)On=void 0;else{var $n,er;On=($n=On)===null||$n===void 0||(er=$n.map)===null||er===void 0?void 0:er.get(Nn)}}),(me=On)!==null&&me!==void 0&&me.value&&An&&(On.value[1]=this.cacheCallTimes++),(Me=On)===null||Me===void 0?void 0:Me.value}},{key:"get",value:function(ne){var me;return(me=this.internalGet(ne,!0))===null||me===void 0?void 0:me[0]}},{key:"has",value:function(ne){return!!this.internalGet(ne)}},{key:"set",value:function(ne,me){var Me=this;if(!this.has(ne)){if(this.size()+1>Ct.MAX_CACHE_SIZE+Ct.MAX_CACHE_OFFSET){var An=this.keys.reduce(function(er,Cr){var mr=(0,kt.Z)(er,2),br=mr[1];return Me.internalGet(Cr)[1]<br?[Cr,Me.internalGet(Cr)[1]]:er},[this.keys[0],this.cacheCallTimes]),On=(0,kt.Z)(An,1),Nn=On[0];this.delete(Nn)}this.keys.push(ne)}var $n=this.cache;ne.forEach(function(er,Cr){if(Cr===ne.length-1)$n.set(er,{value:[me,Me.cacheCallTimes++]});else{var mr=$n.get(er);mr?mr.map||(mr.map=new Map):$n.set(er,{map:new Map}),$n=$n.get(er).map}})}},{key:"deleteByPath",value:function(ne,me){var Me=ne.get(me[0]);if(me.length===1){var An;return Me.map?ne.set(me[0],{map:Me.map}):ne.delete(me[0]),(An=Me.value)===null||An===void 0?void 0:An[0]}var On=this.deleteByPath(Me.map,me.slice(1));return(!Me.map||Me.map.size===0)&&!Me.value&&ne.delete(me[0]),On}},{key:"delete",value:function(ne){if(this.has(ne))return this.keys=this.keys.filter(function(me){return!Uc(me,ne)}),this.deleteByPath(this.cache,ne)}}]),Ct}();(0,gt.Z)(Vc,"MAX_CACHE_SIZE",20),(0,gt.Z)(Vc,"MAX_CACHE_OFFSET",5);var Ou=0,is=function(){function Ct(Jt){(0,Z.Z)(this,Ct),(0,gt.Z)(this,"derivatives",void 0),(0,gt.Z)(this,"id",void 0),this.derivatives=Array.isArray(Jt)?Jt:[Jt],this.id=Ou,Jt.length===0&&(0,Xr.Kp)(Jt.length>0,"[Ant Design CSS-in-JS] Theme should have at least one derivative function."),Ou+=1}return(0,ot.Z)(Ct,[{key:"getDerivativeToken",value:function(ne){return this.derivatives.reduce(function(me,Me){return Me(ne,me)},void 0)}}]),Ct}(),Zc=new Vc;function Mu(Ct){var Jt=Array.isArray(Ct)?Ct:[Ct];return Zc.has(Jt)||Zc.set(Jt,new is(Jt)),Zc.get(Jt)}function os(Ct){if(typeof Ct=="number")return[[Ct],!1];var Jt=String(Ct).trim(),ne=Jt.match(/(.*)(!important)/),me=(ne?ne[1]:Jt).trim().split(/\s+/),Me="",An=0;return[me.reduce(function(On,Nn){return Nn.includes("(")?(Me+=Nn,An+=Nn.split("(").length-1):Nn.includes(")")?(Me+=Nn,An-=Nn.split(")").length-1,An===0&&(On.push(Me),Me="")):An>0?Me+=Nn:On.push(Nn),On},[]),!!ne]}function lo(Ct){return Ct.notSplit=!0,Ct}var Xa={inset:["top","right","bottom","left"],insetBlock:["top","bottom"],insetBlockStart:["top"],insetBlockEnd:["bottom"],insetInline:["left","right"],insetInlineStart:["left"],insetInlineEnd:["right"],marginBlock:["marginTop","marginBottom"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],marginInline:["marginLeft","marginRight"],marginInlineStart:["marginLeft"],marginInlineEnd:["marginRight"],paddingBlock:["paddingTop","paddingBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"],paddingInline:["paddingLeft","paddingRight"],paddingInlineStart:["paddingLeft"],paddingInlineEnd:["paddingRight"],borderBlock:lo(["borderTop","borderBottom"]),borderBlockStart:lo(["borderTop"]),borderBlockEnd:lo(["borderBottom"]),borderInline:lo(["borderLeft","borderRight"]),borderInlineStart:lo(["borderLeft"]),borderInlineEnd:lo(["borderRight"]),borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndWidth:["borderBottomWidth"],borderInlineWidth:["borderLeftWidth","borderRightWidth"],borderInlineStartWidth:["borderLeftWidth"],borderInlineEndWidth:["borderRightWidth"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderBlockStartStyle:["borderTopStyle"],borderBlockEndStyle:["borderBottomStyle"],borderInlineStyle:["borderLeftStyle","borderRightStyle"],borderInlineStartStyle:["borderLeftStyle"],borderInlineEndStyle:["borderRightStyle"],borderBlockColor:["borderTopColor","borderBottomColor"],borderBlockStartColor:["borderTopColor"],borderBlockEndColor:["borderBottomColor"],borderInlineColor:["borderLeftColor","borderRightColor"],borderInlineStartColor:["borderLeftColor"],borderInlineEndColor:["borderRightColor"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"]};function Ya(Ct,Jt){var ne=Ct;return Jt&&(ne="".concat(ne," !important")),{_skip_check_:!0,value:ne}}var Iu={visit:function(Jt){var ne={};return Object.keys(Jt).forEach(function(me){var Me=Jt[me],An=Xa[me];if(An&&(typeof Me=="number"||typeof Me=="string")){var On=os(Me),Nn=(0,kt.Z)(On,2),$n=Nn[0],er=Nn[1];An.length&&An.notSplit?An.forEach(function(Cr){ne[Cr]=Ya(Me,er)}):An.length===1?ne[An[0]]=Ya(Me,er):An.length===2?An.forEach(function(Cr,mr){var br;ne[Cr]=Ya((br=$n[mr])!==null&&br!==void 0?br:$n[0],er)}):An.length===4?An.forEach(function(Cr,mr){var br,Qr;ne[Cr]=Ya((br=(Qr=$n[mr])!==null&&Qr!==void 0?Qr:$n[mr-2])!==null&&br!==void 0?br:$n[0],er)}):ne[me]=Me}else ne[me]=Me}),ne}},Aa=null,Ka=/url\([^)]+\)|var\([^)]+\)|(\d*\.?\d+)px/g;function $c(Ct,Jt){var ne=Math.pow(10,Jt+1),me=Math.floor(Ct*ne);return Math.round(me/10)*10/ne}var Hc=function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=Jt.rootValue,me=ne===void 0?16:ne,Me=Jt.precision,An=Me===void 0?5:Me,On=Jt.mediaQuery,Nn=On===void 0?!1:On,$n=function(mr,br){if(!br)return mr;var Qr=parseFloat(br);if(Qr<=1)return mr;var hi=$c(Qr/me,An);return"".concat(hi,"rem")},er=function(mr){var br=_objectSpread({},mr);return Object.entries(mr).forEach(function(Qr){var hi=_slicedToArray(Qr,2),or=hi[0],Ei=hi[1];if(typeof Ei=="string"&&Ei.includes("px")){var Zr=Ei.replace(Ka,$n);br[or]=Zr}!unitless[or]&&typeof Ei=="number"&&Ei!==0&&(br[or]="".concat(Ei,"px").replace(Ka,$n));var ui=or.trim();if(ui.startsWith("@")&&ui.includes("px")&&Nn){var Dr=or.replace(Ka,$n);br[Dr]=br[or],delete br[or]}}),br};return{visit:er}},Pu=null},86711:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return kt}});var V=O(185),ft=O(66441),rt=O(45389),wt=O(75188),Tt=O(93236),Zt=O(84875),K=O.n(Zt),Z=O(81548),ot=O(60666),gt=O(96268),$t=O(2557),ht=O(26869);function bt(vt,Qt){(0,$t.ZP)(vt,"[@ant-design/icons] ".concat(Qt))}function Ut(vt){return(0,gt.Z)(vt)==="object"&&typeof vt.name=="string"&&typeof vt.theme=="string"&&((0,gt.Z)(vt.icon)==="object"||typeof vt.icon=="function")}function ut(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(vt).reduce(function(Qt,jt){var Dt=vt[jt];switch(jt){case"class":Qt.className=Dt,delete Qt.class;break;default:Qt[jt]=Dt}return Qt},{})}function Bt(vt,Qt,jt){return jt?Tt.createElement(vt.tag,(0,V.Z)((0,V.Z)({key:Qt},ut(vt.attrs)),jt),(vt.children||[]).map(function(Dt,on){return Bt(Dt,"".concat(Qt,"-").concat(vt.tag,"-").concat(on))})):Tt.createElement(vt.tag,(0,V.Z)({key:Qt},ut(vt.attrs)),(vt.children||[]).map(function(Dt,on){return Bt(Dt,"".concat(Qt,"-").concat(vt.tag,"-").concat(on))}))}function Gt(vt){return(0,Z.R_)(vt)[0]}function fe(vt){return vt?Array.isArray(vt)?vt:[vt]:[]}var ue={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},xe=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Qe=function(){var Qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe,jt=(0,Tt.useContext)(ot.Z),Dt=jt.csp,on=jt.prefixCls,Oe=Qt;on&&(Oe=Oe.replace(/anticon/g,on)),(0,Tt.useEffect)(function(){(0,ht.hq)(Oe,"@ant-design-icons",{prepend:!0,csp:Dt})},[])},Pn=["icon","className","onClick","style","primaryColor","secondaryColor"],yn={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Ht(vt){var Qt=vt.primaryColor,jt=vt.secondaryColor;yn.primaryColor=Qt,yn.secondaryColor=jt||Gt(Qt),yn.calculated=!!jt}function Yn(){return(0,V.Z)({},yn)}var Hn=function(Qt){var jt=Qt.icon,Dt=Qt.className,on=Qt.onClick,Oe=Qt.style,Jn=Qt.primaryColor,Cn=Qt.secondaryColor,Tn=(0,wt.Z)(Qt,Pn),zn=yn;if(Jn&&(zn={primaryColor:Jn,secondaryColor:Cn||Gt(Jn)}),Qe(),bt(Ut(jt),"icon should be icon definiton, but got ".concat(jt)),!Ut(jt))return null;var Rn=jt;return Rn&&typeof Rn.icon=="function"&&(Rn=(0,V.Z)((0,V.Z)({},Rn),{},{icon:Rn.icon(zn.primaryColor,zn.secondaryColor)})),Bt(Rn.icon,"svg-".concat(Rn.name),(0,V.Z)({className:Dt,onClick:on,style:Oe,"data-icon":Rn.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Tn))};Hn.displayName="IconReact",Hn.getTwoToneColors=Yn,Hn.setTwoToneColors=Ht;var _r=Hn;function rn(vt){var Qt=fe(vt),jt=(0,ft.Z)(Qt,2),Dt=jt[0],on=jt[1];return _r.setTwoToneColors({primaryColor:Dt,secondaryColor:on})}function lr(){var vt=_r.getTwoToneColors();return vt.calculated?[vt.primaryColor,vt.secondaryColor]:vt.primaryColor}var bn=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];rn(Z.iN.primary);var Je=Tt.forwardRef(function(vt,Qt){var jt,Dt=vt.className,on=vt.icon,Oe=vt.spin,Jn=vt.rotate,Cn=vt.tabIndex,Tn=vt.onClick,zn=vt.twoToneColor,Rn=(0,wt.Z)(vt,bn),si=Tt.useContext(ot.Z),Kr=si.prefixCls,qr=Kr===void 0?"anticon":Kr,Fi=si.rootClassName,to=K()(Fi,qr,(jt={},(0,rt.Z)(jt,"".concat(qr,"-").concat(on.name),!!on.name),(0,rt.Z)(jt,"".concat(qr,"-spin"),!!Oe||on.name==="loading"),jt),Dt),Ks=Cn;Ks===void 0&&Tn&&(Ks=-1);var ps=Jn?{msTransform:"rotate(".concat(Jn,"deg)"),transform:"rotate(".concat(Jn,"deg)")}:void 0,Oi=fe(zn),Ls=(0,ft.Z)(Oi,2),jo=Ls[0],ba=Ls[1];return Tt.createElement("span",(0,V.Z)((0,V.Z)({role:"img","aria-label":on.name},Rn),{},{ref:Qt,tabIndex:Ks,onClick:Tn,className:to}),Tt.createElement(_r,{icon:on,primaryColor:jo,secondaryColor:ba,style:ps}))});Je.displayName="AntdIcon",Je.getTwoToneColor=lr,Je.setTwoToneColor=rn;var kt=Je},60666:function(At,yt,O){"use strict";var V=O(93236),ft=(0,V.createContext)({});yt.Z=ft},46269:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return K}});var V=O(185),ft=O(93236),rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},wt=rt,Tt=O(86711),Zt=function(ot,gt){return ft.createElement(Tt.Z,(0,V.Z)((0,V.Z)({},ot),{},{ref:gt,icon:wt}))},K=ft.forwardRef(Zt)},41:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return K}});var V=O(185),ft=O(93236),rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},wt=rt,Tt=O(86711),Zt=function(ot,gt){return ft.createElement(Tt.Z,(0,V.Z)((0,V.Z)({},ot),{},{ref:gt,icon:wt}))},K=ft.forwardRef(Zt)},57233:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return K}});var V=O(185),ft=O(93236),rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},wt=rt,Tt=O(86711),Zt=function(ot,gt){return ft.createElement(Tt.Z,(0,V.Z)((0,V.Z)({},ot),{},{ref:gt,icon:wt}))},K=ft.forwardRef(Zt)},40591:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return K}});var V=O(185),ft=O(93236),rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},wt=rt,Tt=O(86711),Zt=function(ot,gt){return ft.createElement(Tt.Z,(0,V.Z)((0,V.Z)({},ot),{},{ref:gt,icon:wt}))},K=ft.forwardRef(Zt)},38623:function(At,yt,O){"use strict";O.d(yt,{SB:function(){return zs},Vq:function(){return Hl},Me:function(){return Qt}});var V={};O.r(V),O.d(V,{components:function(){return br},dfs:function(){return or},dijkstra:function(){return io},dijkstraAll:function(){return fo},findCycles:function(){return ca},floydWarshall:function(){return El},isAcyclic:function(){return Lu},postorder:function(){return ua},preorder:function(){return bl},prim:function(){return Cr},tarjan:function(){return aa},topsort:function(){return xc}});const ft=n=>typeof n=="string",rt=n=>{const i=Object.create(null);return o=>i[o]||(i[o]=n(o))},wt=/-(\w)/g,Tt=rt(n=>n.replace(wt,(i,o)=>o?o.toUpperCase():"")),Zt=Array.isArray,K=n=>typeof n=="number",Z=n=>Number.isNaN(Number(n)),ot=n=>{const i=parseFloat(n);return Z(i)?n:i},gt=n=>n!==null&&typeof n=="object",$t=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const i=[];return n.forEach(o=>{i.push(o)}),i.map(o=>$t(o))}if(typeof n=="object"&&Object.keys(n).length){const i=Object.assign({},n);return Object.keys(i).forEach(o=>{i[o]=$t(i[o])}),i}return n},ht=(n,i)=>{const o=n[i];return gt(o)?o.cell:o},bt=(n,i,o)=>{const s=[];for(let c=0;c<n;c++)s[c]={in:0,out:0,all:0};return o&&o.forEach(c=>{const l=ht(c,"source"),d=ht(c,"target");l&&s[i[l]]&&(s[i[l]].out+=1,s[i[l]].all+=1),d&&s[i[d]]&&(s[i[d]].in+=1,s[i[d]].all+=1)}),s},Ut=(n,i)=>{const o={};return n.forEach(s=>{o[s.id]={in:0,out:0,all:0}}),i&&i.forEach(s=>{const c=ht(s,"source"),l=ht(s,"target");c&&(o[c].out+=1,o[c].all+=1),l&&(o[l].in+=1,o[l].all+=1)}),o},ut=n=>{const i=[],o=n.length;for(let s=0;s<o;s+=1){i[s]=[];for(let c=0;c<o;c+=1)s===c?i[s][c]=0:n[s][c]===0||!n[s][c]?i[s][c]=1/0:i[s][c]=n[s][c]}for(let s=0;s<o;s+=1)for(let c=0;c<o;c+=1)for(let l=0;l<o;l+=1)i[c][l]>i[c][s]+i[s][l]&&(i[c][l]=i[c][s]+i[s][l]);return i},Bt=(n,i)=>{const{nodes:o,edges:s}=n,c=[],l={};if(!o)throw new Error("invalid nodes data!");return o&&o.forEach((d,p)=>{l[d.id]=p;const v=[];c.push(v)}),s==null||s.forEach(d=>{const p=ht(d,"source"),v=ht(d,"target"),y=l[p],x=l[v];y===void 0||x===void 0||(c[y][x]=1,i||(c[x][y]=1))}),c},Gt=(n,i)=>{const o=[];return n.forEach(s=>{const c=[];s.forEach(l=>{c.push(l*i)}),o.push(c)}),o},fe=(n,i)=>{if(n&&n.children){for(let o=n.children.length-1;o>=0;o--)if(!fe(n.children[o],i))return}return!!i(n)},ue=(n,i)=>{typeof i=="function"&&fe(n,i)},xe=n=>{let i=1/0,o=1/0,s=-1/0,c=-1/0;return n.forEach(l=>{let d=l.size;Zt(d)?d.length===1&&(d=[d[0],d[0]]):K(d)?d=[d,d]:(d===void 0||isNaN(d))&&(d=[30,30]);const p=[d[0]/2,d[1]/2],v=l.x-p[0],y=l.x+p[0],x=l.y-p[1],E=l.y+p[1];i>v&&(i=v),o>x&&(o=x),s<y&&(s=y),c<E&&(c=E)}),{minX:i,minY:o,maxX:s,maxY:c}},Qe=n=>{const i={x:0,y:0};n.forEach(s=>{i.x+=s.x||0,i.y+=s.y||0});const o=n.length||1;return{x:i.x/o,y:i.y/o}},Pn=(n,i,o)=>{var s,c;return n==="source"?((s=o==null?void 0:o.find(l=>l.target===i.id))===null||s===void 0?void 0:s.source)||{}:((c=o==null?void 0:o.find(l=>l.source===i.id))===null||c===void 0?void 0:c.target)||{}},yn=(n,i,o)=>{let s=[];switch(n){case"source":s=o==null?void 0:o.filter(l=>l.source===i.id).map(l=>l.target);break;case"target":s=o==null?void 0:o.filter(l=>l.target===i.id).map(l=>l.source);break;case"both":s=o==null?void 0:o.filter(l=>l.source===i.id).map(l=>l.target).concat(o==null?void 0:o.filter(l=>l.target===i.id).map(l=>l.source));break;default:break}const c=new Set(s);return Array.from(c)},Ht=(n,i,o,s,c)=>{const l=o[i]||"";let d=(s==null?void 0:s.filter(p=>p[i]===l))||[];return n==="leaf"&&(d=d.filter(p=>{var v,y;return((v=c[p.id])===null||v===void 0?void 0:v.in)===0||((y=c[p.id])===null||y===void 0?void 0:y.out)===0})),d},Yn=(n,i,o,s,c,l)=>{const{in:d,out:p}=c[i.id];let v=i,y=[];d===0?(v=Pn("source",i,o),y=yn("both",v,o).map(E=>l[E])):p===0&&(v=Pn("target",i,o),y=yn("both",v,o).map(E=>l[E])),y=y.filter(E=>c[E.id]&&(c[E.id].in===0||c[E.id].out===0));const x=Ht(n,s,i,y,c);return{coreNode:v,relativeLeafNodes:y,sameTypeLeafNodes:x}},Hn=n=>typeof n=="function",_r=(n,i,o)=>{let s;return o?s=o:K(n)?s=()=>n:s=()=>i,s},rn=(n,i,o=!0)=>!i&&i!==0?s=>s.size?Zt(s.size)?s.size[0]>s.size[1]?s.size[0]:s.size[1]:gt(s.size)?s.size.width>s.size.height?s.size.width:s.size.height:s.size:n:Hn(i)?i:K(i)?()=>i:Zt(i)?()=>{if(o){const s=Math.max(...i);return isNaN(s)?n:s}return i}:gt(i)?()=>{if(o){const s=Math.max(i.width,i.height);return isNaN(s)?n:s}return[i.width,i.height]}:()=>n,lr=new Map,bn=(n,i)=>{if(lr.get(n)&&console.warn(`The layout with the name ${n} exists already, it will be overridden`),isObject(i)){class o extends Base{constructor(c){var l;super();const d=this,p={},v=Object.assign({},d.getDefaultCfg(),((l=i.getDefaultCfg)===null||l===void 0?void 0:l.call(i))||{});Object.assign(p,v,i,c),Object.keys(p).forEach(y=>{const x=p[y];d[y]=x})}}lr.set(n,o)}else lr.set(n,i);return lr.get(n)},Je=n=>{lr.has(n)&&lr.delete(n)},kt=n=>lr.has(n)?lr.get(n):null;class vt{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(i){return this.init(i),this.execute(!0)}init(i){this.nodes=i.nodes||[],this.edges=i.edges||[],this.combos=i.combos||[],this.comboEdges=i.comboEdges||[],this.hiddenNodes=i.hiddenNodes||[],this.hiddenEdges=i.hiddenEdges||[],this.hiddenCombos=i.hiddenCombos||[],this.vedges=i.vedges||[]}execute(i){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(i){i&&Object.assign(this,i)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class Qt extends vt{constructor(i){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(i)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const i=this,{nodes:o,edges:s,begin:c}=i,l=o.length;if(l===0)return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:s};if(l===1)return o[0].x=c[0],o[0].y=c[1],i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:s};let{sortBy:d,width:p,height:v}=i;const{condense:y,preventOverlapPadding:x,preventOverlap:E,nodeSpacing:_,nodeSize:T}=i,M=[];o.forEach(L=>{M.push(L)});const R={};if(M.forEach((L,U)=>{R[L.id]=U}),(d==="degree"||!ft(d)||M[0][d]===void 0)&&(d="degree",Z(o[0].degree))){const L=bt(M.length,R,s);M.forEach((U,W)=>{U.degree=L[W].all})}M.sort((L,U)=>U[d]-L[d]),!p&&typeof window!="undefined"&&(p=window.innerWidth),!v&&typeof window!="undefined"&&(v=window.innerHeight);const D=i.rows,k=i.cols!=null?i.cols:i.columns;if(i.cells=l,D!=null&&k!=null?(i.rows=D,i.cols=k):D!=null&&k==null?(i.rows=D,i.cols=Math.ceil(i.cells/i.rows)):D==null&&k!=null?(i.cols=k,i.rows=Math.ceil(i.cells/i.cols)):(i.splits=Math.sqrt(i.cells*i.height/i.width),i.rows=Math.round(i.splits),i.cols=Math.round(i.width/i.height*i.splits)),i.rows=Math.max(i.rows,1),i.cols=Math.max(i.cols,1),i.cols*i.rows>i.cells){const L=i.small(),U=i.large();(L-1)*U>=i.cells?i.small(L-1):(U-1)*L>=i.cells&&i.large(U-1)}else for(;i.cols*i.rows<i.cells;){const L=i.small(),U=i.large();(U+1)*L>=i.cells?i.large(U+1):i.small(L+1)}if(i.cellWidth=p/i.cols,i.cellHeight=v/i.rows,y&&(i.cellWidth=0,i.cellHeight=0),E||_){const L=rn(10,_),U=rn(30,T,!1);M.forEach(W=>{(!W.x||!W.y)&&(W.x=0,W.y=0);const J=U(W)||30;let zt,Ae;Zt(J)?(zt=J[0],Ae=J[1]):(zt=J,Ae=J);const qt=L!==void 0?L(W):x,le=zt+qt,ce=Ae+qt;i.cellWidth=Math.max(i.cellWidth,le),i.cellHeight=Math.max(i.cellHeight,ce)})}i.cellUsed={},i.row=0,i.col=0,i.id2manPos={};for(let L=0;L<M.length;L++){const U=M[L];let W;if(i.position&&(W=i.position(U)),W&&(W.row!==void 0||W.col!==void 0)){const J={row:W.row,col:W.col};if(J.col===void 0)for(J.col=0;i.used(J.row,J.col);)J.col++;else if(J.row===void 0)for(J.row=0;i.used(J.row,J.col);)J.row++;i.id2manPos[U.id]=J,i.use(J.row,J.col)}i.getPos(U)}return i.onLayoutEnd&&i.onLayoutEnd(),{edges:s,nodes:M}}small(i){const o=this;let s;const c=o.rows||5,l=o.cols||5;return i==null?s=Math.min(c,l):Math.min(c,l)===o.rows?o.rows=i:o.cols=i,s}large(i){const o=this;let s;const c=o.rows||5,l=o.cols||5;return i==null?s=Math.max(c,l):Math.max(c,l)===o.rows?o.rows=i:o.cols=i,s}used(i,o){return this.cellUsed[`c-${i}-${o}`]||!1}use(i,o){const s=this;s.cellUsed[`c-${i}-${o}`]=!0}moveToNextCell(){const i=this,o=i.cols||5;i.col++,i.col>=o&&(i.col=0,i.row++)}getPos(i){const o=this,{begin:s,cellWidth:c,cellHeight:l}=o;let d,p;const v=o.id2manPos[i.id];if(v)d=v.col*c+c/2+s[0],p=v.row*l+l/2+s[1];else{for(;o.used(o.row,o.col);)o.moveToNextCell();d=o.col*c+c/2+s[0],p=o.row*l+l/2+s[1],o.use(o.row,o.col),o.moveToNextCell()}i.x=d,i.y=p}getType(){return"grid"}}const jt=(n,i)=>{let o;return n?K(n)?o=s=>n:o=n:o=s=>i||1,o};class Dt extends vt{constructor(i){super(),this.maxIteration=500,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.collideStrength=1,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.animate=!0,this.updateCfg(i)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){var i,o;const s=this,c=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!c||c.length===0){(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const l=s.center;if(c.length===1){c[0].x=l[0],c[0].y=l[1],(o=s.onLayoutEnd)===null||o===void 0||o.call(s);return}const d={},p={};c.forEach((E,_)=>{K(E.x)||(E.x=Math.random()*s.width),K(E.y)||(E.y=Math.random()*s.height),d[E.id]=E,p[E.id]=_}),s.nodeMap=d,s.nodeIdxMap=p,s.linkDistance=jt(s.linkDistance,1),s.nodeStrength=jt(s.nodeStrength,1),s.edgeStrength=jt(s.edgeStrength,1);const v=s.nodeSize;let y;if(s.preventOverlap){const E=s.nodeSpacing;let _;K(E)?_=()=>E:Hn(E)?_=E:_=()=>0,v?Zt(v)?y=T=>Math.max(v[0],v[1])+_(T):y=T=>v+_(T):y=T=>T.size?Zt(T.size)?Math.max(T.size[0],T.size[1])+_(T):gt(T.size)?Math.max(T.size.width,T.size.height)+_(T):T.size+_(T):10+_(T)}s.nodeSize=y;const x=s.edges;s.degrees=bt(c.length,s.nodeIdxMap,x),s.getMass||(s.getMass=E=>E.mass||s.degrees[s.nodeIdxMap[E.id]].all||1),s.run()}run(){var i;const o=this,{maxIteration:s,nodes:c,workerEnabled:l,minMovement:d,animate:p}=o;if(c)if(l||!p){for(let v=0;v<s;v++){const y=o.runOneStep(v);if(o.reachMoveThreshold(c,y,d))break}(i=o.onLayoutEnd)===null||i===void 0||i.call(o)}else{if(typeof window=="undefined")return;let v=0;this.timeInterval=window.setInterval(()=>{var y,x;if(!c)return;const E=o.runOneStep(v)||[];o.reachMoveThreshold(c,E,d)&&((y=o.onLayoutEnd)===null||y===void 0||y.call(o),window.clearInterval(o.timeInterval)),v++,v>=s&&((x=o.onLayoutEnd)===null||x===void 0||x.call(o),window.clearInterval(o.timeInterval))},0)}}reachMoveThreshold(i,o,s){let c=0;return i.forEach((l,d)=>{const p=l.x-o[d].x,v=l.y-o[d].y;c+=Math.sqrt(p*p+v*v)}),c/=i.length,c<s}runOneStep(i){var o;const s=this,{nodes:c,edges:l}=s,d=[],p=[];if(!c)return;c.forEach((x,E)=>{d[2*E]=0,d[2*E+1]=0,p[2*E]=0,p[2*E+1]=0}),s.calRepulsive(d,c),l&&s.calAttractive(d,l),s.calGravity(d,c);const v=Math.max(.02,s.interval-i*.002);s.updateVelocity(d,p,v,c);const y=[];return c.forEach(x=>{y.push({x:x.x,y:x.y})}),s.updatePosition(p,v,c),(o=s.tick)===null||o===void 0||o.call(s),y}calRepulsive(i,o){const s=this,{getMass:c,factor:l,coulombDisScale:d,preventOverlap:p,collideStrength:v=1}=s,y=s.nodeStrength,x=s.nodeSize;o.forEach((E,_)=>{const T=c?c(E):1;o.forEach((M,R)=>{if(_>=R)return;let D=E.x-M.x,k=E.y-M.y;D===0&&k===0&&(D=Math.random()*.01,k=Math.random()*.01);const L=D*D+k*k,U=Math.sqrt(L),W=(U+.1)*d,J=D/U,zt=k/U,Ae=(y(E)+y(M))*.5*l/(W*W),qt=c?c(M):1;if(i[2*_]+=J*Ae,i[2*_+1]+=zt*Ae,i[2*R]-=J*Ae,i[2*R+1]-=zt*Ae,p&&(x(E)+x(M))/2>U){const le=v*(y(E)+y(M))*.5/L;i[2*_]+=J*le/T,i[2*_+1]+=zt*le/T,i[2*R]-=J*le/qt,i[2*R+1]-=zt*le/qt}})})}calAttractive(i,o){const s=this,{nodeMap:c,nodeIdxMap:l,linkDistance:d,edgeStrength:p}=s,v=s.nodeSize,y=s.getMass;o.forEach((x,E)=>{const _=ht(x,"source"),T=ht(x,"target"),M=c[_],R=c[T];let D=R.x-M.x,k=R.y-M.y;D===0&&k===0&&(D=Math.random()*.01,k=Math.random()*.01);const L=Math.sqrt(D*D+k*k),U=D/L,W=k/L,Ae=((d(x,M,R)||1+(v(M)+v(R)||0)/2)-L)*p(x),qt=l[_],le=l[T],ce=y?y(M):1,Ne=y?y(R):1;i[2*qt]-=U*Ae/ce,i[2*qt+1]-=W*Ae/ce,i[2*le]+=U*Ae/Ne,i[2*le+1]+=W*Ae/Ne})}calGravity(i,o){const s=this,c=s.center,l=s.gravity,d=s.degrees,p=o.length;for(let v=0;v<p;v++){const y=o[v];let x=y.x-c[0],E=y.y-c[1],_=l;if(s.getCenter){const T=s.getCenter(y,d[v].all);T&&K(T[0])&&K(T[1])&&K(T[2])&&(x=y.x-T[0],E=y.y-T[1],_=T[2])}_&&(i[2*v]-=_*x,i[2*v+1]-=_*E)}}updateVelocity(i,o,s,c){const l=this,d=s*l.damping;c.forEach((p,v)=>{let y=i[2*v]*d||.01,x=i[2*v+1]*d||.01;const E=Math.sqrt(y*y+x*x);if(E>l.maxSpeed){const _=l.maxSpeed/E;y=_*y,x=_*x}o[2*v]=y,o[2*v+1]=x})}updatePosition(i,o,s){s.forEach((c,l)=>{if(K(c.fx)&&K(c.fy)){c.x=c.fx,c.y=c.fy;return}const d=i[2*l]*o,p=i[2*l+1]*o;c.x+=d,c.y+=p})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const i=this;i.stop(),i.tick=null,i.nodes=null,i.edges=null,i.destroyed=!0}getType(){return"gForce"}}function on(n){const i=+this._x.call(null,n),o=+this._y.call(null,n);return Oe(this.cover(i,o),i,o,n)}function Oe(n,i,o,s){if(isNaN(i)||isNaN(o))return n;var c,l=n._root,d={data:s},p=n._x0,v=n._y0,y=n._x1,x=n._y1,E,_,T,M,R,D,k,L;if(!l)return n._root=d,n;for(;l.length;)if((R=i>=(E=(p+y)/2))?p=E:y=E,(D=o>=(_=(v+x)/2))?v=_:x=_,c=l,!(l=l[k=D<<1|R]))return c[k]=d,n;if(T=+n._x.call(null,l.data),M=+n._y.call(null,l.data),i===T&&o===M)return d.next=l,c?c[k]=d:n._root=d,n;do c=c?c[k]=new Array(4):n._root=new Array(4),(R=i>=(E=(p+y)/2))?p=E:y=E,(D=o>=(_=(v+x)/2))?v=_:x=_;while((k=D<<1|R)===(L=(M>=_)<<1|T>=E));return c[L]=l,c[k]=d,n}function Jn(n){var i,o,s=n.length,c,l,d=new Array(s),p=new Array(s),v=1/0,y=1/0,x=-1/0,E=-1/0;for(o=0;o<s;++o)isNaN(c=+this._x.call(null,i=n[o]))||isNaN(l=+this._y.call(null,i))||(d[o]=c,p[o]=l,c<v&&(v=c),c>x&&(x=c),l<y&&(y=l),l>E&&(E=l));if(v>x||y>E)return this;for(this.cover(v,y).cover(x,E),o=0;o<s;++o)Oe(this,d[o],p[o],n[o]);return this}function Cn(n,i){if(isNaN(n=+n)||isNaN(i=+i))return this;var o=this._x0,s=this._y0,c=this._x1,l=this._y1;if(isNaN(o))c=(o=Math.floor(n))+1,l=(s=Math.floor(i))+1;else{for(var d=c-o||1,p=this._root,v,y;o>n||n>=c||s>i||i>=l;)switch(y=(i<s)<<1|n<o,v=new Array(4),v[y]=p,p=v,d*=2,y){case 0:c=o+d,l=s+d;break;case 1:o=c-d,l=s+d;break;case 2:c=o+d,s=l-d;break;case 3:o=c-d,s=l-d;break}this._root&&this._root.length&&(this._root=p)}return this._x0=o,this._y0=s,this._x1=c,this._y1=l,this}function Tn(){var n=[];return this.visit(function(i){if(!i.length)do n.push(i.data);while(i=i.next)}),n}function zn(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Rn(n,i,o,s,c){this.node=n,this.x0=i,this.y0=o,this.x1=s,this.y1=c}function si(n,i,o){var s,c=this._x0,l=this._y0,d,p,v,y,x=this._x1,E=this._y1,_=[],T=this._root,M,R;for(T&&_.push(new Rn(T,c,l,x,E)),o==null?o=1/0:(c=n-o,l=i-o,x=n+o,E=i+o,o*=o);M=_.pop();)if(!(!(T=M.node)||(d=M.x0)>x||(p=M.y0)>E||(v=M.x1)<c||(y=M.y1)<l))if(T.length){var D=(d+v)/2,k=(p+y)/2;_.push(new Rn(T[3],D,k,v,y),new Rn(T[2],d,k,D,y),new Rn(T[1],D,p,v,k),new Rn(T[0],d,p,D,k)),(R=(i>=k)<<1|n>=D)&&(M=_[_.length-1],_[_.length-1]=_[_.length-1-R],_[_.length-1-R]=M)}else{var L=n-+this._x.call(null,T.data),U=i-+this._y.call(null,T.data),W=L*L+U*U;if(W<o){var J=Math.sqrt(o=W);c=n-J,l=i-J,x=n+J,E=i+J,s=T.data}}return s}function Kr(n){if(isNaN(x=+this._x.call(null,n))||isNaN(E=+this._y.call(null,n)))return this;var i,o=this._root,s,c,l,d=this._x0,p=this._y0,v=this._x1,y=this._y1,x,E,_,T,M,R,D,k;if(!o)return this;if(o.length)for(;;){if((M=x>=(_=(d+v)/2))?d=_:v=_,(R=E>=(T=(p+y)/2))?p=T:y=T,i=o,!(o=o[D=R<<1|M]))return this;if(!o.length)break;(i[D+1&3]||i[D+2&3]||i[D+3&3])&&(s=i,k=D)}for(;o.data!==n;)if(c=o,!(o=o.next))return this;return(l=o.next)&&delete o.next,c?(l?c.next=l:delete c.next,this):i?(l?i[D]=l:delete i[D],(o=i[0]||i[1]||i[2]||i[3])&&o===(i[3]||i[2]||i[1]||i[0])&&!o.length&&(s?s[k]=o:this._root=o),this):(this._root=l,this)}function qr(n){for(var i=0,o=n.length;i<o;++i)this.remove(n[i]);return this}function Fi(){return this._root}function to(){var n=0;return this.visit(function(i){if(!i.length)do++n;while(i=i.next)}),n}function Ks(n){var i=[],o,s=this._root,c,l,d,p,v;for(s&&i.push(new Rn(s,this._x0,this._y0,this._x1,this._y1));o=i.pop();)if(!n(s=o.node,l=o.x0,d=o.y0,p=o.x1,v=o.y1)&&s.length){var y=(l+p)/2,x=(d+v)/2;(c=s[3])&&i.push(new Rn(c,y,x,p,v)),(c=s[2])&&i.push(new Rn(c,l,x,y,v)),(c=s[1])&&i.push(new Rn(c,y,d,p,x)),(c=s[0])&&i.push(new Rn(c,l,d,y,x))}return this}function ps(n){var i=[],o=[],s;for(this._root&&i.push(new Rn(this._root,this._x0,this._y0,this._x1,this._y1));s=i.pop();){var c=s.node;if(c.length){var l,d=s.x0,p=s.y0,v=s.x1,y=s.y1,x=(d+v)/2,E=(p+y)/2;(l=c[0])&&i.push(new Rn(l,d,p,x,E)),(l=c[1])&&i.push(new Rn(l,x,p,v,E)),(l=c[2])&&i.push(new Rn(l,d,E,x,y)),(l=c[3])&&i.push(new Rn(l,x,E,v,y))}o.push(s)}for(;s=o.pop();)n(s.node,s.x0,s.y0,s.x1,s.y1);return this}function Oi(n){return n[0]}function Ls(n){return arguments.length?(this._x=n,this):this._x}function jo(n){return n[1]}function ba(n){return arguments.length?(this._y=n,this):this._y}function ks(n,i,o){var s=new Q(i==null?Oi:i,o==null?jo:o,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function Q(n,i,o,s,c,l){this._x=n,this._y=i,this._x0=o,this._y0=s,this._x1=c,this._y1=l,this._root=void 0}function kc(n){for(var i={data:n.data},o=i;n=n.next;)o=o.next={data:n.data};return i}var Bi=ks.prototype=Q.prototype;Bi.copy=function(){var n=new Q(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root,o,s;if(!i)return n;if(!i.length)return n._root=kc(i),n;for(o=[{source:i,target:n._root=new Array(4)}];i=o.pop();)for(var c=0;c<4;++c)(s=i.source[c])&&(s.length?o.push({source:s,target:i.target[c]=new Array(4)}):i.target[c]=kc(s));return n},Bi.add=on,Bi.addAll=Jn,Bi.cover=Cn,Bi.data=Tn,Bi.extent=zn,Bi.find=si,Bi.remove=Kr,Bi.removeAll=qr,Bi.root=Fi,Bi.size=to,Bi.visit=Ks,Bi.visitAfter=ps,Bi.x=Ls,Bi.y=ba;const yo=.81,Fc=.1;function ii(n,i,o,s,c){const l=o/s,d=n.map((v,y)=>{const x=i[v.id],{data:E,x:_,y:T,size:M}=x,{nodeStrength:R}=E.layout.force;return{x:_,y:T,size:M,index:y,vx:0,vy:0,weight:l*R}}),p=ks(d,v=>v.x,v=>v.y).visitAfter(Bc);return d.forEach(v=>{za(v,p)}),d.map((v,y)=>{const x=i[n[y].id],{mass:E=1}=x.data.layout.force;c[2*y]=v.vx/E,c[2*y+1]=v.vy/E}),c}function Bc(n){let i=0,o=0,s=0;if(n.length){for(let c=0;c<4;c++){const l=n[c];l&&l.weight&&(i+=l.weight,o+=l.x*l.weight,s+=l.y*l.weight)}n.x=o/i,n.y=s/i,n.weight=i}else{const c=n;n.x=c.data.x,n.y=c.data.y,n.weight=c.data.weight}}const vs=(n,i,o,s,c,l)=>{const d=l.x-n.x||Fc,p=l.y-n.y||Fc,v=s-i,y=d*d+p*p,x=Math.sqrt(y)*y;if(v*v*yo<y){const E=n.weight/x;return l.vx+=d*E,l.vy+=p*E,!0}if(n.length)return!1;if(n.data!==l){const E=n.data.weight/x;l.vx+=d*E,l.vy+=p*E}};function za(n,i){i.visit((o,s,c,l,d)=>vs(o,s,c,l,d,n))}const ja=(n,i)=>{let o;return n?K(n)?o=s=>n:o=n:o=s=>i||1,o};class Tu extends vt{constructor(i){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=500,this.minMovement=.4,this.interval=.02,this.factor=1,this.linkDistance=200,this.gravity=0,this.clusterNodeStrength=20,this.preventOverlap=!0,this.distanceThresholdMode="mean",this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.judgingDistance=0,this.centripetalOptions={leaf:2,single:2,others:1,center:s=>({x:this.width/2,y:this.height/2})};const{getMass:o}=i;this.propsGetMass=o,this.updateCfg(i)}getCentripetalOptions(){const{leafCluster:i,clustering:o,nodeClusterBy:s,nodes:c,nodeMap:l,clusterNodeStrength:d}=this,p=T=>typeof d=="function"?d(T):d;let v={},y;if(i){y=this.getSameTypeLeafMap()||{};const T=Array.from(new Set(c==null?void 0:c.map(M=>M[s])))||[];v={single:100,leaf:(M,R,D)=>{const{relativeLeafNodes:k,sameTypeLeafNodes:L}=y[M.id]||{};return(L==null?void 0:L.length)===(k==null?void 0:k.length)||(T==null?void 0:T.length)===1?1:p(M)},others:1,center:(M,R,D)=>{var k;const{degree:L}=((k=M.data)===null||k===void 0?void 0:k.layout)||{};if(!L)return{x:100,y:100};let U;if(L===1){const{sameTypeLeafNodes:W=[]}=y[M.id]||{};W.length===1?U=void 0:W.length>1&&(U=Qe(W))}else U=void 0;return{x:U==null?void 0:U.x,y:U==null?void 0:U.y}}}}if(o){y||(y=this.getSameTypeLeafMap());const T=Array.from(new Set(c.map((R,D)=>R[s]))).filter(R=>R!==void 0),M={};T.forEach(R=>{const D=c.filter(k=>k[s]===R).map(k=>l[k.id]);M[R]=Qe(D)}),v={single:R=>p(R),leaf:R=>p(R),others:R=>p(R),center:(R,D,k)=>{const L=M[R[s]];return{x:L==null?void 0:L.x,y:L==null?void 0:L.y}}}}this.centripetalOptions=Object.assign(Object.assign({},this.centripetalOptions),v);const{leaf:x,single:E,others:_}=this.centripetalOptions;x&&typeof x!="function"&&(this.centripetalOptions.leaf=()=>x),E&&typeof E!="function"&&(this.centripetalOptions.single=()=>E),_&&typeof _!="function"&&(this.centripetalOptions.others=()=>_)}updateCfg(i){i&&Object.assign(this,i)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){const i=this;i.stop();const{nodes:o,edges:s,defSpringLen:c}=i;if(i.judgingDistance=0,!o||o.length===0){i.onLayoutEnd([]);return}!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);const l=i.center;if(o.length===1){o[0].x=l[0],o[0].y=l[1],i.onLayoutEnd([Object.assign({},o[0])]);return}i.degreesMap=Ut(o,s),i.propsGetMass?i.getMass=i.propsGetMass:i.getMass=x=>{let E=1;K(x.mass)&&(E=x.mass);const _=i.degreesMap[x.id].all;return!_||_<5?E:_*5*E};const d=i.nodeSize;let p;if(i.preventOverlap){const x=i.nodeSpacing;let E;K(x)?E=()=>x:Hn(x)?E=x:E=()=>0,d?Zt(d)?p=_=>Math.max(d[0],d[1])+E(_):p=_=>d+E(_):p=_=>_.size?Zt(_.size)?Math.max(_.size[0],_.size[1])+E(_):gt(_.size)?Math.max(_.size.width,_.size.height)+E(_):_.size+E(_):10+E(_)}i.nodeSize=p,i.linkDistance=ja(i.linkDistance,1),i.nodeStrength=ja(i.nodeStrength,1),i.edgeStrength=ja(i.edgeStrength,1);const v={},y={};o.forEach((x,E)=>{K(x.x)||(x.x=Math.random()*i.width),K(x.y)||(x.y=Math.random()*i.height);const _=i.degreesMap[x.id];v[x.id]=Object.assign(Object.assign({},x),{data:Object.assign(Object.assign({},x.data),{size:i.nodeSize(x)||30,layout:{inDegree:_.in,outDegree:_.out,degree:_.all,tDegree:_.in,sDegree:_.out,force:{mass:i.getMass(x),nodeStrength:i.nodeStrength(x,s)}}})}),y[x.id]=E}),i.nodeMap=v,i.nodeIdxMap=y,i.edgeInfos=[],s==null||s.forEach(x=>{const E=v[x.source],_=v[x.target];!E||!_?elf.edgeInfos.push({}):i.edgeInfos.push({edgeStrength:i.edgeStrength(x),linkDistance:c?c(Object.assign(Object.assign({},x),{source:E,target:_}),E,_):i.linkDistance(x,E,_)||1+(d(E)+d(E)||0)/2})}),this.getCentripetalOptions(),i.onLayoutEnd=i.onLayoutEnd||(()=>{}),i.run()}run(){const i=this,{maxIteration:o,nodes:s,edges:c,workerEnabled:l,minMovement:d,animate:p,nodeMap:v,height:y}=i;if(i.currentMinY=0,i.currentMaxY=y,!s)return;const x=[];if(s.forEach((T,M)=>{x[2*M]=0,x[2*M+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){const T={};c.forEach(M=>{const{source:R,target:D}=M;T[R]=T[R]||[],T[R].push(M),T[D]=T[D]||[],T[D].push(M)}),this.relatedEdges=T}const E=o;if(l||!p){let T=0;for(let M=0;(i.judgingDistance>d||M<1)&&M<E;M++)T=M,i.runOneStep(M,x);i.onLayoutEnd(Object.values(v))}else{if(typeof window=="undefined")return;let T=0;this.timeInterval=window.setInterval(()=>{s&&(i.runOneStep(T,x),T++,(T>=E||i.judgingDistance<d)&&(i.onLayoutEnd(Object.values(v)),window.clearInterval(i.timeInterval)))},0)}}runOneStep(i,o){var s;const c=this,{nodes:l,edges:d,nodeMap:p,monitor:v}=c,y=[];if(!(l!=null&&l.length))return;c.calRepulsive(y),d&&c.calAttractive(y),c.calGravity(y),c.attractToSide(y);const x=c.interval;if(c.updateVelocity(y,o,x),c.updatePosition(o,x),(s=c.tick)===null||s===void 0||s.call(c),v){const E=this.calTotalEnergy(y);v({energy:E,nodes:l,edges:d,iterations:i})}}calTotalEnergy(i){const{nodes:o,nodeMap:s}=this;if(!(o!=null&&o.length))return 0;let c=0;return o.forEach((l,d)=>{const p=i[2*d],v=i[2*d+1],y=p*p+v*v,{mass:x=1}=s[l.id].data.layout.force;c+=x*y*.5}),c}calRepulsive(i){const o=this,{nodes:s,nodeMap:c,factor:l,coulombDisScale:d}=o,p=o.nodeSize;ii(s,c,l,d*d,i)}calAttractive(i){const o=this,{edges:s,nodeMap:c,nodeIdxMap:l,edgeInfos:d}=o,p=o.nodeSize;s.forEach((v,y)=>{const x=ht(v,"source"),E=ht(v,"target"),_=c[x],T=c[E];if(!_||!T)return;let M=T.x-_.x,R=T.y-_.y;!M&&!R&&(M=Math.random()*.01,R=Math.random()*.01);const D=Math.sqrt(M*M+R*R),k=M/D,L=R/D,{linkDistance:U=200,edgeStrength:W=200}=d[y]||{},zt=(U-D)*W,Ae=_.data.layout.force.mass||1,qt=T.data.layout.force.mass||1,le=1/Ae,ce=1/qt,Ne=k*zt,Et=L*zt,Le=2*l[x],nn=2*l[E];i[Le]-=Ne*le,i[Le+1]-=Et*le,i[nn]+=Ne*ce,i[nn+1]+=Et*ce})}calGravity(i){var o;const s=this,{nodes:c,edges:l=[],nodeMap:d,width:p,height:v,center:y,gravity:x,degreesMap:E,centripetalOptions:_}=s;if(!c)return;const T=c.length;for(let M=0;M<T;M++){const R=2*M,D=d[c[M].id],{mass:k=1}=D.data.layout.force;let L=0,U=0,W=x;const{in:J,out:zt,all:Ae}=E[D.id],qt=(o=s.getCenter)===null||o===void 0?void 0:o.call(s,D,Ae);if(qt){const[le,ce,Ne]=qt;L=D.x-le,U=D.y-ce,W=Ne}else L=D.x-y[0],U=D.y-y[1];if(W&&(i[R]-=W*L/k,i[R+1]-=W*U/k),_){const{leaf:le,single:ce,others:Ne,center:Et}=_,{x:Le,y:nn,centerStrength:vn}=(Et==null?void 0:Et(D,c,l,p,v))||{x:0,y:0,centerStrength:0};if(!K(Le)||!K(nn))continue;const fr=(D.x-Le)/k,Dn=(D.y-nn)/k;if(vn&&(i[R]-=vn*fr,i[R+1]-=vn*Dn),Ae===0){const nr=ce(D);if(!nr)continue;i[R]-=nr*fr,i[R+1]-=nr*Dn;continue}if(J===0||zt===0){const nr=le(D,c,l);if(!nr)continue;i[R]-=nr*fr,i[R+1]-=nr*Dn;continue}const vr=Ne(D);if(!vr)continue;i[R]-=vr*fr,i[R+1]-=vr*Dn}}}attractToSide(i){const{defSideCoe:o,height:s,nodes:c,relatedEdges:l,currentMinY:d=0,currentMaxY:p=this.height}=this;!o||typeof o!="function"||!(c!=null&&c.length)||c.forEach((v,y)=>{const x=o(v,l[v.id]||[]);if(x===0)return;const E=x<0?d:p,_=Math.abs(x);i[2*y+1]-=_*(v.y-E)})}updateVelocity(i,o,s){const c=this,{nodes:l,damping:d,maxSpeed:p}=c;l!=null&&l.length&&l.forEach((v,y)=>{let x=(o[2*y]+i[2*y]*s)*d||.01,E=(o[2*y+1]+i[2*y+1]*s)*d||.01;const _=Math.sqrt(x*x+E*E);if(_>p){const T=p/_;x=T*x,E=T*E}o[2*y]=x,o[2*y+1]=E})}updatePosition(i,o){const s=this,{nodes:c,distanceThresholdMode:l,nodeMap:d}=s;if(!(c!=null&&c.length)){this.judgingDistance=0;return}let p=0;l==="max"?s.judgingDistance=-1/0:l==="min"&&(s.judgingDistance=1/0);let v=1/0,y=-1/0;c.forEach((x,E)=>{const _=d[x.id];if(K(x.fx)&&K(x.fy)){x.x=x.fx,x.y=x.fy,_.x=x.x,_.y=x.y;return}const T=i[2*E]*o,M=i[2*E+1]*o;x.x+=T,x.y+=M,_.x=x.x,_.y=x.y,x.y<v&&(v=x.y),x.y>y&&(y=x.y);const R=Math.sqrt(T*T+M*M);switch(l){case"max":s.judgingDistance<R&&(s.judgingDistance=R);break;case"min":s.judgingDistance>R&&(s.judgingDistance=R);break;default:p=p+R;break}}),this.currentMinY=v,this.currentMaxY=y,(!l||l==="mean")&&(s.judgingDistance=p/c.length)}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const i=this;i.stop(),i.tick=null,i.nodes=null,i.edges=null,i.destroyed=!0}getType(){return"force2"}getSameTypeLeafMap(){const{nodeClusterBy:i,nodes:o,edges:s,nodeMap:c,degreesMap:l}=this;if(!(o!=null&&o.length))return;const d={};return o.forEach((p,v)=>{l[p.id].all===1&&(d[p.id]=Yn("leaf",p,s,i,l,c))}),d}}function Hi(n){return function(){return n}}function ai(n){return(n()-.5)*1e-6}var xa={value:function(){}};function Fs(){for(var n=0,i=arguments.length,o={},s;n<i;++n){if(!(s=arguments[n]+"")||s in o||/[\s.]/.test(s))throw new Error("illegal type: "+s);o[s]=[]}return new Ea(o)}function Ea(n){this._=n}function Gc(n,i){return n.trim().split(/^|\s+/).map(function(o){var s="",c=o.indexOf(".");if(c>=0&&(s=o.slice(c+1),o=o.slice(0,c)),o&&!i.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:s}})}Ea.prototype=Fs.prototype={constructor:Ea,on:function(i,o){var s=this._,c=Gc(i+"",s),l,d=-1,p=c.length;if(arguments.length<2){for(;++d<p;)if((l=(i=c[d]).type)&&(l=qs(s[l],i.name)))return l;return}if(o!=null&&typeof o!="function")throw new Error("invalid callback: "+o);for(;++d<p;)if(l=(i=c[d]).type)s[l]=vc(s[l],i.name,o);else if(o==null)for(l in s)s[l]=vc(s[l],i.name,null);return this},copy:function(){var i={},o=this._;for(var s in o)i[s]=o[s].slice();return new Ea(i)},call:function(i,o){if((l=arguments.length-2)>0)for(var s=new Array(l),c=0,l,d;c<l;++c)s[c]=arguments[c+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(d=this._[i],c=0,l=d.length;c<l;++c)d[c].value.apply(o,s)},apply:function(i,o,s){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var c=this._[i],l=0,d=c.length;l<d;++l)c[l].value.apply(o,s)}};function qs(n,i){for(var o=0,s=n.length,c;o<s;++o)if((c=n[o]).name===i)return c.value}function vc(n,i,o){for(var s=0,c=n.length;s<c;++s)if(n[s].name===i){n[s]=xa,n=n.slice(0,s).concat(n.slice(s+1));break}return o!=null&&n.push({name:i,value:o}),n}var Qo=Fs,To=0,eo=0,Uo=0,ao=1e3,ci,ms,Or=0,Vo=0,wa=0,ys=typeof performance=="object"&&performance.now?performance:Date,Bs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Ua(){return Vo||(Bs(bo),Vo=ys.now()+wa)}function bo(){Vo=0}function Vr(){this._call=this._time=this._next=null}Vr.prototype=bs.prototype={constructor:Vr,restart:function(n,i,o){if(typeof n!="function")throw new TypeError("callback is not a function");o=(o==null?Ua():+o)+(i==null?0:+i),!this._next&&ms!==this&&(ms?ms._next=this:ci=this,ms=this),this._call=n,this._time=o,no()},stop:function(){this._call&&(this._call=null,this._time=1/0,no())}};function bs(n,i,o){var s=new Vr;return s.restart(n,i,o),s}function Jr(){Ua(),++To;for(var n=ci,i;n;)(i=Vo-n._time)>=0&&n._call.call(null,i),n=n._next;--To}function zc(){Vo=(Or=ys.now())+wa,To=eo=0;try{Jr()}finally{To=0,Js(),Vo=0}}function jc(){var n=ys.now(),i=n-Or;i>ao&&(wa-=i,Or=n)}function Js(){for(var n,i=ci,o,s=1/0;i;)i._call?(s>i._time&&(s=i._time),n=i,i=i._next):(o=i._next,i._next=null,i=n?n._next=o:ci=o);ms=n,no(s)}function no(n){if(!To){eo&&(eo=clearTimeout(eo));var i=n-Vo;i>24?(n<1/0&&(eo=setTimeout(zc,n-ys.now()-wa)),Uo&&(Uo=clearInterval(Uo))):(Uo||(Or=ys.now(),Uo=setInterval(jc,ao)),To=1,Bs(zc))}}var Zo=1664525,Qs=1013904223,xs=4294967296;function Es(){var n=1;return function(){return(n=(Zo*n+Qs)%xs)/xs}}function Sa(n){return n.x}function _a(n){return n.y}var ts=10,Ao=Math.PI*(3-Math.sqrt(5));function Ca(n){var i,o=1,s=.001,c=1-Math.pow(s,1/300),l=0,d=.6,p=new Map,v=bs(E),y=Qo("tick","end"),x=Es();n==null&&(n=[]);function E(){_(),y.call("tick",i),o<s&&(v.stop(),y.call("end",i))}function _(R){var D,k=n.length,L;R===void 0&&(R=1);for(var U=0;U<R;++U)for(o+=(l-o)*c,p.forEach(function(W){W(o)}),D=0;D<k;++D)L=n[D],L.fx==null?L.x+=L.vx*=d:(L.x=L.fx,L.vx=0),L.fy==null?L.y+=L.vy*=d:(L.y=L.fy,L.vy=0);return i}function T(){for(var R=0,D=n.length,k;R<D;++R){if(k=n[R],k.index=R,k.fx!=null&&(k.x=k.fx),k.fy!=null&&(k.y=k.fy),isNaN(k.x)||isNaN(k.y)){var L=ts*Math.sqrt(.5+R),U=R*Ao;k.x=L*Math.cos(U),k.y=L*Math.sin(U)}(isNaN(k.vx)||isNaN(k.vy))&&(k.vx=k.vy=0)}}function M(R){return R.initialize&&R.initialize(n,x),R}return T(),i={tick:_,restart:function(){return v.restart(E),i},stop:function(){return v.stop(),i},nodes:function(D){return arguments.length?(n=D,T(),p.forEach(M),i):n},alpha:function(D){return arguments.length?(o=+D,i):o},alphaMin:function(D){return arguments.length?(s=+D,i):s},alphaDecay:function(D){return arguments.length?(c=+D,i):+c},alphaTarget:function(D){return arguments.length?(l=+D,i):l},velocityDecay:function(D){return arguments.length?(d=1-D,i):1-d},randomSource:function(D){return arguments.length?(x=D,p.forEach(M),i):x},force:function(D,k){return arguments.length>1?(k==null?p.delete(D):p.set(D,M(k)),i):p.get(D)},find:function(D,k,L){var U=0,W=n.length,J,zt,Ae,qt,le;for(L==null?L=1/0:L*=L,U=0;U<W;++U)qt=n[U],J=D-qt.x,zt=k-qt.y,Ae=J*J+zt*zt,Ae<L&&(le=qt,L=Ae);return le},on:function(D,k){return arguments.length>1?(y.on(D,k),i):y.on(D)}}}function No(){var n,i,o,s,c=Hi(-30),l,d=1,p=1/0,v=.81;function y(T){var M,R=n.length,D=ks(n,Sa,_a).visitAfter(E);for(s=T,M=0;M<R;++M)i=n[M],D.visit(_)}function x(){if(n){var T,M=n.length,R;for(l=new Array(M),T=0;T<M;++T)R=n[T],l[R.index]=+c(R,T,n)}}function E(T){var M=0,R,D,k=0,L,U,W;if(T.length){for(L=U=W=0;W<4;++W)(R=T[W])&&(D=Math.abs(R.value))&&(M+=R.value,k+=D,L+=D*R.x,U+=D*R.y);T.x=L/k,T.y=U/k}else{R=T,R.x=R.data.x,R.y=R.data.y;do M+=l[R.data.index];while(R=R.next)}T.value=M}function _(T,M,R,D){if(!T.value)return!0;var k=T.x-i.x,L=T.y-i.y,U=D-M,W=k*k+L*L;if(U*U/v<W)return W<p&&(k===0&&(k=ai(o),W+=k*k),L===0&&(L=ai(o),W+=L*L),W<d&&(W=Math.sqrt(d*W)),i.vx+=k*T.value*s/W,i.vy+=L*T.value*s/W),!0;if(T.length||W>=p)return;(T.data!==i||T.next)&&(k===0&&(k=ai(o),W+=k*k),L===0&&(L=ai(o),W+=L*L),W<d&&(W=Math.sqrt(d*W)));do T.data!==i&&(U=l[T.data.index]*s/W,i.vx+=k*U,i.vy+=L*U);while(T=T.next)}return y.initialize=function(T,M){n=T,o=M,x()},y.strength=function(T){return arguments.length?(c=typeof T=="function"?T:Hi(+T),x(),y):c},y.distanceMin=function(T){return arguments.length?(d=T*T,y):Math.sqrt(d)},y.distanceMax=function(T){return arguments.length?(p=T*T,y):Math.sqrt(p)},y.theta=function(T){return arguments.length?(v=T*T,y):Math.sqrt(v)},y}function mc(n,i){var o,s=1;n==null&&(n=0),i==null&&(i=0);function c(){var l,d=o.length,p,v=0,y=0;for(l=0;l<d;++l)p=o[l],v+=p.x,y+=p.y;for(v=(v/d-n)*s,y=(y/d-i)*s,l=0;l<d;++l)p=o[l],p.x-=v,p.y-=y}return c.initialize=function(l){o=l},c.x=function(l){return arguments.length?(n=+l,c):n},c.y=function(l){return arguments.length?(i=+l,c):i},c.strength=function(l){return arguments.length?(s=+l,c):s},c}var Gs=O(37635),Mi=O.n(Gs);function yc(n){return n.index}function oa(n,i){var o=n.get(i);if(!o)throw new Error("node not found: "+i);return o}function Ro(n){var i=yc,o=E,s,c=Hi(30),l,d,p,v,y,x=1;n==null&&(n=[]);function E(D){return 1/Math.min(p[D.source.index],p[D.target.index])}function _(D){for(var k=0,L=n.length;k<x;++k)for(var U=0,W,J,zt,Ae,qt,le,ce;U<L;++U)W=n[U],J=W.source,zt=W.target,Ae=zt.x+zt.vx-J.x-J.vx||ai(y),qt=zt.y+zt.vy-J.y-J.vy||ai(y),le=Math.sqrt(Ae*Ae+qt*qt),le=(le-l[U])/le*D*s[U],Ae*=le,qt*=le,zt.vx-=Ae*(ce=v[U]),zt.vy-=qt*ce,J.vx+=Ae*(ce=1-ce),J.vy+=qt*ce}function T(){if(d){var D,k=d.length,L=n.length,U=new Map(d.map(function(J,zt){return[i(J,zt,d),J]})),W;for(D=0,p=new Array(k);D<L;++D)W=n[D],W.index=D,Mi()(W.source)!=="object"&&(W.source=oa(U,W.source)),Mi()(W.target)!=="object"&&(W.target=oa(U,W.target)),p[W.source.index]=(p[W.source.index]||0)+1,p[W.target.index]=(p[W.target.index]||0)+1;for(D=0,v=new Array(L);D<L;++D)W=n[D],v[D]=p[W.source.index]/(p[W.source.index]+p[W.target.index]);s=new Array(L),M(),l=new Array(L),R()}}function M(){if(d)for(var D=0,k=n.length;D<k;++D)s[D]=+o(n[D],D,n)}function R(){if(d)for(var D=0,k=n.length;D<k;++D)l[D]=+c(n[D],D,n)}return _.initialize=function(D,k){d=D,y=k,T()},_.links=function(D){return arguments.length?(n=D,T(),_):n},_.id=function(D){return arguments.length?(i=D,_):i},_.iterations=function(D){return arguments.length?(x=+D,_):x},_.strength=function(D){return arguments.length?(o=typeof D=="function"?D:Hi(+D),M(),_):o},_.distance=function(D){return arguments.length?(c=typeof D=="function"?D:Hi(+D),R(),_):c},_}function es(n){return n.x+n.vx}function Ta(n){return n.y+n.vy}function Va(n){var i,o,s,c=1,l=1;typeof n!="function"&&(n=Hi(n==null?1:+n));function d(){for(var y,x=i.length,E,_,T,M,R,D,k=0;k<l;++k)for(E=ks(i,es,Ta).visitAfter(p),y=0;y<x;++y)_=i[y],R=o[_.index],D=R*R,T=_.x+_.vx,M=_.y+_.vy,E.visit(L);function L(U,W,J,zt,Ae){var qt=U.data,le=U.r,ce=R+le;if(qt){if(qt.index>_.index){var Ne=T-qt.x-qt.vx,Et=M-qt.y-qt.vy,Le=Ne*Ne+Et*Et;Le<ce*ce&&(Ne===0&&(Ne=ai(s),Le+=Ne*Ne),Et===0&&(Et=ai(s),Le+=Et*Et),Le=(ce-(Le=Math.sqrt(Le)))/Le*c,_.vx+=(Ne*=Le)*(ce=(le*=le)/(D+le)),_.vy+=(Et*=Le)*ce,qt.vx-=Ne*(ce=1-ce),qt.vy-=Et*ce)}return}return W>T+ce||zt<T-ce||J>M+ce||Ae<M-ce}}function p(y){if(y.data)return y.r=o[y.data.index];for(var x=y.r=0;x<4;++x)y[x]&&y[x].r>y.r&&(y.r=y[x].r)}function v(){if(i){var y,x=i.length,E;for(o=new Array(x),y=0;y<x;++y)E=i[y],o[E.index]=+n(E,y,i)}}return d.initialize=function(y,x){i=y,s=x,v()},d.iterations=function(y){return arguments.length?(l=+y,d):l},d.strength=function(y){return arguments.length?(c=+y,d):c},d.radius=function(y){return arguments.length?(n=typeof y=="function"?y:Hi(+y),v(),d):n},d}function Xr(n){var i=Hi(.1),o,s,c;typeof n!="function"&&(n=Hi(n==null?0:+n));function l(p){for(var v=0,y=o.length,x;v<y;++v)x=o[v],x.vx+=(c[v]-x.x)*s[v]*p}function d(){if(o){var p,v=o.length;for(s=new Array(v),c=new Array(v),p=0;p<v;++p)s[p]=isNaN(c[p]=+n(o[p],p,o))?0:+i(o[p],p,o)}}return l.initialize=function(p){o=p,d()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:Hi(+p),d(),l):i},l.x=function(p){return arguments.length?(n=typeof p=="function"?p:Hi(+p),d(),l):n},l}function sa(n){var i=Hi(.1),o,s,c;typeof n!="function"&&(n=Hi(n==null?0:+n));function l(p){for(var v=0,y=o.length,x;v<y;++v)x=o[v],x.vy+=(c[v]-x.y)*s[v]*p}function d(){if(o){var p,v=o.length;for(s=new Array(v),c=new Array(v),p=0;p<v;++p)s[p]=isNaN(c[p]=+n(o[p],p,o))?0:+i(o[p],p,o)}}return l.initialize=function(p){o=p,d()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:Hi(+p),d(),l):i},l.y=function(p){return arguments.length?(n=typeof p=="function"?p:Hi(+p),d(),l):n},l}function yi(){function n(Sn){return()=>Sn}let i=Sn=>Sn.cluster,o=n(1),s=n(-1),c=n(100),l=n(.1),d=[0,0],p=[],v={},y=[],x=100,E=100,_={none:{x:0,y:0}},T=[],M,R="force",D=!0,k=.1;function L(Sn){if(!D)return L;M.tick(),qt();for(let Yr=0,Co=p.length,fi,$i=Sn*k;Yr<Co;++Yr)fi=p[Yr],fi.vx+=(_[i(fi)].x-fi.x)*$i,fi.vy+=(_[i(fi)].y-fi.y)*$i}function U(){p&&W()}function W(){if(!p||!p.length)return;if(i(p[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const Sn=J();M=Ca(Sn.nodes).force("x",Xr(x).strength(.1)).force("y",sa(E).strength(.1)).force("collide",Va(Yr=>Yr.r).iterations(4)).force("charge",No().strength(s)).force("links",Ro(Sn.nodes.length?Sn.links:[]).distance(c).strength(l)),T=M.nodes(),qt()}function J(){const Sn=[],Yr=[],Co={};let fi=[],$i={},mn=[];return $i=zt(p),mn=Ae(y),fi=Object.keys($i),fi.forEach((qn,Li)=>{const Br=$i[qn];Sn.push({id:qn,size:Br.count,r:Math.sqrt(Br.sumforceNodeSize/Math.PI)}),Co[qn]=Li}),mn.forEach(qn=>{const Li=ht(qn,"source"),Br=ht(qn,"target"),Qi=Co[Li],ri=Co[Br];Qi!==void 0&&ri!==void 0&&Yr.push({source:Qi,target:ri,count:qn.count})}),{nodes:Sn,links:Yr}}function zt(Sn){const Yr={};return Sn.forEach(Co=>{const fi=i(Co);Yr[fi]||(Yr[fi]={count:0,sumforceNodeSize:0})}),Sn.forEach(Co=>{const fi=i(Co),$i=o(Co),mn=Yr[fi];mn.count=mn.count+1,mn.sumforceNodeSize=mn.sumforceNodeSize+Math.PI*($i*$i)*1.3,Yr[fi]=mn}),Yr}function Ae(Sn){const Yr={},Co=[];return Sn.forEach($i=>{const mn=le($i);let qn=0;Yr[mn]!==void 0&&(qn=Yr[mn]),qn+=1,Yr[mn]=qn}),Object.entries(Yr).forEach(([$i,mn])=>{const qn=$i.split("~")[0],Li=$i.split("~")[1];qn!==void 0&&Li!==void 0&&Co.push({source:qn,target:Li,count:mn})}),Co}function qt(){return _={none:{x:0,y:0}},T.forEach(Sn=>{_[Sn.id]={x:Sn.x-d[0],y:Sn.y-d[1]}}),_}function le(Sn){const Yr=ht(Sn,"source"),Co=ht(Sn,"target"),fi=i(v[Yr]),$i=i(v[Co]);return fi<=$i?`${fi}~${$i}`:`${$i}~${fi}`}function ce(Sn){v={},Sn.forEach(Yr=>{v[Yr.id]=Yr})}function Ne(Sn){return arguments.length?(R=Sn,U(),L):R}function Et(Sn){return arguments.length?typeof Sn=="string"?(i=Yr=>Yr[Sn],L):(i=Sn,L):i}function Le(Sn){return arguments.length?(D=Sn,L):D}function nn(Sn){return arguments.length?(k=Sn,L):k}function vn(Sn){return arguments.length?(x=Sn,L):x}function fr(Sn){return arguments.length?(E=Sn,L):E}function Dn(Sn){return arguments.length?(ce(Sn||[]),p=Sn||[],L):p}function vr(Sn){return arguments.length?(y=Sn||[],U(),L):y}function nr(Sn){return arguments.length?(typeof Sn=="function"?o=Sn:o=n(+Sn),U(),L):o}function Fr(Sn){return arguments.length?(typeof Sn=="function"?s=Sn:s=n(+Sn),U(),L):s}function ni(Sn){return arguments.length?(typeof Sn=="function"?c=Sn:c=n(+Sn),U(),L):c}function so(Sn){return arguments.length?(typeof Sn=="function"?l=Sn:l=n(+Sn),U(),L):l}function mo(Sn){return arguments.length?(d=Sn,L):d}return L.initialize=Sn=>{p=Sn,U()},L.template=Ne,L.groupBy=Et,L.enableGrouping=Le,L.strength=nn,L.centerX=vn,L.centerY=fr,L.nodes=Dn,L.links=vr,L.forceNodeSize=nr,L.nodeSize=L.forceNodeSize,L.forceCharge=Fr,L.forceLinkDistance=ni,L.forceLinkStrength=so,L.offset=mo,L.getFocis=qt,L}const Ke={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},Ir={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};class bi extends vt{constructor(i){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,i&&this.updateCfg(i)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(i){const o=this;o.nodes=i.nodes||[];const s=i.edges||[];o.edges=s.map(c=>{const l={},d=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(c).forEach(p=>{d.indexOf(p)>-1||(l[p]=c[p])}),l}),o.ticking=!1}execute(i){const o=this,s=o.nodes,c=o.edges;if(o.ticking)return;let l=o.forceSimulation;const d=o.alphaMin,p=o.alphaDecay,v=o.alpha;if(l){if(i){if(o.clustering&&o.clusterForce&&(o.clusterForce.nodes(s),o.clusterForce.links(c)),l.nodes(s),c&&o.edgeForce)o.edgeForce.links(c);else if(c&&!o.edgeForce){const y=Ro().id(x=>x.id).links(c);o.edgeStrength&&y.strength(o.edgeStrength),o.linkDistance&&y.distance(o.linkDistance),o.edgeForce=y,l.force("link",y)}}o.preventOverlap&&o.overlapProcess(l),l.alpha(v).restart(),this.ticking=!0}else try{const y=No();if(o.nodeStrength&&y.strength(o.nodeStrength),l=Ca().nodes(s),o.clustering){const x=yi();x.centerX(o.center[0]).centerY(o.center[1]).template("force").strength(o.clusterFociStrength),c&&x.links(c),s&&x.nodes(s),x.forceLinkDistance(o.clusterEdgeDistance).forceLinkStrength(o.clusterEdgeStrength).forceCharge(o.clusterNodeStrength).forceNodeSize(o.clusterNodeSize),o.clusterForce=x,l.force("group",x)}if(l.force("center",mc(o.center[0],o.center[1])).force("charge",y).alpha(v).alphaDecay(p).alphaMin(d),o.preventOverlap&&o.overlapProcess(l),c){const x=Ro().id(E=>E.id).links(c);o.edgeStrength&&x.strength(o.edgeStrength),o.linkDistance&&x.distance(o.linkDistance),o.edgeForce=x,l.force("link",x)}if(o.workerEnabled&&!Ii()&&(o.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!o.workerEnabled)l.on("tick",()=>{o.tick()}).on("end",()=>{o.ticking=!1,o.onLayoutEnd&&o.onLayoutEnd()}),o.ticking=!0;else{l.stop();const x=ns(l);for(let E=1;E<=x;E++)l.tick(),postMessage({nodes:s,currentTick:E,totalTicks:x,type:Ke.TICK},void 0);o.ticking=!1}o.forceSimulation=l,o.ticking=!0}catch(y){o.ticking=!1,console.warn(y)}}overlapProcess(i){const o=this,s=o.nodeSize,c=o.nodeSpacing;let l,d;const p=o.collideStrength;if(K(c)?d=()=>c:Hn(c)?d=c:d=()=>0,!s)l=v=>v.size?Zt(v.size)?(v.size[0]>v.size[1]?v.size[0]:v.size[1])/2+d(v):gt(v.size)?(v.size.width>v.size.height?v.size.width:v.size.height)/2+d(v):v.size/2+d(v):10+d(v);else if(Hn(s))l=v=>s(v)+d(v);else if(Zt(s)){const y=(s[0]>s[1]?s[0]:s[1])/2;l=x=>y+d(x)}else if(K(s)){const v=s/2;l=y=>v+d(y)}else l=()=>10;i.force("collisionForce",Va(l).strength(p))}updateCfg(i){const o=this;o.ticking&&(o.forceSimulation.stop(),o.ticking=!1),o.forceSimulation=null,Object.assign(o,i)}destroy(){const i=this;i.ticking&&(i.forceSimulation.stop(),i.ticking=!1),i.nodes=null,i.edges=null,i.destroyed=!0}}function ns(n){const i=n.alphaMin(),o=n.alphaTarget(),s=n.alpha(),c=Math.log((i-o)/(s-o))/Math.log(1-n.alphaDecay());return Math.ceil(c)}function Ii(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function co(n,i,o,s){n.forEach((c,l)=>{n[l].children=[],n[l].parent=[]}),s?i.forEach(c=>{const l=ht(c,"source"),d=ht(c,"target");let p=0;l&&(p=o[l]);let v=0;d&&(v=o[d]);const y=n[p].children,x=n[v].parent;y.push(n[v].id),x.push(n[p].id)}):i.forEach(c=>{const l=ht(c,"source"),d=ht(c,"target");let p=0;l&&(p=o[l]);let v=0;d&&(v=o[d]);const y=n[p].children,x=n[v].children;y.push(n[v].id),x.push(n[p].id)})}function ro(n,i,o){const s=o.length;for(let c=0;c<s;c++){const l=ht(o[c],"source"),d=ht(o[c],"target");if(n.id===l&&i.id===d||i.id===l&&n.id===d)return!0}return!1}function ta(n,i){const o=n.degree,s=i.degree;return o<s?-1:o>s?1:0}class zs extends vt{constructor(i){super(),this.radius=null,this.nodeSize=void 0,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(i)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){var i;const o=this,s=o.nodes,c=o.edges,l=s.length;if(l===0){o.onLayoutEnd&&o.onLayoutEnd();return}!o.width&&typeof window!="undefined"&&(o.width=window.innerWidth),!o.height&&typeof window!="undefined"&&(o.height=window.innerHeight),o.center||(o.center=[o.width/2,o.height/2]);const d=o.center;if(l===1){s[0].x=d[0],s[0].y=d[1],o.onLayoutEnd&&o.onLayoutEnd();return}let{radius:p,startRadius:v,endRadius:y}=o;const{divisions:x,startAngle:E,endAngle:_,angleRatio:T,ordering:M,clockwise:R,nodeSpacing:D,nodeSize:k}=o,L=(_-E)/l,U={};s.forEach((qt,le)=>{U[qt.id]=le}),o.nodeMap=U;const W=bt(s.length,U,c);if(o.degrees=W,D){const qt=rn(10,D),le=rn(10,k);let ce=-1/0;s.forEach(Et=>{const Le=le(Et);ce<Le&&(ce=Le)});let Ne=0;s.forEach((Et,Le)=>{Le===0?Ne+=ce||10:Ne+=(qt(Et)||0)+(ce||10)}),p=Ne/(2*Math.PI)}else!p&&!v&&!y?p=o.height>o.width?o.width/2:o.height/2:!v&&y?v=y:v&&!y&&(y=v);const J=L*T;let zt=[];M==="topology"?zt=o.topologyOrdering():M==="topology-directed"?zt=o.topologyOrdering(!0):M==="degree"?zt=o.degreeOrdering():zt=s;const Ae=Math.ceil(l/x);for(let qt=0;qt<l;++qt){let le=p;!le&&v!==null&&y!==null&&(le=v+qt*(y-v)/(l-1)),le||(le=10+qt*100/(l-1));let ce=E+qt%Ae*J+2*Math.PI/x*Math.floor(qt/Ae);R||(ce=_-qt%Ae*J-2*Math.PI/x*Math.floor(qt/Ae)),zt[qt].x=d[0]+Math.cos(ce)*le,zt[qt].y=d[1]+Math.sin(ce)*le,zt[qt].weight=W[qt].all}return(i=o.onLayoutEnd)===null||i===void 0||i.call(o),{nodes:zt,edges:this.edges}}topologyOrdering(i=!1){const o=this,s=o.degrees,c=o.edges,l=o.nodes,d=$t(l),p=o.nodeMap,v=[d[0]],y=[l[0]],x=[],E=l.length;x[0]=!0,co(d,c,p,i);let _=0;return d.forEach((T,M)=>{if(M!==0)if((M===E-1||s[M].all!==s[M+1].all||ro(v[_],T,c))&&!x[M])v.push(T),y.push(l[p[T.id]]),x[M]=!0,_++;else{const R=v[_].children;let D=!1;for(let L=0;L<R.length;L++){const U=p[R[L]];if(s[U].all===s[M].all&&!x[U]){v.push(d[U]),y.push(l[p[d[U].id]]),x[U]=!0,D=!0;break}}let k=0;for(;!D&&(x[k]||(v.push(d[k]),y.push(l[p[d[k].id]]),x[k]=!0,D=!0),k++,k!==E););}}),y}degreeOrdering(){const i=this,o=i.nodes,s=[],c=i.degrees;return o.forEach((l,d)=>{l.degree=c[d].all,s.push(l)}),s.sort(ta),s}getType(){return"circular"}}const Za=(n,i)=>{if(n!=="next"&&n!=="prev")return i},bc=n=>{n.prev.next=n.next,n.next.prev=n.prev,delete n.next,delete n.prev};class ws{constructor(){const i={};i.prev=i,i.next=i.prev,this.shortcut=i}dequeue(){const i=this.shortcut,o=i.prev;if(o&&o!==i)return bc(o),o}enqueue(i){const o=this.shortcut;i.prev&&i.next&&bc(i),i.next=o.next,o.next.prev=i,o.next=i,i.prev=o}toString(){const i=[],o=this.shortcut;let s=o.prev;for(;s!==o;)i.push(JSON.stringify(s,Za)),s=s==null?void 0:s.prev;return`[${i.join(", ")}]`}}var rs;(function(n){n.DEFAULT_EDGE_NAME="\0",n.GRAPH_NODE="\0",n.EDGE_KEY_DELIM=""})(rs||(rs={}));function Wi(n,i){var o=n.get(i)||0;n.set(i,o+1)}function Xi(n,i){var o=n.get(i);o!==void 0&&(o=o-1,o>0?n.set(i,o):n.delete(i))}function Ss(n,i,o,s){var c=String(i),l=String(o);if(!n&&c>l){var d=c;c=l,l=d}return c+rs.EDGE_KEY_DELIM+l+rs.EDGE_KEY_DELIM+(s===void 0?rs.DEFAULT_EDGE_NAME:s)}function Do(n,i,o,s){var c=String(i),l=String(o),d={v:i,w:o};if(!n&&c>l){var p=d.v;d.v=d.w,d.w=p}return s!==void 0&&(d.name=s),d}function uo(n,i){return Ss(n,i.v,i.w,i.name)}function $a(n){return typeof n=="function"}var Ha=function(i){return i.nodes().map(function(o){var s=i.node(o),c=i.parent(o),l={id:o,value:s,parent:c};return l.value===void 0&&delete l.value,l.parent===void 0&&delete l.parent,l})},$o=function(i){return i.edges().map(function(o){var s=i.edge(o),c={v:o.v,w:o.w,value:s,name:o.name};return c.name===void 0&&delete c.name,c.value===void 0&&delete c.value,c})},Au=function(i){var o={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:Ha(i),edges:$o(i),value:i.graph()};return o.value===void 0&&delete o.value,o},Wa=function(i){var o=new os(i.options);return i.value!==void 0&&o.setGraph(i.value),i.nodes.forEach(function(s){o.setNode(s.id,s.value),s.parent&&o.setParent(s.id,s.parent)}),i.edges.forEach(function(s){o.setEdge(s.v,s.w,s.value,s.name)}),o};function xi(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),o.push.apply(o,s)}return o}function Uc(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?xi(Object(o),!0).forEach(function(s){Vc(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):xi(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function Vc(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function Ou(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function is(n,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function Zc(n,i,o){return i&&is(n.prototype,i),o&&is(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}var Mu={compound:!1,multigraph:!1,directed:!0},os=function(){function n(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ou(this,n),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=rs.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return i.directed},this.isMultigraph=function(){return i.multigraph},this.isCompound=function(){return i.compound},this.setGraph=function(c){return i.label=c,i},this.graph=function(){return i.label},this.setDefaultNodeLabel=function(c){return $a(c)?i.defaultNodeLabelFn=c:i.defaultNodeLabelFn=function(){return c},i},this.nodeCount=function(){return i.nodeCountNum},this.node=function(c){return i.nodesLabelMap.get(c)},this.nodes=function(){return Array.from(i.nodesLabelMap.keys())},this.sources=function(){return i.nodes().filter(function(c){var l;return!(!((l=i.inEdgesMap.get(c))===null||l===void 0)&&l.size)})},this.sinks=function(){return i.nodes().filter(function(c){var l;return!(!((l=i.outEdgesMap.get(c))===null||l===void 0)&&l.size)})},this.setNodes=function(c,l){return c.map(function(d){return i.setNode(d,l)}),i},this.hasNode=function(c){return i.nodesLabelMap.has(c)},this.checkCompound=function(){if(!i.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(c){if(i.isCompound()){var l,d=(l=i.parentMap)===null||l===void 0?void 0:l.get(c);if(d!==i.GRAPH_NODE)return d}},this.removeFromParentsChildList=function(c){var l=i.parentMap.get(c);i.childrenMap.get(l).delete(c)},this.setParent=function(c,l){var d,p;i.checkCompound();for(var v=l===void 0?i.GRAPH_NODE:l,y=i.parent(v);y;){if(c===y)throw new Error("Setting "+l+" as parent of "+c+" would create a cycle");y=i.parent(y)}l&&i.setNode(l),i.setNode(c),i.removeFromParentsChildList(c),(d=i.parentMap)===null||d===void 0||d.set(c,v);var x=i.childrenMap.get(v);return x.set(c,!0),(p=i.childrenMap)===null||p===void 0||p.set(v,x),i},this.children=function(c){var l=c===void 0?i.GRAPH_NODE:c;if(i.isCompound()){var d,p=(d=i.childrenMap)===null||d===void 0?void 0:d.get(l);return p?Array.from(p.keys()):void 0}if(l===i.GRAPH_NODE)return i.nodes();if(c&&i.hasNode(c))return[]},this.predecessors=function(c){var l=i.predecessorsMap.get(c);return l?Array.from(l.keys()):void 0},this.successors=function(c){var l=i.successorsMap.get(c);return l?Array.from(l.keys()):void 0},this.neighbors=function(c){var l;if(i.hasNode(c))return Array.from(new Set((l=i.predecessors(c))===null||l===void 0?void 0:l.concat(i.successors(c))))},this.isLeaf=function(c){var l;if(i.isDirected()){var d;return!(!((d=i.successors(c))===null||d===void 0)&&d.length)}return!(!((l=i.neighbors(c))===null||l===void 0)&&l.length)},this.filterNodes=function(c){var l=i.directed,d=i.multigraph,p=i.compound,v=new n({directed:l,multigraph:d,compound:p});if(v.setGraph(i.graph()),i.nodes().forEach(function(x){c(x)&&v.setNode(x,i.node(x))}),i.edges().forEach(function(x){v.hasNode(x.v)&&v.hasNode(x.w)&&v.setEdgeObj(x,i.edge(x))}),p){var y=function(E){for(var _=i.parent(E);_!==void 0&&!v.hasNode(_);)_=i.parent(_);return _};v.nodes().forEach(function(x){v.setParent(x,y(x))})}return v},this.setDefaultEdgeLabel=function(c){return $a(c)?i.defaultEdgeLabelFn=c:i.defaultEdgeLabelFn=function(){return c},i},this.edgeCount=function(){return i.edgeCountNum},this.setEdgeObj=function(c,l){return i.setEdge(c.v,c.w,l,c.name)},this.setPath=function(c,l){return c.reduce(function(d,p){return i.setEdge(d,p,l),p}),i},this.edgeFromArgs=function(c,l,d){return i.edge({v:c,w:l,name:d})},this.edge=function(c){return i.edgesLabelsMap.get(uo(i.isDirected(),c))},this.hasEdge=function(c,l,d){return i.edgesLabelsMap.has(uo(i.isDirected(),{v:c,w:l,name:d}))},this.removeEdgeObj=function(c){var l=c.v,d=c.w,p=c.name;return i.removeEdge(l,d,p)},this.edges=function(){return Array.from(i.edgesMap.values())},this.inEdges=function(c,l){var d=i.inEdgesMap.get(c);if(d)return Array.from(d.values()).filter(function(p){return!l||p.v===l})},this.outEdges=function(c,l){var d=i.outEdgesMap.get(c);if(d)return Array.from(d.values()).filter(function(p){return!l||p.w===l})},this.nodeEdges=function(c,l){var d;if(i.hasNode(c))return(d=i.inEdges(c,l))===null||d===void 0?void 0:d.concat(i.outEdges(c,l))},this.toJSON=function(){return Au(i)},this.nodeInDegree=function(c){var l=i.inEdgesMap.get(c);return l?l.size:0},this.nodeOutDegree=function(c){var l=i.outEdgesMap.get(c);return l?l.size:0},this.nodeDegree=function(c){return i.nodeInDegree(c)+i.nodeOutDegree(c)},this.source=function(c){return c.v},this.target=function(c){return c.w};var s=Uc(Uc({},Mu),o);this.compound=s.compound,this.directed=s.directed,this.multigraph=s.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return Zc(n,[{key:"setNode",value:function(o,s){var c=this.nodesLabelMap,l=this.defaultNodeLabelFn,d=this.isCompound,p=this.parentMap,v=this.childrenMap,y=this.inEdgesMap,x=this.outEdgesMap,E=this.predecessorsMap,_=this.successorsMap;if(c.has(o))return s!==void 0&&c.set(o,s),this;if(c.set(o,s||l(o)),d()){var T;p==null||p.set(o,this.GRAPH_NODE),v==null||v.set(o,new Map),v!=null&&v.has(this.GRAPH_NODE)||v==null||v.set(this.GRAPH_NODE,new Map),v==null||(T=v.get(this.GRAPH_NODE))===null||T===void 0||T.set(o,!0)}return[y,x,E,_].forEach(function(M){return M.set(o,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(o){var s=this;if(this.hasNode(o)){var c=function(D){s.removeEdge(D.v,D.w,D.name)},l=this.inEdgesMap,d=this.outEdgesMap,p=this.predecessorsMap,v=this.successorsMap,y=this.nodesLabelMap;if(this.isCompound()){var x,E,_;this.removeFromParentsChildList(o),(x=this.parentMap)===null||x===void 0||x.delete(o),(E=this.children(o))===null||E===void 0||E.forEach(function(R){return s.setParent(R)}),(_=this.childrenMap)===null||_===void 0||_.delete(o)}var T=l.get(o),M=d.get(o);Array.from(T.values()).forEach(function(R){return c(R)}),Array.from(M.values()).forEach(function(R){return c(R)}),y.delete(o),l.delete(o),d.delete(o),p.delete(o),v.delete(o),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(o,s,c,l){var d,p,v=Do(this.isDirected(),o,s,l),y=uo(this.isDirected(),v),x=v.v,E=v.w;if(this.edgesLabelsMap.has(y))return this.edgesLabelsMap.set(y,c),this;if(l!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(x),this.setNode(E),this.edgesLabelsMap.set(y,c||this.defaultEdgeLabelFn(x,E,l)),Object.freeze(v),this.edgesMap.set(y,v);var _=this.predecessorsMap.get(E),T=this.successorsMap.get(x);return Wi(_,x),Wi(T,E),(d=this.inEdgesMap.get(E))===null||d===void 0||d.set(y,v),(p=this.outEdgesMap.get(x))===null||p===void 0||p.set(y,v),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(o,s,c){var l=Ss(this.isDirected(),o,s,c),d=this.edgesMap.get(l);if(d){var p=Do(this.isDirected(),o,s,c),v=p.v,y=p.w;this.edgesLabelsMap.delete(l),this.edgesMap.delete(l);var x=this.predecessorsMap.get(y),E=this.successorsMap.get(v);Xi(x,v),Xi(E,y),this.inEdgesMap.get(y).delete(l),this.outEdgesMap.get(v).delete(l),this.edgeCountNum-=1}return this}}]),n}();os.fromJSON=Wa;function lo(n){return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lo(n)}function Xa(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function Ya(n,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function Iu(n,i,o){return i&&Ya(n.prototype,i),o&&Ya(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function Aa(){return typeof Reflect!="undefined"&&Reflect.get?Aa=Reflect.get:Aa=function(i,o,s){var c=Ka(i,o);if(c){var l=Object.getOwnPropertyDescriptor(c,o);return l.get?l.get.call(arguments.length<3?i:s):l.value}},Aa.apply(this,arguments)}function Ka(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=me(n),n!==null););return n}function $c(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&Hc(n,i)}function Hc(n,i){return Hc=Object.setPrototypeOf||function(s,c){return s.__proto__=c,s},Hc(n,i)}function Pu(n){var i=ne();return function(){var s=me(n),c;if(i){var l=me(this).constructor;c=Reflect.construct(s,arguments,l)}else c=s.apply(this,arguments);return Ct(this,c)}}function Ct(n,i){if(i&&(lo(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jt(n)}function Jt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ne(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function me(n){return me=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},me(n)}var Me=null;function An(n,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function On(n,i,o){return i&&An(n.prototype,i),o&&An(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function Nn(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var $n=On(function n(){var i=this;Nn(this,n),this.arr=[],this.keyIndice=new Map,this.size=function(){return i.arr.length},this.keys=function(){return i.arr.map(function(o){return o.key})},this.has=function(o){return i.keyIndice.has(o)},this.priority=function(o){var s=i.keyIndice.get(o);if(s!==void 0)return i.arr[s].priority},this.swap=function(o,s){var c=i.arr,l=i.keyIndice,d=[c[o],c[s]],p=d[0],v=d[1];c[o]=v,c[s]=p,l.set(p.key,s),l.set(v.key,o)},this.innerDecrease=function(o){for(var s=i.arr,c=s[o].priority,l,d=o;d!==0;){var p;if(l=d>>1,((p=s[l])===null||p===void 0?void 0:p.priority)<c)break;i.swap(d,l),d=l}},this.heapify=function(o){var s=i.arr,c=o<<1,l=c+1,d=o;c<s.length&&(d=s[c].priority<s[d].priority?c:d,l<s.length&&(d=s[l].priority<s[d].priority?l:d),d!==o&&(i.swap(o,d),i.heapify(d)))},this.min=function(){if(i.size()===0)throw new Error("Queue underflow");return i.arr[0].key},this.add=function(o,s){var c=i.keyIndice,l=i.arr;if(!c.has(o)){var d=l.length;return c.set(o,d),l.push({key:o,priority:s}),i.innerDecrease(d),!0}return!1},this.removeMin=function(){i.swap(0,i.arr.length-1);var o=i.arr.pop();return i.keyIndice.delete(o.key),i.heapify(0),o.key},this.decrease=function(o,s){if(!i.has(o))throw new Error("There's no key named ".concat(o));var c=i.keyIndice.get(o);if(s>i.arr[c].priority)throw new Error("New priority is greater than current priority.Key: ".concat(o," Old: + ").concat(i.arr[c].priority," New: ").concat(s));i.arr[c].priority=s,i.innerDecrease(c)}}),er=function(i,o){var s=new os,c=new Map,l=new $n,d;function p(x){var E=x.v===d?x.w:x.v,_=l.priority(E);if(_!==void 0){var T=o(x);T<_&&(c.set(E,d),l.decrease(E,T))}}if(i.nodeCount()===0)return s;i.nodes().forEach(function(x){l.add(x,Number.POSITIVE_INFINITY),s.setNode(x)}),l.decrease(i.nodes()[0],0);for(var v=!1;l.size()>0;){var y;if(d=l.removeMin(),c.has(d))s.setEdge(d,c.get(d));else{if(v)throw new Error("Input graph is not connected: "+i.graph());v=!0}(y=i.nodeEdges(d))===null||y===void 0||y.forEach(p)}return s},Cr=er,mr=function(i){var o=new Set,s=[],c=i.nodes();return c.forEach(function(l){for(var d=[],p=[l];p.length>0;){var v=p.pop();if(!o.has(v)){var y,x;o.add(v),d.push(v),(y=i.successors(v))===null||y===void 0||y.forEach(function(E){return p.push(E)}),(x=i.predecessors(v))===null||x===void 0||x.forEach(function(E){return p.push(E)})}}d.length&&s.push(d)}),s},br=mr,Qr=function n(i,o,s,c,l,d){c.includes(o)||(c.push(o),s||d.push(o),l(o).forEach(function(p){return n(i,p,s,c,l,d)}),s&&d.push(o))},hi=function(i,o,s){var c=Array.isArray(o)?o:[o],l=function(y){return i.isDirected()?i.successors(y):i.neighbors(y)},d=[],p=[];return c.forEach(function(v){if(i.hasNode(v))Qr(i,v,s==="post",p,l,d);else throw new Error("Graph does not have node: "+v)}),d},or=hi;function Ei(n,i){return Ci(n)||_s(n,i)||ui(n,i)||Zr()}function Zr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ui(n,i){if(n){if(typeof n=="string")return Dr(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Dr(n,i)}}function Dr(n,i){(i==null||i>n.length)&&(i=n.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=n[o];return s}function _s(n,i){var o=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(o!=null){var s=[],c=!0,l=!1,d,p;try{for(o=o.call(n);!(c=(d=o.next()).done)&&(s.push(d.value),!(i&&s.length===i));c=!0);}catch(v){l=!0,p=v}finally{try{!c&&o.return!=null&&o.return()}finally{if(l)throw p}}return s}}function Ci(n){if(Array.isArray(n))return n}var ti=function(){return 1},Tr=function(i,o,s,c){return Cs(i,o,s||ti,c||function(l){return i.outEdges(l)})},Cs=function(i,o,s,c){var l=new Map,d=new $n,p,v,y=function(_){var T=_.v!==p?_.v:_.w,M=l.get(T),R=s(_),D=v.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+_+" Weight: "+R);D<M.distance&&(M.distance=D,M.predecessor=p,d.decrease(T,D))};for(i.nodes().forEach(function(E){var _=E===o?0:Number.POSITIVE_INFINITY;l.set(E,{distance:_}),d.add(E,_)});d.size()>0&&(p=d.removeMin(),v=l.get(p),!(v&&v.distance===Number.POSITIVE_INFINITY));)c(p).forEach(y);var x={};return Array.from(l.entries()).forEach(function(E){var _=Ei(E,2),T=_[0],M=_[1];return x[String(T)]=M,x}),x},io=Tr,$r=function(i,o,s){var c={};return i.nodes().forEach(function(l){return c[String(l)]=io(i,l,o,s),c}),c},fo=$r,Ho=function(i){var o=0,s=[],c=new Map,l=[];function d(p){var v,y={onStack:!0,lowlink:o,index:o};if(c.set(p,y),o+=1,s.push(p),(v=i.successors(p))===null||v===void 0||v.forEach(function(T){var M;if(c.has(T)){if(!((M=c.get(T))===null||M===void 0)&&M.onStack){var D=c.get(T);y.lowlink=Math.min(y.lowlink,D.index)}}else{d(T);var R=c.get(T);y.lowlink=Math.min(y.lowlink,R.lowlink)}}),y.lowlink===y.index){var x=[],E;do{E=s.pop();var _=c.get(E);_.onStack=!1,x.push(E)}while(p!==E);l.push(x)}}return i.nodes().forEach(function(p){c.has(p)||d(p)}),l},aa=Ho,Hr=function(i){return aa(i).filter(function(o){return o.length>1||o.length===1&&i.hasEdge(o[0],o[0])})},ca=Hr;function ho(n){return ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ho(n)}function xo(n,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function ss(n,i,o){return i&&xo(n.prototype,i),o&&xo(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function js(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function ea(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&Wc(n,i)}function na(n){var i=Nu();return function(){var s=Qa(n),c;if(i){var l=Qa(this).constructor;c=Reflect.construct(s,arguments,l)}else c=s.apply(this,arguments);return as(this,c)}}function as(n,i){if(i&&(ho(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qa(n)}function qa(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wi(n){var i=typeof Map=="function"?new Map:void 0;return wi=function(s){if(s===null||!Ru(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i!="undefined"){if(i.has(s))return i.get(s);i.set(s,c)}function c(){return Ja(s,arguments,Qa(this).constructor)}return c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Wc(c,s)},wi(n)}function Ja(n,i,o){return Nu()?Ja=Reflect.construct:Ja=function(c,l,d){var p=[null];p.push.apply(p,l);var v=Function.bind.apply(c,p),y=new v;return d&&Wc(y,d.prototype),y},Ja.apply(null,arguments)}function Nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ru(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Wc(n,i){return Wc=Object.setPrototypeOf||function(s,c){return s.__proto__=c,s},Wc(n,i)}function Qa(n){return Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qa(n)}var yl=function(n){ea(o,n);var i=na(o);function o(){return js(this,o),i.apply(this,arguments)}return ss(o)}(wi(Error));function Bh(n){var i=new Set,o=new Set,s=[];function c(l){if(o.has(l))throw new yl;if(!i.has(l)){var d;o.add(l),i.add(l),(d=n.predecessors(l))===null||d===void 0||d.forEach(c),o.delete(l),s.push(l)}}if(n.sinks().forEach(c),i.size!==n.nodeCount())throw new yl;return s}var xc=Bh,Du=function(i){try{xc(i)}catch(o){if(o instanceof yl)return!1;throw o}return!0},Lu=Du,wf=function(i,o){return or(i,o,"post")},ua=wf,vi=function(i,o){return or(i,o,"pre")},bl=vi,Sf=function(){return 1};function _f(n,i,o){return xl(n,i||Sf,o||function(s){return n.outEdges(s)})}function xl(n,i,o){var s={},c=n.nodes();return c.forEach(function(l){var d=String(l);s[d]={},s[d][d]={distance:0},c.forEach(function(p){l!==p&&(s[d][String(p)]={distance:Number.POSITIVE_INFINITY})}),o(l).forEach(function(p){var v=p.v===l?p.w:p.v,y=i(p);s[d][String(v)]={distance:y,predecessor:l}})}),c.forEach(function(l){var d=String(l),p=s[d];c.forEach(function(v){var y=String(v),x=s[y];c.forEach(function(E){var _=String(E),T=x[d],M=p[_],R=x[_],D=T.distance+M.distance;D<R.distance&&(R.distance=D,R.predecessor=M.predecessor)})})}),s}var El=_f;function Xc(n,i){return Fu(n)||ku(n,i)||Yc(n,i)||wl()}function wl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yc(n,i){if(n){if(typeof n=="string")return Sl(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Sl(n,i)}}function Sl(n,i){(i==null||i>n.length)&&(i=n.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=n[o];return s}function ku(n,i){var o=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(o!=null){var s=[],c=!0,l=!1,d,p;try{for(o=o.call(n);!(c=(d=o.next()).done)&&(s.push(d.value),!(i&&s.length===i));c=!0);}catch(v){l=!0,p=v}finally{try{!c&&o.return!=null&&o.return()}finally{if(l)throw p}}return s}}function Fu(n){if(Array.isArray(n))return n}function Kc(n){return n instanceof Graph}function Oa(n){if(n.isMultigraph())return!1;for(var i=n.edges(),o=new Map,s=0;s<i.length;s++){var c=i[s];if(c.v===c.w)return!1;var l=[c.v,c.w].sort(),d=Xc(l,2),p=d[0],v=d[1],y="".concat(p,"-").concat(v);if(o.has(y))return!1;o.set(y,!0)}return!0}function Cf(n){return n.nodes().length===0}function Bu(n){for(var i=n.edges(),o=0;o<i.length;o++){var s=i[o];if(s.v===s.w)return!0}return!1}var _l=function(i,o){if(!isSimpleGraph(i)||!isSimpleGraph(o)||!containAllSameNodes(i,o)||containSameEdges(i,o))return!1;var s=i.nodeCount();return i.edgeCount()+o.edgeCount()===s*(s-1)/2},qc=function(i){if(!isSimpleGraph(i))return null;for(var o=i.nodeCount(),s=new Graph({compound:i.isCompound(),directed:i.isDirected(),multigraph:i.isMultigraph()}),c=i.nodes(),l=0;l<o;l++){var d=c[l];s.setNode(d,i.node(d));for(var p=l+1;p<o;p++){var v=c[p];i.hasEdge(d,v)||s.setEdge(d,v)}}return s};class Gh extends ws{}class Cl extends os{}const zh=()=>1,Tl=(n,i)=>{var o;if(n.nodeCount()<=1)return[];const s=Al(n,i||zh);return(o=Gu(s.graph,s.buckets,s.zeroIdx).map(l=>n.outEdges(l.v,l.w)))===null||o===void 0?void 0:o.flat()},Gu=(n,i,o)=>{let s=[];const c=i[i.length-1],l=i[0];let d;for(;n.nodeCount();){for(;d=l.dequeue();)Us(n,i,o,d);for(;d=c.dequeue();)Us(n,i,o,d);if(n.nodeCount()){for(let p=i.length-2;p>0;--p)if(d=i[p].dequeue(),d){s=s.concat(Us(n,i,o,d,!0));break}}}return s},Us=(n,i,o,s,c)=>{var l,d;const p=[];return(l=n.inEdges(s.v))===null||l===void 0||l.forEach(v=>{const y=n.edge(v),x=n.node(v.v);c&&p.push({v:v.v,w:v.w,in:0,out:0}),x.out===void 0&&(x.out=0),x.out-=y,Ec(i,o,x)}),(d=n.outEdges(s.v))===null||d===void 0||d.forEach(v=>{const y=n.edge(v),x=v.w,E=n.node(x);E.in===void 0&&(E.in=0),E.in-=y,Ec(i,o,E)}),n.removeNode(s.v),c?p:void 0},Al=(n,i)=>{const o=new Cl;let s=0,c=0;n.nodes().forEach(v=>{o.setNode(v,{v,in:0,out:0})}),n.edges().forEach(v=>{const y=o.edge(v)||0,x=(i==null?void 0:i(v))||1,E=y+x;o.setEdge(v.v,v.w,E),c=Math.max(c,o.node(v.v).out+=x),s=Math.max(s,o.node(v.w).in+=x)});const l=[],d=c+s+3;for(let v=0;v<d;v++)l.push(new Gh);const p=s+1;return o.nodes().forEach(v=>{Ec(l,p,o.node(v))}),{buckets:l,zeroIdx:p,graph:o}},Ec=(n,i,o)=>{o.out?o.in?n[o.out-o.in+i].enqueue(o):n[n.length-1].enqueue(o):n[0].enqueue(o)};var cs=Tl;const jh=n=>{const i=s=>c=>{var l;return((l=s.edge(c))===null||l===void 0?void 0:l.weight)||1},o=n.graph().acyclicer==="greedy"?cs(n,i(n)):Ol(n);o==null||o.forEach(s=>{const c=n.edge(s);n.removeEdgeObj(s),c.forwardName=s.name,c.reversed=!0,n.setEdge(s.w,s.v,c,`rev-${Math.random()}`)})},Ol=n=>{const i=[],o={},s={},c=l=>{var d;s[l]||(s[l]=!0,o[l]=!0,(d=n.outEdges(l))===null||d===void 0||d.forEach(p=>{o[p.w]?i.push(p):c(p.w)}),delete o[l])};return n.nodes().forEach(c),i};var Jc={run:jh,undo:n=>{n.edges().forEach(i=>{const o=n.edge(i);if(o.reversed){n.removeEdgeObj(i);const s=o.forwardName;delete o.reversed,delete o.forwardName,n.setEdge(i.w,i.v,o,s)}})}};class la extends os{}const Uh=(n,i)=>Number(n)-Number(i),wc=(n,i,o,s)=>{let c;do c=`${s}${Math.random()}`;while(n.hasNode(c));return o.dummy=i,n.setNode(c,o),c},Vh=n=>{const i=new la().setGraph(n.graph());return n.nodes().forEach(o=>{i.setNode(o,n.node(o))}),n.edges().forEach(o=>{const s=i.edgeFromArgs(o.v,o.w)||{weight:0,minlen:1},c=n.edge(o);i.setEdge(o.v,o.w,{weight:s.weight+c.weight,minlen:Math.max(s.minlen,c.minlen)})}),i},Tf=n=>{const i=new la({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(o=>{var s;!((s=n.children(o))===null||s===void 0)&&s.length||i.setNode(o,n.node(o))}),n.edges().forEach(o=>{i.setEdgeObj(o,n.edge(o))}),i},Af=(n,i)=>n==null?void 0:n.reduce((o,s,c)=>(o[s]=i[c],o),{}),Zh=n=>{const i={};return n.nodes().forEach(o=>{var s;const c={};(s=n.outEdges(o))===null||s===void 0||s.forEach(l=>{var d;c[l.w]=(c[l.w]||0)+(((d=n.edge(l))===null||d===void 0?void 0:d.weight)||0)}),i[o]=c}),i},tc=n=>{const i=n.nodes(),o=i.map(s=>{var c;const l={};return(c=n.inEdges(s))===null||c===void 0||c.forEach(d=>{l[d.v]=(l[d.v]||0)+n.edge(d).weight}),l});return Af(i,o)},ec=(n,i)=>{const o=Number(n.x),s=Number(n.y),c=Number(i.x)-o,l=Number(i.y)-s;let d=Number(n.width)/2,p=Number(n.height)/2;if(!c&&!l)return{x:0,y:0};let v,y;return Math.abs(l)*d>Math.abs(c)*p?(l<0&&(p=-p),v=p*c/l,y=p):(c<0&&(d=-d),v=d,y=d*l/c),{x:o+v,y:s+y}},nc=n=>{const i=[],o=Ml(n)+1;for(let s=0;s<o;s++)i.push([]);n.nodes().forEach(s=>{const c=n.node(s);if(!c)return;const l=c.rank;l!==void 0&&i[l]&&i[l].push(s)});for(let s=0;s<o;s++)i[s]=i[s].sort((c,l)=>{var d,p;return Uh((d=n.node(c))===null||d===void 0?void 0:d.order,(p=n.node(l))===null||p===void 0?void 0:p.order)});return i},Qc=n=>{const i=n.nodes().filter(s=>{var c;return((c=n.node(s))===null||c===void 0?void 0:c.rank)!==void 0}).map(s=>n.node(s).rank),o=Math.min(...i);n.nodes().forEach(s=>{const c=n.node(s);c.hasOwnProperty("rank")&&o!==1/0&&(c.rank-=o)})},Ts=n=>{const i=n.nodes(),o=i.filter(p=>{var v;return((v=n.node(p))===null||v===void 0?void 0:v.rank)!==void 0}).map(p=>n.node(p).rank),s=Math.min(...o),c=[];i.forEach(p=>{var v;const y=(((v=n.node(p))===null||v===void 0?void 0:v.rank)||0)-s;c[y]||(c[y]=[]),c[y].push(p)});let l=0;const d=n.graph().nodeRankFactor||0;for(let p=0;p<c.length;p++){const v=c[p];v===void 0?p%d!==0&&(l-=1):l&&(v==null||v.forEach(y=>{const x=n.node(y);x&&(x.rank=x.rank||0,x.rank+=l)}))}},rc=(n,i,o,s)=>{const c={width:0,height:0};return K(o)&&K(s)&&(c.rank=o,c.order=s),wc(n,"border",c,i)},Ml=n=>{let i;return n.nodes().forEach(o=>{var s;const c=(s=n.node(o))===null||s===void 0?void 0:s.rank;c!==void 0&&(i===void 0||c>i)&&(i=c)}),i||(i=0),i},Of=(n,i)=>{const o={lhs:[],rhs:[]};return n==null||n.forEach(s=>{i(s)?o.lhs.push(s):o.rhs.push(s)}),o},zu=(n,i)=>{const o=Date.now();try{return i()}finally{console.log(`${n} time: ${Date.now()-o}ms`)}},Il=(n,i)=>i(),tu=(n,i)=>n.reduce((o,s)=>{const c=i(o),l=i(s);return c>l?s:o}),Mf=n=>{n.graph().dummyChains=[],n.edges().forEach(i=>If(n,i))},If=(n,i)=>{let o=i.v,s=n.node(o).rank;const c=i.w,l=n.node(c).rank,d=i.name,p=n.edge(i),v=p.labelRank;if(l===s+1)return;n.removeEdgeObj(i);const y=n.graph();let x,E,_;for(_=0,++s;s<l;++_,++s)p.points=[],E={edgeLabel:p,width:0,height:0,edgeObj:i,rank:s},x=wc(n,"edge",E,"_d"),s===v&&(E.width=p.width,E.height=p.height,E.dummy="edge-label",E.labelpos=p.labelpos),n.setEdge(o,x,{weight:p.weight},d),_===0&&(y.dummyChains||(y.dummyChains=[]),y.dummyChains.push(x)),o=x;n.setEdge(o,c,{weight:p.weight},d)};var Gi={run:Mf,undo:n=>{var i;(i=n.graph().dummyChains)===null||i===void 0||i.forEach(o=>{let s=n.node(o);const c=s.edgeLabel;let l;s.edgeObj&&n.setEdgeObj(s.edgeObj,c);let d=o;for(;s.dummy;)l=n.successors(d)[0],n.removeNode(d),c.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(c.x=s.x,c.y=s.y,c.width=s.width,c.height=s.height),d=l,s=n.node(d)})}};const fa=n=>{var i;const o={},s=c=>{var l;const d=n.node(c);if(!d)return 0;if(o[c])return d.rank;o[c]=!0;let p;return(l=n.outEdges(c))===null||l===void 0||l.forEach(v=>{const y=s(v.w),x=n.edge(v).minlen,E=y-x;E&&(p===void 0||E<p)&&(p=E)}),p||(p=0),d.rank=p,p};(i=n.sources())===null||i===void 0||i.forEach(c=>s(c))},Pl=n=>{var i;const o={};let s;const c=p=>{var v;const y=n.node(p);if(!y)return 0;if(o[p])return y.rank;o[p]=!0;let x;return(v=n.outEdges(p))===null||v===void 0||v.forEach(E=>{const _=c(E.w),T=n.edge(E).minlen,M=_-T;M&&(x===void 0||M<x)&&(x=M)}),x||(x=0),(s===void 0||x<s)&&(s=x),y.rank=x,x};(i=n.sources())===null||i===void 0||i.forEach(p=>{n.node(p)&&c(p)}),s===void 0&&(s=0);const l={},d=(p,v)=>{var y;const x=n.node(p),E=isNaN(x.layer)?v:x.layer;(x.rank===void 0||x.rank<E)&&(x.rank=E),!l[p]&&(l[p]=!0,(y=n.outEdges(p))===null||y===void 0||y.map(_=>{d(_.w,E+n.edge(_).minlen)}))};n.nodes().forEach(p=>{const v=n.node(p);v&&(isNaN(v.layer)?v.rank-=s:d(p,v.layer))})},Oo=(n,i)=>n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen;var $h={longestPath:fa,longestPathWithLayer:Pl,slack:Oo};const Nl=n=>{const i=new la({directed:!1}),o=n.nodes()[0],s=n.nodeCount();i.setNode(o,{});let c,l;for(;Hh(i,n)<s;)c=Pf(i,n),l=i.hasNode(c.v)?Oo(n,c):-Oo(n,c),ju(i,n,l);return i},Hh=(n,i)=>{const o=s=>{i.nodeEdges(s).forEach(c=>{const l=c.v,d=s===l?c.w:l;!n.hasNode(d)&&!Oo(i,c)&&(n.setNode(d,{}),n.setEdge(s,d,{}),o(d))})};return n.nodes().forEach(o),n.nodeCount()},nu=n=>{const i=new la({directed:!1}),o=n.nodes()[0],s=n.nodes().filter(d=>!!n.node(d)).length;i.setNode(o,{});let c,l;for(;Wh(i,n)<s;)c=Pf(i,n),l=i.hasNode(c.v)?Oo(n,c):-Oo(n,c),ju(i,n,l);return i},Wh=(n,i)=>{const o=s=>{var c;(c=i.nodeEdges(s))===null||c===void 0||c.forEach(l=>{const d=l.v,p=s===d?l.w:d;!n.hasNode(p)&&(i.node(p).layer!==void 0||!Oo(i,l))&&(n.setNode(p,{}),n.setEdge(s,p,{}),o(p))})};return n.nodes().forEach(o),n.nodeCount()},Pf=(n,i)=>tu(i.edges(),o=>n.hasNode(o.v)!==n.hasNode(o.w)?Oo(i,o):1/0),ju=(n,i,o)=>{n.nodes().forEach(s=>{i.node(s).rank||(i.node(s).rank=0),i.node(s).rank+=o})};var Xh={feasibleTree:Nl,feasibleTreeWithLayer:nu};const{preorder:Nf,postorder:Rl}=V,Rf=n=>{const i=Vh(n);fa(i);const o=Nl(i);As(o),us(o,i);let s,c;for(;s=Dl(o);)c=iu(o,i,s),Df(o,i,s,c)},us=(n,i)=>{let o=Rl(n,n.nodes());o=o==null?void 0:o.slice(0,(o==null?void 0:o.length)-1),o==null||o.forEach(s=>{ra(n,i,s)})},ra=(n,i,o)=>{const c=n.node(o).parent;n.edgeFromArgs(o,c).cutvalue=ru(n,i,o)},ru=(n,i,o)=>{var s;const l=n.node(o).parent;let d=!0,p=i.edgeFromArgs(o,l),v=0;return p||(d=!1,p=i.edgeFromArgs(l,o)),v=p.weight,(s=i.nodeEdges(o))===null||s===void 0||s.forEach(y=>{const x=y.v===o,E=x?y.w:y.v;if(E!==l){const _=x===d,T=i.edge(y).weight;if(v+=_?T:-T,Ll(n,o,E)){const M=n.edgeFromArgs(o,E).cutvalue;v+=_?-M:M}}}),v},As=(n,i=n.nodes()[0])=>{Sc(n,{},1,i)},Sc=(n,i,o,s,c)=>{var l;const d=o;let p=o;const v=n.node(s);return i[s]=!0,(l=n.neighbors(s))===null||l===void 0||l.forEach(y=>{i[y]||(p=Sc(n,i,p,y,s))}),v.low=d,v.lim=p++,c?v.parent=c:delete v.parent,p},Dl=n=>n.edges().find(i=>n.edge(i).cutvalue<0),iu=(n,i,o)=>{let s=o.v,c=o.w;i.hasEdge(s,c)||(s=o.w,c=o.v);const l=n.node(s),d=n.node(c);let p=l,v=!1;l.lim>d.lim&&(p=d,v=!0);const y=i.edges().filter(x=>v===kl(n,n.node(x.v),p)&&v!==kl(n,n.node(x.w),p));return tu(y,x=>Oo(i,x))},Df=(n,i,o,s)=>{const c=o.v,l=o.w;n.removeEdge(c,l),n.setEdge(s.v,s.w,{}),As(n),us(n,i),Lf(n,i)},Lf=(n,i)=>{const o=n.nodes().find(c=>{var l;return!(!((l=i.node(c))===null||l===void 0)&&l.parent)});let s=Nf(n,o);s=s==null?void 0:s.slice(1),s==null||s.forEach(c=>{const l=n.node(c).parent;let d=i.edgeFromArgs(c,l),p=!1;d||(d=i.edgeFromArgs(l,c),p=!0),i.node(c).rank=i.node(l).rank+(p?d.minlen:-d.minlen)})},Ll=(n,i,o)=>n.hasEdge(i,o),kl=(n,i,o)=>o.low<=i.lim&&i.lim<=o.lim;var kf=Rf;const Yh=n=>{switch(n.graph().ranker){case"network-simplex":Kh(n);break;case"tight-tree":Os(n);break;case"longest-path":Fl(n);break;default:Os(n)}},Fl=fa,Os=n=>{Pl(n),nu(n)},Kh=n=>{kf(n)};var qd=Yh;const ha=n=>{var i;const o={};let s=0;const c=l=>{var d;const p=s;(d=n.children(l))===null||d===void 0||d.forEach(c),o[l]={low:p,lim:s++}};return(i=n.children())===null||i===void 0||i.forEach(c),o},z=(n,i,o,s)=>{const c=[],l=[],d=Math.min(i[o].low,i[s].low),p=Math.max(i[o].lim,i[s].lim);let v,y;v=o;do v=n.parent(v),c.push(v);while(v&&(i[v].low>d||p>i[v].lim));for(y=v,v=s;v&&v!==y;)l.push(v),v=n.parent(v);return{lca:y,path:c.concat(l.reverse())}};var I=n=>{var i;const o=ha(n);(i=n.graph().dummyChains)===null||i===void 0||i.forEach(s=>{var c,l;let d=s,p=n.node(d);const v=p.edgeObj;if(!v)return;const y=z(n,o,v.v,v.w),x=y.path,E=y.lca;let _=0,T=x[_],M=!0;for(;d!==v.w;){if(p=n.node(d),M){for(;T!==E&&((c=n.node(T))===null||c===void 0?void 0:c.maxRank)<p.rank;)_++,T=x[_];T===E&&(M=!1)}if(!M){for(;_<x.length-1&&((l=n.node(x[_+1]))===null||l===void 0?void 0:l.minRank)<=p.rank;)_++;T=x[_]}n.setParent(d,T),d=n.successors(d)[0]}})};const G=n=>{var i;const o=wc(n,"root",{},"_root"),s=st(n);let c=Math.max(...Object.values(s));Math.abs(c)===1/0&&(c=1);const l=c-1,d=2*l+1;n.graph().nestingRoot=o,n.edges().forEach(v=>{n.edge(v).minlen*=d});const p=at(n)+1;(i=n.children())===null||i===void 0||i.forEach(v=>{F(n,o,d,p,l,s,v)}),n.graph().nodeRankFactor=d},F=(n,i,o,s,c,l,d)=>{const p=n.children(d);if(!(p!=null&&p.length)){d!==i&&n.setEdge(i,d,{weight:0,minlen:o});return}const v=rc(n,"_bt"),y=rc(n,"_bb"),x=n.node(d);n.setParent(v,d),x.borderTop=v,n.setParent(y,d),x.borderBottom=y,p==null||p.forEach(E=>{F(n,i,o,s,c,l,E);const _=n.node(E),T=_.borderTop?_.borderTop:E,M=_.borderBottom?_.borderBottom:E,R=_.borderTop?s:2*s,D=T!==M?1:c-l[d]+1;n.setEdge(v,T,{minlen:D,weight:R,nestingEdge:!0}),n.setEdge(M,y,{minlen:D,weight:R,nestingEdge:!0})}),n.parent(d)||n.setEdge(i,v,{weight:0,minlen:c+l[d]})},st=n=>{var i;const o={},s=(c,l)=>{const d=n.children(c);d==null||d.forEach(p=>s(p,l+1)),o[c]=l};return(i=n.children())===null||i===void 0||i.forEach(c=>s(c,1)),o},at=n=>{let i=0;return n.edges().forEach(o=>{i+=n.edge(o).weight}),i};var It={run:G,cleanup:n=>{const i=n.graph();i.nestingRoot&&n.removeNode(i.nestingRoot),delete i.nestingRoot,n.edges().forEach(o=>{n.edge(o).nestingEdge&&n.removeEdgeObj(o)})}};const Wt=n=>{var i;const o=s=>{const c=n.children(s),l=n.node(s);if(c!=null&&c.length&&c.forEach(d=>o(d)),l.hasOwnProperty("minRank")){l.borderLeft=[],l.borderRight=[];for(let d=l.minRank,p=l.maxRank+1;d<p;d+=1)re(n,"borderLeft","_bl",s,l,d),re(n,"borderRight","_br",s,l,d)}};(i=n.children())===null||i===void 0||i.forEach(s=>o(s))},re=(n,i,o,s,c,l)=>{const d={rank:l,borderType:i,width:0,height:0},p=c[i][l-1],v=wc(n,"border",d,o);c[i][l]=v,n.setParent(v,s),p&&n.setEdge(p,v,{weight:1})};var he=Wt;const Se=n=>{var i;const o=(i=n.graph().rankdir)===null||i===void 0?void 0:i.toLowerCase();(o==="lr"||o==="rl")&&hn(n)},Mn=n=>{var i;const o=(i=n.graph().rankdir)===null||i===void 0?void 0:i.toLowerCase();(o==="bt"||o==="rl")&&Ue(n),(o==="lr"||o==="rl")&&(fn(n),hn(n))},hn=n=>{n.nodes().forEach(i=>{ze(n.node(i))}),n.edges().forEach(i=>{ze(n.edge(i))})},ze=n=>{const i=n.width;n.width=n.height,n.height=i},Ue=n=>{n.nodes().forEach(i=>{Te(n.node(i))}),n.edges().forEach(i=>{var o;const s=n.edge(i);(o=s.points)===null||o===void 0||o.forEach(c=>Te(c)),s.hasOwnProperty("y")&&Te(s)})},Te=n=>{n!=null&&n.y&&(n.y=-n.y)},fn=n=>{n.nodes().forEach(i=>{We(n.node(i))}),n.edges().forEach(i=>{var o;const s=n.edge(i);(o=s.points)===null||o===void 0||o.forEach(c=>We(c)),s.hasOwnProperty("x")&&We(s)})},We=n=>{const i=n.x;n.x=n.y,n.y=i};var sn={adjust:Se,undo:Mn},Fn={}.toString,an=function(n,i){return Fn.call(n)==="[object "+i+"]"},In=an,sr=function(n){return Array.isArray?Array.isArray(n):In(n,"Array")},dr=function(n){if(sr(n))return n.reduce(function(i,o){return Math.max(i,o)},n[0])},Ar=n=>{const i={},o=n.nodes().filter(x=>{var E;return!(!((E=n.children(x))===null||E===void 0)&&E.length)}),s=o.map(x=>n.node(x).rank),c=dr(s),l=[];for(let x=0;x<c+1;x++)l.push([]);const d=x=>{var E;if(i.hasOwnProperty(x))return;i[x]=!0;const _=n.node(x);isNaN(_.rank)||l[_.rank].push(x),(E=n.successors(x))===null||E===void 0||E.forEach(T=>d(T))},p=o.sort((x,E)=>n.node(x).rank-n.node(E).rank),y=p.filter(x=>n.node(x).fixorder!==void 0).sort((x,E)=>n.node(x).fixorder-n.node(E).fixorder);return y==null||y.forEach(x=>{isNaN(n.node(x).rank)||l[n.node(x).rank].push(x),i[x]=!0}),p==null||p.forEach(d),l};const rr=(n,i,o)=>{const s=Af(o,o.map((x,E)=>E)),l=i.map(x=>{var E;const _=(E=n.outEdges(x))===null||E===void 0?void 0:E.map(T=>({pos:s[T.w]||0,weight:n.edge(T).weight}));return _==null?void 0:_.sort((T,M)=>T.pos-M.pos)}).flat().filter(x=>x!==void 0);let d=1;for(;d<o.length;)d<<=1;const p=2*d-1;d-=1;const v=Array(p).fill(0,0,p);let y=0;return l==null||l.forEach(x=>{if(x){let E=x.pos+d;v[E]+=x.weight;let _=0;for(;E>0;)E%2&&(_+=v[E+1]),E=E-1>>1,v[E]+=x.weight;y+=x.weight*_}}),y};var Rr=(n,i)=>{let o=0;for(let s=1;s<(i==null?void 0:i.length);s+=1)o+=rr(n,i[s-1],i[s]);return o};const Pi=(n,i,o)=>{const s=Mo(n),c=new la({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(l=>n.node(l));return n.nodes().forEach(l=>{var d;const p=n.node(l),v=n.parent(l);(p.rank===i||p.minRank<=i&&i<=p.maxRank)&&(c.setNode(l),c.setParent(l,v||s),(d=n[o](l))===null||d===void 0||d.forEach(y=>{const x=y.v===l?y.w:y.v,E=c.edgeFromArgs(x,l),_=E!==void 0?E.weight:0;c.setEdge(x,l,{weight:n.edge(y).weight+_})}),p.hasOwnProperty("minRank")&&c.setNode(l,{borderLeft:p.borderLeft[i],borderRight:p.borderRight[i]}))}),c},Mo=n=>{let i;for(;n.hasNode(i=`_root${Math.random()}`););return i};var Ma=Pi,Ff=(n,i,o)=>{const s={};let c;o==null||o.forEach(l=>{let d=n.parent(l),p,v;for(;d;){if(p=n.parent(d),p?(v=s[p],s[p]=d):(v=c,c=d),v&&v!==d){i.setEdge(v,d);return}d=p}})},zl=(n,i)=>i.map(o=>{const s=n.inEdges(o);if(!(s!=null&&s.length))return{v:o};{const c={sum:0,weight:0};return s==null||s.forEach(l=>{const d=n.edge(l),p=n.node(l.v);c.sum+=d.weight*p.order,c.weight+=d.weight}),{v:o,barycenter:c.sum/c.weight,weight:c.weight}}});const Ms=(n,i)=>{var o,s,c;const l={};n==null||n.forEach((p,v)=>{l[p.v]={i:v,indegree:0,in:[],out:[],vs:[p.v]};const y=l[p.v];p.barycenter!==void 0&&(y.barycenter=p.barycenter,y.weight=p.weight)}),(o=i.edges())===null||o===void 0||o.forEach(p=>{const v=l[p.v],y=l[p.w];v!==void 0&&y!==void 0&&(y.indegree++,v.out.push(l[p.w]))});const d=(c=(s=Object.values(l)).filter)===null||c===void 0?void 0:c.call(s,p=>!p.indegree);return ic(d)},ic=n=>{var i,o;const s=[],c=v=>y=>{y.merged||(y.barycenter===void 0||v.barycenter===void 0||y.barycenter>=v.barycenter)&&jl(v,y)},l=v=>y=>{y.in.push(v),--y.indegree===0&&n.push(y)};for(;n!=null&&n.length;){const v=n.pop();s.push(v),(i=v.in.reverse())===null||i===void 0||i.forEach(y=>c(v)(y)),(o=v.out)===null||o===void 0||o.forEach(y=>l(v)(y))}const d=s.filter(v=>!v.merged),p=["vs","i","barycenter","weight"];return d.map(v=>{const y={};return p==null||p.forEach(x=>{v[x]!==void 0&&(y[x]=v[x])}),y})},jl=(n,i)=>{var o;let s=0,c=0;n.weight&&(s+=n.barycenter*n.weight,c+=n.weight),i.weight&&(s+=i.barycenter*i.weight,c+=i.weight),n.vs=(o=i.vs)===null||o===void 0?void 0:o.concat(n.vs),n.barycenter=s/c,n.weight=c,n.i=Math.min(i.i,n.i),i.merged=!0};var Uu=Ms;const fp=(n,i,o,s)=>{const c=Of(n,_=>{const T=_.hasOwnProperty("fixorder")&&!isNaN(_.fixorder);return s?!T&&_.hasOwnProperty("barycenter"):T||_.hasOwnProperty("barycenter")}),l=c.lhs,d=c.rhs.sort((_,T)=>-_.i- -T.i),p=[];let v=0,y=0,x=0;l==null||l.sort(Ul(!!i,!!o)),x=Jd(p,d,x),l==null||l.forEach(_=>{var T;x+=(T=_.vs)===null||T===void 0?void 0:T.length,p.push(_.vs),v+=_.barycenter*_.weight,y+=_.weight,x=Jd(p,d,x)});const E={vs:p.flat()};return y&&(E.barycenter=v/y,E.weight=y),E},Jd=(n,i,o)=>{let s=o,c;for(;i.length&&(c=i[i.length-1]).i<=s;)i.pop(),n==null||n.push(c.vs),s++;return s},Ul=(n,i)=>(o,s)=>{if(o.fixorder!==void 0&&s.fixorder!==void 0)return o.fixorder-s.fixorder;if(o.barycenter<s.barycenter)return-1;if(o.barycenter>s.barycenter)return 1;if(i&&o.order!==void 0&&s.order!==void 0){if(o.order<s.order)return-1;if(o.order>s.order)return 1}return n?s.i-o.i:o.i-s.i};var hp=fp;const Vl=(n,i,o,s,c,l)=>{var d,p,v,y;let x=n.children(i);const E=n.node(i),_=E?E.borderLeft:void 0,T=E?E.borderRight:void 0,M={};_&&(x=x==null?void 0:x.filter(L=>L!==_&&L!==T));const R=zl(n,x||[]);R==null||R.forEach(L=>{var U;if(!((U=n.children(L.v))===null||U===void 0)&&U.length){const W=Vl(n,L.v,o,s,l);M[L.v]=W,W.hasOwnProperty("barycenter")&&Vu(L,W)}});const D=Uu(R,o);dp(D,M),(d=D.filter(L=>L.vs.length>0))===null||d===void 0||d.forEach(L=>{const U=n.node(L.vs[0]);U&&(L.fixorder=U.fixorder,L.order=U.order)});const k=hp(D,s,c,l);if(_&&(k.vs=[_,k.vs,T].flat(),!((p=n.predecessors(_))===null||p===void 0)&&p.length)){const L=n.node(((v=n.predecessors(_))===null||v===void 0?void 0:v[0])||""),U=n.node(((y=n.predecessors(T))===null||y===void 0?void 0:y[0])||"");k.hasOwnProperty("barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+L.order+U.order)/(k.weight+2),k.weight+=2}return k},dp=(n,i)=>{n==null||n.forEach(o=>{var s;const c=(s=o.vs)===null||s===void 0?void 0:s.map(l=>i[l]?i[l].vs:l);o.vs=c.flat()})},Vu=(n,i)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+i.barycenter*i.weight)/(n.weight+i.weight),n.weight+=i.weight):(n.barycenter=i.barycenter,n.weight=i.weight)};var Zu=Vl;const gp=(n,i)=>{const o=Ml(n),s=[],c=[];for(let x=1;x<o+1;x++)s.push(x);for(let x=o-1;x>-1;x--)c.push(x);const l=ou(n,s,"inEdges"),d=ou(n,c,"outEdges");let p=Ar(n);_c(n,p);let v=Number.POSITIVE_INFINITY,y;for(let x=0,E=0;E<4;++x,++E){su(x%2?l:d,x%4>=2,!1,i),p=nc(n);const _=Rr(n,p);_<v&&(E=0,y=$t(p),v=_)}p=Ar(n),_c(n,p);for(let x=0,E=0;E<4;++x,++E){su(x%2?l:d,x%4>=2,!0,i),p=nc(n);const _=Rr(n,p);_<v&&(E=0,y=$t(p),v=_)}_c(n,y)},ou=(n,i,o)=>i.map(s=>Ma(n,s,o)),su=(n,i,o,s)=>{const c=new la;n==null||n.forEach(l=>{var d;const p=l.graph().root,v=Zu(l,p,c,i,o,s);for(let y=0;y<((d=v.vs)===null||d===void 0?void 0:d.length);y++){const x=l.node(v.vs[y]);x&&(x.order=y)}Ff(l,c,v.vs)})},_c=(n,i)=>{i==null||i.forEach(o=>{o==null||o.forEach((s,c)=>{n.node(s).order=c})})};var qh=gp,Jh=function(n){if(sr(n))return n.reduce(function(i,o){return Math.min(i,o)},n[0])};class Qh extends os{}const Bf=(n,i)=>{const o={},s=(c,l)=>{let d=0,p=0;const v=c.length,y=l==null?void 0:l[(l==null?void 0:l.length)-1];return l==null||l.forEach((x,E)=>{var _;const T=zf(n,x),M=T?n.node(T).order:v;(T||x===y)&&((_=l.slice(p,E+1))===null||_===void 0||_.forEach(R=>{var D;(D=n.predecessors(R))===null||D===void 0||D.forEach(k=>{var L;const U=n.node(k),W=U.order;(W<d||M<W)&&!(U.dummy&&(!((L=n.node(R))===null||L===void 0)&&L.dummy))&&td(o,k,R)})}),p=E+1,d=M)}),l};return i!=null&&i.length&&i.reduce(s),o},Gf=(n,i)=>{const o={};function s(p,v,y,x,E){var _,T;let M;for(let R=v;R<y;R++)M=p[R],!((_=n.node(M))===null||_===void 0)&&_.dummy&&((T=n.predecessors(M))===null||T===void 0||T.forEach(D=>{const k=n.node(D);k.dummy&&(k.order<x||k.order>E)&&td(o,D,M)}))}function c(p){return JSON.stringify(p.slice(1))}function l(p,v){const y=c(p);v.get(y)||(s(...p),v.set(y,!0))}const d=(p,v)=>{let y=-1,x,E=0;const _=new Map;return v==null||v.forEach((T,M)=>{var R;if(((R=n.node(T))===null||R===void 0?void 0:R.dummy)==="border"){const D=n.predecessors(T)||[];D.length&&(x=n.node(D[0]).order,l([v,E,M,y,x],_),E=M,y=x)}l([v,E,v.length,x,p.length],_)}),v};return i!=null&&i.length&&i.reduce(d),o},zf=(n,i)=>{var o,s;if(!((o=n.node(i))===null||o===void 0)&&o.dummy)return(s=n.predecessors(i))===null||s===void 0?void 0:s.find(c=>n.node(c).dummy)},td=(n,i,o)=>{let s=i,c=o;if(s>c){const d=s;s=c,c=d}let l=n[s];l||(n[s]=l={}),l[c]=!0},Qd=(n,i,o)=>{let s=i,c=o;if(s>c){const l=i;s=c,c=l}return!!n[s]},ed=(n,i,o,s)=>{const c={},l={},d={};return i==null||i.forEach(p=>{p==null||p.forEach((v,y)=>{c[v]=v,l[v]=v,d[v]=y})}),i==null||i.forEach(p=>{let v=-1;p==null||p.forEach(y=>{let x=s(y);if(x.length){x=x.sort((_,T)=>d[_]-d[T]);const E=(x.length-1)/2;for(let _=Math.floor(E),T=Math.ceil(E);_<=T;++_){const M=x[_];l[y]===y&&v<d[M]&&!Qd(o,y,M)&&(l[M]=y,l[y]=c[y]=c[M],v=d[M])}}})}),{root:c,align:l}},nd=(n,i,o,s,c)=>{var l;const d={},p=tg(n,i,o,c),v=c?"borderLeft":"borderRight",y=(_,T)=>{let M=p.nodes(),R=M.pop();const D={};for(;R;)D[R]?_(R):(D[R]=!0,M.push(R),M=M.concat(T(R))),R=M.pop()},x=_=>{d[_]=(p.inEdges(_)||[]).reduce((T,M)=>Math.max(T,(d[M.v]||0)+p.edge(M)),0)},E=_=>{const T=(p.outEdges(_)||[]).reduce((R,D)=>Math.min(R,(d[D.w]||0)-p.edge(D)),Number.POSITIVE_INFINITY),M=n.node(_);T!==Number.POSITIVE_INFINITY&&M.borderType!==v&&(d[_]=Math.max(d[_],T))};return y(x,p.predecessors.bind(p)),y(E,p.successors.bind(p)),(l=Object.values(s))===null||l===void 0||l.forEach(_=>{d[_]=d[o[_]]}),d},tg=(n,i,o,s)=>{const c=new Qh,l=n.graph(),d=eg(l.nodesep,l.edgesep,s);return i==null||i.forEach(p=>{let v;p==null||p.forEach(y=>{const x=o[y];if(c.setNode(x),v){const E=o[v],_=c.edgeFromArgs(E,x);c.setEdge(E,x,Math.max(d(n,y,v),_||0))}v=y})}),c},jf=(n,i)=>tu(Object.values(i),o=>{var s;let c=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;return(s=Object.keys(o))===null||s===void 0||s.forEach(d=>{const p=o[d],v=ng(n,d)/2;c=Math.max(p+v,c),l=Math.min(p-v,l)}),c-l});function Uf(n,i){const o=Object.values(i),s=Jh(o),c=dr(o);["u","d"].forEach(l=>{["l","r"].forEach(d=>{const p=l+d,v=n[p];let y;if(v===i)return;const x=Object.values(v);y=d==="l"?s-Jh(x):c-dr(x),y&&(n[p]={},Object.keys(v).forEach(E=>{n[p][E]=v[E]+y}))})})}const rd=(n,i)=>{const o={};return Object.keys(n.ul).forEach(s=>{if(i)o[s]=n[i.toLowerCase()][s];else{const c=Object.values(n).map(l=>l[s]);o[s]=(c[0]+c[1])/2}}),o},pp=n=>{const i=buildLayerMatrix(n),o=Object.assign(Bf(n,i),Gf(n,i)),s={};let c;["u","d"].forEach(d=>{c=d==="u"?i:Object.values(i).reverse(),["l","r"].forEach(p=>{p==="r"&&(c=c.map(E=>Object.values(E).reverse()));const v=(d==="u"?n.predecessors:n.successors).bind(n),y=ed(n,c,o,v),x=nd(n,c,y.root,y.align,p==="r");p==="r"&&Object.keys(x).forEach(E=>{x[E]=-x[E]}),s[d+p]=x})});const l=jf(n,s);return Uf(s,l),rd(s,n.graph().align)},eg=(n,i,o)=>(s,c,l)=>{const d=s.node(c),p=s.node(l);let v=0,y;if(v+=d.width/2,d.hasOwnProperty("labelpos"))switch((d.labelpos||"").toLowerCase()){case"l":y=-d.width/2;break;case"r":y=d.width/2;break}if(y&&(v+=o?y:-y),y=0,v+=(d.dummy?i:n)/2,v+=(p.dummy?i:n)/2,v+=p.width/2,p.labelpos)switch((p.labelpos||"").toLowerCase()){case"l":y=p.width/2;break;case"r":y=-p.width/2;break}return y&&(v+=o?y:-y),y=0,v},ng=(n,i)=>n.node(i).width||0,id=n=>{const i=nc(n),o=n.graph().ranksep;let s=0;i==null||i.forEach(c=>{const l=c.map(p=>n.node(p).height),d=Math.max(...l,0);c==null||c.forEach(p=>{n.node(p).y=s+d/2}),s+=d+o})},rg=n=>{const i=nc(n),o=Object.assign(Bf(n,i),Gf(n,i)),s={};let c=[];["u","d"].forEach(d=>{c=d==="u"?i:Object.values(i).reverse(),["l","r"].forEach(p=>{p==="r"&&(c=c.map(E=>Object.values(E).reverse()));const v=(d==="u"?n.predecessors:n.successors).bind(n),y=ed(n,c,o,v),x=nd(n,c,y.root,y.align,p==="r");p==="r"&&Object.keys(x).forEach(E=>x[E]=-x[E]),s[d+p]=x})});const l=jf(n,s);return l&&Uf(s,l),rd(s,n.graph().align)};var od=n=>{var i;const o=Tf(n);id(o);const s=rg(o);(i=Object.keys(s))===null||i===void 0||i.forEach(c=>{o.node(c).x=s[c]})},og=(n,i)=>{const s=n.nodes().filter(d=>{var p;return!(!((p=n.children(d))===null||p===void 0)&&p.length)}).map(d=>n.node(d).rank),c=Math.max(...s),l=[];for(let d=0;d<c+1;d++)l[d]=[];i==null||i.forEach(d=>{const p=n.node(d);!p||p!=null&&p.dummy||isNaN(p.rank)||(p.fixorder=l[p.rank].length,l[p.rank].push(d))})};const sd=(n,i)=>{const o=i&&i.debugTiming?zu:Il;o("layout",()=>{i&&!i.keepNodeOrder&&i.prevGraph&&o("  inheritOrder",()=>{sg(n,i.prevGraph)});const s=o("  buildLayoutGraph",()=>Hu(n));i&&i.edgeLabelSpace===!1||o("  makeSpaceForEdgeLabels",()=>{au(s)});try{o("  runLayout",()=>{ad(s,o,i)})}catch(c){if(c.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,c);return}throw c}o("  updateInputGraph",()=>{cd(n,s)})})},ad=(n,i,o)=>{i("    removeSelfEdges",()=>{ud(n)}),i("    acyclic",()=>{Jc.run(n)}),i("    nestingGraph.run",()=>{It.run(n)}),i("    rank",()=>{qd(Tf(n))}),i("    injectEdgeLabelProxies",()=>{Wu(n)}),i("    removeEmptyRanks",()=>{Ts(n)}),i("    nestingGraph.cleanup",()=>{It.cleanup(n)}),i("    normalizeRanks",()=>{Qc(n)}),i("    assignRankMinMax",()=>{Xu(n)}),i("    removeEdgeLabelProxies",()=>{Cc(n)}),i("    normalize.run",()=>{Gi.run(n)}),i("    parentDummyChains",()=>{I(n)}),i("    addBorderSegments",()=>{he(n)}),o&&o.keepNodeOrder&&i("    initDataOrder",()=>{og(n,o.nodeOrder)}),i("    order",()=>{qh(n,o==null?void 0:o.keepNodeOrder)}),i("    insertSelfEdges",()=>{ld(n)}),i("    adjustCoordinateSystem",()=>{sn.adjust(n)}),i("    position",()=>{od(n)}),i("    positionSelfEdges",()=>{Ku(n)}),i("    removeBorderNodes",()=>{Yu(n)}),i("    normalize.undo",()=>{Gi.undo(n)}),i("    fixupEdgeLabelCoords",()=>{$f(n)}),i("    undoCoordinateSystem",()=>{sn.undo(n)}),i("    translateGraph",()=>{cu(n)}),i("    assignNodeIntersects",()=>{Tc(n)}),i("    reversePoints",()=>{$l(n)}),i("    acyclic.undo",()=>{Jc.undo(n)})},sg=(n,i)=>{n.nodes().forEach(o=>{const s=n.node(o),c=i.node(o);c!==void 0?(s.fixorder=c._order,delete c._order):delete s.fixorder})},cd=(n,i)=>{n.nodes().forEach(o=>{var s;const c=n.node(o);if(c){const l=i.node(o);c.x=l.x,c.y=l.y,c._order=l.order,c._rank=l.rank,!((s=i.children(o))===null||s===void 0)&&s.length&&(c.width=l.width,c.height=l.height)}}),n.edges().forEach(o=>{const s=n.edge(o),c=i.edge(o);s.points=c?c.points:[],c&&c.hasOwnProperty("x")&&(s.x=c.x,s.y=c.y)}),n.graph().width=i.graph().width,n.graph().height=i.graph().height},ag=["nodesep","edgesep","ranksep","marginx","marginy"],cg={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},$u=["acyclicer","ranker","rankdir","align"],Vf=["width","height","layer","fixorder"],Zl={width:0,height:0},ug=["minlen","weight","width","height","labeloffset"],Zf={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},da=["labelpos"],Hu=n=>{const i=new la({multigraph:!0,compound:!0}),o=Hf(n.graph()),s={};return $u==null||$u.forEach(c=>{o[c]!==void 0&&(s[c]=o[c])}),i.setGraph(Object.assign({},cg,oc(o,ag),s)),n.nodes().forEach(c=>{const l=Hf(n.node(c)),d=Object.assign(Object.assign({},Zl),l),p=oc(d,Vf);i.setNode(c,p),i.setParent(c,n.parent(c))}),n.edges().forEach(c=>{const l=Hf(n.edge(c)),d={};da==null||da.forEach(p=>{l[p]!==void 0&&(d[p]=l[p])}),i.setEdgeObj(c,Object.assign({},Zf,oc(l,ug),d))}),i},au=n=>{const i=n.graph();i.ranksep||(i.ranksep=0),i.ranksep/=2,n.nodes().forEach(o=>{const s=n.node(o);isNaN(s.layer)||s.layer||(s.layer=0)}),n.edges().forEach(o=>{var s;const c=n.edge(o);c.minlen*=2,((s=c.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(i.rankdir==="TB"||i.rankdir==="BT"?c.width+=c.labeloffset:c.height+=c.labeloffset)})},Wu=n=>{n.edges().forEach(i=>{const o=n.edge(i);if(o.width&&o.height){const s=n.node(i.v),c=n.node(i.w),l={e:i,rank:(c.rank-s.rank)/2+s.rank};wc(n,"edge-proxy",l,"_ep")}})},Xu=n=>{let i=0;n.nodes().forEach(o=>{var s,c;const l=n.node(o);l.borderTop&&(l.minRank=(s=n.node(l.borderTop))===null||s===void 0?void 0:s.rank,l.maxRank=(c=n.node(l.borderBottom))===null||c===void 0?void 0:c.rank,i=Math.max(i,l.maxRank||-1/0))}),n.graph().maxRank=i},Cc=n=>{n.nodes().forEach(i=>{const o=n.node(i);o.dummy==="edge-proxy"&&(n.edge(o.e).labelRank=o.rank,n.removeNode(i))})},cu=n=>{let i,o=0,s,c=0;const l=n.graph(),d=l.marginx||0,p=l.marginy||0,v=y=>{if(!y)return;const x=y.x,E=y.y,_=y.width,T=y.height;!isNaN(x)&&!isNaN(_)&&(i===void 0&&(i=x-_/2),i=Math.min(i,x-_/2),o=Math.max(o,x+_/2)),!isNaN(E)&&!isNaN(T)&&(s===void 0&&(s=E-T/2),s=Math.min(s,E-T/2),c=Math.max(c,E+T/2))};n.nodes().forEach(y=>{v(n.node(y))}),n.edges().forEach(y=>{const x=n.edge(y);x!=null&&x.hasOwnProperty("x")&&v(x)}),i-=d,s-=p,n.nodes().forEach(y=>{const x=n.node(y);x&&(x.x-=i,x.y-=s)}),n.edges().forEach(y=>{var x;const E=n.edge(y);(x=E.points)===null||x===void 0||x.forEach(_=>{_.x-=i,_.y-=s}),E.hasOwnProperty("x")&&(E.x-=i),E.hasOwnProperty("y")&&(E.y-=s)}),l.width=o-i+d,l.height=c-s+p},Tc=n=>{n.edges().forEach(i=>{const o=n.edge(i),s=n.node(i.v),c=n.node(i.w);let l,d;o.points?(l=o.points[0],d=o.points[o.points.length-1]):(o.points=[],l=c,d=s),o.points.unshift(ec(s,l)),o.points.push(ec(c,d))})},$f=n=>{n.edges().forEach(i=>{const o=n.edge(i);if(o!=null&&o.hasOwnProperty("x"))switch((o.labelpos==="l"||o.labelpos==="r")&&(o.width-=o.labeloffset),o.labelpos){case"l":o.x-=o.width/2+o.labeloffset;break;case"r":o.x+=o.width/2+o.labeloffset;break}})},$l=n=>{n.edges().forEach(i=>{var o;const s=n.edge(i);s.reversed&&((o=s.points)===null||o===void 0||o.reverse())})},Yu=n=>{n.nodes().forEach(i=>{var o,s,c;if(!((o=n.children(i))===null||o===void 0)&&o.length){const l=n.node(i),d=n.node(l.borderTop),p=n.node(l.borderBottom),v=n.node(l.borderLeft[((s=l.borderLeft)===null||s===void 0?void 0:s.length)-1]),y=n.node(l.borderRight[((c=l.borderRight)===null||c===void 0?void 0:c.length)-1]);l.width=Math.abs((y==null?void 0:y.x)-(v==null?void 0:v.x))||10,l.height=Math.abs((p==null?void 0:p.y)-(d==null?void 0:d.y))||10,l.x=((v==null?void 0:v.x)||0)+l.width/2,l.y=((d==null?void 0:d.y)||0)+l.height/2}}),n.nodes().forEach(i=>{var o;((o=n.node(i))===null||o===void 0?void 0:o.dummy)==="border"&&n.removeNode(i)})},ud=n=>{n.edges().forEach(i=>{if(i.v===i.w){const o=n.node(i.v);o.selfEdges||(o.selfEdges=[]),o.selfEdges.push({e:i,label:n.edge(i)}),n.removeEdgeObj(i)}})},ld=n=>{const i=nc(n);i==null||i.forEach(o=>{let s=0;o==null||o.forEach((c,l)=>{var d;const p=n.node(c);p.order=l+s,(d=p.selfEdges)===null||d===void 0||d.forEach(v=>{wc(n,"selfedge",{width:v.label.width,height:v.label.height,rank:p.rank,order:l+ ++s,e:v.e,label:v.label},"_se")}),delete p.selfEdges})})},Ku=n=>{n.nodes().forEach(i=>{const o=n.node(i);if(o.dummy==="selfedge"){const s=n.node(o.e.v),c=s.x+s.width/2,l=s.y,d=o.x-c,p=s.height/2;n.setEdgeObj(o.e,o.label),n.removeNode(i),o.label.points=[{x:c+2*d/3,y:l-p},{x:c+5*d/6,y:l-p},{y:l,x:c+d},{x:c+5*d/6,y:l+p},{x:c+2*d/3,y:l+p}],o.label.x=o.x,o.label.y=o.y}})},oc=(n,i)=>{const o={};return i==null||i.forEach(s=>{n[s]!==void 0&&(o[s]=+n[s])}),o},Hf=(n={})=>{const i={};return Object.keys(n).forEach(o=>{i[o.toLowerCase()]=n[o]}),i};var qu=sd,lg={layout:qu,util:{time:zu,notime:Il}};class Hl extends vt{constructor(i){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=o=>{const s=this,{nodes:c}=s,l=c.find(d=>d.id===o);return l?l.layout!==!1:!0},this.updateCfg(i)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var i,o,s,c;const l=this,{nodes:d,nodeSize:p,rankdir:v,combos:y,begin:x,radial:E,comboEdges:_=[],vedges:T=[]}=l;if(!d)return;const M=l.edges||[],R=new la({multigraph:!0,compound:!0});l.nodeMap={};const D={};d.forEach(Et=>{l.nodeMap[Et.id]=Et,Et.comboId&&(D[Et.comboId]=D[Et.comboId]||[],D[Et.comboId].push(Et.id))});let k=[];const L={};!((i=l.nodeOrder)===null||i===void 0)&&i.length?(l.nodeOrder.forEach(Et=>{L[Et]=!0,k.push(l.nodeMap[Et])}),d.forEach(Et=>{L[Et.id]||k.push(Et)})):k=d;let U;p?Zt(p)?U=()=>p:U=()=>[p,p]:U=Et=>Et.size?Zt(Et.size)?Et.size:gt(Et.size)?[Et.size.width||40,Et.size.height||40]:[Et.size,Et.size]:[40,40];const W=_r(l.ranksep,50,l.ranksepFunc),J=_r(l.nodesep,50,l.nodesepFunc);let zt=J,Ae=W;(v==="LR"||v==="RL")&&(zt=W,Ae=J),R.setDefaultEdgeLabel(()=>({})),R.setGraph(l);const qt={};this.sortByCombo&&y&&y.forEach(Et=>{if(qt[Et.id]=Et,Et.collapsed){const Le=U(Et),nn=Ae(Et),vn=zt(Et),fr=Le[0]+2*vn,Dn=Le[1]+2*nn;R.setNode(Et.id,{width:fr,height:Dn})}Et.parentId&&(qt[Et.parentId]||R.setNode(Et.parentId,{}),R.setParent(Et.id,Et.parentId))}),k.filter(Et=>Et.layout!==!1).forEach(Et=>{const Le=U(Et),nn=Ae(Et),vn=zt(Et),fr=Le[0]+2*vn,Dn=Le[1]+2*nn,vr=Et.layer;K(vr)?R.setNode(Et.id,{width:fr,height:Dn,layer:vr}):R.setNode(Et.id,{width:fr,height:Dn}),this.sortByCombo&&Et.comboId&&(qt[Et.comboId]||(qt[Et.comboId]={id:Et.comboId},R.setNode(Et.comboId,{})),R.setParent(Et.id,Et.comboId))}),M.forEach(Et=>{const Le=ht(Et,"source"),nn=ht(Et,"target");this.layoutNode(Le)&&this.layoutNode(nn)&&R.setEdge(Le,nn,{weight:Et.weight||1})}),(o=_==null?void 0:_.concat(T||[]))===null||o===void 0||o.forEach(Et=>{var Le,nn;const{source:vn,target:fr}=Et,Dn=!((Le=qt[vn])===null||Le===void 0)&&Le.collapsed?[vn]:D[vn]||[vn],vr=!((nn=qt[fr])===null||nn===void 0)&&nn.collapsed?[fr]:D[fr]||[fr];Dn.forEach(nr=>{vr.forEach(Fr=>{R.setEdge(nr,Fr,{weight:Et.weight||1})})})});let le;!((s=l.preset)===null||s===void 0)&&s.nodes&&(le=new la({multigraph:!0,compound:!0}),l.preset.nodes.forEach(Et=>{le==null||le.setNode(Et.id,Et)})),lg.layout(R,{prevGraph:le,edgeLabelSpace:l.edgeLabelSpace,keepNodeOrder:Boolean(!!l.nodeOrder),nodeOrder:l.nodeOrder});const ce=[0,0];if(x){let Et=1/0,Le=1/0;R.nodes().forEach(nn=>{const vn=R.node(nn);Et>vn.x&&(Et=vn.x),Le>vn.y&&(Le=vn.y)}),R.edges().forEach(nn=>{var vn;(vn=R.edge(nn).points)===null||vn===void 0||vn.forEach(Dn=>{Et>Dn.x&&(Et=Dn.x),Le>Dn.y&&(Le=Dn.y)})}),ce[0]=x[0]-Et,ce[1]=x[1]-Le}const Ne=v==="LR"||v==="RL";if(E){const{focusNode:Et,ranksep:Le,getRadialPos:nn}=this,vn=ft(Et)?Et:Et==null?void 0:Et.id,fr=vn?(c=R.node(vn))===null||c===void 0?void 0:c._rank:0,Dn=[],vr=Ne?"y":"x",nr=Ne?"height":"width";let Fr=1/0,ni=-1/0;R.nodes().forEach(mn=>{const qn=R.node(mn);if(!l.nodeMap[mn])return;const Li=J(l.nodeMap[mn]);if(fr===0)Dn[qn._rank]||(Dn[qn._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Dn[qn._rank].nodes.push(mn),Dn[qn._rank].totalWidth+=Li*2+qn[nr],Dn[qn._rank].maxSize<Math.max(qn.width,qn.height)&&(Dn[qn._rank].maxSize=Math.max(qn.width,qn.height));else{const ri=qn._rank-fr;if(ri===0)Dn[ri]||(Dn[ri]={nodes:[],totalWidth:0,maxSize:-1/0}),Dn[ri].nodes.push(mn),Dn[ri].totalWidth+=Li*2+qn[nr],Dn[ri].maxSize<Math.max(qn.width,qn.height)&&(Dn[ri].maxSize=Math.max(qn.width,qn.height));else{const ki=Math.abs(ri);Dn[ki]||(Dn[ki]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Dn[ki].totalWidth+=Li*2+qn[nr],Dn[ki].maxSize<Math.max(qn.width,qn.height)&&(Dn[ki].maxSize=Math.max(qn.width,qn.height)),ri<0?Dn[ki].left.push(mn):Dn[ki].right.push(mn)}}const Br=qn[vr]-qn[nr]/2-Li,Qi=qn[vr]+qn[nr]/2+Li;Br<Fr&&(Fr=Br),Qi>ni&&(ni=Qi)});let so=Le||50;const mo={},Sn=(ni-Fr)/.9,Yr=[(Fr+ni-Sn)*.5,(Fr+ni+Sn)*.5],Co=(mn,qn,Li=-1/0,Br=[0,1])=>{let Qi=Li;return mn.forEach(ri=>{const ki=R.node(ri);mo[ri]=qn;const{x:gs,y:zo}=nn(ki[vr],Yr,Sn,qn,Br);if(!l.nodeMap[ri])return;l.nodeMap[ri].x=gs+ce[0],l.nodeMap[ri].y=zo+ce[1],l.nodeMap[ri]._order=ki._order;const Xs=W(l.nodeMap[ri]);Qi<Xs&&(Qi=Xs)}),Qi};let fi=!0;const $i=0;Dn.forEach(mn=>{var qn,Li,Br,Qi,ri,ki,gs;if(!(!((qn=mn==null?void 0:mn.nodes)===null||qn===void 0)&&qn.length)&&!(!((Li=mn==null?void 0:mn.left)===null||Li===void 0)&&Li.length)&&!(!((Br=mn==null?void 0:mn.right)===null||Br===void 0)&&Br.length))return;if(fi&&mn.nodes.length===1){const Xs=mn.nodes[0];if(!l.nodeMap[Xs])return;l.nodeMap[Xs].x=ce[0],l.nodeMap[Xs].y=ce[1],mo[mn.nodes[0]]=0,so=W(l.nodeMap[Xs]),fi=!1;return}so=Math.max(so,mn.totalWidth/(2*Math.PI));let zo=-1/0;if(fr===0||!((Qi=mn.nodes)===null||Qi===void 0)&&Qi.length)zo=Co(mn.nodes,so,zo,[0,1]);else{const Xs=((ri=mn.left)===null||ri===void 0?void 0:ri.length)/(((ki=mn.left)===null||ki===void 0?void 0:ki.length)+((gs=mn.right)===null||gs===void 0?void 0:gs.length));zo=Co(mn.left,so,zo,[0,Xs]),zo=Co(mn.right,so,zo,[Xs+.05,1])}so+=zo,fi=!1,$i-mn.maxSize}),R.edges().forEach(mn=>{var qn,Li,Br;const Qi=R.edge(mn),ri=M.findIndex(ki=>{const gs=ht(ki,"source"),zo=ht(ki,"target");return gs===mn.v&&zo===mn.w});if(!(ri<=-1)&&l.edgeLabelSpace&&l.controlPoints&&M[ri].type!=="loop"){const ki=vr==="x"?"y":"x",gs=(qn=Qi==null?void 0:Qi.points)===null||qn===void 0?void 0:qn.slice(1,Qi.points.length-1),zo=[],Xs=(Li=R.node(mn.v))===null||Li===void 0?void 0:Li[ki],Nv=Xs-((Br=R.node(mn.w))===null||Br===void 0?void 0:Br[ki]),Ys=mo[mn.v],Hd=Ys-mo[mn.w];gs==null||gs.forEach(Wd=>{const sp=(Wd[ki]-Xs)/Nv*Hd+Ys,Rh=nn(Wd[vr],Yr,Sn,sp);zo.push({x:Rh.x+ce[0],y:Rh.y+ce[1]})}),M[ri].controlPoints=zo}})}else{const Et=new Set,nn=v==="BT"||v==="RL"?(vr,nr)=>nr-vr:(vr,nr)=>vr-nr;R.nodes().forEach(vr=>{const nr=R.node(vr);if(!nr)return;let Fr=this.nodeMap[vr];Fr||(Fr=y==null?void 0:y.find(ni=>ni.id===vr)),Fr&&(Fr.x=nr.x+ce[0],Fr.y=nr.y+ce[1],Fr._order=nr._order,Et.add(Ne?Fr.x:Fr.y))});const vn=Array.from(Et).sort(nn),fr=Ne?(vr,nr)=>vr.x!==nr.x:(vr,nr)=>vr.y!==nr.y,Dn=Ne?(vr,nr,Fr)=>{const ni=Math.max(nr.y,Fr.y),so=Math.min(nr.y,Fr.y);return vr.filter(mo=>mo.y<=ni&&mo.y>=so)}:(vr,nr,Fr)=>{const ni=Math.max(nr.x,Fr.x),so=Math.min(nr.x,Fr.x);return vr.filter(mo=>mo.x<=ni&&mo.x>=so)};R.edges().forEach(vr=>{var nr;const Fr=R.edge(vr),ni=M.findIndex(so=>{const mo=ht(so,"source"),Sn=ht(so,"target");return mo===vr.v&&Sn===vr.w});if(!(ni<=-1)&&l.edgeLabelSpace&&l.controlPoints&&M[ni].type!=="loop"){(nr=Fr==null?void 0:Fr.points)===null||nr===void 0||nr.forEach(Sn=>{Sn.x+=ce[0],Sn.y+=ce[1]});const so=l.nodeMap[vr.v],mo=l.nodeMap[vr.w];M[ni].controlPoints=fg(Fr==null?void 0:Fr.points,so,mo,vn,Ne,fr,Dn)}})}return l.onLayoutEnd&&l.onLayoutEnd(),{nodes:d,edges:M}}getRadialPos(i,o,s,c,l=[0,1]){let d=(i-o[0])/s;d=d*(l[1]-l[0])+l[0];const p=d*2*Math.PI;return{x:Math.cos(p)*c,y:Math.sin(p)*c}}getType(){return"dagre"}}const fg=(n,i,o,s,c,l,d)=>{let p=(n==null?void 0:n.slice(1,n.length-1))||[];if(i&&o){let{x:v,y}=i,{x,y:E}=o;if(c&&(v=i.y,y=i.x,x=o.y,E=o.x),E!==y&&v!==x){const _=s.indexOf(y),T=s[_+1];if(T){const D=p[0],k=c?{x:(y+T)/2,y:(D==null?void 0:D.y)||x}:{x:(D==null?void 0:D.x)||x,y:(y+T)/2};(!D||l(D,k))&&p.unshift(k)}const M=s.indexOf(E),R=Math.abs(M-_);if(R===1)p=d(p,i,o),p.length||p.push(c?{x:(y+E)/2,y:v}:{x:v,y:(y+E)/2});else if(R>1){const D=s[M-1];if(D){const k=p[p.length-1],L=c?{x:(E+D)/2,y:(k==null?void 0:k.y)||x}:{x:(k==null?void 0:k.x)||v,y:(E+D)/2};(!k||l(k,L))&&p.push(L)}}}}return p},Wl={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function Ia(n={},i=Wl){var o,s,c,l;const d=JSON.parse(JSON.stringify(i)),p=((o=n==null?void 0:n.graph)===null||o===void 0?void 0:o.meta)||{},v=((s=n==null?void 0:n.subScene)===null||s===void 0?void 0:s.meta)||{},y=((c=n==null?void 0:n.nodeSize)===null||c===void 0?void 0:c.meta)||{},x=((l=n==null?void 0:n.nodeSize)===null||l===void 0?void 0:l.node)||{},E=d.nodeSize.bridge;return{graph:{meta:Object.assign(d.graph.meta,p)},subScene:{meta:Object.assign(d.subScene.meta,v)},nodeSize:{meta:Object.assign(d.nodeSize.meta,y),node:Object.assign(d.nodeSize.node,x),bridge:E}}}function fd(n){return`\u25EC${n}\u25EC`}const uu=fd("ROOT"),mp=fd("BRIDGE_GRAPH");var Wo,Ju,Xl,Wf;(function(n){n[n.META=0]="META",n[n.NODE=1]="NODE",n[n.BRIDGE=2]="BRIDGE"})(Wo||(Wo={})),function(n){n[n.INCLUDE=0]="INCLUDE",n[n.EXCLUDE=1]="EXCLUDE",n[n.UNSPECIFIED=2]="UNSPECIFIED"}(Ju||(Ju={})),function(n){n[n.META=0]="META",n[n.CORE=1]="CORE",n[n.BRIDGE=2]="BRIDGE"}(Xl||(Xl={})),function(n){n[n.META=0]="META",n[n.OP=1]="OP",n[n.SERIES=2]="SERIES"}(Wf||(Wf={}));var Xf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof O.g!="undefined"?O.g:typeof self!="undefined"?self:{};function hd(n,i){return n(i={exports:{}},i.exports),i.exports}var yp=function(){this.__data__=[],this.size=0},Qu=function(n,i){return n===i||n!=n&&i!=i},Yf=function(n,i){for(var o=n.length;o--;)if(Qu(n[o][0],i))return o;return-1},bp=Array.prototype.splice,xp=function(n){var i=this.__data__,o=Yf(i,n);return!(o<0)&&(o==i.length-1?i.pop():bp.call(i,o,1),--this.size,!0)},dd=function(n){var i=this.__data__,o=Yf(i,n);return o<0?void 0:i[o][1]},lu=function(n){return Yf(this.__data__,n)>-1},Kf=function(n,i){var o=this.__data__,s=Yf(o,n);return s<0?(++this.size,o.push([n,i])):o[s][1]=i,this};function sc(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var s=n[i];this.set(s[0],s[1])}}sc.prototype.clear=yp,sc.prototype.delete=xp,sc.prototype.get=dd,sc.prototype.has=lu,sc.prototype.set=Kf;var tl=sc,qf=function(){this.__data__=new tl,this.size=0},Jf=function(n){var i=this.__data__,o=i.delete(n);return this.size=i.size,o},Qf=function(n){return this.__data__.get(n)},gd=function(n){return this.__data__.has(n)},Yl=typeof Xf=="object"&&Xf&&Xf.Object===Object&&Xf,th=typeof self=="object"&&self&&self.Object===Object&&self,Is=Yl||th||Function("return this")(),Xo=Is.Symbol,el=Object.prototype,Kl=el.hasOwnProperty,nl=el.toString,ac=Xo?Xo.toStringTag:void 0,hg=function(n){var i=Kl.call(n,ac),o=n[ac];try{n[ac]=void 0;var s=!0}catch(l){}var c=nl.call(n);return s&&(i?n[ac]=o:delete n[ac]),c},rl=Object.prototype.toString,fu=function(n){return rl.call(n)},pd=Xo?Xo.toStringTag:void 0,Pa=function(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":pd&&pd in Object(n)?hg(n):fu(n)},Ps=function(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")},dg,ql=function(n){if(!Ps(n))return!1;var i=Pa(n);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},ia=Is["__core-js_shared__"],Jl=(dg=/[^.]+$/.exec(ia&&ia.keys&&ia.keys.IE_PROTO||""))?"Symbol(src)_1."+dg:"",gg=function(n){return!!Jl&&Jl in n},vd=Function.prototype.toString,Ac=function(n){if(n!=null){try{return vd.call(n)}catch(i){}try{return n+""}catch(i){}}return""},md=/^\[object .+?Constructor\]$/,Ep=Function.prototype,ga=Object.prototype,yd=Ep.toString,il=ga.hasOwnProperty,Oc=RegExp("^"+yd.call(il).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pg=function(n){return!(!Ps(n)||gg(n))&&(ql(n)?Oc:md).test(Ac(n))},bd=function(n,i){return n==null?void 0:n[i]},Na=function(n,i){var o=bd(n,i);return pg(o)?o:void 0},ol=Na(Is,"Map"),Eo=Na(Object,"create"),Mc=function(){this.__data__=Eo?Eo(null):{},this.size=0},Yi=function(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i},ls=Object.prototype.hasOwnProperty,vg=function(n){var i=this.__data__;if(Eo){var o=i[n];return o==="__lodash_hash_undefined__"?void 0:o}return ls.call(i,n)?i[n]:void 0},Ql=Object.prototype.hasOwnProperty,wp=function(n){var i=this.__data__;return Eo?i[n]!==void 0:Ql.call(i,n)},mg=function(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=Eo&&i===void 0?"__lodash_hash_undefined__":i,this};function sl(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var s=n[i];this.set(s[0],s[1])}}sl.prototype.clear=Mc,sl.prototype.delete=Yi,sl.prototype.get=vg,sl.prototype.has=wp,sl.prototype.set=mg;var xd=sl,Sp=function(){this.size=0,this.__data__={hash:new xd,map:new(ol||tl),string:new xd}},tf=function(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null},eh=function(n,i){var o=n.__data__;return tf(i)?o[typeof i=="string"?"string":"hash"]:o.map},_p=function(n){var i=eh(this,n).delete(n);return this.size-=i?1:0,i},Cp=function(n){return eh(this,n).get(n)},nh=function(n){return eh(this,n).has(n)},yg=function(n,i){var o=eh(this,n),s=o.size;return o.set(n,i),this.size+=o.size==s?0:1,this};function hu(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var s=n[i];this.set(s[0],s[1])}}hu.prototype.clear=Sp,hu.prototype.delete=_p,hu.prototype.get=Cp,hu.prototype.has=nh,hu.prototype.set=yg;var Ra=hu,bg=function(n,i){var o=this.__data__;if(o instanceof tl){var s=o.__data__;if(!ol||s.length<199)return s.push([n,i]),this.size=++o.size,this;o=this.__data__=new Ra(s)}return o.set(n,i),this.size=o.size,this};function cc(n){var i=this.__data__=new tl(n);this.size=i.size}cc.prototype.clear=qf,cc.prototype.delete=Jf,cc.prototype.get=Qf,cc.prototype.has=gd,cc.prototype.set=bg;var ef=cc,N=function(n,i){for(var o=-1,s=n==null?0:n.length;++o<s&&i(n[o],o,n)!==!1;);return n},X=function(){try{var n=Na(Object,"defineProperty");return n({},"",{}),n}catch(i){}}(),lt=function(n,i,o){i=="__proto__"&&X?X(n,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[i]=o},ee=Object.prototype.hasOwnProperty,ge=function(n,i,o){var s=n[i];ee.call(n,i)&&Qu(s,o)&&(o!==void 0||i in n)||lt(n,i,o)},Kt=function(n,i,o,s){var c=!o;o||(o={});for(var l=-1,d=i.length;++l<d;){var p=i[l],v=s?s(o[p],n[p],p,o,n):void 0;v===void 0&&(v=n[p]),c?lt(o,p,v):ge(o,p,v)}return o},oe=function(n,i){for(var o=-1,s=Array(n);++o<n;)s[o]=i(o);return s},_e=function(n){return n!=null&&typeof n=="object"},Ie=function(n){return _e(n)&&Pa(n)=="[object Arguments]"},Be=Object.prototype,Pe=Be.hasOwnProperty,Ve=Be.propertyIsEnumerable,$e=Ie(function(){return arguments}())?Ie:function(n){return _e(n)&&Pe.call(n,"callee")&&!Ve.call(n,"callee")},ve=Array.isArray,Ze=function(){return!1},Nt=hd(function(n,i){var o=i&&!i.nodeType&&i,s=o&&n&&!n.nodeType&&n,c=s&&s.exports===o?Is.Buffer:void 0,l=(c?c.isBuffer:void 0)||Ze;n.exports=l}),se=/^(?:0|[1-9]\d*)$/,ke=function(n,i){var o=typeof n;return!!(i=i==null?9007199254740991:i)&&(o=="number"||o!="symbol"&&se.test(n))&&n>-1&&n%1==0&&n<i},He=function(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=9007199254740991},ie={};ie["[object Float32Array]"]=ie["[object Float64Array]"]=ie["[object Int8Array]"]=ie["[object Int16Array]"]=ie["[object Int32Array]"]=ie["[object Uint8Array]"]=ie["[object Uint8ClampedArray]"]=ie["[object Uint16Array]"]=ie["[object Uint32Array]"]=!0,ie["[object Arguments]"]=ie["[object Array]"]=ie["[object ArrayBuffer]"]=ie["[object Boolean]"]=ie["[object DataView]"]=ie["[object Date]"]=ie["[object Error]"]=ie["[object Function]"]=ie["[object Map]"]=ie["[object Number]"]=ie["[object Object]"]=ie["[object RegExp]"]=ie["[object Set]"]=ie["[object String]"]=ie["[object WeakMap]"]=!1;var cn=function(n){return _e(n)&&He(n.length)&&!!ie[Pa(n)]},Ee=function(n){return function(i){return n(i)}},Ge=hd(function(n,i){var o=i&&!i.nodeType&&i,s=o&&n&&!n.nodeType&&n,c=s&&s.exports===o&&Yl.process,l=function(){try{var d=s&&s.require&&s.require("util").types;return d||c&&c.binding&&c.binding("util")}catch(p){}}();n.exports=l}),Ce=Ge&&Ge.isTypedArray,je=Ce?Ee(Ce):cn,Ln=Object.prototype.hasOwnProperty,Wn=function(n,i){var o=ve(n),s=!o&&$e(n),c=!o&&!s&&Nt(n),l=!o&&!s&&!c&&je(n),d=o||s||c||l,p=d?oe(n.length,String):[],v=p.length;for(var y in n)!i&&!Ln.call(n,y)||d&&(y=="length"||c&&(y=="offset"||y=="parent")||l&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||ke(y,v))||p.push(y);return p},Xe=Object.prototype,Fe=function(n){var i=n&&n.constructor;return n===(typeof i=="function"&&i.prototype||Xe)},we=function(n,i){return function(o){return n(i(o))}},Zn=we(Object.keys,Object),cr=Object.prototype.hasOwnProperty,dn=function(n){if(!Fe(n))return Zn(n);var i=[];for(var o in Object(n))cr.call(n,o)&&o!="constructor"&&i.push(o);return i},Qn=function(n){return n!=null&&He(n.length)&&!ql(n)},Vn=function(n){return Qn(n)?Wn(n):dn(n)},gr=function(n,i){return n&&Kt(i,Vn(i),n)},Lr=function(n){var i=[];if(n!=null)for(var o in Object(n))i.push(o);return i},zi=Object.prototype.hasOwnProperty,mi=function(n){if(!Ps(n))return Lr(n);var i=Fe(n),o=[];for(var s in n)(s!="constructor"||!i&&zi.call(n,s))&&o.push(s);return o},ar=function(n){return Qn(n)?Wn(n,!0):mi(n)},ji=function(n,i){return n&&Kt(i,ar(i),n)},Wr=hd(function(n,i){var o=i&&!i.nodeType&&i,s=o&&n&&!n.nodeType&&n,c=s&&s.exports===o?Is.Buffer:void 0,l=c?c.allocUnsafe:void 0;n.exports=function(d,p){if(p)return d.slice();var v=d.length,y=l?l(v):new d.constructor(v);return d.copy(y),y}}),li=function(n,i){var o=-1,s=n.length;for(i||(i=Array(s));++o<s;)i[o]=n[o];return i},di=function(n,i){for(var o=-1,s=n==null?0:n.length,c=0,l=[];++o<s;){var d=n[o];i(d,o,n)&&(l[c++]=d)}return l},tr=function(){return[]},ei=Object.prototype.propertyIsEnumerable,oo=Object.getOwnPropertySymbols,Si=oo?function(n){return n==null?[]:(n=Object(n),di(oo(n),function(i){return ei.call(n,i)}))}:tr,ur=function(n,i){return Kt(n,Si(n),i)},Ui=function(n,i){for(var o=-1,s=i.length,c=n.length;++o<s;)n[c+o]=i[o];return n},xr=we(Object.getPrototypeOf,Object),gn=Object.getOwnPropertySymbols?function(n){for(var i=[];n;)Ui(i,Si(n)),n=xr(n);return i}:tr,Er=function(n,i){return Kt(n,gn(n),i)},Pr=function(n,i,o){var s=i(n);return ve(n)?s:Ui(s,o(n))},gi=function(n){return Pr(n,Vn,Si)},wo=function(n){return Pr(n,ar,gn)},Vs=Na(Is,"DataView"),it=Na(Is,"Promise"),te=Na(Is,"Set"),Yt=Na(Is,"WeakMap"),un=Ac(Vs),wr=Ac(ol),et=Ac(it),$=Ac(te),pt=Ac(Yt),Rt=Pa;(Vs&&Rt(new Vs(new ArrayBuffer(1)))!="[object DataView]"||ol&&Rt(new ol)!="[object Map]"||it&&Rt(it.resolve())!="[object Promise]"||te&&Rt(new te)!="[object Set]"||Yt&&Rt(new Yt)!="[object WeakMap]")&&(Rt=function(n){var i=Pa(n),o=i=="[object Object]"?n.constructor:void 0,s=o?Ac(o):"";if(s)switch(s){case un:return"[object DataView]";case wr:return"[object Map]";case et:return"[object Promise]";case $:return"[object Set]";case pt:return"[object WeakMap]"}return i});var Ft=Rt,_t=Object.prototype.hasOwnProperty,mt=function(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&_t.call(n,"index")&&(o.index=n.index,o.input=n.input),o},Ot=Is.Uint8Array,tt=function(n){var i=new n.constructor(n.byteLength);return new Ot(i).set(new Ot(n)),i},dt=function(n,i){var o=i?tt(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)},q=/\w*$/,Lt=function(n){var i=new n.constructor(n.source,q.exec(n));return i.lastIndex=n.lastIndex,i},Vt=Xo?Xo.prototype:void 0,de=Vt?Vt.valueOf:void 0,ye=function(n){return de?Object(de.call(n)):{}},ae=function(n,i){var o=i?tt(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)},Re=function(n,i,o){var s=n.constructor;switch(i){case"[object ArrayBuffer]":return tt(n);case"[object Boolean]":case"[object Date]":return new s(+n);case"[object DataView]":return dt(n,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ae(n,o);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(n);case"[object RegExp]":return Lt(n);case"[object Set]":return new s;case"[object Symbol]":return ye(n)}},Ye=Object.create,ir=function(){function n(){}return function(i){if(!Ps(i))return{};if(Ye)return Ye(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}}(),ln=function(n){return typeof n.constructor!="function"||Fe(n)?{}:ir(xr(n))},Gn=function(n){return _e(n)&&Ft(n)=="[object Map]"},Xn=Ge&&Ge.isMap,kr=Xn?Ee(Xn):Gn,Vi=function(n){return _e(n)&&Ft(n)=="[object Set]"},fs=Ge&&Ge.isSet,xg=fs?Ee(fs):Vi,Gr={};Gr["[object Arguments]"]=Gr["[object Array]"]=Gr["[object ArrayBuffer]"]=Gr["[object DataView]"]=Gr["[object Boolean]"]=Gr["[object Date]"]=Gr["[object Float32Array]"]=Gr["[object Float64Array]"]=Gr["[object Int8Array]"]=Gr["[object Int16Array]"]=Gr["[object Int32Array]"]=Gr["[object Map]"]=Gr["[object Number]"]=Gr["[object Object]"]=Gr["[object RegExp]"]=Gr["[object Set]"]=Gr["[object String]"]=Gr["[object Symbol]"]=Gr["[object Uint8Array]"]=Gr["[object Uint8ClampedArray]"]=Gr["[object Uint16Array]"]=Gr["[object Uint32Array]"]=!0,Gr["[object Error]"]=Gr["[object Function]"]=Gr["[object WeakMap]"]=!1;var rh=function n(i,o,s,c,l,d){var p,v=1&o,y=2&o,x=4&o;if(s&&(p=l?s(i,c,l,d):s(i)),p!==void 0)return p;if(!Ps(i))return i;var E=ve(i);if(E){if(p=mt(i),!v)return li(i,p)}else{var _=Ft(i),T=_=="[object Function]"||_=="[object GeneratorFunction]";if(Nt(i))return Wr(i,v);if(_=="[object Object]"||_=="[object Arguments]"||T&&!l){if(p=y||T?{}:ln(i),!v)return y?Er(i,ji(p,i)):ur(i,gr(p,i))}else{if(!Gr[_])return l?i:{};p=Re(i,_,v)}}d||(d=new ef);var M=d.get(i);if(M)return M;d.set(i,p),xg(i)?i.forEach(function(D){p.add(n(D,o,s,D,i,d))}):kr(i)&&i.forEach(function(D,k){p.set(k,n(D,o,s,k,i,d))});var R=E?void 0:(x?y?wo:gi:y?ar:Vn)(i);return N(R||i,function(D,k){R&&(D=i[k=D]),ge(p,k,n(D,o,s,k,i,d))}),p},Lo=function(n){return rh(n,4)},ih=function(n){return function(){return n}},Eg=function(n){return function(i,o,s){for(var c=-1,l=Object(i),d=s(i),p=d.length;p--;){var v=d[n?p:++c];if(o(l[v],v,l)===!1)break}return i}}(),Tp=function(n,i){return n&&Eg(n,i,Vn)},wg=function(n,i){return function(o,s){if(o==null)return o;if(!Qn(o))return n(o,s);for(var c=o.length,l=i?c:-1,d=Object(o);(i?l--:++l<c)&&s(d[l],l,d)!==!1;);return o}}(Tp),du=function(n){return n},Ap=function(n){return typeof n=="function"?n:du},Op=function(n,i){return(ve(n)?N:wg)(n,Ap(i))},Gv=Op,Mp=function(n,i){var o=[];return wg(n,function(s,c,l){i(s,c,l)&&o.push(s)}),o},N0=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Sg=function(n){return this.__data__.has(n)};function _g(n){var i=-1,o=n==null?0:n.length;for(this.__data__=new Ra;++i<o;)this.add(n[i])}_g.prototype.add=_g.prototype.push=N0,_g.prototype.has=Sg;var zv=_g,R0=function(n,i){for(var o=-1,s=n==null?0:n.length;++o<s;)if(i(n[o],o,n))return!0;return!1},Ip=function(n,i){return n.has(i)},oh=function(n,i,o,s,c,l){var d=1&o,p=n.length,v=i.length;if(p!=v&&!(d&&v>p))return!1;var y=l.get(n),x=l.get(i);if(y&&x)return y==i&&x==n;var E=-1,_=!0,T=2&o?new zv:void 0;for(l.set(n,i),l.set(i,n);++E<p;){var M=n[E],R=i[E];if(s)var D=d?s(R,M,E,i,n,l):s(M,R,E,n,i,l);if(D!==void 0){if(D)continue;_=!1;break}if(T){if(!R0(i,function(k,L){if(!Ip(T,L)&&(M===k||c(M,k,o,s,l)))return T.push(L)})){_=!1;break}}else if(M!==R&&!c(M,R,o,s,l)){_=!1;break}}return l.delete(n),l.delete(i),_},Ed=function(n){var i=-1,o=Array(n.size);return n.forEach(function(s,c){o[++i]=[c,s]}),o},Pp=function(n){var i=-1,o=Array(n.size);return n.forEach(function(s){o[++i]=s}),o},nf=Xo?Xo.prototype:void 0,sh=nf?nf.valueOf:void 0,Np=function(n,i,o,s,c,l,d){switch(o){case"[object DataView]":if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=i.byteLength||!l(new Ot(n),new Ot(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Qu(+n,+i);case"[object Error]":return n.name==i.name&&n.message==i.message;case"[object RegExp]":case"[object String]":return n==i+"";case"[object Map]":var p=Ed;case"[object Set]":var v=1&s;if(p||(p=Pp),n.size!=i.size&&!v)return!1;var y=d.get(n);if(y)return y==i;s|=2,d.set(n,i);var x=oh(p(n),p(i),s,c,l,d);return d.delete(n),x;case"[object Symbol]":if(sh)return sh.call(n)==sh.call(i)}return!1},jv=Object.prototype.hasOwnProperty,al=function(n,i,o,s,c,l){var d=1&o,p=gi(n),v=p.length;if(v!=gi(i).length&&!d)return!1;for(var y=v;y--;){var x=p[y];if(!(d?x in i:jv.call(i,x)))return!1}var E=l.get(n),_=l.get(i);if(E&&_)return E==i&&_==n;var T=!0;l.set(n,i),l.set(i,n);for(var M=d;++y<v;){var R=n[x=p[y]],D=i[x];if(s)var k=d?s(D,R,x,i,n,l):s(R,D,x,n,i,l);if(!(k===void 0?R===D||c(R,D,o,s,l):k)){T=!1;break}M||(M=x=="constructor")}if(T&&!M){var L=n.constructor,U=i.constructor;L==U||!("constructor"in n)||!("constructor"in i)||typeof L=="function"&&L instanceof L&&typeof U=="function"&&U instanceof U||(T=!1)}return l.delete(n),l.delete(i),T},Uv=Object.prototype.hasOwnProperty,Vv=function(n,i,o,s,c,l){var d=ve(n),p=ve(i),v=d?"[object Array]":Ft(n),y=p?"[object Array]":Ft(i),x=(v=v=="[object Arguments]"?"[object Object]":v)=="[object Object]",E=(y=y=="[object Arguments]"?"[object Object]":y)=="[object Object]",_=v==y;if(_&&Nt(n)){if(!Nt(i))return!1;d=!0,x=!1}if(_&&!x)return l||(l=new ef),d||je(n)?oh(n,i,o,s,c,l):Np(n,i,v,o,s,c,l);if(!(1&o)){var T=x&&Uv.call(n,"__wrapped__"),M=E&&Uv.call(i,"__wrapped__");if(T||M){var R=T?n.value():n,D=M?i.value():i;return l||(l=new ef),c(R,D,o,s,l)}}return!!_&&(l||(l=new ef),al(n,i,o,s,c,l))},Sr=function n(i,o,s,c,l){return i===o||(i==null||o==null||!_e(i)&&!_e(o)?i!=i&&o!=o:Vv(i,o,s,c,n,l))},Zv=function(n,i,o,s){var c=o.length,l=c,d=!s;if(n==null)return!l;for(n=Object(n);c--;){var p=o[c];if(d&&p[2]?p[1]!==n[p[0]]:!(p[0]in n))return!1}for(;++c<l;){var v=(p=o[c])[0],y=n[v],x=p[1];if(d&&p[2]){if(y===void 0&&!(v in n))return!1}else{var E=new ef;if(s)var _=s(y,x,v,n,i,E);if(!(_===void 0?Sr(x,y,3,s,E):_))return!1}}return!0},$v=function(n){return n==n&&!Ps(n)},D0=function(n){for(var i=Vn(n),o=i.length;o--;){var s=i[o],c=n[s];i[o]=[s,c,$v(c)]}return i},Rp=function(n,i){return function(o){return o!=null&&o[n]===i&&(i!==void 0||n in Object(o))}},Cg=function(n){var i=D0(n);return i.length==1&&i[0][2]?Rp(i[0][0],i[0][1]):function(o){return o===n||Zv(o,n,i)}},rf=function(n){return typeof n=="symbol"||_e(n)&&Pa(n)=="[object Symbol]"},Dp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ah=/^\w*$/,wd=function(n,i){if(ve(n))return!1;var o=typeof n;return!(o!="number"&&o!="symbol"&&o!="boolean"&&n!=null&&!rf(n))||ah.test(n)||!Dp.test(n)||i!=null&&n in Object(i)};function Tg(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var o=function(){var s=arguments,c=i?i.apply(this,s):s[0],l=o.cache;if(l.has(c))return l.get(c);var d=n.apply(this,s);return o.cache=l.set(c,d)||l,d};return o.cache=new(Tg.Cache||Ra),o}Tg.Cache=Ra;var Ag=Tg,hs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hv=/\\(\\)?/g,Wv=function(n){var i=Ag(n,function(s){return o.size===500&&o.clear(),s}),o=i.cache;return i}(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(hs,function(o,s,c,l){i.push(c?l.replace(Hv,"$1"):s||o)}),i}),of=function(n,i){for(var o=-1,s=n==null?0:n.length,c=Array(s);++o<s;)c[o]=i(n[o],o,n);return c},Lp=Xo?Xo.prototype:void 0,kp=Lp?Lp.toString:void 0,Sd=function n(i){if(typeof i=="string")return i;if(ve(i))return of(i,n)+"";if(rf(i))return kp?kp.call(i):"";var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},Fp=function(n){return n==null?"":Sd(n)},_d=function(n,i){return ve(n)?n:wd(n,i)?[n]:Wv(Fp(n))},ch=function(n){if(typeof n=="string"||rf(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i},uh=function(n,i){for(var o=0,s=(i=_d(i,n)).length;n!=null&&o<s;)n=n[ch(i[o++])];return o&&o==s?n:void 0},Xv=function(n,i,o){var s=n==null?void 0:uh(n,i);return s===void 0?o:s},Bp=function(n,i){return n!=null&&i in Object(n)},Yv=function(n,i,o){for(var s=-1,c=(i=_d(i,n)).length,l=!1;++s<c;){var d=ch(i[s]);if(!(l=n!=null&&o(n,d)))break;n=n[d]}return l||++s!=c?l:!!(c=n==null?0:n.length)&&He(c)&&ke(d,c)&&(ve(n)||$e(n))},Cd=function(n,i){return n!=null&&Yv(n,i,Bp)},L0=function(n,i){return wd(n)&&$v(i)?Rp(ch(n),i):function(o){var s=Xv(o,n);return s===void 0&&s===i?Cd(o,n):Sr(i,s,3)}},Gp=function(n){return function(i){return i==null?void 0:i[n]}},k0=function(n){return function(i){return uh(i,n)}},Kv=function(n){return wd(n)?Gp(ch(n)):k0(n)},Ti=function(n){return typeof n=="function"?n:n==null?du:typeof n=="object"?ve(n)?L0(n[0],n[1]):Cg(n):Kv(n)},sf=function(n,i){return(ve(n)?di:Mp)(n,Ti(i))},lh=Object.prototype.hasOwnProperty,af=function(n,i){return n!=null&&lh.call(n,i)},fh=function(n,i){return n!=null&&Yv(n,i,af)},zp=Object.prototype.hasOwnProperty,qv=function(n){if(n==null)return!0;if(Qn(n)&&(ve(n)||typeof n=="string"||typeof n.splice=="function"||Nt(n)||je(n)||$e(n)))return!n.length;var i=Ft(n);if(i=="[object Map]"||i=="[object Set]")return!n.size;if(Fe(n))return!dn(n).length;for(var o in n)if(zp.call(n,o))return!1;return!0},jp=function(n){return n===void 0},Up=function(n,i){var o=-1,s=Qn(n)?Array(n.length):[];return wg(n,function(c,l,d){s[++o]=i(c,l,d)}),s},Vp=function(n,i){return(ve(n)?of:Up)(n,Ti(i))},cf=function(n,i,o,s){var c=-1,l=n==null?0:n.length;for(s&&l&&(o=n[++c]);++c<l;)o=i(o,n[c],c,n);return o},Zp=function(n,i,o,s,c){return c(n,function(l,d,p){o=s?(s=!1,l):i(o,l,d,p)}),o},Td=function(n,i,o){var s=ve(n)?cf:Zp,c=arguments.length<3;return s(n,Ti(i),o,c,wg)},Og=function(n){return typeof n=="string"||!ve(n)&&_e(n)&&Pa(n)=="[object String]"},hh=Gp("length"),Jv=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Qv=function(n){return Jv.test(n)},pa="[\\ud800-\\udfff]",gu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Mr="\\ud83c[\\udffb-\\udfff]",Da="[^\\ud800-\\udfff]",uf="(?:\\ud83c[\\udde6-\\uddff]){2}",tm="[\\ud800-\\udbff][\\udc00-\\udfff]",dh="(?:"+gu+"|"+Mr+")?",Ns="[\\ufe0e\\ufe0f]?"+dh+("(?:\\u200d(?:"+[Da,uf,tm].join("|")+")[\\ufe0e\\ufe0f]?"+dh+")*"),Ad="(?:"+[Da+gu+"?",gu,uf,tm,pa].join("|")+")",Mg=RegExp(Mr+"(?="+Mr+")|"+Ad+Ns,"g"),$p=function(n){for(var i=Mg.lastIndex=0;Mg.test(n);)++i;return i},F0=function(n){return Qv(n)?$p(n):hh(n)},B0=function(n){if(n==null)return 0;if(Qn(n))return Og(n)?F0(n):n.length;var i=Ft(n);return i=="[object Map]"||i=="[object Set]"?n.size:dn(n).length},G0=function(n,i,o){var s=ve(n),c=s||Nt(n)||je(n);if(i=Ti(i),o==null){var l=n&&n.constructor;o=c?s?new l:[]:Ps(n)&&ql(l)?ir(xr(n)):{}}return(c?N:Tp)(n,function(d,p,v){return i(o,d,p,v)}),o},Hp=Xo?Xo.isConcatSpreadable:void 0,z0=function(n){return ve(n)||$e(n)||!!(Hp&&n&&n[Hp])},Wp=function n(i,o,s,c,l){var d=-1,p=i.length;for(s||(s=z0),l||(l=[]);++d<p;){var v=i[d];o>0&&s(v)?o>1?n(v,o-1,s,c,l):Ui(l,v):c||(l[l.length]=v)}return l},j0=function(n,i,o){switch(o.length){case 0:return n.call(i);case 1:return n.call(i,o[0]);case 2:return n.call(i,o[0],o[1]);case 3:return n.call(i,o[0],o[1],o[2])}return n.apply(i,o)},Od=Math.max,gh=function(n,i,o){return i=Od(i===void 0?n.length-1:i,0),function(){for(var s=arguments,c=-1,l=Od(s.length-i,0),d=Array(l);++c<l;)d[c]=s[i+c];c=-1;for(var p=Array(i+1);++c<i;)p[c]=s[c];return p[i]=o(d),j0(n,this,p)}},Xp=X?function(n,i){return X(n,"toString",{configurable:!0,enumerable:!1,value:ih(i),writable:!0})}:du,pu=Date.now,Ig=function(n){var i=0,o=0;return function(){var s=pu(),c=16-(s-o);if(o=s,c>0){if(++i>=800)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}(Xp),cl=function(n,i){return Ig(gh(n,i,du),n+"")},ul=function(n,i,o,s){for(var c=n.length,l=o+(s?1:-1);s?l--:++l<c;)if(i(n[l],l,n))return l;return-1},lf=function(n){return n!=n},Md=function(n,i,o){for(var s=o-1,c=n.length;++s<c;)if(n[s]===i)return s;return-1},em=function(n,i,o){return i==i?Md(n,i,o):ul(n,lf,o)},nm=function(n,i){return!!(n!=null&&n.length)&&em(n,i,0)>-1},Ni=function(n,i,o){for(var s=-1,c=n==null?0:n.length;++s<c;)if(o(i,n[s]))return!0;return!1},Ai=function(){},ll=te&&1/Pp(new te([,-0]))[1]==1/0?function(n){return new te(n)}:Ai,St=function(n,i,o){var s=-1,c=nm,l=n.length,d=!0,p=[],v=p;if(o)d=!1,c=Ni;else if(l>=200){var y=i?null:ll(n);if(y)return Pp(y);d=!1,c=Ip,v=new zv}else v=i?[]:p;t:for(;++s<l;){var x=n[s],E=i?i(x):x;if(x=o||x!==0?x:0,d&&E==E){for(var _=v.length;_--;)if(v[_]===E)continue t;i&&v.push(E),p.push(x)}else c(v,E,o)||(v!==p&&v.push(E),p.push(x))}return p},pn=function(n){return _e(n)&&Qn(n)},kn=cl(function(n){return St(Wp(n,1,pn,!0))}),uc=function(n,i){return of(i,function(o){return n[o]})},Pg,rm=function(n){return n==null?[]:uc(n,Vn(n))};try{Pg={clone:Lo,constant:ih,each:Gv,filter:sf,has:fh,isArray:ve,isEmpty:qv,isFunction:ql,isUndefined:jp,keys:Vn,map:Vp,reduce:Td,size:B0,transform:G0,union:kn,values:rm}}catch(n){}Pg||(Pg=window._);var _n=Pg,Yp=zr;function zr(n){this._isDirected=!_n.has(n,"directed")||n.directed,this._isMultigraph=!!_n.has(n,"multigraph")&&n.multigraph,this._isCompound=!!_n.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=_n.constant(void 0),this._defaultEdgeLabelFn=_n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Id(n,i){n[i]?n[i]++:n[i]=1}function im(n,i){--n[i]||delete n[i]}function Zi(n,i,o,s){var c=""+i,l=""+o;if(!n&&c>l){var d=c;c=l,l=d}return c+""+l+""+(_n.isUndefined(s)?"\0":s)}function go(n,i,o,s){var c=""+i,l=""+o;if(!n&&c>l){var d=c;c=l,l=d}var p={v:c,w:l};return s&&(p.name=s),p}function ph(n,i){return Zi(n,i.v,i.w,i.name)}zr.prototype._nodeCount=0,zr.prototype._edgeCount=0,zr.prototype.isDirected=function(){return this._isDirected},zr.prototype.isMultigraph=function(){return this._isMultigraph},zr.prototype.isCompound=function(){return this._isCompound},zr.prototype.setGraph=function(n){return this._label=n,this},zr.prototype.graph=function(){return this._label},zr.prototype.setDefaultNodeLabel=function(n){return _n.isFunction(n)||(n=_n.constant(n)),this._defaultNodeLabelFn=n,this},zr.prototype.nodeCount=function(){return this._nodeCount},zr.prototype.nodes=function(){return _n.keys(this._nodes)},zr.prototype.sources=function(){var n=this;return _n.filter(this.nodes(),function(i){return _n.isEmpty(n._in[i])})},zr.prototype.sinks=function(){var n=this;return _n.filter(this.nodes(),function(i){return _n.isEmpty(n._out[i])})},zr.prototype.setNodes=function(n,i){var o=arguments,s=this;return _n.each(n,function(c){o.length>1?s.setNode(c,i):s.setNode(c)}),this},zr.prototype.setNode=function(n,i){return _n.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=i),this):(this._nodes[n]=arguments.length>1?i:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},zr.prototype.node=function(n){return this._nodes[n]},zr.prototype.hasNode=function(n){return _n.has(this._nodes,n)},zr.prototype.removeNode=function(n){var i=this;if(_n.has(this._nodes,n)){var o=function(s){i.removeEdge(i._edgeObjs[s])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],_n.each(this.children(n),function(s){i.setParent(s)}),delete this._children[n]),_n.each(_n.keys(this._in[n]),o),delete this._in[n],delete this._preds[n],_n.each(_n.keys(this._out[n]),o),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},zr.prototype.setParent=function(n,i){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(_n.isUndefined(i))i="\0";else{for(var o=i+="";!_n.isUndefined(o);o=this.parent(o))if(o===n)throw new Error("Setting "+i+" as parent of "+n+" would create a cycle");this.setNode(i)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=i,this._children[i][n]=!0,this},zr.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},zr.prototype.parent=function(n){if(this._isCompound){var i=this._parent[n];if(i!=="\0")return i}},zr.prototype.children=function(n){if(_n.isUndefined(n)&&(n="\0"),this._isCompound){var i=this._children[n];if(i)return _n.keys(i)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},zr.prototype.predecessors=function(n){var i=this._preds[n];if(i)return _n.keys(i)},zr.prototype.successors=function(n){var i=this._sucs[n];if(i)return _n.keys(i)},zr.prototype.neighbors=function(n){var i=this.predecessors(n);if(i)return _n.union(i,this.successors(n))},zr.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},zr.prototype.filterNodes=function(n){var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});i.setGraph(this.graph());var o=this;_n.each(this._nodes,function(l,d){n(d)&&i.setNode(d,l)}),_n.each(this._edgeObjs,function(l){i.hasNode(l.v)&&i.hasNode(l.w)&&i.setEdge(l,o.edge(l))});var s={};function c(l){var d=o.parent(l);return d===void 0||i.hasNode(d)?(s[l]=d,d):d in s?s[d]:c(d)}return this._isCompound&&_n.each(i.nodes(),function(l){i.setParent(l,c(l))}),i},zr.prototype.setDefaultEdgeLabel=function(n){return _n.isFunction(n)||(n=_n.constant(n)),this._defaultEdgeLabelFn=n,this},zr.prototype.edgeCount=function(){return this._edgeCount},zr.prototype.edges=function(){return _n.values(this._edgeObjs)},zr.prototype.setPath=function(n,i){var o=this,s=arguments;return _n.reduce(n,function(c,l){return s.length>1?o.setEdge(c,l,i):o.setEdge(c,l),l}),this},zr.prototype.setEdge=function(){var n,i,o,s,c=!1,l=arguments[0];typeof l=="object"&&l!==null&&"v"in l?(n=l.v,i=l.w,o=l.name,arguments.length===2&&(s=arguments[1],c=!0)):(n=l,i=arguments[1],o=arguments[3],arguments.length>2&&(s=arguments[2],c=!0)),n=""+n,i=""+i,_n.isUndefined(o)||(o=""+o);var d=Zi(this._isDirected,n,i,o);if(_n.has(this._edgeLabels,d))return c&&(this._edgeLabels[d]=s),this;if(!_n.isUndefined(o)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(i),this._edgeLabels[d]=c?s:this._defaultEdgeLabelFn(n,i,o);var p=go(this._isDirected,n,i,o);return n=p.v,i=p.w,Object.freeze(p),this._edgeObjs[d]=p,Id(this._preds[i],n),Id(this._sucs[n],i),this._in[i][d]=p,this._out[n][d]=p,this._edgeCount++,this},zr.prototype.edge=function(n,i,o){var s=arguments.length===1?ph(this._isDirected,arguments[0]):Zi(this._isDirected,n,i,o);return this._edgeLabels[s]},zr.prototype.hasEdge=function(n,i,o){var s=arguments.length===1?ph(this._isDirected,arguments[0]):Zi(this._isDirected,n,i,o);return _n.has(this._edgeLabels,s)},zr.prototype.removeEdge=function(n,i,o){var s=arguments.length===1?ph(this._isDirected,arguments[0]):Zi(this._isDirected,n,i,o),c=this._edgeObjs[s];return c&&(n=c.v,i=c.w,delete this._edgeLabels[s],delete this._edgeObjs[s],im(this._preds[i],n),im(this._sucs[n],i),delete this._in[i][s],delete this._out[n][s],this._edgeCount--),this},zr.prototype.inEdges=function(n,i){var o=this._in[n];if(o){var s=_n.values(o);return i?_n.filter(s,function(c){return c.v===i}):s}},zr.prototype.outEdges=function(n,i){var o=this._out[n];if(o){var s=_n.values(o);return i?_n.filter(s,function(c){return c.w===i}):s}},zr.prototype.nodeEdges=function(n,i){var o=this.inEdges(n,i);if(o)return o.concat(this.outEdges(n,i))};var ds={Graph:Yp,version:"2.1.8"},vh={write:function(n){var i={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:mh(n),edges:La(n)};return _n.isUndefined(n.graph())||(i.value=_n.clone(n.graph())),i},read:function(n){var i=new Yp(n.options).setGraph(n.value);return _n.each(n.nodes,function(o){i.setNode(o.v,o.value),o.parent&&i.setParent(o.v,o.parent)}),_n.each(n.edges,function(o){i.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),i}};function mh(n){return _n.map(n.nodes(),function(i){var o=n.node(i),s=n.parent(i),c={v:i};return _n.isUndefined(o)||(c.value=o),_n.isUndefined(s)||(c.parent=s),c})}function La(n){return _n.map(n.edges(),function(i){var o=n.edge(i),s={v:i.v,w:i.w};return _n.isUndefined(i.name)||(s.name=i.name),_n.isUndefined(o)||(s.value=o),s})}var Ng=function(n){var i,o={},s=[];function c(l){_n.has(o,l)||(o[l]=!0,i.push(l),_n.each(n.successors(l),c),_n.each(n.predecessors(l),c))}return _n.each(n.nodes(),function(l){i=[],c(l),i.length&&s.push(i)}),s},Kp=va;function va(){this._arr=[],this._keyIndices={}}va.prototype.size=function(){return this._arr.length},va.prototype.keys=function(){return this._arr.map(function(n){return n.key})},va.prototype.has=function(n){return _n.has(this._keyIndices,n)},va.prototype.priority=function(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority},va.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},va.prototype.add=function(n,i){var o=this._keyIndices;if(n=String(n),!_n.has(o,n)){var s=this._arr,c=s.length;return o[n]=c,s.push({key:n,priority:i}),this._decrease(c),!0}return!1},va.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},va.prototype.decrease=function(n,i){var o=this._keyIndices[n];if(i>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+i);this._arr[o].priority=i,this._decrease(o)},va.prototype._heapify=function(n){var i=this._arr,o=2*n,s=o+1,c=n;o<i.length&&(c=i[o].priority<i[c].priority?o:c,s<i.length&&(c=i[s].priority<i[c].priority?s:c),c!==n&&(this._swap(n,c),this._heapify(c)))},va.prototype._decrease=function(n){for(var i,o=this._arr,s=o[n].priority;n!==0&&!(o[i=n>>1].priority<s);)this._swap(n,i),n=i},va.prototype._swap=function(n,i){var o=this._arr,s=this._keyIndices,c=o[n],l=o[i];o[n]=l,o[i]=c,s[l.key]=n,s[c.key]=i};var om=function(n,i,o,s){return function(c,l,d,p){var v,y,x={},E=new Kp,_=function(T){var M=T.v!==v?T.v:T.w,R=x[M],D=d(T),k=y.distance+D;if(D<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+D);k<R.distance&&(R.distance=k,R.predecessor=v,E.decrease(M,k))};for(c.nodes().forEach(function(T){var M=T===l?0:Number.POSITIVE_INFINITY;x[T]={distance:M},E.add(T,M)});E.size()>0&&(v=E.removeMin(),(y=x[v]).distance!==Number.POSITIVE_INFINITY);)p(v).forEach(_);return x}(n,String(i),o||U0,s||function(c){return n.outEdges(c)})},U0=_n.constant(1),V0=function(n,i,o){return _n.transform(n.nodes(),function(s,c){s[c]=om(n,c,i,o)},{})},sm=function(n){var i=0,o=[],s={},c=[];function l(d){var p=s[d]={onStack:!0,lowlink:i,index:i++};if(o.push(d),n.successors(d).forEach(function(x){_n.has(s,x)?s[x].onStack&&(p.lowlink=Math.min(p.lowlink,s[x].index)):(l(x),p.lowlink=Math.min(p.lowlink,s[x].lowlink))}),p.lowlink===p.index){var v,y=[];do v=o.pop(),s[v].onStack=!1,y.push(v);while(d!==v);c.push(y)}}return n.nodes().forEach(function(d){_n.has(s,d)||l(d)}),c},Kn=function(n){return _n.filter(sm(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})},So=function(n,i,o){return function(s,c,l){var d={},p=s.nodes();return p.forEach(function(v){d[v]={},d[v][v]={distance:0},p.forEach(function(y){v!==y&&(d[v][y]={distance:Number.POSITIVE_INFINITY})}),l(v).forEach(function(y){var x=y.v===v?y.w:y.v,E=c(y);d[v][x]={distance:E,predecessor:v}})}),p.forEach(function(v){var y=d[v];p.forEach(function(x){var E=d[x];p.forEach(function(_){var T=E[v],M=y[_],R=E[_],D=T.distance+M.distance;D<R.distance&&(R.distance=D,R.predecessor=M.predecessor)})})}),d}(n,i||Z0,o||function(s){return n.outEdges(s)})},Z0=_n.constant(1),qp=am;function am(n){var i={},o={},s=[];if(_n.each(n.sinks(),function c(l){if(_n.has(o,l))throw new Rg;_n.has(i,l)||(o[l]=!0,i[l]=!0,_n.each(n.predecessors(l),c),delete o[l],s.push(l))}),_n.size(i)!==n.nodeCount())throw new Rg;return s}function Rg(){}am.CycleException=Rg,Rg.prototype=new Error;var vu=function(n,i,o){_n.isArray(i)||(i=[i]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),c=[],l={};return _n.each(i,function(d){if(!n.hasNode(d))throw new Error("Graph does not have node: "+d);Jp(n,d,o==="post",l,s,c)}),c};function Jp(n,i,o,s,c,l){_n.has(s,i)||(s[i]=!0,o||l.push(i),_n.each(c(i),function(d){Jp(n,d,o,s,c,l)}),o&&l.push(i))}var Pd,cm={Graph:ds.Graph,json:vh,alg:{components:Ng,dijkstra:om,dijkstraAll:V0,findCycles:Kn,floydWarshall:So,isAcyclic:function(n){try{qp(n)}catch(i){if(i instanceof qp.CycleException)return!1;throw i}return!0},postorder:function(n,i){return vu(n,i,"post")},preorder:function(n,i){return vu(n,i,"pre")},prim:function(n,i){var o,s=new Yp,c={},l=new Kp;function d(v){var y=v.v===o?v.w:v.v,x=l.priority(y);if(x!==void 0){var E=i(v);E<x&&(c[y]=o,l.decrease(y,E))}}if(n.nodeCount()===0)return s;_n.each(n.nodes(),function(v){l.add(v,Number.POSITIVE_INFINITY),s.setNode(v)}),l.decrease(n.nodes()[0],0);for(var p=!1;l.size()>0;){if(o=l.removeMin(),_n.has(c,o))s.setEdge(o,c[o]);else{if(p)throw new Error("Input graph is not connected: "+n);p=!0}n.nodeEdges(o).forEach(d)}return s},tarjan:sm,topsort:qp},version:ds.version};try{Pd=cm}catch(n){}Pd||(Pd=window.graphlib);var lc=Pd,Nd=function(n){return rh(n,5)},ff=function(n,i,o){if(!Ps(o))return!1;var s=typeof i;return!!(s=="number"?Qn(o)&&ke(i,o.length):s=="string"&&i in o)&&Qu(o[i],n)},ko=Object.prototype,$0=ko.hasOwnProperty,H0=cl(function(n,i){n=Object(n);var o=-1,s=i.length,c=s>2?i[2]:void 0;for(c&&ff(i[0],i[1],c)&&(s=1);++o<s;)for(var l=i[o],d=ar(l),p=-1,v=d.length;++p<v;){var y=d[p],x=n[y];(x===void 0||Qu(x,ko[y])&&!$0.call(n,y))&&(n[y]=l[y])}return n}),W0=function(n){return function(i,o,s){var c=Object(i);if(!Qn(i)){var l=Ti(o);i=Vn(i),o=function(p){return l(c[p],p,c)}}var d=n(i,o,s);return d>-1?c[l?i[d]:d]:void 0}},X0=/^\s+|\s+$/g,Y0=/^[-+]0x[0-9a-f]+$/i,K0=/^0b[01]+$/i,q0=/^0o[0-7]+$/i,J0=parseInt,Q0=function(n){if(typeof n=="number")return n;if(rf(n))return NaN;if(Ps(n)){var i=typeof n.valueOf=="function"?n.valueOf():n;n=Ps(i)?i+"":i}if(typeof n!="string")return n===0?n:+n;n=n.replace(X0,"");var o=K0.test(n);return o||q0.test(n)?J0(n.slice(2),o?2:8):Y0.test(n)?NaN:+n},Dg=function(n){return n?(n=Q0(n))===1/0||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:n===0?n:0},ty=function(n){var i=Dg(n),o=i%1;return i==i?o?i-o:i:0},yh=Math.max,ey=W0(function(n,i,o){var s=n==null?0:n.length;if(!s)return-1;var c=o==null?0:ty(o);return c<0&&(c=yh(s+c,0)),ul(n,Ti(i),c)}),um=function(n){return n!=null&&n.length?Wp(n,1):[]},lm=function(n,i){return n==null?n:Eg(n,Ap(i),ar)},fm=function(n){var i=n==null?0:n.length;return i?n[i-1]:void 0},ny=function(n,i){var o={};return i=Ti(i),Tp(n,function(s,c,l){lt(o,c,i(s,c,l))}),o},Qp=function(n,i,o){for(var s=-1,c=n.length;++s<c;){var l=n[s],d=i(l);if(d!=null&&(p===void 0?d==d&&!rf(d):o(d,p)))var p=d,v=l}return v},hm=function(n,i){return n>i},dm=function(n){return n&&n.length?Qp(n,du,hm):void 0},tv=function(n,i,o){(o!==void 0&&!Qu(n[i],o)||o===void 0&&!(i in n))&&lt(n,i,o)},ry=Function.prototype,gm=Object.prototype,pm=ry.toString,iy=gm.hasOwnProperty,oy=pm.call(Object),vm=function(n){if(!_e(n)||Pa(n)!="[object Object]")return!1;var i=xr(n);if(i===null)return!0;var o=iy.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&pm.call(o)==oy},ev=function(n,i){if((i!=="constructor"||typeof n[i]!="function")&&i!="__proto__")return n[i]},mm=function(n){return Kt(n,ar(n))},sy=function(n,i,o,s,c,l,d){var p=ev(n,o),v=ev(i,o),y=d.get(v);if(y)tv(n,o,y);else{var x=l?l(p,v,o+"",n,i,d):void 0,E=x===void 0;if(E){var _=ve(v),T=!_&&Nt(v),M=!_&&!T&&je(v);x=v,_||T||M?ve(p)?x=p:pn(p)?x=li(p):T?(E=!1,x=Wr(v,!0)):M?(E=!1,x=ae(v,!0)):x=[]:vm(v)||$e(v)?(x=p,$e(p)?x=mm(p):Ps(p)&&!ql(p)||(x=ln(v))):E=!1}E&&(d.set(v,x),c(x,v,s,l,d),d.delete(v)),tv(n,o,x)}},ay=function n(i,o,s,c,l){i!==o&&Eg(o,function(d,p){if(l||(l=new ef),Ps(d))sy(i,o,p,s,n,c,l);else{var v=c?c(ev(i,p),d,p+"",i,o,l):void 0;v===void 0&&(v=d),tv(i,p,v)}},ar)},cy=function(n){return cl(function(i,o){var s=-1,c=o.length,l=c>1?o[c-1]:void 0,d=c>2?o[2]:void 0;for(l=n.length>3&&typeof l=="function"?(c--,l):void 0,d&&ff(o[0],o[1],d)&&(l=c<3?void 0:l,c=1),i=Object(i);++s<c;){var p=o[s];p&&n(i,p,s,l)}return i})}(function(n,i,o){ay(n,i,o)}),ym=function(n,i){return n<i},uy=function(n){return n&&n.length?Qp(n,du,ym):void 0},ly=function(n,i){return n&&n.length?Qp(n,Ti(i),ym):void 0},fy=function(){return Is.Date.now()},hy=function(n,i,o,s){if(!Ps(n))return n;for(var c=-1,l=(i=_d(i,n)).length,d=l-1,p=n;p!=null&&++c<l;){var v=ch(i[c]),y=o;if(v==="__proto__"||v==="constructor"||v==="prototype")return n;if(c!=d){var x=p[v];(y=s?s(x,v,p):void 0)===void 0&&(y=Ps(x)?x:ke(i[c+1])?[]:{})}ge(p,v,y),p=p[v]}return n},Lg=function(n,i,o){for(var s=-1,c=i.length,l={};++s<c;){var d=i[s],p=uh(n,d);o(p,d)&&hy(l,_d(d,n),p)}return l},fl=function(n,i){return Lg(n,i,function(o,s){return Cd(n,s)})},bm=function(n){return Ig(gh(n,void 0,um),n+"")}(function(n,i){return n==null?{}:fl(n,i)}),xm=Math.ceil,Em=Math.max,dy=function(n,i,o,s){for(var c=-1,l=Em(xm((i-n)/(o||1)),0),d=Array(l);l--;)d[s?l:++c]=n,n+=o;return d},gy=function(n){return function(i,o,s){return s&&typeof s!="number"&&ff(i,o,s)&&(o=s=void 0),i=Dg(i),o===void 0?(o=i,i=0):o=Dg(o),s=s===void 0?i<o?1:-1:Dg(s),dy(i,o,s,n)}}(),wm=function(n,i){var o=n.length;for(n.sort(i);o--;)n[o]=n[o].value;return n},py=function(n,i){if(n!==i){var o=n!==void 0,s=n===null,c=n==n,l=rf(n),d=i!==void 0,p=i===null,v=i==i,y=rf(i);if(!p&&!y&&!l&&n>i||l&&d&&v&&!p&&!y||s&&d&&v||!o&&v||!c)return 1;if(!s&&!l&&!y&&n<i||y&&o&&c&&!s&&!l||p&&o&&c||!d&&c||!v)return-1}return 0},bh=function(n,i,o){for(var s=-1,c=n.criteria,l=i.criteria,d=c.length,p=o.length;++s<d;){var v=py(c[s],l[s]);if(v)return s>=p?v:v*(o[s]=="desc"?-1:1)}return n.index-i.index},vy=function(n,i,o){i=i.length?of(i,function(l){return ve(l)?function(d){return uh(d,l.length===1?l[0]:l)}:l}):[du];var s=-1;i=of(i,Ee(Ti));var c=Up(n,function(l,d,p){return{criteria:of(i,function(v){return v(l)}),index:++s,value:l}});return wm(c,function(l,d){return bh(l,d,o)})},my=cl(function(n,i){if(n==null)return[];var o=i.length;return o>1&&ff(n,i[0],i[1])?i=[]:o>2&&ff(i[0],i[1],i[2])&&(i=[i[0]]),vy(n,Wp(i,1),[])}),yy=0,by=function(n){var i=++yy;return Fp(n)+i},xy=function(n,i,o){for(var s=-1,c=n.length,l=i.length,d={};++s<c;){var p=s<l?i[s]:void 0;o(d,n[s],p)}return d},kg,Ey=function(n,i){return xy(n||[],i||[],ge)};try{kg={cloneDeep:Nd,constant:ih,defaults:H0,each:Gv,filter:sf,find:ey,flatten:um,forEach:Op,forIn:lm,has:fh,isUndefined:jp,last:fm,map:Vp,mapValues:ny,max:dm,merge:cy,min:uy,minBy:ly,now:fy,pick:bm,range:gy,reduce:Td,sortBy:my,uniqueId:by,values:rm,zipObject:Ey}}catch(n){}kg||(kg=window._);var xt=kg,wy=Fg;function Fg(){var n={};n._next=n._prev=n,this._sentinel=n}function nv(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function Sy(n,i){if(n!=="_next"&&n!=="_prev")return i}Fg.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return nv(i),i},Fg.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&nv(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},Fg.prototype.toString=function(){for(var n=[],i=this._sentinel,o=i._prev;o!==i;)n.push(JSON.stringify(o,Sy)),o=o._prev;return"["+n.join(", ")+"]"};var _y=lc.Graph,Cy=function(n,i){if(n.nodeCount()<=1)return[];var o=function(c,l){var d=new _y,p=0,v=0;xt.forEach(c.nodes(),function(E){d.setNode(E,{v:E,in:0,out:0})}),xt.forEach(c.edges(),function(E){var _=d.edge(E.v,E.w)||0,T=l(E),M=_+T;d.setEdge(E.v,E.w,M),v=Math.max(v,d.node(E.v).out+=T),p=Math.max(p,d.node(E.w).in+=T)});var y=xt.range(v+p+3).map(function(){return new wy}),x=p+1;return xt.forEach(d.nodes(),function(E){Bg(y,x,d.node(E))}),{graph:d,buckets:y,zeroIdx:x}}(n,i||Ty),s=function(c,l,d){for(var p,v=[],y=l[l.length-1],x=l[0];c.nodeCount();){for(;p=x.dequeue();)mu(c,l,d,p);for(;p=y.dequeue();)mu(c,l,d,p);if(c.nodeCount()){for(var E=l.length-2;E>0;--E)if(p=l[E].dequeue()){v=v.concat(mu(c,l,d,p,!0));break}}}return v}(o.graph,o.buckets,o.zeroIdx);return xt.flatten(xt.map(s,function(c){return n.outEdges(c.v,c.w)}),!0)},Ty=xt.constant(1);function mu(n,i,o,s,c){var l=c?[]:void 0;return xt.forEach(n.inEdges(s.v),function(d){var p=n.edge(d),v=n.node(d.v);c&&l.push({v:d.v,w:d.w}),v.out-=p,Bg(i,o,v)}),xt.forEach(n.outEdges(s.v),function(d){var p=n.edge(d),v=d.w,y=n.node(v);y.in-=p,Bg(i,o,y)}),n.removeNode(s.v),l}function Bg(n,i,o){o.out?o.in?n[o.out-o.in+i].enqueue(o):n[n.length-1].enqueue(o):n[0].enqueue(o)}var Sm={run:function(n){var i=n.graph().acyclicer==="greedy"?Cy(n,function(o){return function(s){return o.edge(s).weight}}(n)):function(o){var s=[],c={},l={};function d(p){xt.has(l,p)||(l[p]=!0,c[p]=!0,xt.forEach(o.outEdges(p),function(v){xt.has(c,v.w)?s.push(v):d(v.w)}),delete c[p])}return xt.forEach(o.nodes(),d),s}(n);xt.forEach(i,function(o){var s=n.edge(o);n.removeEdge(o),s.forwardName=o.name,s.reversed=!0,n.setEdge(o.w,o.v,s,xt.uniqueId("rev"))})},undo:function(n){xt.forEach(n.edges(),function(i){var o=n.edge(i);if(o.reversed){n.removeEdge(i);var s=o.forwardName;delete o.reversed,delete o.forwardName,n.setEdge(i.w,i.v,o,s)}})}},_m=lc.Graph,Fo={addDummyNode:Cm,simplify:function(n){var i=new _m().setGraph(n.graph());return xt.forEach(n.nodes(),function(o){i.setNode(o,n.node(o))}),xt.forEach(n.edges(),function(o){var s=i.edge(o.v,o.w)||{weight:0,minlen:1},c=n.edge(o);i.setEdge(o.v,o.w,{weight:s.weight+c.weight,minlen:Math.max(s.minlen,c.minlen)})}),i},asNonCompoundGraph:function(n){var i=new _m({multigraph:n.isMultigraph()}).setGraph(n.graph());return xt.forEach(n.nodes(),function(o){n.children(o).length||i.setNode(o,n.node(o))}),xt.forEach(n.edges(),function(o){i.setEdge(o,n.edge(o))}),i},successorWeights:function(n){var i=xt.map(n.nodes(),function(o){var s={};return xt.forEach(n.outEdges(o),function(c){s[c.w]=(s[c.w]||0)+n.edge(c).weight}),s});return xt.zipObject(n.nodes(),i)},predecessorWeights:function(n){var i=xt.map(n.nodes(),function(o){var s={};return xt.forEach(n.inEdges(o),function(c){s[c.v]=(s[c.v]||0)+n.edge(c).weight}),s});return xt.zipObject(n.nodes(),i)},intersectRect:function(n,i){var o,s,c=n.x,l=n.y,d=i.x-c,p=i.y-l,v=n.width/2,y=n.height/2;if(!d&&!p)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(p)*v>Math.abs(d)*y?(p<0&&(y=-y),o=y*d/p,s=y):(d<0&&(v=-v),o=v,s=v*p/d),{x:c+o,y:l+s}},buildLayerMatrix:function(n){var i=xt.map(xt.range(Tm(n)+1),function(){return[]});return xt.forEach(n.nodes(),function(o){var s=n.node(o),c=s.rank;xt.isUndefined(c)||(i[c][s.order]=o)}),i},normalizeRanks:function(n){var i=xt.min(xt.map(n.nodes(),function(o){return n.node(o).rank}));xt.forEach(n.nodes(),function(o){var s=n.node(o);xt.has(s,"rank")&&(s.rank-=i)})},removeEmptyRanks:function(n){var i=xt.min(xt.map(n.nodes(),function(l){return n.node(l).rank})),o=[];xt.forEach(n.nodes(),function(l){var d=n.node(l).rank-i;o[d]||(o[d]=[]),o[d].push(l)});var s=0,c=n.graph().nodeRankFactor;xt.forEach(o,function(l,d){xt.isUndefined(l)&&d%c!=0?--s:s&&xt.forEach(l,function(p){n.node(p).rank+=s})})},addBorderNode:function(n,i,o,s){var c={width:0,height:0};return arguments.length>=4&&(c.rank=o,c.order=s),Cm(n,"border",c,i)},maxRank:Tm,partition:function(n,i){var o={lhs:[],rhs:[]};return xt.forEach(n,function(s){i(s)?o.lhs.push(s):o.rhs.push(s)}),o},time:function(n,i){var o=xt.now();try{return i()}finally{console.log(n+" time: "+(xt.now()-o)+"ms")}},notime:function(n,i){return i()}};function Cm(n,i,o,s){var c;do c=xt.uniqueId(s);while(n.hasNode(c));return o.dummy=i,n.setNode(c,o),c}function Tm(n){return xt.max(xt.map(n.nodes(),function(i){var o=n.node(i).rank;if(!xt.isUndefined(o))return o}))}var Am={run:function(n){n.graph().dummyChains=[],xt.forEach(n.edges(),function(i){(function(o,s){var c,l,d,p=s.v,v=o.node(p).rank,y=s.w,x=o.node(y).rank,E=s.name,_=o.edge(s),T=_.labelRank;if(x!==v+1){for(o.removeEdge(s),d=0,++v;v<x;++d,++v)_.points=[],l={width:0,height:0,edgeLabel:_,edgeObj:s,rank:v},c=Fo.addDummyNode(o,"edge",l,"_d"),v===T&&(l.width=_.width,l.height=_.height,l.dummy="edge-label",l.labelpos=_.labelpos),o.setEdge(p,c,{weight:_.weight},E),d===0&&o.graph().dummyChains.push(c),p=c;o.setEdge(p,y,{weight:_.weight},E)}})(n,i)})},undo:function(n){xt.forEach(n.graph().dummyChains,function(i){var o,s=n.node(i),c=s.edgeLabel;for(n.setEdge(s.edgeObj,c);s.dummy;)o=n.successors(i)[0],n.removeNode(i),c.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(c.x=s.x,c.y=s.y,c.width=s.width,c.height=s.height),i=o,s=n.node(i)})}},Om=function(n){var i={};xt.forEach(n.sources(),function o(s){var c=n.node(s);if(xt.has(i,s))return c.rank;i[s]=!0;var l=xt.min(xt.map(n.outEdges(s),function(d){return o(d.w)-n.edge(d).minlen}));return l!==Number.POSITIVE_INFINITY&&l!=null||(l=0),c.rank=l})},Mm=function(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen},Ay=lc.Graph,Gg=Mm,Im=function(n){var i,o,s=new Ay({directed:!1}),c=n.nodes()[0],l=n.nodeCount();for(s.setNode(c,{});Pm(s,n)<l;)i=Nm(s,n),o=s.hasNode(i.v)?Gg(n,i):-Gg(n,i),Oy(s,n,o);return s};function Pm(n,i){return xt.forEach(n.nodes(),function o(s){xt.forEach(i.nodeEdges(s),function(c){var l=c.v,d=s===l?c.w:l;n.hasNode(d)||Gg(i,c)||(n.setNode(d,{}),n.setEdge(s,d,{}),o(d))})}),n.nodeCount()}function Nm(n,i){return xt.minBy(i.edges(),function(o){if(n.hasNode(o.v)!==n.hasNode(o.w))return Gg(i,o)})}function Oy(n,i,o){xt.forEach(n.nodes(),function(s){i.node(s).rank+=o})}var My=Mm,Iy=Om,hl=lc.alg.preorder,Py=lc.alg.postorder,rv=Fo.simplify,Ny=hf;function hf(n){n=rv(n),Iy(n);var i,o=Im(n);for(ov(o),iv(o,n);i=Rm(o);)Dm(o,n,i,sv(o,n,i))}function iv(n,i){var o=Py(n,n.nodes());o=o.slice(0,o.length-1),xt.forEach(o,function(s){(function(c,l,d){var p=c.node(d).parent;c.edge(d,p).cutvalue=zg(c,l,d)})(n,i,s)})}function zg(n,i,o){var s=n.node(o).parent,c=!0,l=i.edge(o,s),d=0;return l||(c=!1,l=i.edge(s,o)),d=l.weight,xt.forEach(i.nodeEdges(o),function(p){var v,y,x=p.v===o,E=x?p.w:p.v;if(E!==s){var _=x===c,T=i.edge(p).weight;if(d+=_?T:-T,v=o,y=E,n.hasEdge(v,y)){var M=n.edge(o,E).cutvalue;d+=_?-M:M}}}),d}function ov(n,i){arguments.length<2&&(i=n.nodes()[0]),xh(n,{},1,i)}function xh(n,i,o,s,c){var l=o,d=n.node(s);return i[s]=!0,xt.forEach(n.neighbors(s),function(p){xt.has(i,p)||(o=xh(n,i,o,p,s))}),d.low=l,d.lim=o++,c?d.parent=c:delete d.parent,o}function Rm(n){return xt.find(n.edges(),function(i){return n.edge(i).cutvalue<0})}function sv(n,i,o){var s=o.v,c=o.w;i.hasEdge(s,c)||(s=o.w,c=o.v);var l=n.node(s),d=n.node(c),p=l,v=!1;l.lim>d.lim&&(p=d,v=!0);var y=xt.filter(i.edges(),function(x){return v===av(n,n.node(x.v),p)&&v!==av(n,n.node(x.w),p)});return xt.minBy(y,function(x){return My(i,x)})}function Dm(n,i,o,s){var c=o.v,l=o.w;n.removeEdge(c,l),n.setEdge(s.v,s.w,{}),ov(n),iv(n,i),function(d,p){var v=xt.find(d.nodes(),function(x){return!p.node(x).parent}),y=hl(d,v);y=y.slice(1),xt.forEach(y,function(x){var E=d.node(x).parent,_=p.edge(x,E),T=!1;_||(_=p.edge(E,x),T=!0),p.node(x).rank=p.node(E).rank+(T?_.minlen:-_.minlen)})}(n,i)}function av(n,i,o){return o.low<=i.lim&&i.lim<=o.lim}hf.initLowLimValues=ov,hf.initCutValues=iv,hf.calcCutValue=zg,hf.leaveEdge=Rm,hf.enterEdge=sv,hf.exchangeEdges=Dm;var Lm=Om,Ry=function(n){switch(n.graph().ranker){case"network-simplex":Rd(n);break;case"tight-tree":(function(i){Lm(i),Im(i)})(n);break;case"longest-path":Dy(n);break;default:Rd(n)}},Dy=Lm;function Rd(n){Ny(n)}var Ic=function(n){var i=function(o){var s={},c=0;function l(d){var p=c;xt.forEach(o.children(d),l),s[d]={low:p,lim:c++}}return xt.forEach(o.children(),l),s}(n);xt.forEach(n.graph().dummyChains,function(o){for(var s=n.node(o),c=s.edgeObj,l=function(E,_,T,M){var R,D,k=[],L=[],U=Math.min(_[T].low,_[M].low),W=Math.max(_[T].lim,_[M].lim);R=T;do R=E.parent(R),k.push(R);while(R&&(_[R].low>U||W>_[R].lim));for(D=R,R=M;(R=E.parent(R))!==D;)L.push(R);return{path:k.concat(L.reverse()),lca:D}}(n,i,c.v,c.w),d=l.path,p=l.lca,v=0,y=d[v],x=!0;o!==c.w;){if(s=n.node(o),x){for(;(y=d[v])!==p&&n.node(y).maxRank<s.rank;)v++;y===p&&(x=!1)}if(!x){for(;v<d.length-1&&n.node(y=d[v+1]).minRank<=s.rank;)v++;y=d[v]}n.setParent(o,y),o=n.successors(o)[0]}})},Yo={run:function(n){var i=Fo.addDummyNode(n,"root",{},"_root"),o=function(d){var p={};function v(y,x){var E=d.children(y);E&&E.length&&xt.forEach(E,function(_){v(_,x+1)}),p[y]=x}return xt.forEach(d.children(),function(y){v(y,1)}),p}(n),s=xt.max(xt.values(o))-1,c=2*s+1;n.graph().nestingRoot=i,xt.forEach(n.edges(),function(d){n.edge(d).minlen*=c});var l=function(d){return xt.reduce(d.edges(),function(p,v){return p+d.edge(v).weight},0)}(n)+1;xt.forEach(n.children(),function(d){cv(n,i,c,l,s,o,d)}),n.graph().nodeRankFactor=c},cleanup:function(n){var i=n.graph();n.removeNode(i.nestingRoot),delete i.nestingRoot,xt.forEach(n.edges(),function(o){n.edge(o).nestingEdge&&n.removeEdge(o)})}};function cv(n,i,o,s,c,l,d){var p=n.children(d);if(p.length){var v=Fo.addBorderNode(n,"_bt"),y=Fo.addBorderNode(n,"_bb"),x=n.node(d);n.setParent(v,d),x.borderTop=v,n.setParent(y,d),x.borderBottom=y,xt.forEach(p,function(E){cv(n,i,o,s,c,l,E);var _=n.node(E),T=_.borderTop?_.borderTop:E,M=_.borderBottom?_.borderBottom:E,R=_.borderTop?s:2*s,D=T!==M?1:c-l[d]+1;n.setEdge(v,T,{weight:R,minlen:D,nestingEdge:!0}),n.setEdge(M,y,{weight:R,minlen:D,nestingEdge:!0})}),n.parent(d)||n.setEdge(i,v,{weight:0,minlen:c+l[d]})}else d!==i&&n.setEdge(i,d,{weight:0,minlen:o})}var Ly=function(n){xt.forEach(n.children(),function i(o){var s=n.children(o),c=n.node(o);if(s.length&&xt.forEach(s,i),xt.has(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(var l=c.minRank,d=c.maxRank+1;l<d;++l)uv(n,"borderLeft","_bl",o,c,l),uv(n,"borderRight","_br",o,c,l)}})};function uv(n,i,o,s,c,l){var d={width:0,height:0,rank:l,borderType:i},p=c[i][l-1],v=Fo.addDummyNode(n,"border",d,o);c[i][l]=v,n.setParent(v,s),p&&n.setEdge(p,v,{weight:1})}var km={adjust:function(n){var i=n.graph().rankdir.toLowerCase();i!=="lr"&&i!=="rl"||pi(n)},undo:function(n){var i=n.graph().rankdir.toLowerCase();i!=="bt"&&i!=="rl"||function(o){xt.forEach(o.nodes(),function(s){lv(o.node(s))}),xt.forEach(o.edges(),function(s){var c=o.edge(s);xt.forEach(c.points,lv),xt.has(c,"y")&&lv(c)})}(n),i!=="lr"&&i!=="rl"||(function(o){xt.forEach(o.nodes(),function(s){Pc(o.node(s))}),xt.forEach(o.edges(),function(s){var c=o.edge(s);xt.forEach(c.points,Pc),xt.has(c,"x")&&Pc(c)})}(n),pi(n))}};function pi(n){xt.forEach(n.nodes(),function(i){Fm(n.node(i))}),xt.forEach(n.edges(),function(i){Fm(n.edge(i))})}function Fm(n){var i=n.width;n.width=n.height,n.height=i}function lv(n){n.y=-n.y}function Pc(n){var i=n.x;n.x=n.y,n.y=i}var yu=function(n){var i={},o=xt.filter(n.nodes(),function(p){return!n.children(p).length}),s=xt.max(xt.map(o,function(p){return n.node(p).rank})),c=xt.map(xt.range(s+1),function(){return[]});function l(p){if(!xt.has(i,p)){i[p]=!0;var v=n.node(p);c[v.rank].push(p),xt.forEach(n.successors(p),l)}}var d=xt.sortBy(o,function(p){return n.node(p).rank});return xt.forEach(d,l),c},fv=function(n,i){for(var o=0,s=1;s<i.length;++s)o+=hv(n,i[s-1],i[s]);return o};function hv(n,i,o){for(var s=xt.zipObject(o,xt.map(o,function(y,x){return x})),c=xt.flatten(xt.map(i,function(y){return xt.sortBy(xt.map(n.outEdges(y),function(x){return{pos:s[x.w],weight:n.edge(x).weight}}),"pos")}),!0),l=1;l<o.length;)l<<=1;var d=2*l-1;l-=1;var p=xt.map(new Array(d),function(){return 0}),v=0;return xt.forEach(c.forEach(function(y){var x=y.pos+l;p[x]+=y.weight;for(var E=0;x>0;)x%2&&(E+=p[x+1]),p[x=x-1>>1]+=y.weight;v+=y.weight*E})),v}var ky=function(n,i){return xt.map(i,function(o){var s=n.inEdges(o);if(s.length){var c=xt.reduce(s,function(l,d){var p=n.edge(d),v=n.node(d.v);return{sum:l.sum+p.weight*v.order,weight:l.weight+p.weight}},{sum:0,weight:0});return{v:o,barycenter:c.sum/c.weight,weight:c.weight}}return{v:o}})},Fy=function(n,i){var o={};return xt.forEach(n,function(s,c){var l=o[s.v]={indegree:0,in:[],out:[],vs:[s.v],i:c};xt.isUndefined(s.barycenter)||(l.barycenter=s.barycenter,l.weight=s.weight)}),xt.forEach(i.edges(),function(s){var c=o[s.v],l=o[s.w];xt.isUndefined(c)||xt.isUndefined(l)||(l.indegree++,c.out.push(o[s.w]))}),function(s){var c=[];function l(v){return function(y){y.merged||(xt.isUndefined(y.barycenter)||xt.isUndefined(v.barycenter)||y.barycenter>=v.barycenter)&&function(x,E){var _=0,T=0;x.weight&&(_+=x.barycenter*x.weight,T+=x.weight),E.weight&&(_+=E.barycenter*E.weight,T+=E.weight),x.vs=E.vs.concat(x.vs),x.barycenter=_/T,x.weight=T,x.i=Math.min(E.i,x.i),E.merged=!0}(v,y)}}function d(v){return function(y){y.in.push(v),--y.indegree==0&&s.push(y)}}for(;s.length;){var p=s.pop();c.push(p),xt.forEach(p.in.reverse(),l(p)),xt.forEach(p.out,d(p))}return xt.map(xt.filter(c,function(v){return!v.merged}),function(v){return xt.pick(v,["vs","i","barycenter","weight"])})}(xt.filter(o,function(s){return!s.indegree}))},By=function(n,i){var o=Fo.partition(n,function(E){return xt.has(E,"barycenter")}),s=o.lhs,c=xt.sortBy(o.rhs,function(E){return-E.i}),l=[],d=0,p=0,v=0;s.sort((y=!!i,function(E,_){return E.barycenter<_.barycenter?-1:E.barycenter>_.barycenter?1:y?_.i-E.i:E.i-_.i})),v=dv(l,c,v),xt.forEach(s,function(E){v+=E.vs.length,l.push(E.vs),d+=E.barycenter*E.weight,p+=E.weight,v=dv(l,c,v)});var y,x={vs:xt.flatten(l,!0)};return p&&(x.barycenter=d/p,x.weight=p),x};function dv(n,i,o){for(var s;i.length&&(s=xt.last(i)).i<=o;)i.pop(),n.push(s.vs),o++;return o}var Gy=function n(i,o,s,c){var l=i.children(o),d=i.node(o),p=d?d.borderLeft:void 0,v=d?d.borderRight:void 0,y={};p&&(l=xt.filter(l,function(R){return R!==p&&R!==v}));var x=ky(i,l);xt.forEach(x,function(R){if(i.children(R.v).length){var D=n(i,R.v,s,c);y[R.v]=D,xt.has(D,"barycenter")&&(k=R,L=D,xt.isUndefined(k.barycenter)?(k.barycenter=L.barycenter,k.weight=L.weight):(k.barycenter=(k.barycenter*k.weight+L.barycenter*L.weight)/(k.weight+L.weight),k.weight+=L.weight))}var k,L});var E=Fy(x,s);(function(R,D){xt.forEach(R,function(k){k.vs=xt.flatten(k.vs.map(function(L){return D[L]?D[L].vs:L}),!0)})})(E,y);var _=By(E,c);if(p&&(_.vs=xt.flatten([p,_.vs,v],!0),i.predecessors(p).length)){var T=i.node(i.predecessors(p)[0]),M=i.node(i.predecessors(v)[0]);xt.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+T.order+M.order)/(_.weight+2),_.weight+=2}return _},zy=lc.Graph,jy=function(n,i,o){var s=function(l){for(var d;l.hasNode(d=xt.uniqueId("_root")););return d}(n),c=new zy({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return n.node(l)});return xt.forEach(n.nodes(),function(l){var d=n.node(l),p=n.parent(l);(d.rank===i||d.minRank<=i&&i<=d.maxRank)&&(c.setNode(l),c.setParent(l,p||s),xt.forEach(n[o](l),function(v){var y=v.v===l?v.w:v.v,x=c.edge(y,l),E=xt.isUndefined(x)?0:x.weight;c.setEdge(y,l,{weight:n.edge(v).weight+E})}),xt.has(d,"minRank")&&c.setNode(l,{borderLeft:d.borderLeft[i],borderRight:d.borderRight[i]}))}),c},Uy=function(n,i,o){var s,c={};xt.forEach(o,function(l){for(var d,p,v=n.parent(l);v;){if((d=n.parent(v))?(p=c[d],c[d]=v):(p=s,s=v),p&&p!==v)return void i.setEdge(p,v);v=d}})},Vy=lc.Graph,Zy=function(n){var i=Fo.maxRank(n),o=Eh(n,xt.range(1,i+1),"inEdges"),s=Eh(n,xt.range(i-1,-1,-1),"outEdges"),c=yu(n);Bm(n,c);for(var l,d=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){df(p%2?o:s,p%4>=2),c=Fo.buildLayerMatrix(n);var y=fv(n,c);y<d&&(v=0,l=xt.cloneDeep(c),d=y)}Bm(n,l)};function Eh(n,i,o){return xt.map(i,function(s){return jy(n,s,o)})}function df(n,i){var o=new Vy;xt.forEach(n,function(s){var c=s.graph().root,l=Gy(s,c,o,i);xt.forEach(l.vs,function(d,p){s.node(d).order=p}),Uy(s,o,l.vs)})}function Bm(n,i){xt.forEach(i,function(o){xt.forEach(o,function(s,c){n.node(s).order=c})})}var dl=lc.Graph,$y=function(n){var i,o=Fo.buildLayerMatrix(n),s=xt.merge(Hy(n,o),Wy(n,o)),c={};xt.forEach(["u","d"],function(d){i=d==="u"?o:xt.values(o).reverse(),xt.forEach(["l","r"],function(p){p==="r"&&(i=xt.map(i,function(E){return xt.values(E).reverse()}));var v=(d==="u"?n.predecessors:n.successors).bind(n),y=Yy(n,i,s,v),x=Ky(n,i,y.root,y.align,p==="r");p==="r"&&(x=xt.mapValues(x,function(E){return-E})),c[d+p]=x})});var l=qy(n,c);return Jy(c,l),zm(c,n.graph().align)};function Hy(n,i){var o={};return xt.reduce(i,function(s,c){var l=0,d=0,p=s.length,v=xt.last(c);return xt.forEach(c,function(y,x){var E=function(T,M){if(T.node(M).dummy)return xt.find(T.predecessors(M),function(R){return T.node(R).dummy})}(n,y),_=E?n.node(E).order:p;(E||y===v)&&(xt.forEach(c.slice(d,x+1),function(T){xt.forEach(n.predecessors(T),function(M){var R=n.node(M),D=R.order;!(D<l||_<D)||R.dummy&&n.node(T).dummy||Gm(o,M,T)})}),d=x+1,l=_)}),c}),o}function Wy(n,i){var o={};function s(c,l,d,p,v){var y;xt.forEach(xt.range(l,d),function(x){y=c[x],n.node(y).dummy&&xt.forEach(n.predecessors(y),function(E){var _=n.node(E);_.dummy&&(_.order<p||_.order>v)&&Gm(o,E,y)})})}return xt.reduce(i,function(c,l){var d,p=-1,v=0;return xt.forEach(l,function(y,x){if(n.node(y).dummy==="border"){var E=n.predecessors(y);E.length&&(d=n.node(E[0]).order,s(l,v,x,p,d),v=x,p=d)}s(l,v,l.length,d,c.length)}),l}),o}function Gm(n,i,o){if(i>o){var s=i;i=o,o=s}var c=n[i];c||(n[i]=c={}),c[o]=!0}function Xy(n,i,o){if(i>o){var s=i;i=o,o=s}return xt.has(n[i],o)}function Yy(n,i,o,s){var c={},l={},d={};return xt.forEach(i,function(p){xt.forEach(p,function(v,y){c[v]=v,l[v]=v,d[v]=y})}),xt.forEach(i,function(p){var v=-1;xt.forEach(p,function(y){var x=s(y);if(x.length)for(var E=((x=xt.sortBy(x,function(R){return d[R]})).length-1)/2,_=Math.floor(E),T=Math.ceil(E);_<=T;++_){var M=x[_];l[y]===y&&v<d[M]&&!Xy(o,y,M)&&(l[M]=y,l[y]=c[y]=c[M],v=d[M])}})}),{root:c,align:l}}function Ky(n,i,o,s,c){var l={},d=function(y,x,E,_){var T=new dl,M=y.graph(),R=function(D,k,L){return function(U,W,J){var zt,Ae=U.node(W),qt=U.node(J),le=0;if(le+=Ae.width/2,xt.has(Ae,"labelpos"))switch(Ae.labelpos.toLowerCase()){case"l":zt=-Ae.width/2;break;case"r":zt=Ae.width/2}if(zt&&(le+=L?zt:-zt),zt=0,le+=(Ae.dummy?k:D)/2,le+=(qt.dummy?k:D)/2,le+=qt.width/2,xt.has(qt,"labelpos"))switch(qt.labelpos.toLowerCase()){case"l":zt=qt.width/2;break;case"r":zt=-qt.width/2}return zt&&(le+=L?zt:-zt),zt=0,le}}(M.nodesep,M.edgesep,_);return xt.forEach(x,function(D){var k;xt.forEach(D,function(L){var U=E[L];if(T.setNode(U),k){var W=E[k],J=T.edge(W,U);T.setEdge(W,U,Math.max(R(y,L,k),J||0))}k=L})}),T}(n,i,o,c),p=c?"borderLeft":"borderRight";function v(y,x){for(var E=d.nodes(),_=E.pop(),T={};_;)T[_]?y(_):(T[_]=!0,E.push(_),E=E.concat(x(_))),_=E.pop()}return v(function(y){l[y]=d.inEdges(y).reduce(function(x,E){return Math.max(x,l[E.v]+d.edge(E))},0)},d.predecessors.bind(d)),v(function(y){var x=d.outEdges(y).reduce(function(_,T){return Math.min(_,l[T.w]-d.edge(T))},Number.POSITIVE_INFINITY),E=n.node(y);x!==Number.POSITIVE_INFINITY&&E.borderType!==p&&(l[y]=Math.max(l[y],x))},d.successors.bind(d)),xt.forEach(s,function(y){l[y]=l[o[y]]}),l}function qy(n,i){return xt.minBy(xt.values(i),function(o){var s=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;return xt.forIn(o,function(l,d){var p=function(v,y){return v.node(y).width}(n,d)/2;s=Math.max(l+p,s),c=Math.min(l-p,c)}),s-c})}function Jy(n,i){var o=xt.values(i),s=xt.min(o),c=xt.max(o);xt.forEach(["u","d"],function(l){xt.forEach(["l","r"],function(d){var p,v=l+d,y=n[v];if(y!==i){var x=xt.values(y);(p=d==="l"?s-xt.min(x):c-xt.max(x))&&(n[v]=xt.mapValues(y,function(E){return E+p}))}})})}function zm(n,i){return xt.mapValues(n.ul,function(o,s){if(i)return n[i.toLowerCase()][s];var c=xt.sortBy(xt.map(n,s));return(c[1]+c[2])/2})}var jm=$y,Um=function(n){(function(i){var o=Fo.buildLayerMatrix(i),s=i.graph().ranksep,c=0;xt.forEach(o,function(l){var d=xt.max(xt.map(l,function(p){return i.node(p).height}));xt.forEach(l,function(p){i.node(p).y=c+d/2}),c+=d+s})})(n=Fo.asNonCompoundGraph(n)),xt.forEach(jm(n),function(i,o){n.node(o).x=i})},Qy=Fo.normalizeRanks,tb=Fo.removeEmptyRanks,bu=Fo,wh=lc.Graph,Ki=function(n,i){var o=i&&i.debugTiming?bu.time:bu.notime;o("layout",function(){var s=o("  buildLayoutGraph",function(){return function(c){var l=new wh({multigraph:!0,compound:!0}),d=jg(c.graph());return l.setGraph(xt.merge({},eb,pv(d,gv),xt.pick(d,Ri))),xt.forEach(c.nodes(),function(p){var v=jg(c.node(p));l.setNode(p,xt.defaults(pv(v,Vm),Zm)),l.setParent(p,c.parent(p))}),xt.forEach(c.edges(),function(p){var v=jg(c.edge(p));l.setEdge(p,xt.merge({},Bo,pv(v,nb),xt.pick(v,Io)))}),l}(n)});o("  runLayout",function(){(function(c,l){l("    makeSpaceForEdgeLabels",function(){(function(d){var p=d.graph();p.ranksep/=2,xt.forEach(d.edges(),function(v){var y=d.edge(v);y.minlen*=2,y.labelpos.toLowerCase()!=="c"&&(p.rankdir==="TB"||p.rankdir==="BT"?y.width+=y.labeloffset:y.height+=y.labeloffset)})})(c)}),l("    removeSelfEdges",function(){(function(d){xt.forEach(d.edges(),function(p){if(p.v===p.w){var v=d.node(p.v);v.selfEdges||(v.selfEdges=[]),v.selfEdges.push({e:p,label:d.edge(p)}),d.removeEdge(p)}})})(c)}),l("    acyclic",function(){Sm.run(c)}),l("    nestingGraph.run",function(){Yo.run(c)}),l("    rank",function(){Ry(bu.asNonCompoundGraph(c))}),l("    injectEdgeLabelProxies",function(){(function(d){xt.forEach(d.edges(),function(p){var v=d.edge(p);if(v.width&&v.height){var y=d.node(p.v),x={rank:(d.node(p.w).rank-y.rank)/2+y.rank,e:p};bu.addDummyNode(d,"edge-proxy",x,"_ep")}})})(c)}),l("    removeEmptyRanks",function(){tb(c)}),l("    nestingGraph.cleanup",function(){Yo.cleanup(c)}),l("    normalizeRanks",function(){Qy(c)}),l("    assignRankMinMax",function(){(function(d){var p=0;xt.forEach(d.nodes(),function(v){var y=d.node(v);y.borderTop&&(y.minRank=d.node(y.borderTop).rank,y.maxRank=d.node(y.borderBottom).rank,p=xt.max(p,y.maxRank))}),d.graph().maxRank=p})(c)}),l("    removeEdgeLabelProxies",function(){(function(d){xt.forEach(d.nodes(),function(p){var v=d.node(p);v.dummy==="edge-proxy"&&(d.edge(v.e).labelRank=v.rank,d.removeNode(p))})})(c)}),l("    normalize.run",function(){Am.run(c)}),l("    parentDummyChains",function(){Ic(c)}),l("    addBorderSegments",function(){Ly(c)}),l("    order",function(){Zy(c)}),l("    insertSelfEdges",function(){(function(d){var p=bu.buildLayerMatrix(d);xt.forEach(p,function(v){var y=0;xt.forEach(v,function(x,E){var _=d.node(x);_.order=E+y,xt.forEach(_.selfEdges,function(T){bu.addDummyNode(d,"selfedge",{width:T.label.width,height:T.label.height,rank:_.rank,order:E+ ++y,e:T.e,label:T.label},"_se")}),delete _.selfEdges})})})(c)}),l("    adjustCoordinateSystem",function(){km.adjust(c)}),l("    position",function(){Um(c)}),l("    positionSelfEdges",function(){(function(d){xt.forEach(d.nodes(),function(p){var v=d.node(p);if(v.dummy==="selfedge"){var y=d.node(v.e.v),x=y.x+y.width/2,E=y.y,_=v.x-x,T=y.height/2;d.setEdge(v.e,v.label),d.removeNode(p),v.label.points=[{x:x+2*_/3,y:E-T},{x:x+5*_/6,y:E-T},{x:x+_,y:E},{x:x+5*_/6,y:E+T},{x:x+2*_/3,y:E+T}],v.label.x=v.x,v.label.y=v.y}})})(c)}),l("    removeBorderNodes",function(){(function(d){xt.forEach(d.nodes(),function(p){if(d.children(p).length){var v=d.node(p),y=d.node(v.borderTop),x=d.node(v.borderBottom),E=d.node(xt.last(v.borderLeft)),_=d.node(xt.last(v.borderRight));v.width=Math.abs(_.x-E.x),v.height=Math.abs(x.y-y.y),v.x=E.x+v.width/2,v.y=y.y+v.height/2}}),xt.forEach(d.nodes(),function(p){d.node(p).dummy==="border"&&d.removeNode(p)})})(c)}),l("    normalize.undo",function(){Am.undo(c)}),l("    fixupEdgeLabelCoords",function(){(function(d){xt.forEach(d.edges(),function(p){var v=d.edge(p);if(xt.has(v,"x"))switch(v.labelpos!=="l"&&v.labelpos!=="r"||(v.width-=v.labeloffset),v.labelpos){case"l":v.x-=v.width/2+v.labeloffset;break;case"r":v.x+=v.width/2+v.labeloffset}})})(c)}),l("    undoCoordinateSystem",function(){km.undo(c)}),l("    translateGraph",function(){(function(d){var p=Number.POSITIVE_INFINITY,v=0,y=Number.POSITIVE_INFINITY,x=0,E=d.graph(),_=E.marginx||0,T=E.marginy||0;function M(R){var D=R.x,k=R.y,L=R.width,U=R.height;p=Math.min(p,D-L/2),v=Math.max(v,D+L/2),y=Math.min(y,k-U/2),x=Math.max(x,k+U/2)}xt.forEach(d.nodes(),function(R){M(d.node(R))}),xt.forEach(d.edges(),function(R){var D=d.edge(R);xt.has(D,"x")&&M(D)}),p-=_,y-=T,xt.forEach(d.nodes(),function(R){var D=d.node(R);D.x-=p,D.y-=y}),xt.forEach(d.edges(),function(R){var D=d.edge(R);xt.forEach(D.points,function(k){k.x-=p,k.y-=y}),xt.has(D,"x")&&(D.x-=p),xt.has(D,"y")&&(D.y-=y)}),E.width=v-p+_,E.height=x-y+T})(c)}),l("    assignNodeIntersects",function(){(function(d){xt.forEach(d.edges(),function(p){var v,y,x=d.edge(p),E=d.node(p.v),_=d.node(p.w);x.points?(v=x.points[0],y=x.points[x.points.length-1]):(x.points=[],v=_,y=E),x.points.unshift(bu.intersectRect(E,v)),x.points.push(bu.intersectRect(_,y))})})(c)}),l("    reversePoints",function(){(function(d){xt.forEach(d.edges(),function(p){var v=d.edge(p);v.reversed&&v.points.reverse()})})(c)}),l("    acyclic.undo",function(){Sm.undo(c)})})(s,o)}),o("  updateInputGraph",function(){(function(c,l){xt.forEach(c.nodes(),function(d){var p=c.node(d),v=l.node(d);p&&(p.x=v.x,p.y=v.y,l.children(d).length&&(p.width=v.width,p.height=v.height))}),xt.forEach(c.edges(),function(d){var p=c.edge(d),v=l.edge(d);p.points=v.points,xt.has(v,"x")&&(p.x=v.x,p.y=v.y)}),c.graph().width=l.graph().width,c.graph().height=l.graph().height})(n,s)})})},gv=["nodesep","edgesep","ranksep","marginx","marginy"],eb={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Ri=["acyclicer","ranker","rankdir","align"],Vm=["width","height"],Zm={width:0,height:0},nb=["minlen","weight","width","height","labeloffset"],Bo={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Io=["labelpos"];function pv(n,i){return xt.mapValues(xt.pick(n,i),Number)}function jg(n){var i={};return xt.forEach(n,function(o,s){i[s.toLowerCase()]=o}),i}var $m=lc.Graph,Hm={graphlib:lc,layout:Ki,debug:{debugOrdering:function(n){var i=Fo.buildLayerMatrix(n),o=new $m({compound:!0,multigraph:!0}).setGraph({});return xt.forEach(n.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+n.node(s).rank)}),xt.forEach(n.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),xt.forEach(i,function(s,c){var l="layer"+c;o.setNode(l,{rank:"same"}),xt.reduce(s,function(d,p){return o.setEdge(d,p,{style:"invis"}),p})}),o}},util:{time:Fo.time,notime:Fo.notime},version:"0.8.5"},rb=Hm.graphlib,ib=Hm.layout;class ob{constructor(i){this.cardinality=1,this.include=Ju.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=Wo.NODE,this.name=i.name,this.attr=i.attr||{},this.inputs=i.inputs,this.path=i.path||[],this.width=i.width,this.height=i.height}}class vv{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function Wm(n){const i=new vv;return n.nodes.map(o=>new ob(o)).forEach(o=>{i.nodes[o.name]=o,o.inputs.forEach(s=>{(function(c,l,d){d.name!==l.name&&c.edges.push(Object.assign(Object.assign({},d.attr),{v:d.name,w:l.name}))})(i,o,s)})}),i}class Xm{constructor(i,o={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=Ju.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=Wo.META,this.path=[],this.name=i,this.metaGraph=gf(i,Xl.META,o)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(i=>this.metaGraph.node(i))}leaves(){let i,o=[],s=[this];for(;s.length;){let c=s.shift();c.isGroupNode?(i=c.metaGraph,i.nodes().forEach(l=>s.push(i.node(l)))):o.push(c.name)}return o}}class gl{constructor(i,o){this.v=i,this.w=o,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(i,o){this.baseEdgeList.push(i)}}function Ym(n,i={}){return new Xm(n,i)}function Dd(n,i){return new gl(n,i)}function gf(n,i,o){const s=o||{},c=new rb.Graph(s);return c.setGraph({name:n,rankdir:s.rankdir,type:i,align:s.align}),c}class Ld{constructor(i={}){this.graphOptions=i,this.index={},this.graphOptions.compound=!0,this.root=Ym(uu,this.graphOptions),this.index[uu]=this.root}getNodeMap(){return this.index}node(i){return this.index[i]}setNode(i,o){this.index[i]=o}getBridgeGraph(i){const o=this.index[i];if(!o)throw Error("Could not find node in hierarchy: "+i);if(!("metaGraph"in o))return null;const s=o;if(s.bridgeGraph)return s.bridgeGraph;const c=gf(mp,Xl.BRIDGE,this.graphOptions);if(s.bridgeGraph=c,!o.parentNode||!("metaGraph"in o.parentNode))return c;const l=o.parentNode;return[l.metaGraph,this.getBridgeGraph(l.name)].forEach(d=>{d.edges().filter(p=>p.v===i||p.w===i).forEach(p=>{const v=p.w===i;d.edge(p).baseEdgeList.forEach(y=>{const[x,E]=v?[y.w,p.v]:[y.v,p.w],_=this.getChildName(i,x),T={v:v?E:_,w:v?_:E};let M=c.edge(T);M||(M=Dd(T.v,T.w),M.inbound=v,c.setEdge(T.v,T.w,M)),M.addBaseEdge(y,this)})})}),c}getChildName(i,o){let s=this.index[o];for(;s;){if(s.parentNode&&s.parentNode.name===i)return s.name;s=s.parentNode}throw Error("Could not find immediate child for descendant: "+o)}getPredecessors(i){const o=this.index[i];if(!o)throw Error("Could not find node with name: "+i);return this.getOneWayEdges(o,!0)}getSuccessors(i){const o=this.index[i];if(!o)throw Error("Could not find node with name: "+i);return this.getOneWayEdges(o,!1)}getOneWayEdges(i,o){const s=[];if(!i.parentNode||!i.parentNode.isGroupNode)return s;const c=i.parentNode,l=c.metaGraph,d=this.getBridgeGraph(c.name);return Km(l,i,o,s),Km(d,i,o,s),s}}function Ug(n,i){const{rankDirection:o,align:s}=i,c=new Ld({rankdir:o,align:s});return function(l,d){Object.keys(d.nodes).forEach(p=>{const v=d.nodes[p],y=v.path;let x=l.root;x.depth=Math.max(y.length,x.depth);for(let E=0;E<y.length&&(x.depth=Math.max(x.depth,y.length-E),x.cardinality+=v.cardinality,E!==y.length-1);E++){const _=y[E];let T=l.node(_);T||(T=Ym(_,l.graphOptions),T.path=v.path.slice(0,E+1),T.parentNode=x,l.setNode(_,T),x.metaGraph.setNode(_,T)),x=T}l.setNode(v.name,v),v.parentNode=x,x.metaGraph.setNode(v.name,v)})}(c,n),function(l,d){const p=l.getNodeMap();let v=[],y=[];const x=(E,_)=>{let T=0;for(;E;)_[T++]=E.name,E=E.parentNode;return T-1};d.edges.forEach(E=>{v=[],y=[];let _=x(d.nodes[E.v],v),T=x(d.nodes[E.w],y);for(;v[_]===y[T];)if(_--,T--,_<0||T<0)throw Error("No difference found between ancestor paths.");const M=p[v[_+1]],R=v[_],D=y[T];let k=M.metaGraph.edge(R,D);k||(k=Dd(R,D),M.metaGraph.setEdge(R,D,k)),k.addBaseEdge(E,l)})}(c,n),c}function Km(n,i,o,s){(o?n.inEdges(i.name):n.outEdges(i.name)).forEach(c=>{const l=n.edge(c);s.push(l)})}class sb{constructor(i){this.hierarchy=i,this.index={},this.hasSubHierarchy={},this.root=new qm(this.hierarchy.root,this.hierarchy.graphOptions),this.index[i.root.name]=this.root,this.buildSubHierarchy(i.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(i){if(i in this.hasSubHierarchy)return;this.hasSubHierarchy[i]=!0;const o=this.index[i];if(o.node.type!==Wo.META)return;const s=o,c=s.node.metaGraph,l=s.coreGraph;c.nodes().forEach(x=>{const E=this.getOrCreateRenderNodeByName(x);l.setNode(x,E)}),c.edges().forEach(x=>{const E=c.edge(x),_=new kd(E);l.setEdge(x.v,x.w,_)});const d=s.node.parentNode;if(!d)return;const p=this.getRenderNodeByName(d.name),v=(x,...E)=>E.concat([x?"IN":"OUT"]).join("~~"),y=this.hierarchy.getBridgeGraph(i);y.edges().forEach(x=>{const E=y.edge(x),_=!!c.node(x.w),[T,M]=_?[x.w,x.v]:[x.v,x.w],R=J=>{const zt=_?{v:J,w:i}:{v:i,w:J};return p.coreGraph.edge(zt)};let D=R(M);D||(D=R(v(_,M,d.name)));const k=v(_,i),L=v(_,M,i);let U=l.node(L);if(!U){let J=l.node(k);if(!J){const Ae={name:k,type:Wo.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:Ju.UNSPECIFIED,inbound:_,attr:{}};J=new Vg(Ae),this.index[k]=J,l.setNode(k,J)}const zt={name:L,type:Wo.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:Ju.UNSPECIFIED,inbound:_,attr:{}};U=new Vg(zt),this.index[L]=U,l.setNode(L,U),l.setParent(L,k),J.node.cardinality++}const W=new kd(E);W.adjoiningMetaEdge=D,_?l.setEdge(L,T,W):l.setEdge(T,L,W)})}getOrCreateRenderNodeByName(i){if(!i)return null;if(i in this.index)return this.index[i];const o=this.getNodeByName(i);return o?(this.index[i]=o.isGroupNode?new qm(o,this.hierarchy.graphOptions):new Vg(o),this.index[i]):null}getRenderNodeByName(i){return this.index[i]}getNodeByName(i){return this.hierarchy.node(i)}}class Vg{constructor(i){this.node=i,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=i.width||0,this.height=i.height||0,this.displayName=i.name,this.attr=i.attr}}class kd{constructor(i){this.metaEdge=i,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class qm extends Vg{constructor(i,o){super(i);const s=i.metaGraph.graph();o.compound=!0,this.coreGraph=gf(s.name,Xl.CORE,o)}}function Jm(n,i){n.node.isGroupNode&&function(o,s){const c=Ia(s);o.coreGraph.nodes().map(l=>o.coreGraph.node(l)).forEach(l=>{var d,p,v,y,x,E;const{height:_,width:T}=l;switch(l.node.type){case Wo.NODE:Object.assign(l,c.nodeSize.node),l.height=_||c.nodeSize.node.height,l.width=T||c.nodeSize.node.width;break;case Wo.BRIDGE:Object.assign(l,c.nodeSize.bridge);break;case Wo.META:l.expanded?Jm(l,s):(Object.assign(l,c.nodeSize.meta),l.height=c.nodeSize.meta.height,l.width=c.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+l.node.type)}if(!l.expanded){const M=l.attr;(function(R,D=!1){if(R.coreBox.width=R.width,R.coreBox.height=R.height,!D){const k=`${R.displayName}`.length,L=3;R.width=Math.max(R.coreBox.width,k*L)}})(l,s&&(l.node.type===0&&!!(!((p=(d=s==null?void 0:s.nodeSize)===null||d===void 0?void 0:d.meta)===null||p===void 0)&&p.width)||l.node.type===1&&(!!(!((y=(v=s==null?void 0:s.nodeSize)===null||v===void 0?void 0:v.node)===null||y===void 0)&&y.width)||!!M.width)||l.node.type===2&&!!(!((E=(x=s==null?void 0:s.nodeSize)===null||x===void 0?void 0:x.bridge)===null||E===void 0)&&E.width)))}})}(n,i),n.node.type===Wo.META&&function(o,s){const c=Ia(s),l=c.subScene.meta;Object.assign(o,l);const{nodeSep:d,rankSep:p,edgeSep:v,align:y}=c.graph.meta,x={nodesep:d,ranksep:p,edgesep:v,align:y};Object.assign(o.coreBox,function(T,M){const{ranksep:R,nodesep:D,edgesep:k,align:L}=M;Object.assign(T.graph(),{ranksep:R,nodesep:D,edgesep:k,align:L});const U=[];if(T.nodes().forEach(qt=>{T.node(qt).node.type!==Wo.BRIDGE&&U.push(qt)}),!U.length)return{width:0,height:0};ib(T);let W=1/0,J=1/0,zt=-1/0,Ae=-1/0;return U.forEach(qt=>{const le=T.node(qt),ce=.5*le.width,Ne=le.x-ce,Et=le.x+ce;W=Ne<W?Ne:W,zt=Et>zt?Et:zt;const Le=.5*le.height,nn=le.y-Le,vn=le.y+Le;J=nn<J?nn:J,Ae=vn>Ae?vn:Ae}),T.edges().forEach(qt=>{const le=T.edge(qt),ce=T.node(le.metaEdge.v),Ne=T.node(le.metaEdge.w);if(le.points.length===3&&function(nn){let vn=pf(nn[0],nn[1]);for(let fr=1;fr<nn.length-1;fr++){const Dn=pf(nn[fr],nn[fr+1]);if(Math.abs(Dn-vn)>1)return!1;vn=Dn}return!0}(le.points)){if(ce!=null){const nn=ce.expanded?ce.x:Zg(ce);le.points[0].x=nn}if(Ne!=null){const nn=Ne.expanded?Ne.x:Zg(Ne);le.points[2].x=nn}le.points=[le.points[0],le.points[1]]}const Et=le.points[le.points.length-2];Ne!=null&&(le.points[le.points.length-1]=vf(Et,Ne));const Le=le.points[1];ce!=null&&(le.points[0]=vf(Le,ce)),le.points.forEach(nn=>{W=nn.x<W?nn.x:W,zt=nn.x>zt?nn.x:zt,J=nn.y<J?nn.y:J,Ae=nn.y>Ae?nn.y:Ae})}),T.nodes().forEach(qt=>{const le=T.node(qt);le.x-=W,le.y-=J}),T.edges().forEach(qt=>{T.edge(qt).points.forEach(le=>{le.x-=W,le.y-=J})}),{width:zt-W,height:Ae-J}}(o.coreGraph,x));let E=0;o.coreGraph.nodeCount()>0&&E++;const _=E<=1?0:E;o.coreBox.width+=_+_,o.coreBox.height=l.labelHeight+o.coreBox.height,o.width=o.coreBox.width+l.paddingLeft+l.paddingRight,o.height=o.paddingTop+o.coreBox.height+o.paddingBottom}(n,i)}function pf(n,i){const o=i.x-n.x,s=i.y-n.y;return 180*Math.atan(s/o)/Math.PI}function Zg(n){return n.expanded?n.x:n.x-n.width/2+0+n.coreBox.width/2}function vf(n,i){const o=i.expanded?i.x:Zg(i),s=i.y,c=n.x-o,l=n.y-s;let d,p,v=i.expanded?i.width:i.coreBox.width,y=i.expanded?i.height:i.coreBox.height;return Math.abs(l)*v/2>Math.abs(c)*y/2?(l<0&&(y=-y),d=l===0?0:y/2*c/l,p=y/2):(c<0&&(v=-v),d=v/2,p=c===0?0:v/2*l/c),{x:o+d,y:s+p}}function Sh(n,i,o){var s,c,l,d;const p=n.nodes.filter((E,_,T)=>T.findIndex(M=>M.id===E.id)!==_).map(E=>E.id);if(p.length)throw new Error(`Duplicated ids found: ${p.join(", ")}`);const v=function(E){const _={nodes:[]},T=E.compound,M=Object.keys(T||{}),R=new Map,D=(L,U=[])=>{if(R.has(L))return R.get(L);for(let W=0;W<M.length;W++){let J=M[W];if(T&&T[J].indexOf(L)!==-1)return U.unshift(J),D(J,U)}return U.length===0&&R.set(L,U),U},k=L=>E.edges.filter(U=>U.w===L).map(U=>({name:U.v}));return E.nodes.forEach(L=>{const U=L.id,W=[...D(U),U];let J=k(U);_.nodes.push({name:U,path:W,inputs:J,width:L.width,height:L.height,attr:Object.assign({},L)})}),_}(n),y=function(E,_){const T=(R,D)=>{for(let k of D.values())if(k.includes(R))return!0;return!1},M=(R,D=[])=>{if(Object.keys(R).length===0)return[...new Set(D)];const k=new Map(Object.keys(R).map(U=>[U,R[U]])),L={};for(let[U,W]of k)T(U,k)?L[U]=W:D=D.concat(U,W);return M(L,D)};return M(E).filter(R=>_.includes(R))}(n.compound||{},(i==null?void 0:i.expanded)||[]),x=function(E,_){return function(T){return new sb(T)}(Ug(Wm(E),_))}(v,{rankDirection:((c=(s=o==null?void 0:o.graph)===null||s===void 0?void 0:s.meta)===null||c===void 0?void 0:c.rankDir)||(i==null?void 0:i.rankDirection)||Wl.graph.meta.rankDir,align:((d=(l=o==null?void 0:o.graph)===null||l===void 0?void 0:l.meta)===null||d===void 0?void 0:d.align)||Wl.graph.meta.align});return function(E,_){_.forEach(T=>{const M=E.getRenderInfoNodes().find(k=>k.displayName===T);let R=M&&M.node&&M.node.name||"";const D=E.getRenderNodeByName(R);if(!D)throw new Error(`No nodes found: ${R}`);D.expanded=!0,E.buildSubHierarchy(R)})}(x,y),Jm(x.root,o),t0(x.root)}function ab(n,i=!1){const o=JSON.parse(JSON.stringify(n)),s={nodes:[o],edges:[...o.edges]};return o.nodes.forEach(function c(l){(l.type===0||l.type===1)&&s.nodes.push(l),l.type===0&&(s.edges=s.edges.concat(l.edges)),Array.isArray(l.nodes)&&l.nodes.forEach(c)}),i&&s.nodes.forEach(c=>{const l=s.nodes.find(d=>d.id===c.parentNodeName);if(l){const d=l.x-l.width/2+l.paddingLeft,p=l.y-l.height/2+l.labelHeight+l.paddingTop;l.id!==uu&&(c.x+=d,c.y+=p),c.type===0&&c.edges.forEach(v=>{v.points.forEach(y=>{y.x+=c.x-c.width/2+c.paddingLeft,y.y+=c.y-c.height/2+c.labelHeight+c.paddingTop})})}}),s}function Qm(n,i,o,s){var c,l;let d=[];const p=((c=o.find(E=>E.id===n))===null||c===void 0?void 0:c.path)||[],v=((l=o.find(E=>E.id===i))===null||l===void 0?void 0:l.path)||[],y=[uu,...p].slice(0,p.length).reverse(),x=[uu,...v].slice(0,v.length);return y.forEach(E=>{const _=o.find(T=>T.id===E);d=d.concat(_.edges.filter(T=>T.baseEdgeList.some(M=>M.v===((s==null?void 0:s.v)||n)&&M.w===((s==null?void 0:s.w)||i))))}),x.filter(E=>!y.includes(E)).forEach(E=>{const _=o.find(T=>T.id===E);d=d.concat(_.edges.filter(T=>T.baseEdgeList.some(M=>M.v===((s==null?void 0:s.v)||n)&&M.w===((s==null?void 0:s.w)||i))))}),d}function t0(n){const i=n.coreGraph.nodes().map(s=>n.coreGraph.node(s));return Object.assign(Object.assign({},e0(n)),{expanded:n.expanded,nodes:n.expanded?(o=i,o.map(s=>s.node.type===Wo.META?t0(s):e0(s))):[],edges:n.expanded?cb(n):[]});var o}function e0(n){return{id:n.node.name,name:n.node.name,type:n.node.type,cardinality:n.node.cardinality,attr:n.attr,parentNodeName:n.node.parentNode?n.node.parentNode.name:null,coreBox:Object.assign({},n.coreBox),x:n.x,y:n.y,width:n.width,height:n.height,radius:n.radius,labelHeight:n.labelHeight,labelOffset:n.labelOffset,outboxWidth:n.outboxWidth,paddingLeft:n.paddingLeft,paddingTop:n.paddingTop,paddingRight:n.paddingRight,paddingBottom:n.paddingBottom,path:n.node.path}}function cb(n){return n.coreGraph.edges().map(i=>({renderInfoEdge:n.coreGraph.edge(i),edge:i})).filter(({renderInfoEdge:i})=>i.metaEdge).map(({edge:i,renderInfoEdge:o})=>{const s=function(c,l){const d=l.points.map(p=>Object.assign({},p));if(l.adjoiningMetaEdge){const p=l.adjoiningMetaEdge.points,v=l.metaEdge.inbound,y=v?p[p.length-1]:p[0],x=d[v?0:d.length-1],E=c.x-c.width/2,_=c.y-c.height/2,T=y.x-E,M=y.y-_,R=-c.paddingLeft,D=-(c.paddingTop+c.labelHeight);x.x=T+R,x.y=M+D}return d}(n,o);return{adjoiningEdge:o.adjoiningMetaEdge?{w:o.adjoiningMetaEdge.metaEdge.w,v:o.adjoiningMetaEdge.metaEdge.v}:null,inbound:o.metaEdge.inbound,w:i.w,v:i.v,points:s,weight:o.weight,baseEdgeList:o.metaEdge.baseEdgeList,parentNodeName:n.node.name}})}class ub extends vt{constructor(i){super(),this.rankdir="TB",this.nodesep=50,this.edgesep=5,this.ranksep=50,this.controlPoints=!0,this.anchorPoint=!0,this.nodes=[],this.edges=[],this.combos=[],this.onLayoutEnd=()=>{},this.updateCfg(i)}getDefaultCfg(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}}init(i){const o=i.hiddenNodes||[],s=i.hiddenEdges||[],c=i.hiddenCombos||[];this.nodes=this.getDataByOrder((i.nodes||[]).concat(o)),this.edges=this.getDataByOrder((i.edges||[]).concat(s)),this.combos=(i.combos||[]).concat(c.map(l=>Object.assign(Object.assign({},l),{collapsed:!0})))}execute(){const i=this,{nodes:o,edges:s}=i;if(!o)return;const{graphDef:c,graphOption:l,graphSettings:d}=i.getLayoutConfig(),p=Sh(c,l,d),v=ab(p,!0);return this.updatePosition(v),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:s}}getNodePath(i){const o=this,{nodes:s,combos:c}=o,l=s.find(p=>p.id===i),d=(p,v=[])=>{const y=c.find(x=>x.id===p);return y?(v.unshift(p),y.parentId?d(y.parentId,v):v):v};return l&&l.comboId?d(l.comboId,[i]):[i]}getLayoutConfig(){var i,o,s;const c=this,{nodes:l,edges:d,combos:p,nodeSize:v,rankdir:y,align:x,edgesep:E,nodesep:_,ranksep:T,settings:M}=c,R=(p||[]).reduce((Le,nn)=>{const vn=l.filter(Dn=>Dn.comboId===nn.id).map(Dn=>Dn.id),fr=(p||[]).filter(Dn=>Dn.parentId===nn.id).map(Dn=>Dn.id);return(vn.length||fr.length)&&(Le[nn.id]=[...vn,...fr]),Le},{});let D;v?Zt(v)?D=()=>v:D=()=>[v,v]:D=Le=>Le&&Le.size?Zt(Le.size)?Le.size:gt(Le.size)?[Le.size.width||40,Le.size.height||40]:[Le.size,Le.size]:[40,40];const k=Le=>Le&&Le.size?Zt(Le.size)?Le.size:[Le.size,Le.size]:[80,40],[L,U]=k(p==null?void 0:p[0]),W=(o=(i=c.graphSettings)===null||i===void 0?void 0:i.subScene)===null||o===void 0?void 0:o.meta,[J,zt,Ae,qt]=((s=p.find(Le=>!Le.collapsed))===null||s===void 0?void 0:s.padding)||[20,20,20,20],le={compound:R,nodes:[...(l||[]).map(Le=>{const nn=D(Le),vn=nn[0],fr=nn[1];return Object.assign(Object.assign({},Le),{width:vn,height:fr})})],edges:[...(d||[]).map(Le=>Object.assign(Object.assign({},Le),{v:Le.source,w:Le.target}))]},ce={expanded:(p||[]).filter(Le=>!Le.collapsed).map(Le=>Le.id)},Ne={graph:{meta:{align:x,rankDir:y,nodeSep:_,edgeSep:E,rankSep:T}},subScene:{meta:{paddingTop:J||(W==null?void 0:W.paddingTop)||20,paddingRight:zt||(W==null?void 0:W.paddingRight)||20,paddingBottom:Ae||(W==null?void 0:W.paddingBottom)||20,paddingLeft:qt||(W==null?void 0:W.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:L,height:U}}},Et=Ia(M,Object.assign({},Ia(Ne,Wl)));return c.graphSettings=Et,{graphDef:le,graphOption:ce,graphSettings:Et}}updatePosition(i){const{nodes:o,edges:s}=i;this.updateNodePosition(o,s),this.updateEdgePosition(o,s)}getBegin(i,o){const s=this,{begin:c}=s,l=[0,0];if(c){let d=1/0,p=1/0;i.forEach(v=>{d>v.x&&(d=v.x),p>v.y&&(p=v.y)}),o.forEach(v=>{v.points.forEach(y=>{d>y.x&&(d=y.x),p>y.y&&(p=y.y)})}),l[0]=c[0]-d,l[1]=c[1]-p}return l}updateNodePosition(i,o){const s=this,{combos:c,nodes:l,edges:d,anchorPoint:p,graphSettings:v}=s,y=this.getBegin(i,o);i.forEach(x=>{var E;const{x:_,y:T,id:M,type:R,coreBox:D}=x;if(R===Wf.META&&M!==uu){const k=c.findIndex(U=>U.id===M),L=(E=v==null?void 0:v.subScene)===null||E===void 0?void 0:E.meta;c[k].offsetX=_+y[0],c[k].offsetY=T+y[1],c[k].fixSize=[D.width,D.height],c[k].fixCollapseSize=[D.width,D.height],x.expanded?c[k].padding=[L==null?void 0:L.paddingTop,L==null?void 0:L.paddingRight,L==null?void 0:L.paddingBottom,L==null?void 0:L.paddingLeft]:c[k].padding=[0,0,0,0]}else if(R===Wf.OP){const k=l.findIndex(L=>L.id===M);if(l[k].x=_+y[0],l[k].y=T+y[1],p){const L=[],U=o.filter(J=>J.v===M),W=o.filter(J=>J.w===M);U.length>0&&U.forEach(J=>{const zt=J.points[0],Ae=(zt.x-_)/x.width+.5,qt=(zt.y-T)/x.height+.5;L.push([Ae,qt]),J.baseEdgeList.forEach(le=>{const ce=d.find(Ne=>Ne.source===le.v&&Ne.target===le.w);ce&&(ce.sourceAnchor=L.length-1)})}),W.length>0&&W.forEach(J=>{const zt=J.points[J.points.length-1],Ae=(zt.x-_)/x.width+.5,qt=(zt.y-T)/x.height+.5;L.push([Ae,qt]),J.baseEdgeList.forEach(le=>{const ce=d.find(Ne=>Ne.source===le.v&&Ne.target===le.w);ce&&(ce.targetAnchor=L.length-1)})}),l[k].anchorPoints=L.length>0?L:l[k].anchorPoints||[]}}})}updateEdgePosition(i,o){const s=this,{combos:c,edges:l,controlPoints:d}=s,p=this.getBegin(i,o);d&&(c.forEach(v=>{v.inEdges=[],v.outEdges=[]}),l.forEach(v=>{var y,x,E,_;let T=i.find(k=>k.id===v.source),M=i.find(k=>k.id===v.target),R=[],D=[];if(T&&M)D=Qm(T==null?void 0:T.id,M==null?void 0:M.id,i);else if(!T||!M){const k=s.getNodePath(v.source),L=s.getNodePath(v.target),U=k.reverse().slice(T?0:1).find(J=>i.find(zt=>zt.id===J)),W=L.reverse().slice(M?0:1).find(J=>i.find(zt=>zt.id===J));T=i.find(J=>J.id===U),M=i.find(J=>J.id===W),D=Qm(T==null?void 0:T.id,M==null?void 0:M.id,i,{v:v.source,w:v.target})}if(R=D.reduce((k,L)=>[...k,...L.points.map(U=>Object.assign(Object.assign({},U),{x:U.x+p[0],y:U.y+p[1]}))],[]),R=R.slice(1,-1),v.controlPoints=R,(M==null?void 0:M.type)===Wo.META){const k=c.findIndex(L=>L.id===(M==null?void 0:M.id));if(!c[k]||!((y=c[k].inEdges)===null||y===void 0)&&y.some(L=>L.source===T.id&&L.target===M.id))return;(x=c[k].inEdges)===null||x===void 0||x.push({source:T.id,target:M.id,controlPoints:R})}if((T==null?void 0:T.type)===Wo.META){const k=c.findIndex(L=>L.id===(T==null?void 0:T.id));if(!c[k]||!((E=c[k].outEdges)===null||E===void 0)&&E.some(L=>L.source===T.id&&L.target===M.id))return;(_=c[k].outEdges)===null||_===void 0||_.push({source:T.id,target:M.id,controlPoints:R})}}))}getType(){return"dagreCompound"}getDataByOrder(i){return i.every(o=>o.layoutOrder!==void 0)||i.forEach((o,s)=>{o.layoutOrder=s}),i.sort((o,s)=>o.layoutOrder-s.layoutOrder)}}var lb=O(91621),fb=O.n(lb),hb=O(58853),Nc=O.n(hb),$g=O(38888),mv=O.n($g),sx=O(21140),Hg=O.n(sx),db=O(63466),yv=O.n(db);const gb=Object.prototype.toString;function Ko(n){const i=gb.call(n);return i.endsWith("Array]")&&!i.includes("Big")}function pb(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ko(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var o=i.fromIndex,s=o===void 0?0:o,c=i.toIndex,l=c===void 0?n.length:c;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(l<=s||l>n.length||!Number.isInteger(l))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var d=n[s],p=s+1;p<l;p++)n[p]>d&&(d=n[p]);return d}function vb(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ko(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var o=i.fromIndex,s=o===void 0?0:o,c=i.toIndex,l=c===void 0?n.length:c;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(l<=s||l>n.length||!Number.isInteger(l))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var d=n[s],p=s+1;p<l;p++)n[p]<d&&(d=n[p]);return d}function bv(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ko(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var o;if(i.output!==void 0){if(!Ko(i.output))throw new TypeError("output option must be an array if specified");o=i.output}else o=new Array(n.length);var s=vb(n),c=pb(n);if(s===c)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var l=i.min,d=l===void 0?i.autoMinMax?s:0:l,p=i.max,v=p===void 0?i.autoMinMax?c:1:p;if(d>=v)throw new RangeError("min option must be smaller than max option");for(var y=(v-d)/(c-s),x=0;x<n.length;x++)o[x]=(n[x]-s)*y+d;return o}var Wg=" ".repeat(2),mb=" ".repeat(4);function yb(){return mf(this)}function mf(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.maxRows,s=o===void 0?15:o,c=i.maxColumns,l=c===void 0?10:c,d=i.maxNumSize,p=d===void 0?8:d,v=i.padMinus,y=v===void 0?"auto":v;return"".concat(n.constructor.name,` {
`).concat(Wg,`[
`).concat(mb).concat(Xg(n,s,l,p,y),`
`).concat(Wg,`]
`).concat(Wg,"rows: ").concat(n.rows,`
`).concat(Wg,"columns: ").concat(n.columns,`
}`)}function Xg(n,i,o,s,c){var l=n.rows,d=n.columns,p=Math.min(l,i),v=Math.min(d,o),y=[];if(c==="auto"){c=!1;t:for(var x=0;x<p;x++)for(var E=0;E<v;E++)if(n.get(x,E)<0){c=!0;break t}}for(var _=0;_<p;_++){for(var T=[],M=0;M<v;M++)T.push(Yg(n.get(_,M),s,c));y.push("".concat(T.join(" ")))}return v!==d&&(y[y.length-1]+=" ... ".concat(d-o," more columns")),p!==l&&y.push("... ".concat(l-i," more rows")),y.join(`
`.concat(mb))}function Yg(n,i,o){return(n>=0&&o?" ".concat(n0(n,i-1)):n0(n,i)).padEnd(i)}function n0(n,i){var o=n.toString();if(o.length<=i)return o;var s=n.toFixed(i);if(s.length>i&&(s=n.toFixed(Math.max(0,i-(s.length-i)))),s.length<=i&&!s.startsWith("0.000")&&!s.startsWith("-0.000"))return s;var c=n.toExponential(i);return c.length>i&&(c=n.toExponential(Math.max(0,i-(c.length-i)))),c.slice(0)}function r0(n,i){n.prototype.add=function(s){return typeof s=="number"?this.addS(s):this.addM(s)},n.prototype.addS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)+s);return this},n.prototype.addM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)+s.get(c,l));return this},n.add=function(s,c){var l=new i(s);return l.add(c)},n.prototype.sub=function(s){return typeof s=="number"?this.subS(s):this.subM(s)},n.prototype.subS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)-s);return this},n.prototype.subM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)-s.get(c,l));return this},n.sub=function(s,c){var l=new i(s);return l.sub(c)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(s){return typeof s=="number"?this.mulS(s):this.mulM(s)},n.prototype.mulS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)*s);return this},n.prototype.mulM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)*s.get(c,l));return this},n.mul=function(s,c){var l=new i(s);return l.mul(c)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(s){return typeof s=="number"?this.divS(s):this.divM(s)},n.prototype.divS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)/s);return this},n.prototype.divM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)/s.get(c,l));return this},n.div=function(s,c){var l=new i(s);return l.div(c)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(s){return typeof s=="number"?this.modS(s):this.modM(s)},n.prototype.modS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)%s);return this},n.prototype.modM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)%s.get(c,l));return this},n.mod=function(s,c){var l=new i(s);return l.mod(c)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(s){return typeof s=="number"?this.andS(s):this.andM(s)},n.prototype.andS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)&s);return this},n.prototype.andM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)&s.get(c,l));return this},n.and=function(s,c){var l=new i(s);return l.and(c)},n.prototype.or=function(s){return typeof s=="number"?this.orS(s):this.orM(s)},n.prototype.orS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)|s);return this},n.prototype.orM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)|s.get(c,l));return this},n.or=function(s,c){var l=new i(s);return l.or(c)},n.prototype.xor=function(s){return typeof s=="number"?this.xorS(s):this.xorM(s)},n.prototype.xorS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)^s);return this},n.prototype.xorM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)^s.get(c,l));return this},n.xor=function(s,c){var l=new i(s);return l.xor(c)},n.prototype.leftShift=function(s){return typeof s=="number"?this.leftShiftS(s):this.leftShiftM(s)},n.prototype.leftShiftS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)<<s);return this},n.prototype.leftShiftM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)<<s.get(c,l));return this},n.leftShift=function(s,c){var l=new i(s);return l.leftShift(c)},n.prototype.signPropagatingRightShift=function(s){return typeof s=="number"?this.signPropagatingRightShiftS(s):this.signPropagatingRightShiftM(s)},n.prototype.signPropagatingRightShiftS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)>>s);return this},n.prototype.signPropagatingRightShiftM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)>>s.get(c,l));return this},n.signPropagatingRightShift=function(s,c){var l=new i(s);return l.signPropagatingRightShift(c)},n.prototype.rightShift=function(s){return typeof s=="number"?this.rightShiftS(s):this.rightShiftM(s)},n.prototype.rightShiftS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)>>>s);return this},n.prototype.rightShiftM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,this.get(c,l)>>>s.get(c,l));return this},n.rightShift=function(s,c){var l=new i(s);return l.rightShift(c)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,~this.get(s,c));return this},n.not=function(s){var c=new i(s);return c.not()},n.prototype.abs=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.abs(this.get(s,c)));return this},n.abs=function(s){var c=new i(s);return c.abs()},n.prototype.acos=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.acos(this.get(s,c)));return this},n.acos=function(s){var c=new i(s);return c.acos()},n.prototype.acosh=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.acosh(this.get(s,c)));return this},n.acosh=function(s){var c=new i(s);return c.acosh()},n.prototype.asin=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.asin(this.get(s,c)));return this},n.asin=function(s){var c=new i(s);return c.asin()},n.prototype.asinh=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.asinh(this.get(s,c)));return this},n.asinh=function(s){var c=new i(s);return c.asinh()},n.prototype.atan=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.atan(this.get(s,c)));return this},n.atan=function(s){var c=new i(s);return c.atan()},n.prototype.atanh=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.atanh(this.get(s,c)));return this},n.atanh=function(s){var c=new i(s);return c.atanh()},n.prototype.cbrt=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.cbrt(this.get(s,c)));return this},n.cbrt=function(s){var c=new i(s);return c.cbrt()},n.prototype.ceil=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.ceil(this.get(s,c)));return this},n.ceil=function(s){var c=new i(s);return c.ceil()},n.prototype.clz32=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.clz32(this.get(s,c)));return this},n.clz32=function(s){var c=new i(s);return c.clz32()},n.prototype.cos=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.cos(this.get(s,c)));return this},n.cos=function(s){var c=new i(s);return c.cos()},n.prototype.cosh=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.cosh(this.get(s,c)));return this},n.cosh=function(s){var c=new i(s);return c.cosh()},n.prototype.exp=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.exp(this.get(s,c)));return this},n.exp=function(s){var c=new i(s);return c.exp()},n.prototype.expm1=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.expm1(this.get(s,c)));return this},n.expm1=function(s){var c=new i(s);return c.expm1()},n.prototype.floor=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.floor(this.get(s,c)));return this},n.floor=function(s){var c=new i(s);return c.floor()},n.prototype.fround=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.fround(this.get(s,c)));return this},n.fround=function(s){var c=new i(s);return c.fround()},n.prototype.log=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.log(this.get(s,c)));return this},n.log=function(s){var c=new i(s);return c.log()},n.prototype.log1p=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.log1p(this.get(s,c)));return this},n.log1p=function(s){var c=new i(s);return c.log1p()},n.prototype.log10=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.log10(this.get(s,c)));return this},n.log10=function(s){var c=new i(s);return c.log10()},n.prototype.log2=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.log2(this.get(s,c)));return this},n.log2=function(s){var c=new i(s);return c.log2()},n.prototype.round=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.round(this.get(s,c)));return this},n.round=function(s){var c=new i(s);return c.round()},n.prototype.sign=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.sign(this.get(s,c)));return this},n.sign=function(s){var c=new i(s);return c.sign()},n.prototype.sin=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.sin(this.get(s,c)));return this},n.sin=function(s){var c=new i(s);return c.sin()},n.prototype.sinh=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.sinh(this.get(s,c)));return this},n.sinh=function(s){var c=new i(s);return c.sinh()},n.prototype.sqrt=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.sqrt(this.get(s,c)));return this},n.sqrt=function(s){var c=new i(s);return c.sqrt()},n.prototype.tan=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.tan(this.get(s,c)));return this},n.tan=function(s){var c=new i(s);return c.tan()},n.prototype.tanh=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.tanh(this.get(s,c)));return this},n.tanh=function(s){var c=new i(s);return c.tanh()},n.prototype.trunc=function(){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,Math.trunc(this.get(s,c)));return this},n.trunc=function(s){var c=new i(s);return c.trunc()},n.pow=function(s,c){var l=new i(s);return l.pow(c)},n.prototype.pow=function(s){return typeof s=="number"?this.powS(s):this.powM(s)},n.prototype.powS=function(s){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,Math.pow(this.get(c,l),s));return this},n.prototype.powM=function(s){if(s=i.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.set(c,l,Math.pow(this.get(c,l),s.get(c,l)));return this}}function fc(n,i,o){var s=o?n.rows:n.rows-1;if(i<0||i>s)throw new RangeError("Row index out of range")}function hc(n,i,o){var s=o?n.columns:n.columns-1;if(i<0||i>s)throw new RangeError("Column index out of range")}function _h(n,i){if(i.to1DArray&&(i=i.to1DArray()),i.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return i}function Ch(n,i){if(i.to1DArray&&(i=i.to1DArray()),i.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return i}function Th(n,i){if(!Ko(i))throw new TypeError("row indices must be an array");for(var o=0;o<i.length;o++)if(i[o]<0||i[o]>=n.rows)throw new RangeError("row indices are out of range")}function bb(n,i){if(!Ko(i))throw new TypeError("column indices must be an array");for(var o=0;o<i.length;o++)if(i[o]<0||i[o]>=n.columns)throw new RangeError("column indices are out of range")}function i0(n,i,o,s,c){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(bf("startRow",i),bf("endRow",o),bf("startColumn",s),bf("endColumn",c),i>o||s>c||i<0||i>=n.rows||o<0||o>=n.rows||s<0||s>=n.columns||c<0||c>=n.columns)throw new RangeError("Submatrix indices are out of range")}function yf(n){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=[],s=0;s<n;s++)o.push(i);return o}function bf(n,i){if(typeof i!="number")throw new TypeError("".concat(n," must be a number"))}function xf(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function o0(n){for(var i=yf(n.rows),o=0;o<n.rows;++o)for(var s=0;s<n.columns;++s)i[o]+=n.get(o,s);return i}function xb(n){for(var i=yf(n.columns),o=0;o<n.rows;++o)for(var s=0;s<n.columns;++s)i[s]+=n.get(o,s);return i}function Eb(n){for(var i=0,o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)i+=n.get(o,s);return i}function s0(n){for(var i=yf(n.rows,1),o=0;o<n.rows;++o)for(var s=0;s<n.columns;++s)i[o]*=n.get(o,s);return i}function ka(n){for(var i=yf(n.columns,1),o=0;o<n.rows;++o)for(var s=0;s<n.columns;++s)i[s]*=n.get(o,s);return i}function wb(n){for(var i=1,o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)i*=n.get(o,s);return i}function pl(n,i,o){for(var s=n.rows,c=n.columns,l=[],d=0;d<s;d++){for(var p=0,v=0,y=0,x=0;x<c;x++)y=n.get(d,x)-o[d],p+=y,v+=y*y;i?l.push((v-p*p/c)/(c-1)):l.push((v-p*p/c)/c)}return l}function Sb(n,i,o){for(var s=n.rows,c=n.columns,l=[],d=0;d<c;d++){for(var p=0,v=0,y=0,x=0;x<s;x++)y=n.get(x,d)-o[d],p+=y,v+=y*y;i?l.push((v-p*p/s)/(s-1)):l.push((v-p*p/s)/s)}return l}function a0(n,i,o){for(var s=n.rows,c=n.columns,l=s*c,d=0,p=0,v=0,y=0;y<s;y++)for(var x=0;x<c;x++)v=n.get(y,x)-o,d+=v,p+=v*v;return i?(p-d*d/l)/(l-1):(p-d*d/l)/l}function c0(n,i){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)-i[o])}function _b(n,i){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)-i[s])}function Cb(n,i){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)-i)}function u0(n){for(var i=[],o=0;o<n.rows;o++){for(var s=0,c=0;c<n.columns;c++)s+=Math.pow(n.get(o,c),2)/(n.columns-1);i.push(Math.sqrt(s))}return i}function l0(n,i){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)/i[o])}function f0(n){for(var i=[],o=0;o<n.columns;o++){for(var s=0,c=0;c<n.rows;c++)s+=Math.pow(n.get(c,o),2)/(n.rows-1);i.push(Math.sqrt(s))}return i}function Tb(n,i){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)/i[s])}function xv(n){for(var i=n.size-1,o=0,s=0;s<n.columns;s++)for(var c=0;c<n.rows;c++)o+=Math.pow(n.get(c,s),2)/i;return Math.sqrt(o)}function Ab(n,i){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)/i)}var Po=function(){function n(){Hg()(this,n)}return yv()(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(o){if(typeof o!="function")throw new TypeError("callback must be a function");for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)o.call(this,s,c);return this}},{key:"to1DArray",value:function(){for(var o=[],s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)o.push(this.get(s,c));return o}},{key:"to2DArray",value:function(){for(var o=[],s=0;s<this.rows;s++){o.push([]);for(var c=0;c<this.columns;c++)o[s].push(this.get(s,c))}return o}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var o=0;o<this.rows;o++)for(var s=0;s<=o;s++)if(this.get(o,s)!==this.get(s,o))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var o=0,s=0,c=-1,l=!0,d=!1;o<this.rows&&l;){for(s=0,d=!1;s<this.columns&&d===!1;)this.get(o,s)===0?s++:this.get(o,s)===1&&s>c?(d=!0,c=s):(l=!1,d=!0);o++}return l}},{key:"isReducedEchelonForm",value:function(){for(var o=0,s=0,c=-1,l=!0,d=!1;o<this.rows&&l;){for(s=0,d=!1;s<this.columns&&d===!1;)this.get(o,s)===0?s++:this.get(o,s)===1&&s>c?(d=!0,c=s):(l=!1,d=!0);for(var p=s+1;p<this.rows;p++)this.get(o,p)!==0&&(l=!1);o++}return l}},{key:"echelonForm",value:function(){for(var o=this.clone(),s=0,c=0;s<o.rows&&c<o.columns;){for(var l=s,d=s;d<o.rows;d++)o.get(d,c)>o.get(l,c)&&(l=d);if(o.get(l,c)===0)c++;else{o.swapRows(s,l);for(var p=o.get(s,c),v=c;v<o.columns;v++)o.set(s,v,o.get(s,v)/p);for(var y=s+1;y<o.rows;y++){var x=o.get(y,c)/o.get(s,c);o.set(y,c,0);for(var E=c+1;E<o.columns;E++)o.set(y,E,o.get(y,E)-o.get(s,E)*x)}s++,c++}}return o}},{key:"reducedEchelonForm",value:function(){for(var o=this.echelonForm(),s=o.columns,c=o.rows,l=c-1;l>=0;)if(o.maxRow(l)===0)l--;else{for(var d=0,p=!1;d<c&&p===!1;)o.get(l,d)===1?p=!0:d++;for(var v=0;v<l;v++)for(var y=o.get(v,d),x=d;x<s;x++){var E=o.get(v,x)-y*o.get(l,x);o.set(v,x,E)}l--}return o}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Mi()(o)!=="object")throw new TypeError("options must be an object");var s=o.rows,c=s===void 0?1:s,l=o.columns,d=l===void 0?1:l;if(!Number.isInteger(c)||c<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(d)||d<=0)throw new TypeError("columns must be a positive integer");for(var p=new pr(this.rows*c,this.columns*d),v=0;v<c;v++)for(var y=0;y<d;y++)p.setSubMatrix(this,this.rows*v,this.columns*y);return p}},{key:"fill",value:function(o){for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,o);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(o){fc(this,o);for(var s=[],c=0;c<this.columns;c++)s.push(this.get(o,c));return s}},{key:"getRowVector",value:function(o){return pr.rowVector(this.getRow(o))}},{key:"setRow",value:function(o,s){fc(this,o),s=_h(this,s);for(var c=0;c<this.columns;c++)this.set(o,c,s[c]);return this}},{key:"swapRows",value:function(o,s){fc(this,o),fc(this,s);for(var c=0;c<this.columns;c++){var l=this.get(o,c);this.set(o,c,this.get(s,c)),this.set(s,c,l)}return this}},{key:"getColumn",value:function(o){hc(this,o);for(var s=[],c=0;c<this.rows;c++)s.push(this.get(c,o));return s}},{key:"getColumnVector",value:function(o){return pr.columnVector(this.getColumn(o))}},{key:"setColumn",value:function(o,s){hc(this,o),s=Ch(this,s);for(var c=0;c<this.rows;c++)this.set(c,o,s[c]);return this}},{key:"swapColumns",value:function(o,s){hc(this,o),hc(this,s);for(var c=0;c<this.rows;c++){var l=this.get(c,o);this.set(c,o,this.get(c,s)),this.set(c,s,l)}return this}},{key:"addRowVector",value:function(o){o=_h(this,o);for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,this.get(s,c)+o[c]);return this}},{key:"subRowVector",value:function(o){o=_h(this,o);for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,this.get(s,c)-o[c]);return this}},{key:"mulRowVector",value:function(o){o=_h(this,o);for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,this.get(s,c)*o[c]);return this}},{key:"divRowVector",value:function(o){o=_h(this,o);for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,this.get(s,c)/o[c]);return this}},{key:"addColumnVector",value:function(o){o=Ch(this,o);for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,this.get(s,c)+o[s]);return this}},{key:"subColumnVector",value:function(o){o=Ch(this,o);for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,this.get(s,c)-o[s]);return this}},{key:"mulColumnVector",value:function(o){o=Ch(this,o);for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,this.get(s,c)*o[s]);return this}},{key:"divColumnVector",value:function(o){o=Ch(this,o);for(var s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)this.set(s,c,this.get(s,c)/o[s]);return this}},{key:"mulRow",value:function(o,s){fc(this,o);for(var c=0;c<this.columns;c++)this.set(o,c,this.get(o,c)*s);return this}},{key:"mulColumn",value:function(o,s){hc(this,o);for(var c=0;c<this.rows;c++)this.set(c,o,this.get(c,o)*s);return this}},{key:"max",value:function(o){if(this.isEmpty())return NaN;switch(o){case"row":{for(var s=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.get(c,l)>s[c]&&(s[c]=this.get(c,l));return s}case"column":{for(var d=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),p=0;p<this.rows;p++)for(var v=0;v<this.columns;v++)this.get(p,v)>d[v]&&(d[v]=this.get(p,v));return d}case void 0:{for(var y=this.get(0,0),x=0;x<this.rows;x++)for(var E=0;E<this.columns;E++)this.get(x,E)>y&&(y=this.get(x,E));return y}default:throw new Error("invalid option: ".concat(o))}}},{key:"maxIndex",value:function(){xf(this);for(var o=this.get(0,0),s=[0,0],c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.get(c,l)>o&&(o=this.get(c,l),s[0]=c,s[1]=l);return s}},{key:"min",value:function(o){if(this.isEmpty())return NaN;switch(o){case"row":{for(var s=new Array(this.rows).fill(Number.POSITIVE_INFINITY),c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.get(c,l)<s[c]&&(s[c]=this.get(c,l));return s}case"column":{for(var d=new Array(this.columns).fill(Number.POSITIVE_INFINITY),p=0;p<this.rows;p++)for(var v=0;v<this.columns;v++)this.get(p,v)<d[v]&&(d[v]=this.get(p,v));return d}case void 0:{for(var y=this.get(0,0),x=0;x<this.rows;x++)for(var E=0;E<this.columns;E++)this.get(x,E)<y&&(y=this.get(x,E));return y}default:throw new Error("invalid option: ".concat(o))}}},{key:"minIndex",value:function(){xf(this);for(var o=this.get(0,0),s=[0,0],c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.get(c,l)<o&&(o=this.get(c,l),s[0]=c,s[1]=l);return s}},{key:"maxRow",value:function(o){if(fc(this,o),this.isEmpty())return NaN;for(var s=this.get(o,0),c=1;c<this.columns;c++)this.get(o,c)>s&&(s=this.get(o,c));return s}},{key:"maxRowIndex",value:function(o){fc(this,o),xf(this);for(var s=this.get(o,0),c=[o,0],l=1;l<this.columns;l++)this.get(o,l)>s&&(s=this.get(o,l),c[1]=l);return c}},{key:"minRow",value:function(o){if(fc(this,o),this.isEmpty())return NaN;for(var s=this.get(o,0),c=1;c<this.columns;c++)this.get(o,c)<s&&(s=this.get(o,c));return s}},{key:"minRowIndex",value:function(o){fc(this,o),xf(this);for(var s=this.get(o,0),c=[o,0],l=1;l<this.columns;l++)this.get(o,l)<s&&(s=this.get(o,l),c[1]=l);return c}},{key:"maxColumn",value:function(o){if(hc(this,o),this.isEmpty())return NaN;for(var s=this.get(0,o),c=1;c<this.rows;c++)this.get(c,o)>s&&(s=this.get(c,o));return s}},{key:"maxColumnIndex",value:function(o){hc(this,o),xf(this);for(var s=this.get(0,o),c=[0,o],l=1;l<this.rows;l++)this.get(l,o)>s&&(s=this.get(l,o),c[0]=l);return c}},{key:"minColumn",value:function(o){if(hc(this,o),this.isEmpty())return NaN;for(var s=this.get(0,o),c=1;c<this.rows;c++)this.get(c,o)<s&&(s=this.get(c,o));return s}},{key:"minColumnIndex",value:function(o){hc(this,o),xf(this);for(var s=this.get(0,o),c=[0,o],l=1;l<this.rows;l++)this.get(l,o)<s&&(s=this.get(l,o),c[0]=l);return c}},{key:"diag",value:function(){for(var o=Math.min(this.rows,this.columns),s=[],c=0;c<o;c++)s.push(this.get(c,c));return s}},{key:"norm",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",s=0;if(o==="max")return this.max();if(o==="frobenius"){for(var c=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)s=s+this.get(c,l)*this.get(c,l);return Math.sqrt(s)}else throw new RangeError("unknown norm type: ".concat(o))}},{key:"cumulativeSum",value:function(){for(var o=0,s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)o+=this.get(s,c),this.set(s,c,o);return this}},{key:"dot",value:function(o){n.isMatrix(o)&&(o=o.to1DArray());var s=this.to1DArray();if(s.length!==o.length)throw new RangeError("vectors do not have the same size");for(var c=0,l=0;l<s.length;l++)c+=s[l]*o[l];return c}},{key:"mmul",value:function(o){o=pr.checkMatrix(o);for(var s=this.rows,c=this.columns,l=o.columns,d=new pr(s,l),p=new Float64Array(c),v=0;v<l;v++){for(var y=0;y<c;y++)p[y]=o.get(y,v);for(var x=0;x<s;x++){for(var E=0,_=0;_<c;_++)E+=this.get(x,_)*p[_];d.set(x,v,E)}}return d}},{key:"strassen2x2",value:function(o){o=pr.checkMatrix(o);var s=new pr(2,2),c=this.get(0,0),l=o.get(0,0),d=this.get(0,1),p=o.get(0,1),v=this.get(1,0),y=o.get(1,0),x=this.get(1,1),E=o.get(1,1),_=(c+x)*(l+E),T=(v+x)*l,M=c*(p-E),R=x*(y-l),D=(c+d)*E,k=(v-c)*(l+p),L=(d-x)*(y+E),U=_+R-D+L,W=M+D,J=T+R,zt=_-T+M+k;return s.set(0,0,U),s.set(0,1,W),s.set(1,0,J),s.set(1,1,zt),s}},{key:"strassen3x3",value:function(o){o=pr.checkMatrix(o);var s=new pr(3,3),c=this.get(0,0),l=this.get(0,1),d=this.get(0,2),p=this.get(1,0),v=this.get(1,1),y=this.get(1,2),x=this.get(2,0),E=this.get(2,1),_=this.get(2,2),T=o.get(0,0),M=o.get(0,1),R=o.get(0,2),D=o.get(1,0),k=o.get(1,1),L=o.get(1,2),U=o.get(2,0),W=o.get(2,1),J=o.get(2,2),zt=(c+l+d-p-v-E-_)*k,Ae=(c-p)*(-M+k),qt=v*(-T+M+D-k-L-U+J),le=(-c+p+v)*(T-M+k),ce=(p+v)*(-T+M),Ne=c*T,Et=(-c+x+E)*(T-R+L),Le=(-c+x)*(R-L),nn=(x+E)*(-T+R),vn=(c+l+d-v-y-x-E)*L,fr=E*(-T+R+D-k-L-U+W),Dn=(-d+E+_)*(k+U-W),vr=(d-_)*(k-W),nr=d*U,Fr=(E+_)*(-U+W),ni=(-d+v+y)*(L+U-J),so=(d-y)*(L-J),mo=(v+y)*(-U+J),Sn=l*D,Yr=y*W,Co=p*R,fi=x*M,$i=_*J,mn=Ne+nr+Sn,qn=zt+le+ce+Ne+Dn+nr+Fr,Li=Ne+Et+nn+vn+nr+ni+mo,Br=Ae+qt+le+Ne+nr+ni+so,Qi=Ae+le+ce+Ne+Yr,ri=nr+ni+so+mo+Co,ki=Ne+Et+Le+fr+Dn+vr+nr,gs=Dn+vr+nr+Fr+fi,zo=Ne+Et+Le+nn+$i;return s.set(0,0,mn),s.set(0,1,qn),s.set(0,2,Li),s.set(1,0,Br),s.set(1,1,Qi),s.set(1,2,ri),s.set(2,0,ki),s.set(2,1,gs),s.set(2,2,zo),s}},{key:"mmulStrassen",value:function(o){o=pr.checkMatrix(o);var s=this.clone(),c=s.rows,l=s.columns,d=o.rows,p=o.columns;l!==d&&console.warn("Multiplying ".concat(c," x ").concat(l," and ").concat(d," x ").concat(p," matrix: dimensions do not match."));function v(_,T,M){var R=_.rows,D=_.columns;if(R===T&&D===M)return _;var k=n.zeros(T,M);return k=k.setSubMatrix(_,0,0),k}var y=Math.max(c,d),x=Math.max(l,p);s=v(s,y,x),o=v(o,y,x);function E(_,T,M,R){if(M<=512||R<=512)return _.mmul(T);M%2===1&&R%2===1?(_=v(_,M+1,R+1),T=v(T,M+1,R+1)):M%2===1?(_=v(_,M+1,R),T=v(T,M+1,R)):R%2===1&&(_=v(_,M,R+1),T=v(T,M,R+1));var D=parseInt(_.rows/2,10),k=parseInt(_.columns/2,10),L=_.subMatrix(0,D-1,0,k-1),U=T.subMatrix(0,D-1,0,k-1),W=_.subMatrix(0,D-1,k,_.columns-1),J=T.subMatrix(0,D-1,k,T.columns-1),zt=_.subMatrix(D,_.rows-1,0,k-1),Ae=T.subMatrix(D,T.rows-1,0,k-1),qt=_.subMatrix(D,_.rows-1,k,_.columns-1),le=T.subMatrix(D,T.rows-1,k,T.columns-1),ce=E(n.add(L,qt),n.add(U,le),D,k),Ne=E(n.add(zt,qt),U,D,k),Et=E(L,n.sub(J,le),D,k),Le=E(qt,n.sub(Ae,U),D,k),nn=E(n.add(L,W),le,D,k),vn=E(n.sub(zt,L),n.add(U,J),D,k),fr=E(n.sub(W,qt),n.add(Ae,le),D,k),Dn=n.add(ce,Le);Dn.sub(nn),Dn.add(fr);var vr=n.add(Et,nn),nr=n.add(Ne,Le),Fr=n.sub(ce,Ne);Fr.add(Et),Fr.add(vn);var ni=n.zeros(2*Dn.rows,2*Dn.columns);return ni=ni.setSubMatrix(Dn,0,0),ni=ni.setSubMatrix(vr,Dn.rows,0),ni=ni.setSubMatrix(nr,0,Dn.columns),ni=ni.setSubMatrix(Fr,Dn.rows,Dn.columns),ni.subMatrix(0,M-1,0,R-1)}return E(s,o,y,x)}},{key:"scaleRows",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Mi()(o)!=="object")throw new TypeError("options must be an object");var s=o.min,c=s===void 0?0:s,l=o.max,d=l===void 0?1:l;if(!Number.isFinite(c))throw new TypeError("min must be a number");if(!Number.isFinite(d))throw new TypeError("max must be a number");if(c>=d)throw new RangeError("min must be smaller than max");for(var p=new pr(this.rows,this.columns),v=0;v<this.rows;v++){var y=this.getRow(v);y.length>0&&bv(y,{min:c,max:d,output:y}),p.setRow(v,y)}return p}},{key:"scaleColumns",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Mi()(o)!=="object")throw new TypeError("options must be an object");var s=o.min,c=s===void 0?0:s,l=o.max,d=l===void 0?1:l;if(!Number.isFinite(c))throw new TypeError("min must be a number");if(!Number.isFinite(d))throw new TypeError("max must be a number");if(c>=d)throw new RangeError("min must be smaller than max");for(var p=new pr(this.rows,this.columns),v=0;v<this.columns;v++){var y=this.getColumn(v);y.length&&bv(y,{min:c,max:d,output:y}),p.setColumn(v,y)}return p}},{key:"flipRows",value:function(){for(var o=Math.ceil(this.columns/2),s=0;s<this.rows;s++)for(var c=0;c<o;c++){var l=this.get(s,c),d=this.get(s,this.columns-1-c);this.set(s,c,d),this.set(s,this.columns-1-c,l)}return this}},{key:"flipColumns",value:function(){for(var o=Math.ceil(this.rows/2),s=0;s<this.columns;s++)for(var c=0;c<o;c++){var l=this.get(c,s),d=this.get(this.rows-1-c,s);this.set(c,s,d),this.set(this.rows-1-c,s,l)}return this}},{key:"kroneckerProduct",value:function(o){o=pr.checkMatrix(o);for(var s=this.rows,c=this.columns,l=o.rows,d=o.columns,p=new pr(s*l,c*d),v=0;v<s;v++)for(var y=0;y<c;y++)for(var x=0;x<l;x++)for(var E=0;E<d;E++)p.set(l*v+x,d*y+E,this.get(v,y)*o.get(x,E));return p}},{key:"kroneckerSum",value:function(o){if(o=pr.checkMatrix(o),!this.isSquare()||!o.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var s=this.rows,c=o.rows,l=this.kroneckerProduct(pr.eye(c,c)),d=pr.eye(s,s).kroneckerProduct(o);return l.add(d)}},{key:"transpose",value:function(){for(var o=new pr(this.columns,this.rows),s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)o.set(c,s,this.get(s,c));return o}},{key:"sortRows",value:function(){for(var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h0,s=0;s<this.rows;s++)this.setRow(s,this.getRow(s).sort(o));return this}},{key:"sortColumns",value:function(){for(var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h0,s=0;s<this.columns;s++)this.setColumn(s,this.getColumn(s).sort(o));return this}},{key:"subMatrix",value:function(o,s,c,l){i0(this,o,s,c,l);for(var d=new pr(s-o+1,l-c+1),p=o;p<=s;p++)for(var v=c;v<=l;v++)d.set(p-o,v-c,this.get(p,v));return d}},{key:"subMatrixRow",value:function(o,s,c){if(s===void 0&&(s=0),c===void 0&&(c=this.columns-1),s>c||s<0||s>=this.columns||c<0||c>=this.columns)throw new RangeError("Argument out of range");for(var l=new pr(o.length,c-s+1),d=0;d<o.length;d++)for(var p=s;p<=c;p++){if(o[d]<0||o[d]>=this.rows)throw new RangeError("Row index out of range: ".concat(o[d]));l.set(d,p-s,this.get(o[d],p))}return l}},{key:"subMatrixColumn",value:function(o,s,c){if(s===void 0&&(s=0),c===void 0&&(c=this.rows-1),s>c||s<0||s>=this.rows||c<0||c>=this.rows)throw new RangeError("Argument out of range");for(var l=new pr(c-s+1,o.length),d=0;d<o.length;d++)for(var p=s;p<=c;p++){if(o[d]<0||o[d]>=this.columns)throw new RangeError("Column index out of range: ".concat(o[d]));l.set(p-s,d,this.get(p,o[d]))}return l}},{key:"setSubMatrix",value:function(o,s,c){if(o=pr.checkMatrix(o),o.isEmpty())return this;var l=s+o.rows-1,d=c+o.columns-1;i0(this,s,l,c,d);for(var p=0;p<o.rows;p++)for(var v=0;v<o.columns;v++)this.set(s+p,c+v,o.get(p,v));return this}},{key:"selection",value:function(o,s){Th(this,o),bb(this,s);for(var c=new pr(o.length,s.length),l=0;l<o.length;l++)for(var d=o[l],p=0;p<s.length;p++){var v=s[p];c.set(l,p,this.get(d,v))}return c}},{key:"trace",value:function(){for(var o=Math.min(this.rows,this.columns),s=0,c=0;c<o;c++)s+=this.get(c,c);return s}},{key:"clone",value:function(){for(var o=new pr(this.rows,this.columns),s=0;s<this.rows;s++)for(var c=0;c<this.columns;c++)o.set(s,c,this.get(s,c));return o}},{key:"sum",value:function(o){switch(o){case"row":return o0(this);case"column":return xb(this);case void 0:return Eb(this);default:throw new Error("invalid option: ".concat(o))}}},{key:"product",value:function(o){switch(o){case"row":return s0(this);case"column":return ka(this);case void 0:return wb(this);default:throw new Error("invalid option: ".concat(o))}}},{key:"mean",value:function(o){var s=this.sum(o);switch(o){case"row":{for(var c=0;c<this.rows;c++)s[c]/=this.columns;return s}case"column":{for(var l=0;l<this.columns;l++)s[l]/=this.rows;return s}case void 0:return s/this.size;default:throw new Error("invalid option: ".concat(o))}}},{key:"variance",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Mi()(o)==="object"&&(s=o,o=void 0),Mi()(s)!=="object")throw new TypeError("options must be an object");var c=s,l=c.unbiased,d=l===void 0?!0:l,p=c.mean,v=p===void 0?this.mean(o):p;if(typeof d!="boolean")throw new TypeError("unbiased must be a boolean");switch(o){case"row":{if(!Ko(v))throw new TypeError("mean must be an array");return pl(this,d,v)}case"column":{if(!Ko(v))throw new TypeError("mean must be an array");return Sb(this,d,v)}case void 0:{if(typeof v!="number")throw new TypeError("mean must be a number");return a0(this,d,v)}default:throw new Error("invalid option: ".concat(o))}}},{key:"standardDeviation",value:function(o,s){Mi()(o)==="object"&&(s=o,o=void 0);var c=this.variance(o,s);if(o===void 0)return Math.sqrt(c);for(var l=0;l<c.length;l++)c[l]=Math.sqrt(c[l]);return c}},{key:"center",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Mi()(o)==="object"&&(s=o,o=void 0),Mi()(s)!=="object")throw new TypeError("options must be an object");var c=s,l=c.center,d=l===void 0?this.mean(o):l;switch(o){case"row":{if(!Ko(d))throw new TypeError("center must be an array");return c0(this,d),this}case"column":{if(!Ko(d))throw new TypeError("center must be an array");return _b(this,d),this}case void 0:{if(typeof d!="number")throw new TypeError("center must be a number");return Cb(this,d),this}default:throw new Error("invalid option: ".concat(o))}}},{key:"scale",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Mi()(o)==="object"&&(s=o,o=void 0),Mi()(s)!=="object")throw new TypeError("options must be an object");var c=s.scale;switch(o){case"row":{if(c===void 0)c=u0(this);else if(!Ko(c))throw new TypeError("scale must be an array");return l0(this,c),this}case"column":{if(c===void 0)c=f0(this);else if(!Ko(c))throw new TypeError("scale must be an array");return Tb(this,c),this}case void 0:{if(c===void 0)c=xv(this);else if(typeof c!="number")throw new TypeError("scale must be a number");return Ab(this,c),this}default:throw new Error("invalid option: ".concat(o))}}},{key:"toString",value:function(o){return mf(this,o)}}],[{key:"from1DArray",value:function(o,s,c){var l=o*s;if(l!==c.length)throw new RangeError("data length does not match given dimensions");for(var d=new pr(o,s),p=0;p<o;p++)for(var v=0;v<s;v++)d.set(p,v,c[p*s+v]);return d}},{key:"rowVector",value:function(o){for(var s=new pr(1,o.length),c=0;c<o.length;c++)s.set(0,c,o[c]);return s}},{key:"columnVector",value:function(o){for(var s=new pr(o.length,1),c=0;c<o.length;c++)s.set(c,0,o[c]);return s}},{key:"zeros",value:function(o,s){return new pr(o,s)}},{key:"ones",value:function(o,s){return new pr(o,s).fill(1)}},{key:"rand",value:function(o,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Mi()(c)!=="object")throw new TypeError("options must be an object");for(var l=c.random,d=l===void 0?Math.random:l,p=new pr(o,s),v=0;v<o;v++)for(var y=0;y<s;y++)p.set(v,y,d());return p}},{key:"randInt",value:function(o,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Mi()(c)!=="object")throw new TypeError("options must be an object");var l=c.min,d=l===void 0?0:l,p=c.max,v=p===void 0?1e3:p,y=c.random,x=y===void 0?Math.random:y;if(!Number.isInteger(d))throw new TypeError("min must be an integer");if(!Number.isInteger(v))throw new TypeError("max must be an integer");if(d>=v)throw new RangeError("min must be smaller than max");for(var E=v-d,_=new pr(o,s),T=0;T<o;T++)for(var M=0;M<s;M++){var R=d+Math.round(x()*E);_.set(T,M,R)}return _}},{key:"eye",value:function(o,s,c){s===void 0&&(s=o),c===void 0&&(c=1);for(var l=Math.min(o,s),d=this.zeros(o,s),p=0;p<l;p++)d.set(p,p,c);return d}},{key:"diag",value:function(o,s,c){var l=o.length;s===void 0&&(s=l),c===void 0&&(c=s);for(var d=Math.min(l,s,c),p=this.zeros(s,c),v=0;v<d;v++)p.set(v,v,o[v]);return p}},{key:"min",value:function(o,s){o=this.checkMatrix(o),s=this.checkMatrix(s);for(var c=o.rows,l=o.columns,d=new pr(c,l),p=0;p<c;p++)for(var v=0;v<l;v++)d.set(p,v,Math.min(o.get(p,v),s.get(p,v)));return d}},{key:"max",value:function(o,s){o=this.checkMatrix(o),s=this.checkMatrix(s);for(var c=o.rows,l=o.columns,d=new this(c,l),p=0;p<c;p++)for(var v=0;v<l;v++)d.set(p,v,Math.max(o.get(p,v),s.get(p,v)));return d}},{key:"checkMatrix",value:function(o){return n.isMatrix(o)?o:new pr(o)}},{key:"isMatrix",value:function(o){return o!=null&&o.klass==="Matrix"}}]),n}();Po.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Po.prototype[Symbol.for("nodejs.util.inspect.custom")]=yb);function h0(n,i){return n-i}function Ob(n){return n.every(function(i){return typeof i=="number"})}Po.random=Po.rand,Po.randomInt=Po.randInt,Po.diagonal=Po.diag,Po.prototype.diagonal=Po.prototype.diag,Po.identity=Po.eye,Po.prototype.negate=Po.prototype.neg,Po.prototype.tensorProduct=Po.prototype.kroneckerProduct;var pr=function(n){Nc()(o,n);var i=mv()(o);function o(s,c){var l;if(Hg()(this,o),l=i.call(this),o.isMatrix(s))return fb()(l,s.clone());if(Number.isInteger(s)&&s>=0)if(l.data=[],Number.isInteger(c)&&c>=0)for(var d=0;d<s;d++)l.data.push(new Float64Array(c));else throw new TypeError("nColumns must be a positive integer");else if(Ko(s)){var p=s;if(s=p.length,c=s?p[0].length:0,typeof c!="number")throw new TypeError("Data must be a 2D array with at least one element");l.data=[];for(var v=0;v<s;v++){if(p[v].length!==c)throw new RangeError("Inconsistent array dimensions");if(!Ob(p[v]))throw new TypeError("Input data contains non-numeric values");l.data.push(Float64Array.from(p[v]))}}else throw new TypeError("First argument must be a positive number or an array");return l.rows=s,l.columns=c,l}return yv()(o,[{key:"set",value:function(c,l,d){return this.data[c][l]=d,this}},{key:"get",value:function(c,l){return this.data[c][l]}},{key:"removeRow",value:function(c){return fc(this,c),this.data.splice(c,1),this.rows-=1,this}},{key:"addRow",value:function(c,l){return l===void 0&&(l=c,c=this.rows),fc(this,c,!0),l=Float64Array.from(_h(this,l)),this.data.splice(c,0,l),this.rows+=1,this}},{key:"removeColumn",value:function(c){hc(this,c);for(var l=0;l<this.rows;l++){for(var d=new Float64Array(this.columns-1),p=0;p<c;p++)d[p]=this.data[l][p];for(var v=c+1;v<this.columns;v++)d[v-1]=this.data[l][v];this.data[l]=d}return this.columns-=1,this}},{key:"addColumn",value:function(c,l){typeof l=="undefined"&&(l=c,c=this.columns),hc(this,c,!0),l=Ch(this,l);for(var d=0;d<this.rows;d++){for(var p=new Float64Array(this.columns+1),v=0;v<c;v++)p[v]=this.data[d][v];for(p[v++]=l[d];v<this.columns+1;v++)p[v]=this.data[d][v-1];this.data[d]=p}return this.columns+=1,this}}]),o}(Po);r0(Po,pr);var Mb=function(n){Nc()(o,n);var i=mv()(o);function o(s){var c;return Hg()(this,o),c=i.call(this),c.data=s,c.rows=s.length,c.columns=s[0].length,c}return yv()(o,[{key:"set",value:function(c,l,d){return this.data[c][l]=d,this}},{key:"get",value:function(c,l){return this.data[c][l]}}]),o}(Po);function Rc(n,i){var o=0;return Math.abs(n)>Math.abs(i)?(o=i/n,Math.abs(n)*Math.sqrt(1+o*o)):i!==0?(o=n/i,Math.abs(i)*Math.sqrt(1+o*o)):0}var Fd=function(){function n(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Hg()(this,n),i=Mb.checkMatrix(i),i.isEmpty())throw new Error("Matrix must be non-empty");var s=i.rows,c=i.columns,l=o.computeLeftSingularVectors,d=l===void 0?!0:l,p=o.computeRightSingularVectors,v=p===void 0?!0:p,y=o.autoTranspose,x=y===void 0?!1:y,E=Boolean(d),_=Boolean(v),T=!1,M;if(s<c)if(!x)M=i.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{M=i.transpose(),s=M.rows,c=M.columns,T=!0;var R=E;E=_,_=R}else M=i.clone();for(var D=Math.min(s,c),k=Math.min(s+1,c),L=new Float64Array(k),U=new pr(s,D),W=new pr(c,c),J=new Float64Array(c),zt=new Float64Array(s),Ae=new Float64Array(k),qt=0;qt<k;qt++)Ae[qt]=qt;for(var le=Math.min(s-1,c),ce=Math.max(0,Math.min(c-2,s)),Ne=Math.max(le,ce),Et=0;Et<Ne;Et++){if(Et<le){L[Et]=0;for(var Le=Et;Le<s;Le++)L[Et]=Rc(L[Et],M.get(Le,Et));if(L[Et]!==0){M.get(Et,Et)<0&&(L[Et]=-L[Et]);for(var nn=Et;nn<s;nn++)M.set(nn,Et,M.get(nn,Et)/L[Et]);M.set(Et,Et,M.get(Et,Et)+1)}L[Et]=-L[Et]}for(var vn=Et+1;vn<c;vn++){if(Et<le&&L[Et]!==0){for(var fr=0,Dn=Et;Dn<s;Dn++)fr+=M.get(Dn,Et)*M.get(Dn,vn);fr=-fr/M.get(Et,Et);for(var vr=Et;vr<s;vr++)M.set(vr,vn,M.get(vr,vn)+fr*M.get(vr,Et))}J[vn]=M.get(Et,vn)}if(E&&Et<le)for(var nr=Et;nr<s;nr++)U.set(nr,Et,M.get(nr,Et));if(Et<ce){J[Et]=0;for(var Fr=Et+1;Fr<c;Fr++)J[Et]=Rc(J[Et],J[Fr]);if(J[Et]!==0){J[Et+1]<0&&(J[Et]=0-J[Et]);for(var ni=Et+1;ni<c;ni++)J[ni]/=J[Et];J[Et+1]+=1}if(J[Et]=-J[Et],Et+1<s&&J[Et]!==0){for(var so=Et+1;so<s;so++)zt[so]=0;for(var mo=Et+1;mo<s;mo++)for(var Sn=Et+1;Sn<c;Sn++)zt[mo]+=J[Sn]*M.get(mo,Sn);for(var Yr=Et+1;Yr<c;Yr++)for(var Co=-J[Yr]/J[Et+1],fi=Et+1;fi<s;fi++)M.set(fi,Yr,M.get(fi,Yr)+Co*zt[fi])}if(_)for(var $i=Et+1;$i<c;$i++)W.set($i,Et,J[$i])}}var mn=Math.min(c,s+1);if(le<c&&(L[le]=M.get(le,le)),s<mn&&(L[mn-1]=0),ce+1<mn&&(J[ce]=M.get(ce,mn-1)),J[mn-1]=0,E){for(var qn=le;qn<D;qn++){for(var Li=0;Li<s;Li++)U.set(Li,qn,0);U.set(qn,qn,1)}for(var Br=le-1;Br>=0;Br--)if(L[Br]!==0){for(var Qi=Br+1;Qi<D;Qi++){for(var ri=0,ki=Br;ki<s;ki++)ri+=U.get(ki,Br)*U.get(ki,Qi);ri=-ri/U.get(Br,Br);for(var gs=Br;gs<s;gs++)U.set(gs,Qi,U.get(gs,Qi)+ri*U.get(gs,Br))}for(var zo=Br;zo<s;zo++)U.set(zo,Br,-U.get(zo,Br));U.set(Br,Br,1+U.get(Br,Br));for(var Xs=0;Xs<Br-1;Xs++)U.set(Xs,Br,0)}else{for(var Nv=0;Nv<s;Nv++)U.set(Nv,Br,0);U.set(Br,Br,1)}}if(_)for(var Ys=c-1;Ys>=0;Ys--){if(Ys<ce&&J[Ys]!==0)for(var Hd=Ys+1;Hd<c;Hd++){for(var Wd=0,sp=Ys+1;sp<c;sp++)Wd+=W.get(sp,Ys)*W.get(sp,Hd);Wd=-Wd/W.get(Ys+1,Ys);for(var Rh=Ys+1;Rh<c;Rh++)W.set(Rh,Hd,W.get(Rh,Hd)+Wd*W.get(Rh,Ys))}for(var qb=0;qb<c;qb++)W.set(qb,Ys,0);W.set(Ys,Ys,1)}for(var gx=mn-1,Jb=0,px=Number.EPSILON;mn>0;){var hr=void 0,Rv=void 0;for(hr=mn-2;hr>=-1&&hr!==-1;hr--){var mx=Number.MIN_VALUE+px*Math.abs(L[hr]+Math.abs(L[hr+1]));if(Math.abs(J[hr])<=mx||Number.isNaN(J[hr])){J[hr]=0;break}}if(hr===mn-2)Rv=4;else{var pc=void 0;for(pc=mn-1;pc>=hr&&pc!==hr;pc--){var yx=(pc!==mn?Math.abs(J[pc]):0)+(pc!==hr+1?Math.abs(J[pc-1]):0);if(Math.abs(L[pc])<=px*yx){L[pc]=0;break}}pc===hr?Rv=3:pc===mn-1?Rv=1:(Rv=2,hr=pc)}switch(hr++,Rv){case 1:{var Qb=J[mn-2];J[mn-2]=0;for(var Lc=mn-2;Lc>=hr;Lc--){var Dv=Rc(L[Lc],Qb),tx=L[Lc]/Dv,ex=Qb/Dv;if(L[Lc]=Dv,Lc!==hr&&(Qb=-ex*J[Lc-1],J[Lc-1]=tx*J[Lc-1]),_)for(var Dh=0;Dh<c;Dh++)Dv=tx*W.get(Dh,Lc)+ex*W.get(Dh,mn-1),W.set(Dh,mn-1,-ex*W.get(Dh,Lc)+tx*W.get(Dh,mn-1)),W.set(Dh,Lc,Dv)}break}case 2:{var nx=J[hr-1];J[hr-1]=0;for(var Su=hr;Su<mn;Su++){var Lv=Rc(L[Su],nx),rx=L[Su]/Lv,ix=nx/Lv;if(L[Su]=Lv,nx=-ix*J[Su],J[Su]=rx*J[Su],E)for(var Lh=0;Lh<s;Lh++)Lv=rx*U.get(Lh,Su)+ix*U.get(Lh,hr-1),U.set(Lh,hr-1,-ix*U.get(Lh,Su)+rx*U.get(Lh,hr-1)),U.set(Lh,Su,Lv)}break}case 3:{var kv=Math.max(Math.abs(L[mn-1]),Math.abs(L[mn-2]),Math.abs(J[mn-2]),Math.abs(L[hr]),Math.abs(J[hr])),ap=L[mn-1]/kv,vx=L[mn-2]/kv,M0=J[mn-2]/kv,ox=L[hr]/kv,bx=J[hr]/kv,Xd=((vx+ap)*(vx-ap)+M0*M0)/2,I0=ap*M0*(ap*M0),Fv=0;(Xd!==0||I0!==0)&&(Xd<0?Fv=0-Math.sqrt(Xd*Xd+I0):Fv=Math.sqrt(Xd*Xd+I0),Fv=I0/(Xd+Fv));for(var Yd=(ox+ap)*(ox-ap)+Fv,cp=ox*bx,oi=hr;oi<mn-1;oi++){var ya=Rc(Yd,cp);ya===0&&(ya=Number.MIN_VALUE);var _u=Yd/ya,Cu=cp/ya;if(oi!==hr&&(J[oi-1]=ya),Yd=_u*L[oi]+Cu*J[oi],J[oi]=_u*J[oi]-Cu*L[oi],cp=Cu*L[oi+1],L[oi+1]=_u*L[oi+1],_)for(var kh=0;kh<c;kh++)ya=_u*W.get(kh,oi)+Cu*W.get(kh,oi+1),W.set(kh,oi+1,-Cu*W.get(kh,oi)+_u*W.get(kh,oi+1)),W.set(kh,oi,ya);if(ya=Rc(Yd,cp),ya===0&&(ya=Number.MIN_VALUE),_u=Yd/ya,Cu=cp/ya,L[oi]=ya,Yd=_u*J[oi]+Cu*L[oi+1],L[oi+1]=-Cu*J[oi]+_u*L[oi+1],cp=Cu*J[oi+1],J[oi+1]=_u*J[oi+1],E&&oi<s-1)for(var Fh=0;Fh<s;Fh++)ya=_u*U.get(Fh,oi)+Cu*U.get(Fh,oi+1),U.set(Fh,oi+1,-Cu*U.get(Fh,oi)+_u*U.get(Fh,oi+1)),U.set(Fh,oi,ya)}J[mn-2]=Yd,Jb=Jb+1;break}case 4:{if(L[hr]<=0&&(L[hr]=L[hr]<0?-L[hr]:0,_))for(var P0=0;P0<=gx;P0++)W.set(P0,hr,-W.get(P0,hr));for(;hr<gx&&!(L[hr]>=L[hr+1]);){var Bv=L[hr];if(L[hr]=L[hr+1],L[hr+1]=Bv,_&&hr<c-1)for(var up=0;up<c;up++)Bv=W.get(up,hr+1),W.set(up,hr+1,W.get(up,hr)),W.set(up,hr,Bv);if(E&&hr<s-1)for(var lp=0;lp<s;lp++)Bv=U.get(lp,hr+1),U.set(lp,hr+1,U.get(lp,hr)),U.set(lp,hr,Bv);hr++}Jb=0,mn--;break}}}if(T){var xx=W;W=U,U=xx}this.m=s,this.n=c,this.s=L,this.U=U,this.V=W}return yv()(n,[{key:"solve",value:function(o){for(var s=o,c=this.threshold,l=this.s.length,d=pr.zeros(l,l),p=0;p<l;p++)Math.abs(this.s[p])<=c?d.set(p,p,0):d.set(p,p,1/this.s[p]);for(var v=this.U,y=this.rightSingularVectors,x=y.mmul(d),E=y.rows,_=v.rows,T=pr.zeros(E,_),M=0;M<E;M++)for(var R=0;R<_;R++){for(var D=0,k=0;k<l;k++)D+=x.get(M,k)*v.get(R,k);T.set(M,R,D)}return T.mmul(s)}},{key:"solveForDiagonal",value:function(o){return this.solve(pr.diag(o))}},{key:"inverse",value:function(){for(var o=this.V,s=this.threshold,c=o.rows,l=o.columns,d=new pr(c,this.s.length),p=0;p<c;p++)for(var v=0;v<l;v++)Math.abs(this.s[v])>s&&d.set(p,v,o.get(p,v)/this.s[v]);for(var y=this.U,x=y.rows,E=y.columns,_=new pr(c,x),T=0;T<c;T++)for(var M=0;M<x;M++){for(var R=0,D=0;D<E;D++)R+=d.get(T,D)*y.get(M,D);_.set(T,M,R)}return _}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var o=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,s=0,c=this.s,l=0,d=c.length;l<d;l++)c[l]>o&&s++;return s}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return pr.diag(this.s)}}]),n}();class Bd{constructor(i){this.distances=i.distances,this.dimension=i.dimension||2,this.linkDistance=i.linkDistance}layout(){const i=this,{dimension:o,distances:s,linkDistance:c}=i;try{const l=pr.mul(pr.pow(s,2),-.5),d=l.mean("row"),p=l.mean("column"),v=l.mean();l.add(v).subRowVector(d).subColumnVector(p);const y=new Fd(l),x=pr.sqrt(y.diagonalMatrix).diagonal();return y.leftSingularVectors.toJSON().map(E=>pr.mul([E],[x]).toJSON()[0].splice(0,o))}catch(l){const d=[];for(let p=0;p<s.length;p++){const v=Math.random()*c,y=Math.random()*c;d.push([v,y])}return d}}}const Ev=800;class d0{constructor(i){this.disp=[],this.positions=i.positions,this.adjMatrix=i.adjMatrix,this.focusID=i.focusID,this.radii=i.radii,this.iterations=i.iterations||10,this.height=i.height||10,this.width=i.width||10,this.speed=i.speed||100,this.gravity=i.gravity||10,this.nodeSizeFunc=i.nodeSizeFunc,this.k=i.k||5,this.strictRadial=i.strictRadial,this.nodes=i.nodes}layout(){const i=this,o=i.positions,s=[],c=i.iterations,l=i.width/10;i.maxDisplace=l,i.disp=s;for(let d=0;d<c;d++)o.forEach((p,v)=>{s[v]={x:0,y:0}}),i.getRepulsion(),i.updatePositions();return o}getRepulsion(){const i=this,o=i.positions,s=i.nodes,c=i.disp,l=i.k,d=i.radii||[];o.forEach((p,v)=>{c[v]={x:0,y:0},o.forEach((y,x)=>{if(v===x||d[v]!==d[x])return;let E=p[0]-y[0],_=p[1]-y[1],T=Math.sqrt(E*E+_*_);if(T===0){T=1;const M=v>x?1:-1;E=.01*M,_=.01*M}if(T<i.nodeSizeFunc(s[v])/2+i.nodeSizeFunc(s[x])/2){const M=l*l/T;c[v].x+=E/T*M,c[v].y+=_/T*M}})})}updatePositions(){const i=this,o=i.positions,s=i.disp,c=i.speed,l=i.strictRadial,d=i.focusID,p=i.maxDisplace||i.width/10;l&&s.forEach((y,x)=>{const E=o[x][0]-o[d][0],_=o[x][1]-o[d][1],T=Math.sqrt(E*E+_*_);let M=_/T,R=-E/T;const D=Math.sqrt(y.x*y.x+y.y*y.y);let k=Math.acos((M*y.x+R*y.y)/D);k>Math.PI/2&&(k-=Math.PI/2,M*=-1,R*=-1);const L=Math.cos(k)*D;y.x=M*L,y.y=R*L});const v=i.radii;o.forEach((y,x)=>{if(x===d)return;const E=Math.sqrt(s[x].x*s[x].x+s[x].y*s[x].y);if(E>0&&x!==d){const _=Math.min(p*(c/Ev),E);if(y[0]+=s[x].x/E*_,y[1]+=s[x].y/E*_,l){let T=y[0]-o[d][0],M=y[1]-o[d][1];const R=Math.sqrt(T*T+M*M);T=T/R*v[x],M=M/R*v[x],y[0]=o[d][0]+T,y[1]=o[d][1]+M}}})}}function g0(n){const i=n.length,o=n[0].length,s=[];for(let c=0;c<i;c++){const l=[];for(let d=0;d<o;d++)n[c][d]!==0?l.push(1/(n[c][d]*n[c][d])):l.push(0);s.push(l)}return s}function Ib(n,i){let o=-1;return n.forEach((s,c)=>{s.id===i&&(o=c)}),o}function p0(n,i){return Math.sqrt((n[0]-i[0])*(n[0]-i[0])+(n[1]-i[1])*(n[1]-i[1]))}class Pb extends vt{constructor(i){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(i)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const i=this,o=i.nodes,s=i.edges||[];if(!o||o.length===0){i.onLayoutEnd&&i.onLayoutEnd();return}!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);const c=i.center;if(o.length===1){o[0].x=c[0],o[0].y=c[1],i.onLayoutEnd&&i.onLayoutEnd();return}const l=i.linkDistance;let d=null;if(ft(i.focusNode)){let Ne=!1;for(let Et=0;Et<o.length;Et++)o[Et].id===i.focusNode&&(d=o[Et],i.focusNode=d,Ne=!0,Et=o.length);Ne||(d=null)}else d=i.focusNode;d||(d=o[0],i.focusNode=d);let p=Ib(o,d.id);p<0&&(p=0),i.focusIndex=p;const v=Bt({nodes:o,edges:s},!1),y=ut(v),x=i.maxToFocus(y,p);i.handleInfinity(y,p,x+1),i.distances=y;const E=y[p],_=i.width||500,T=i.height||500;let M=_-c[0]>c[0]?c[0]:_-c[0],R=T-c[1]>c[1]?c[1]:T-c[1];M===0&&(M=_/2),R===0&&(R=T/2);const D=R>M?M:R,k=Math.max(...E),L=[];E.forEach((Ne,Et)=>{i.unitRadius||(i.unitRadius=D/k),L[Et]=Ne*i.unitRadius}),i.radii=L;const U=i.eIdealDisMatrix();i.eIdealDistances=U;const W=g0(U);i.weights=W;let zt=new Bd({linkDistance:l,distances:U}).layout();zt.forEach(Ne=>{Z(Ne[0])&&(Ne[0]=Math.random()*l),Z(Ne[1])&&(Ne[1]=Math.random()*l)}),i.positions=zt,zt.forEach((Ne,Et)=>{o[Et].x=Ne[0]+c[0],o[Et].y=Ne[1]+c[1]}),zt.forEach(Ne=>{Ne[0]-=zt[p][0],Ne[1]-=zt[p][1]}),i.run();const Ae=i.preventOverlap,qt=i.nodeSize;let le;const ce=i.strictRadial;if(Ae){const Ne=i.nodeSpacing;let Et;K(Ne)?Et=()=>Ne:Hn(Ne)?Et=Ne:Et=()=>0,qt?Zt(qt)?le=vn=>(qt[0]>qt[1]?qt[0]:qt[1])+Et(vn):le=vn=>qt+Et(vn):le=vn=>vn.size?Zt(vn.size)?(vn.size[0]>vn.size[1]?vn.size[0]:vn.size[1])+Et(vn):gt(vn.size)?(vn.size.width>vn.size.height?vn.size.width:vn.size.height)+Et(vn):vn.size+Et(vn):10+Et(vn);const Le={nodes:o,nodeSizeFunc:le,adjMatrix:v,positions:zt,radii:L,height:T,width:_,strictRadial:ce,focusID:p,iterations:i.maxPreventOverlapIteration||200,k:zt.length/4.5};zt=new d0(Le).layout()}return zt.forEach((Ne,Et)=>{o[Et].x=Ne[0]+c[0],o[Et].y=Ne[1]+c[1]}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:s}}run(){const i=this,o=i.maxIteration,s=i.positions||[],c=i.weights||[],l=i.eIdealDistances||[],d=i.radii||[];for(let p=0;p<=o;p++){const v=p/o;i.oneIteration(v,s,d,l,c)}}oneIteration(i,o,s,c,l){const d=this,p=1-i,v=d.focusIndex;o.forEach((y,x)=>{const E=p0(y,[0,0]),_=E===0?0:1/E;if(x===v)return;let T=0,M=0,R=0;o.forEach((k,L)=>{if(x===L)return;const U=p0(y,k),W=U===0?0:1/U,J=c[L][x];R+=l[x][L],T+=l[x][L]*(k[0]+J*(y[0]-k[0])*W),M+=l[x][L]*(k[1]+J*(y[1]-k[1])*W)});const D=s[x]===0?0:1/s[x];R*=p,R+=i*D*D,T*=p,T+=i*D*y[0]*_,y[0]=T/R,M*=p,M+=i*D*y[1]*_,y[1]=M/R})}eIdealDisMatrix(){const i=this,o=i.nodes;if(!o)return[];const s=i.distances,c=i.linkDistance,l=i.radii||[],d=i.unitRadius||50,p=[];return s&&s.forEach((v,y)=>{const x=[];v.forEach((E,_)=>{if(y===_)x.push(0);else if(l[y]===l[_])if(i.sortBy==="data")x.push(E*(Math.abs(y-_)*i.sortStrength)/(l[y]/d));else if(i.sortBy){let T=o[y][i.sortBy]||0,M=o[_][i.sortBy]||0;ft(T)&&(T=T.charCodeAt(0)),ft(M)&&(M=M.charCodeAt(0)),x.push(E*(Math.abs(T-M)*i.sortStrength)/(l[y]/d))}else x.push(E*c/(l[y]/d));else{const T=(c+d)/2;x.push(E*T)}}),p.push(x)}),p}handleInfinity(i,o,s){const c=i.length;for(let l=0;l<c;l++)if(i[o][l]===1/0){i[o][l]=s,i[l][o]=s;for(let d=0;d<c;d++)i[l][d]!==1/0&&i[o][d]===1/0&&(i[o][d]=s+i[l][d],i[d][o]=s+i[l][d])}for(let l=0;l<c;l++)if(l!==o){for(let d=0;d<c;d++)if(i[l][d]===1/0){let p=Math.abs(i[o][l]-i[o][d]);p=p===0?1:p,i[l][d]=p}}}maxToFocus(i,o){let s=0;for(let c=0;c<i[o].length;c++)i[o][c]!==1/0&&(s=i[o][c]>s?i[o][c]:s);return s}getType(){return"radial"}}class v0 extends vt{constructor(i){super(),this.nodeSize=30,this.minNodeSpacing=10,this.nodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(i)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){var i,o;const s=this,{nodes:c,edges:l}=s,d=c.length;if(d===0){(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const p=s.center;if(d===1){c[0].x=p[0],c[0].y=p[1],(o=s.onLayoutEnd)===null||o===void 0||o.call(s);return}const{nodeSize:v,nodeSpacing:y}=s,x=[];let E,_=0;Zt(v)?E=Math.max(v[0],v[1]):E=v,Zt(y)?_=Math.max(y[0],y[1]):K(y)&&(_=y),c.forEach(U=>{x.push(U);let W=E;Zt(U.size)?W=Math.max(U.size[0],U.size[1]):K(U.size)?W=U.size:gt(U.size)&&(W=Math.max(U.size.width,U.size.height)),E=Math.max(E,W),Hn(y)&&(_=Math.max(y(U),_))}),s.clockwise=s.counterclockwise!==void 0?!s.counterclockwise:s.clockwise;const T={},M={};if(x.forEach((U,W)=>{T[U.id]=U,M[U.id]=W}),(s.sortBy==="degree"||!ft(s.sortBy)||x[0][s.sortBy]===void 0)&&(s.sortBy="degree",!K(c[0].degree))){const U=bt(c.length,M,l);x.forEach((W,J)=>{W.degree=U[J].all})}x.sort((U,W)=>W[s.sortBy]-U[s.sortBy]),s.maxValueNode=x[0],s.maxLevelDiff=s.maxLevelDiff||s.maxValueNode[s.sortBy]/4;const R=[[]];let D=R[0];x.forEach(U=>{if(D.length>0){const W=Math.abs(D[0][s.sortBy]-U[s.sortBy]);s.maxLevelDiff&&W>=s.maxLevelDiff&&(D=[],R.push(D))}D.push(U)});let k=E+(_||s.minNodeSpacing);if(!s.preventOverlap){const U=R.length>0&&R[0].length>1,J=(Math.min(s.width,s.height)/2-k)/(R.length+(U?1:0));k=Math.min(k,J)}let L=0;if(R.forEach(U=>{let W=s.sweep;W===void 0&&(W=2*Math.PI-2*Math.PI/U.length);const J=U.dTheta=W/Math.max(1,U.length-1);if(U.length>1&&s.preventOverlap){const zt=Math.cos(J)-Math.cos(0),Ae=Math.sin(J)-Math.sin(0),qt=Math.sqrt(k*k/(zt*zt+Ae*Ae));L=Math.max(qt,L)}U.r=L,L+=k}),s.equidistant){let U=0,W=0;for(let J=0;J<R.length;J++){const Ae=R[J].r-W;U=Math.max(U,Ae)}W=0,R.forEach((J,zt)=>{zt===0&&(W=J.r),J.r=W,W+=U})}return R.forEach(U=>{const W=U.dTheta,J=U.r;U.forEach((zt,Ae)=>{const qt=s.startAngle+(s.clockwise?1:-1)*W*Ae;zt.x=p[0]+J*Math.cos(qt),zt.y=p[1]+J*Math.sin(qt)})}),s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:l}}getType(){return"concentric"}}class wv extends vt{constructor(i){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(i)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const i=this,{nodes:o,edges:s=[]}=i,c=i.center;if(!o||o.length===0){i.onLayoutEnd&&i.onLayoutEnd();return}if(o.length===1){o[0].x=c[0],o[0].y=c[1],i.onLayoutEnd&&i.onLayoutEnd();return}const l=i.linkDistance,d=Bt({nodes:o,edges:s},!1),p=ut(d);i.handleInfinity(p);const v=Gt(p,l);i.scaledDistances=v;const y=i.runMDS();return i.positions=y,y.forEach((x,E)=>{o[E].x=x[0]+c[0],o[E].y=x[1]+c[1]}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:s}}runMDS(){const i=this,o=2,s=i.scaledDistances,c=pr.mul(pr.pow(s,2),-.5),l=c.mean("row"),d=c.mean("column"),p=c.mean();c.add(p).subRowVector(l).subColumnVector(d);const v=new Fd(c),y=pr.sqrt(v.diagonalMatrix).diagonal();return v.leftSingularVectors.toJSON().map(x=>pr.mul([x],[y]).toJSON()[0].splice(0,o))}handleInfinity(i){let o=-999999;i.forEach(s=>{s.forEach(c=>{c!==1/0&&o<c&&(o=c)})}),i.forEach((s,c)=>{s.forEach((l,d)=>{l===1/0&&(i[c][d]=o)})})}getType(){return"mds"}}const Nb=800;class Rb extends vt{constructor(i){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.animate=!0,this.updateCfg(i)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}}execute(){var i,o;const s=this,c=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!c||c.length===0){(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const l=s.center;if(c.length===1){c[0].x=l[0],c[0].y=l[1],(o=s.onLayoutEnd)===null||o===void 0||o.call(s);return}const d={},p={};return c.forEach((v,y)=>{K(v.x)||(v.x=Math.random()*this.width),K(v.y)||(v.y=Math.random()*this.height),d[v.id]=v,p[v.id]=y}),s.nodeMap=d,s.nodeIdxMap=p,s.run()}run(){var i;const o=this,s=o.nodes;if(!s)return;const{edges:c,maxIteration:l,workerEnabled:d,clustering:p,animate:v}=o,y={};if(p&&s.forEach(x=>{y[x.cluster]===void 0&&(y[x.cluster]={name:x.cluster,cx:0,cy:0,count:0})}),d||!v){for(let x=0;x<l;x++)o.runOneStep(y);(i=o.onLayoutEnd)===null||i===void 0||i.call(o)}else{if(typeof window=="undefined")return;let x=0;this.timeInterval=window.setInterval(()=>{var E;o.runOneStep(y),x++,x>=l&&((E=o.onLayoutEnd)===null||E===void 0||E.call(o),window.clearInterval(o.timeInterval))},0)}return{nodes:s,edges:c}}runOneStep(i){var o;const s=this,c=s.nodes;if(!c)return;const{edges:l,center:d,gravity:p,speed:v,clustering:y}=s,x=s.height*s.width,E=Math.sqrt(x)/10,_=x/(c.length+1),T=Math.sqrt(_),M=[];if(c.forEach((R,D)=>{M[D]={x:0,y:0}}),s.applyCalculate(c,l,M,T,_),y){for(const D in i)i[D].cx=0,i[D].cy=0,i[D].count=0;c.forEach(D=>{const k=i[D.cluster];K(D.x)&&(k.cx+=D.x),K(D.y)&&(k.cy+=D.y),k.count++});for(const D in i)i[D].cx/=i[D].count,i[D].cy/=i[D].count;const R=s.clusterGravity||p;c.forEach((D,k)=>{if(!K(D.x)||!K(D.y))return;const L=i[D.cluster],U=Math.sqrt((D.x-L.cx)*(D.x-L.cx)+(D.y-L.cy)*(D.y-L.cy)),W=T*R;M[k].x-=W*(D.x-L.cx)/U,M[k].y-=W*(D.y-L.cy)/U})}c.forEach((R,D)=>{if(!K(R.x)||!K(R.y))return;const k=.01*T*p;M[D].x-=k*(R.x-d[0]),M[D].y-=k*(R.y-d[1])}),c.forEach((R,D)=>{if(K(R.fx)&&K(R.fy)){R.x=R.fx,R.y=R.fy;return}if(!K(R.x)||!K(R.y))return;const k=Math.sqrt(M[D].x*M[D].x+M[D].y*M[D].y);if(k>0){const L=Math.min(E*(v/Nb),k);R.x+=M[D].x/k*L,R.y+=M[D].y/k*L}}),(o=s.tick)===null||o===void 0||o.call(s)}applyCalculate(i,o,s,c,l){const d=this;d.calRepulsive(i,s,l),o&&d.calAttractive(o,s,c)}calRepulsive(i,o,s){i.forEach((c,l)=>{o[l]={x:0,y:0},i.forEach((d,p)=>{if(l===p||!K(c.x)||!K(d.x)||!K(c.y)||!K(d.y))return;let v=c.x-d.x,y=c.y-d.y,x=v*v+y*y;if(x===0){x=1;const _=l>p?1:-1;v=.01*_,y=.01*_}const E=s/x;o[l].x+=v*E,o[l].y+=y*E})})}calAttractive(i,o,s){i.forEach(c=>{const l=ht(c,"source"),d=ht(c,"target");if(!l||!d)return;const p=this.nodeIdxMap[l],v=this.nodeIdxMap[d];if(p===v)return;const y=this.nodeMap[l],x=this.nodeMap[d];if(!K(x.x)||!K(y.x)||!K(x.y)||!K(y.y))return;const E=x.x-y.x,_=x.y-y.y,T=Math.sqrt(E*E+_*_),M=T*T/s;o[v].x-=E/T*M,o[v].y-=_/T*M,o[p].x+=E/T*M,o[p].y+=_/T*M})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const i=this;i.stop(),i.tick=null,i.nodes=null,i.edges=null,i.destroyed=!0}getType(){return"fruchterman"}}var vl=O(8850),en=O(45389),dc=O(27915),qo=O(92449),Db=O(73806),Kg=O.n(Db),Lb=O(59933),kb=O.n(Lb),m0=O(24669),qg=O.n(m0),Jg=O(10995),Rs=O.n(Jg),y0=null,Fb=1;function Sv(){return Fb++}var ax=null,Bb=null,De;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(De||(De={}));var Gd=function(){function n(){(0,dc.Z)(this,n),this.config=void 0}return(0,qo.Z)(n,[{key:"get",value:function(){return this.config}},{key:"set",value:function(o){this.config=o}}]),n}(),_v=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),zd;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(zd||(zd={}));var ml;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(ml||(ml={}));var Ah;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})(Ah||(Ah={}));var Oh;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(Oh||(Oh={}));var jd="__DefineValuePlaceholder__";function Gb(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Cv(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),o.push.apply(o,s)}return o}function jr(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Cv(Object(o),!0).forEach(function(s){(0,en.Z)(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Cv(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var Mh=function(){function n(i,o){(0,dc.Z)(this,n),this.engine=i,this.configService=o,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,qo.Z)(n,[{key:"init",value:function(){var o=this.configService.get(),s=o.canvas,c=o.engineOptions;this.initPromise=this.engine.init(jr({canvas:s||Gb(),antialiasing:!1},c))}},{key:"setBundle",value:function(o){this.compiledBundle=JSON.parse(JSON.stringify(o))}},{key:"setDispatch",value:function(o){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=o),this}},{key:"setMaxIteration",value:function(o){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=o),this}},{key:"setBinding",value:function(o,s){var c=this;if(typeof o=="string"){var l=kb()(s)||Kg()(s)||qg()(s);if(this.compiledBundle&&this.compiledBundle.context){var d=this.compiledBundle.context.defines.find(function(v){return v.name===o});if(d)return d.value=s,this;var p=this.compiledBundle.context.uniforms.find(function(v){return v.name===o});p&&(l?(p.data=s,p.isReferer=!1,p.storageClass===Ah.Uniform?this.model&&this.model.updateUniform(o,s):this.model&&this.model.updateBuffer(o,s)):(p.isReferer=!0,p.data=s))}}else Object.keys(o).forEach(function(v){c.setBinding(v,o[v])});return this}},{key:"execute",value:function(){var i=(0,vl.Z)(Rs().mark(function s(){var c=this,l,d,p=arguments;return Rs().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(l=p.length>0&&p[0]!==void 0?p[0]:1,!this.dirty){y.next=6;break}return this.compiledBundle.context&&(l>1?this.compiledBundle.context.maxIteration=l:this.compiledBundle.context.maxIteration++),y.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(x){var E=x.isReferer;return E}).forEach(function(x){var E=x.data,_=x.name;c.model.confirmInput(E.model,_)}),d=0;d<l;d++)this.model.run();return this.engine.endFrame(),y.abrupt("return",this);case 12:case"end":return y.stop()}},s,this)}));function o(){return i.apply(this,arguments)}return o}()},{key:"getOutput",value:function(){var i=(0,vl.Z)(Rs().mark(function s(){return Rs().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.model.readData());case 1:case"end":return l.stop()}},s,this)}));function o(){return i.apply(this,arguments)}return o}()},{key:"compile",value:function(){var i=(0,vl.Z)(Rs().mark(function s(){var c,l,d;return Rs().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.initPromise;case 2:return c=jr({},this.compiledBundle.context),l=this.engine.supportWebGPU?this.engine.useWGSL?Oh.WGSL:Oh.GLSL450:Oh.GLSL100,d=this.compiledBundle.shaders[l],c.defines.filter(function(y){return y.runtime}).forEach(function(y){var x="".concat(jd).concat(y.name);d=d.replace(x,"".concat(y.value))}),c.shader=d,c.uniforms.forEach(function(y){if(!y.data&&y.storageClass===Ah.StorageBuffer){var x=1;y.type===zd.FloatArray?x=1:y.type===zd.Vector4FloatArray&&(x=4),y.data=new Float32Array(c.output.length*x).fill(0)}}),this.compiledBundle.context=c,v.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=v.sent;case 12:case"end":return v.stop()}},s,this)}));function o(){return i.apply(this,arguments)}return o}()}]),n}(),zb=O(40224),Qg=O.n(zb),po=function(){function n(i,o){(0,dc.Z)(this,n),this.attribute=void 0,this.buffer=void 0;var s=o.buffer,c=o.offset,l=o.stride,d=o.normalized,p=o.size,v=o.divisor;this.buffer=s,this.attribute={buffer:s.get(),offset:c||0,stride:l||0,normalized:d||!1,divisor:v||0},p&&(this.attribute.size=p)}return(0,qo.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(o){this.buffer.subData(o)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Fa,_i,xu,_o,Ud,Zs,Vd,tp,Dc,Ba,Ds,gc,Eu,ep,Ih=(Fa={},(0,en.Z)(Fa,De.POINTS,"points"),(0,en.Z)(Fa,De.LINES,"lines"),(0,en.Z)(Fa,De.LINE_LOOP,"line loop"),(0,en.Z)(Fa,De.LINE_STRIP,"line strip"),(0,en.Z)(Fa,De.TRIANGLES,"triangles"),(0,en.Z)(Fa,De.TRIANGLE_FAN,"triangle fan"),(0,en.Z)(Fa,De.TRIANGLE_STRIP,"triangle strip"),Fa),jb=(_i={},(0,en.Z)(_i,De.STATIC_DRAW,"static"),(0,en.Z)(_i,De.DYNAMIC_DRAW,"dynamic"),(0,en.Z)(_i,De.STREAM_DRAW,"stream"),_i),b0=(xu={},(0,en.Z)(xu,De.BYTE,"int8"),(0,en.Z)(xu,De.UNSIGNED_INT,"int16"),(0,en.Z)(xu,De.INT,"int32"),(0,en.Z)(xu,De.UNSIGNED_BYTE,"uint8"),(0,en.Z)(xu,De.UNSIGNED_SHORT,"uint16"),(0,en.Z)(xu,De.UNSIGNED_INT,"uint32"),(0,en.Z)(xu,De.FLOAT,"float"),xu),Ub=(_o={},(0,en.Z)(_o,De.ALPHA,"alpha"),(0,en.Z)(_o,De.LUMINANCE,"luminance"),(0,en.Z)(_o,De.LUMINANCE_ALPHA,"luminance alpha"),(0,en.Z)(_o,De.RGB,"rgb"),(0,en.Z)(_o,De.RGBA,"rgba"),(0,en.Z)(_o,De.RGBA4,"rgba4"),(0,en.Z)(_o,De.RGB5_A1,"rgb5 a1"),(0,en.Z)(_o,De.RGB565,"rgb565"),(0,en.Z)(_o,De.DEPTH_COMPONENT,"depth"),(0,en.Z)(_o,De.DEPTH_STENCIL,"depth stencil"),_o),cx=(Ud={},(0,en.Z)(Ud,De.DONT_CARE,"dont care"),(0,en.Z)(Ud,De.NICEST,"nice"),(0,en.Z)(Ud,De.FASTEST,"fast"),Ud),x0=(Zs={},(0,en.Z)(Zs,De.NEAREST,"nearest"),(0,en.Z)(Zs,De.LINEAR,"linear"),(0,en.Z)(Zs,De.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,en.Z)(Zs,De.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,en.Z)(Zs,De.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,en.Z)(Zs,De.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Zs),Vb=(Vd={},(0,en.Z)(Vd,De.REPEAT,"repeat"),(0,en.Z)(Vd,De.CLAMP_TO_EDGE,"clamp"),(0,en.Z)(Vd,De.MIRRORED_REPEAT,"mirror"),Vd),ux=(tp={},(0,en.Z)(tp,De.NONE,"none"),(0,en.Z)(tp,De.BROWSER_DEFAULT_WEBGL,"browser"),tp),lx=(Dc={},(0,en.Z)(Dc,De.NEVER,"never"),(0,en.Z)(Dc,De.ALWAYS,"always"),(0,en.Z)(Dc,De.LESS,"less"),(0,en.Z)(Dc,De.LEQUAL,"lequal"),(0,en.Z)(Dc,De.GREATER,"greater"),(0,en.Z)(Dc,De.GEQUAL,"gequal"),(0,en.Z)(Dc,De.EQUAL,"equal"),(0,en.Z)(Dc,De.NOTEQUAL,"notequal"),Dc),ma=(Ba={},(0,en.Z)(Ba,De.FUNC_ADD,"add"),(0,en.Z)(Ba,De.MIN_EXT,"min"),(0,en.Z)(Ba,De.MAX_EXT,"max"),(0,en.Z)(Ba,De.FUNC_SUBTRACT,"subtract"),(0,en.Z)(Ba,De.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ba),Ga=(Ds={},(0,en.Z)(Ds,De.ZERO,"zero"),(0,en.Z)(Ds,De.ONE,"one"),(0,en.Z)(Ds,De.SRC_COLOR,"src color"),(0,en.Z)(Ds,De.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,en.Z)(Ds,De.SRC_ALPHA,"src alpha"),(0,en.Z)(Ds,De.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,en.Z)(Ds,De.DST_COLOR,"dst color"),(0,en.Z)(Ds,De.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,en.Z)(Ds,De.DST_ALPHA,"dst alpha"),(0,en.Z)(Ds,De.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,en.Z)(Ds,De.CONSTANT_COLOR,"constant color"),(0,en.Z)(Ds,De.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,en.Z)(Ds,De.CONSTANT_ALPHA,"constant alpha"),(0,en.Z)(Ds,De.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,en.Z)(Ds,De.SRC_ALPHA_SATURATE,"src alpha saturate"),Ds),Zb=(gc={},(0,en.Z)(gc,De.NEVER,"never"),(0,en.Z)(gc,De.ALWAYS,"always"),(0,en.Z)(gc,De.LESS,"less"),(0,en.Z)(gc,De.LEQUAL,"lequal"),(0,en.Z)(gc,De.GREATER,"greater"),(0,en.Z)(gc,De.GEQUAL,"gequal"),(0,en.Z)(gc,De.EQUAL,"equal"),(0,en.Z)(gc,De.NOTEQUAL,"notequal"),gc),$s=(Eu={},(0,en.Z)(Eu,De.ZERO,"zero"),(0,en.Z)(Eu,De.KEEP,"keep"),(0,en.Z)(Eu,De.REPLACE,"replace"),(0,en.Z)(Eu,De.INVERT,"invert"),(0,en.Z)(Eu,De.INCR,"increment"),(0,en.Z)(Eu,De.DECR,"decrement"),(0,en.Z)(Eu,De.INCR_WRAP,"increment wrap"),(0,en.Z)(Eu,De.DECR_WRAP,"decrement wrap"),Eu),$b=(ep={},(0,en.Z)(ep,De.FRONT,"front"),(0,en.Z)(ep,De.BACK,"back"),ep),Jo=function(){function n(i,o){(0,dc.Z)(this,n),this.buffer=void 0;var s=o.data,c=o.usage,l=o.type;this.buffer=i.buffer({data:s,usage:jb[c||De.STATIC_DRAW],type:b0[l||De.UNSIGNED_BYTE]})}return(0,qo.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(o){var s=o.data,c=o.offset;this.buffer.subdata(s,c)}}]),n}(),Hb=O(52529);function np(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),o.push.apply(o,s)}return o}function E0(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?np(Object(o),!0).forEach(function(s){(0,en.Z)(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):np(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var Zd=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,w0=0,rp=!1,Tv=function(){function n(i,o){var s=this;(0,dc.Z)(this,n),this.reGl=i,this.context=o,this.entity=Sv(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var c={};this.context.uniforms.forEach(function(y){var x=y.name,E=y.type,_=y.data,T=y.isReferer,M=y.storageClass;if(M===Ah.StorageBuffer){if(T)s.textureCache[x]={data:void 0},c["".concat(x,"Size")]=function(){return _.compiledBundle.context.output.textureSize};else{s.textureCache[x]=s.calcDataTexture(x,E,_);var R=s.textureCache[x],D=R.textureWidth,k=R.isOutput;c["".concat(x,"Size")]=[D,D],k&&(s.outputTextureName=x,s.context.needPingpong&&(s.outputTextureName="".concat(x,"Output"),s.textureCache[s.outputTextureName]=s.calcDataTexture(x,E,_)))}c[x]=function(){return rp&&console.log("[".concat(s.entity,"]: ").concat(x," ").concat(s.textureCache[x].id)),s.textureCache[x].texture}}else if(M===Ah.Uniform){if(_&&(Array.isArray(_)||Kg()(_))&&_.length>16)throw new Error("invalid data type ".concat(E));c[x]=function(){return y.data}}});var l=this.getOuputDataTexture(),d=l.textureWidth,p=l.texelCount;c.u_OutputTextureSize=[d,d],c.u_OutputTexelCount=p,this.context.output.textureSize=[d,d];var v={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:c,vert:Zd,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(v)}return(0,qo.Z)(n,[{key:"run",value:function(){var o=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){o.computeCommand()}),rp&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var i=(0,vl.Z)(Rs().mark(function s(){var c=this,l,d,p,v,y,x,E,_;return Rs().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){l=c.reGl.read()}),!l){M.next=6;break}if(d=this.getOuputDataTexture(),p=d.originalDataLength,v=d.elementsPerTexel,y=d.typedArrayConstructor,x=y===void 0?Float32Array:y,E=[],v!==4)for(_=0;_<l.length;_+=4)v===1?E.push(l[_]):v===2?E.push(l[_],l[_+1]):E.push(l[_],l[_+1],l[_+2]);else E=l;return M.abrupt("return",new x(E.slice(0,p)));case 6:return M.abrupt("return",new Float32Array);case 7:case"end":return M.stop()}},s,this)}));function o(){return i.apply(this,arguments)}return o}()},{key:"confirmInput",value:function(o,s){var c;this.entity===o.entity?(this.dynamicPingpong=!0,c=this):c=o,this.textureCache[s].id=c.getOuputDataTexture().id,this.textureCache[s].texture=c.getOuputDataTexture().texture,rp&&console.log("[".concat(this.entity,"]: confirm input ").concat(s," from model ").concat(c.entity,", ").concat(c.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(o,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=this.context.uniforms.find(function(y){var x=y.name;return x===o});if(l){var d=this.calcDataTexture(o,l.type,s),p=d.texture,v=d.data;this.textureCache[o].data=v,this.textureCache[o].texture=p}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var o=this.context.output.name;this.textureCache[o].id=this.getOuputDataTexture().id,this.textureCache[o].texture=this.getOuputDataTexture().texture}var s=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=s,rp&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var o=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=o}},{key:"cloneDataTexture",value:function(o){var s=o.data,c=o.textureWidth;return E0(E0({},o),{},{id:w0++,texture:this.reGl.texture({width:c,height:c,data:s,type:"float"})})}},{key:"calcDataTexture",value:function(o,s,c){var l=1;s===zd.Vector4FloatArray&&(l=4);for(var d=[],p=0;p<c.length;p+=l)l===1?d.push(c[p],0,0,0):l===2?d.push(c[p],c[p+1],0,0):l===3?d.push(c[p],c[p+1],c[p+2],0):l===4&&d.push(c[p],c[p+1],c[p+2],c[p+3]);var v=c.length,y=Math.ceil(v/l),x=Math.ceil(Math.sqrt(y)),E=x*x;y<E&&d.push.apply(d,(0,Hb.Z)(new Array((E-y)*4).fill(0)));var _=this.reGl.texture({width:x,height:x,data:d,type:"float"});return{id:w0++,data:d,originalDataLength:v,typedArrayConstructor:Kg()(c)?c.constructor:void 0,textureWidth:x,texture:_,texelCount:y,elementsPerTexel:l,isOutput:o===this.context.output.name}}}]),n}(),S0=function(){function n(i,o){(0,dc.Z)(this,n),this.elements=void 0;var s=o.data,c=o.usage,l=o.type,d=o.count;this.elements=i.elements({data:s,usage:jb[c||De.STATIC_DRAW],type:b0[l||De.UNSIGNED_BYTE],count:d})}return(0,qo.Z)(n,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(o){var s=o.data;this.elements.subdata(s)}},{key:"destroy",value:function(){this.elements.destroy()}}]),n}(),Wb=function(){function n(i,o){(0,dc.Z)(this,n),this.framebuffer=void 0;var s=o.width,c=o.height,l=o.color,d=o.colors,p=o.depth,v=o.stencil,y={width:s,height:c};Array.isArray(d)&&(y.colors=d.map(function(x){return x.get()})),l&&typeof l!="boolean"&&(y.color=l.get()),this.framebuffer=i.framebuffer(y)}return(0,qo.Z)(n,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(o){var s=o.width,c=o.height;this.framebuffer.resize(s,c)}}]),n}(),Av=O(96268),Xb=O(69143),_0=O.n(Xb);function Ov(n){var i={};return Object.keys(n).forEach(function(o){$d(o,n[o],i,"")}),i}function $d(n,i,o,s){if(i===null||typeof i=="number"||typeof i=="boolean"||Array.isArray(i)&&typeof i[0]=="number"||Kg()(i)||i===""||i.resize!==void 0){o["".concat(s&&s+".").concat(n)]=i;return}_0()(i)&&Object.keys(i).forEach(function(c){$d(c,i[c],o,"".concat(s&&s+".").concat(n))}),Array.isArray(i)&&i.forEach(function(c,l){Object.keys(c).forEach(function(d){$d(d,c[d],o,"".concat(s&&s+".").concat(n,"[").concat(l,"]"))})})}function C0(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),o.push.apply(o,s)}return o}function Ef(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?C0(Object(o),!0).forEach(function(s){(0,en.Z)(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):C0(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var Yb=function(){function n(i,o){(0,dc.Z)(this,n),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=i;var s=o.vs,c=o.fs,l=o.defines,d=o.attributes,p=o.uniforms,v=o.primitive,y=o.count,x=o.elements,E=o.depth,_=o.blend,T=o.stencil,M=o.cull,R=o.instances,D=o.scissor,k=o.viewport,L={};p&&(this.uniforms=Ov(p),Object.keys(p).forEach(function(zt){L[zt]=i.prop(zt)}));var U={};Object.keys(d).forEach(function(zt){U[zt]=d[zt].get()});var W=l&&this.generateDefines(l)||"",J={attributes:U,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(W,`
`).concat(c),uniforms:L,vert:`
`.concat(W,`
`).concat(s),primitive:Ih[v===void 0?De.TRIANGLES:v]};R&&(J.instances=R),y&&(J.count=y),x&&(J.elements=x.get()),D&&(J.scissor=D),k&&(J.viewport=k),this.initDepthDrawParams({depth:E},J),this.initBlendDrawParams({blend:_},J),this.initStencilDrawParams({stencil:T},J),this.initCullDrawParams({cull:M},J),this.drawCommand=i(J)}return(0,qo.Z)(n,[{key:"addUniforms",value:function(o){this.uniforms=Ef(Ef({},this.uniforms),Ov(o))}},{key:"draw",value:function(o){var s=Ef(Ef({},this.uniforms),Ov(o.uniforms||{})),c={};Object.keys(s).forEach(function(l){var d=(0,Av.Z)(s[l]);d==="boolean"||d==="number"||Array.isArray(s[l])||s[l].BYTES_PER_ELEMENT?c[l]=s[l]:d==="string"||(c[l]=s[l].get())}),this.drawCommand(c)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(o,s){var c=o.depth;c&&(s.depth={enable:c.enable===void 0?!0:!!c.enable,mask:c.mask===void 0?!0:!!c.mask,func:lx[c.func||De.LESS],range:c.range||[0,1]})}},{key:"initBlendDrawParams",value:function(o,s){var c=o.blend;if(c){var l=c.enable,d=c.func,p=c.equation,v=c.color,y=v===void 0?[0,0,0,0]:v;s.blend={enable:!!l,func:{srcRGB:Ga[d&&d.srcRGB||De.SRC_ALPHA],srcAlpha:Ga[d&&d.srcAlpha||De.SRC_ALPHA],dstRGB:Ga[d&&d.dstRGB||De.ONE_MINUS_SRC_ALPHA],dstAlpha:Ga[d&&d.dstAlpha||De.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ma[p&&p.rgb||De.FUNC_ADD],alpha:ma[p&&p.alpha||De.FUNC_ADD]},color:y}}}},{key:"initStencilDrawParams",value:function(o,s){var c=o.stencil;if(c){var l=c.enable,d=c.mask,p=d===void 0?-1:d,v=c.func,y=v===void 0?{cmp:De.ALWAYS,ref:0,mask:-1}:v,x=c.opFront,E=x===void 0?{fail:De.KEEP,zfail:De.KEEP,zpass:De.KEEP}:x,_=c.opBack,T=_===void 0?{fail:De.KEEP,zfail:De.KEEP,zpass:De.KEEP}:_;s.stencil={enable:!!l,mask:p,func:Ef(Ef({},y),{},{cmp:Zb[y.cmp]}),opFront:{fail:$s[E.fail],zfail:$s[E.zfail],zpass:$s[E.zpass]},opBack:{fail:$s[T.fail],zfail:$s[T.zfail],zpass:$s[T.zpass]}}}}},{key:"initCullDrawParams",value:function(o,s){var c=o.cull;if(c){var l=c.enable,d=c.face,p=d===void 0?De.BACK:d;s.cull={enable:!!l,face:$b[p]}}}},{key:"generateDefines",value:function(o){return Object.keys(o).map(function(s){return"#define ".concat(s," ").concat(Number(o[s]))}).join(`
`)}}]),n}(),wu=function(){function n(i,o){(0,dc.Z)(this,n),this.texture=void 0,this.width=void 0,this.height=void 0;var s=o.data,c=o.type,l=c===void 0?De.UNSIGNED_BYTE:c,d=o.width,p=o.height,v=o.flipY,y=v===void 0?!1:v,x=o.format,E=x===void 0?De.RGBA:x,_=o.mipmap,T=_===void 0?!1:_,M=o.wrapS,R=M===void 0?De.CLAMP_TO_EDGE:M,D=o.wrapT,k=D===void 0?De.CLAMP_TO_EDGE:D,L=o.aniso,U=L===void 0?0:L,W=o.alignment,J=W===void 0?1:W,zt=o.premultiplyAlpha,Ae=zt===void 0?!1:zt,qt=o.mag,le=qt===void 0?De.NEAREST:qt,ce=o.min,Ne=ce===void 0?De.NEAREST:ce,Et=o.colorSpace,Le=Et===void 0?De.BROWSER_DEFAULT_WEBGL:Et;this.width=d,this.height=p;var nn={width:d,height:p,type:b0[l],format:Ub[E],wrapS:Vb[R],wrapT:Vb[k],mag:x0[le],min:x0[Ne],alignment:J,flipY:y,colorSpace:ux[Le],premultiplyAlpha:Ae,aniso:U};s&&(nn.data=s),typeof T=="number"?nn.mipmap=cx[T]:typeof T=="boolean"&&(nn.mipmap=T),this.texture=i.texture(nn)}return(0,qo.Z)(n,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(o){var s=o.width,c=o.height;this.texture.resize(s,c),this.width=s,this.height=c}},{key:"destroy",value:function(){this.texture.destroy()}}]),n}(),Kb=function(){function n(){var i=this;(0,dc.Z)(this,n),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var o=(0,vl.Z)(Rs().mark(function s(c){return Rs().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!c.uniforms){d.next=3;break}return d.next=3,Promise.all(Object.keys(c.uniforms).map(function(){var p=(0,vl.Z)(Rs().mark(function v(y){var x;return Rs().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(c.uniforms[y]&&c.uniforms[y].load!==void 0)){_.next=5;break}return _.next=3,c.uniforms[y].load();case 3:x=_.sent,c.uniforms[y]=x;case 5:case"end":return _.stop()}},v)}));return function(v){return p.apply(this,arguments)}}()));case 3:return d.abrupt("return",new Yb(i.gl,c));case 4:case"end":return d.stop()}},s)}));return function(s){return o.apply(this,arguments)}}(),this.createAttribute=function(o){return new po(i.gl,o)},this.createBuffer=function(o){return new Jo(i.gl,o)},this.createElements=function(o){return new S0(i.gl,o)},this.createTexture2D=function(o){return new wu(i.gl,o)},this.createFramebuffer=function(o){return new Wb(i.gl,o)},this.useFramebuffer=function(o,s){i.gl({framebuffer:o?o.get():null})(s)},this.createComputeModel=function(){var o=(0,vl.Z)(Rs().mark(function s(c){return Rs().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Tv(i.gl,c));case 1:case"end":return d.stop()}},s)}));return function(s){return o.apply(this,arguments)}}(),this.clear=function(o){var s=o.color,c=o.depth,l=o.stencil,d=o.framebuffer,p=d===void 0?null:d,v={color:s,depth:c,stencil:l};v.framebuffer=p===null?p:p.get(),i.gl.clear(v)},this.setScissor=function(o){i.gl&&i.gl._gl&&(o.enable&&o.box?(i.gl._gl.enable(De.SCISSOR_TEST),i.gl._gl.scissor(o.box.x,o.box.y,o.box.width,o.box.height)):i.gl._gl.disable(De.SCISSOR_TEST),i.gl._refresh())},this.viewport=function(o){var s=o.x,c=o.y,l=o.width,d=o.height;i.gl&&i.gl._gl&&(i.gl._gl.viewport(s,c,l,d),i.gl._refresh())},this.readPixels=function(o){var s=o.framebuffer,c=o.x,l=o.y,d=o.width,p=o.height,v={x:c,y:l,width:d,height:p};return s&&(v.framebuffer=s.get()),i.gl.read(v)},this.getCanvas=function(){return i.$canvas},this.getGLContext=function(){return i.gl._gl},this.destroy=function(){i.gl&&(i.gl.destroy(),i.inited=!1)}}return(0,qo.Z)(n,[{key:"init",value:function(){var i=(0,vl.Z)(Rs().mark(function s(c){return Rs().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!this.inited){d.next=2;break}return d.abrupt("return");case 2:return this.$canvas=c.canvas,d.next=5,new Promise(function(p,v){Qg()({canvas:c.canvas,attributes:{alpha:!0,antialias:c.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(x,E){(x||!E)&&v(x),p(E)}})});case 5:this.gl=d.sent,this.inited=!0;case 7:case"end":return d.stop()}},s,this)}));function o(s){return i.apply(this,arguments)}return o}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),n}(),vo=function(){function n(){(0,dc.Z)(this,n),this.engine=void 0,this.configService=new Gd}return(0,qo.Z)(n,[{key:"setConfig",value:function(o){this.configService.set(o)}},{key:"setEngine",value:function(o){this.engine=o}},{key:"createEntity",value:function(){return Sv()}},{key:"createKernel",value:function(o){var s=new Mh(this.engine,this.configService);return typeof o=="string"?s.setBundle(JSON.parse(o)):s.setBundle(o),s.init(),s}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=new n;return s.setConfig(o),s.setEngine(new Kb),s}}]),n}();const Ph=(n,i)=>{let o;return n?K(n)?o=()=>n:o=n:o=()=>i||1,o},Mv=(n,i)=>{const o=[],s=[],c={};let l=0;for(l=0;l<n.length;l++){const p=n[l];c[p.id]=l,o.push(p.x),o.push(p.y),o.push(0),o.push(0),s.push([])}for(l=0;l<i.length;l++){const p=i[l],v=ht(p,"source"),y=ht(p,"target");!isNaN(c[v])&&!isNaN(c[y])&&(s[c[v]].push(c[y]),s[c[y]].push(c[v]))}let d=0;for(l=0;l<n.length;l++){const p=o.length,v=s[l],y=v.length;o[l*4+2]=p,o[l*4+3]=y,d=Math.max(d,y);for(let x=0;x<y;++x){const E=v[x];o.push(+E)}}for(;o.length%4!==0;)o.push(0);return{maxEdgePerVetex:d,array:new Float32Array(o)}},T0=(n,i,o,s)=>{const c=[],l=[],d={};let p=0;for(p=0;p<n.length;p++){const y=n[p];d[y.id]=p,c.push(y.x),c.push(y.y),c.push(0),c.push(0),l.push([])}for(p=0;p<i.length;p++){const y=i[p],x=ht(y,"source"),E=ht(y,"target");l[d[x]].push(d[E]),l[d[x]].push(o(y)),l[d[x]].push(s(y)),l[d[x]].push(0),l[d[E]].push(d[x]),l[d[E]].push(o(y)),l[d[E]].push(s(y)),l[d[E]].push(0)}let v=0;for(p=0;p<n.length;p++){const y=c.length,x=l[p],E=x.length;c[p*4+2]=y+1048576*E/4,c[p*4+3]=0,v=Math.max(v,E/4);for(let _=0;_<E;++_){const T=x[_];c.push(+T)}}for(;c.length%4!==0;)c.push(0);return{maxEdgePerVetex:v,array:new Float32Array(c)}},A0=(n,i)=>{const o=[],s=n.length,c={};return i.forEach(l=>{n.forEach((d,p)=>{if(c[l[d]]===void 0&&(c[l[d]]=Object.keys(c).length),o.push(c[l[d]]),p===s-1)for(;o.length%4!==0;)o.push(0)})}),{array:new Float32Array(o),count:Object.keys(c).length}},Iv=n=>{const i=[],o=n.length,s=n[0].length;for(let c=0;c<s;c++)n.forEach((l,d)=>{if(i.push(l[c]),d===o-1)for(;i.length%4!==0;)i.push(0)});return new Float32Array(i)},fx=null,ip='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',hx=null,O0='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var op=function(n,i,o,s){function c(l){return l instanceof o?l:new o(function(d){d(l)})}return new(o||(o=Promise))(function(l,d){function p(x){try{y(s.next(x))}catch(E){d(E)}}function v(x){try{y(s.throw(x))}catch(E){d(E)}}function y(x){x.done?l(x.value):c(x.value).then(p,v)}y((s=s.apply(n,i||[])).next())})};class Hs extends vt{constructor(i){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(i)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return op(this,void 0,void 0,function*(){const i=this,o=i.nodes;if(!o||o.length===0){i.onLayoutEnd&&i.onLayoutEnd();return}!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);const s=i.center;if(o.length===1){o[0].x=s[0],o[0].y=s[1],i.onLayoutEnd&&i.onLayoutEnd();return}const c={},l={};o.forEach((d,p)=>{K(d.x)||(d.x=Math.random()*this.width),K(d.y)||(d.y=Math.random()*this.height),c[d.id]=d,l[d.id]=p}),i.nodeMap=c,i.nodeIdxMap=l,yield i.run()})}executeWithWorker(i,o){return op(this,void 0,void 0,function*(){const s=this,c=s.nodes,l=s.center;if(!c||c.length===0)return;if(c.length===1){c[0].x=l[0],c[0].y=l[1];return}const d={},p={};c.forEach((v,y)=>{K(v.x)||(v.x=Math.random()*this.width),K(v.y)||(v.y=Math.random()*this.height),d[v.id]=v,p[v.id]=y}),s.nodeMap=d,s.nodeIdxMap=p,yield s.run(i,o)})}run(i,o){return op(this,void 0,void 0,function*(){const s=this,c=s.nodes,l=s.edges,d=s.maxIteration,p=s.center,v=s.height*s.width;let y=Math.sqrt(v)/10;const x=v/(c.length+1),E=Math.sqrt(x),_=s.speed,T=s.clustering,{array:M,count:R}=A0([s.clusterField],c);c.forEach((ce,Ne)=>{let Et=0,Le=0;K(ce.fx)&&K(ce.fy)&&(Et=ce.fx||.001,Le=ce.fy||.001),M[4*Ne+1]=Et,M[4*Ne+2]=Le});const D=c.length,{maxEdgePerVetex:k,array:L}=Mv(c,l),U=s.workerEnabled;let W;U?W=vo.create({canvas:i,engineOptions:{supportCompute:!0}}):W=vo.create({engineOptions:{supportCompute:!0}});const J=s.onLayoutEnd,zt=[];for(let ce=0;ce<R;ce++)zt.push(0,0,0,0);const Ae=W.createKernel(ip).setDispatch([D,1,1]).setBinding({u_Data:L,u_K:E,u_K2:x,u_Gravity:s.gravity,u_ClusterGravity:s.clusterGravity||s.gravity||1,u_Speed:_,u_MaxDisplace:y,u_Clustering:T?1:0,u_Center:p,u_AttributeArray:M,u_ClusterCenters:zt,MAX_EDGE_PER_VERTEX:k,VERTEX_COUNT:D});let qt;T&&(qt=W.createKernel(O0).setDispatch([R,1,1]).setBinding({u_Data:L,u_NodeAttributes:M,u_ClusterCenters:zt,VERTEX_COUNT:D,CLUSTER_COUNT:R})),yield(()=>op(this,void 0,void 0,function*(){for(let Ne=0;Ne<d;Ne++)yield Ae.execute(),T&&(qt.setBinding({u_Data:Ae}),yield qt.execute(),Ae.setBinding({u_ClusterCenters:qt})),Ae.setBinding({u_MaxDisplace:y*=.99});const ce=yield Ae.getOutput();i?o.postMessage({type:Ke.GPUEND,vertexEdgeData:ce}):c.forEach((Ne,Et)=>{const Le=ce[4*Et],nn=ce[4*Et+1];Ne.x=Le,Ne.y=nn}),J&&J()}))()})}getType(){return"fruchterman-gpu"}}const dx=null,Nh='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',u=null,t='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var e=function(n,i,o,s){function c(l){return l instanceof o?l:new o(function(d){d(l)})}return new(o||(o=Promise))(function(l,d){function p(x){try{y(s.next(x))}catch(E){d(E)}}function v(x){try{y(s.throw(x))}catch(E){d(E)}}function y(x){x.done?l(x.value):c(x.value).then(p,v)}y((s=s.apply(n,i||[])).next())})};class r extends vt{constructor(i){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(i)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return e(this,void 0,void 0,function*(){const i=this,o=i.nodes;if(!o||o.length===0){i.onLayoutEnd&&i.onLayoutEnd();return}!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);const s=i.center;if(o.length===1){o[0].x=s[0],o[0].y=s[1],i.onLayoutEnd&&i.onLayoutEnd();return}const c={},l={};o.forEach((d,p)=>{K(d.x)||(d.x=Math.random()*i.width),K(d.y)||(d.y=Math.random()*i.height),c[d.id]=d,l[d.id]=p}),i.nodeMap=c,i.nodeIdxMap=l,i.nodeStrength=Ph(i.nodeStrength,1),i.edgeStrength=Ph(i.edgeStrength,1),yield i.run()})}executeWithWorker(i,o){const s=this,c=s.nodes,l=s.center;if(!c||c.length===0)return;if(c.length===1){c[0].x=l[0],c[0].y=l[1];return}const d={},p={};c.forEach((v,y)=>{K(v.x)||(v.x=Math.random()*s.width),K(v.y)||(v.y=Math.random()*s.height),d[v.id]=v,p[v.id]=y}),s.nodeMap=d,s.nodeIdxMap=p,s.nodeStrength=Ph(s.nodeStrength,1),s.edgeStrength=Ph(s.edgeStrength,1),s.run(i,o)}run(i,o){return e(this,void 0,void 0,function*(){const s=this,c=s.nodes,l=s.edges,d=s.maxIteration;!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight);const p=c.length;s.linkDistance=Ph(s.linkDistance),s.edgeStrength=Ph(s.edgeStrength);const{maxEdgePerVetex:v,array:y}=T0(c,l,s.linkDistance,s.edgeStrength);s.degrees=bt(c.length,s.nodeIdxMap,l).map(Et=>Et.all);const x=[],E=[],_=[],T=[],M=[],R=[],D=[];s.getMass||(s.getMass=Et=>s.degrees[s.nodeIdxMap[Et.id]]||1);const k=s.gravity,L=s.center;c.forEach((Et,Le)=>{x.push(s.getMass(Et)),E.push(s.nodeStrength(Et)),s.degrees[Le]||(s.degrees[Le]=0);let nn=[L[0],L[1],k];if(s.getCenter){const vn=s.getCenter(Et,s.degrees[Le]);vn&&K(vn[0])&&K(vn[1])&&K(vn[2])&&(nn=vn)}_.push(nn[0]),T.push(nn[1]),M.push(nn[2]),K(Et.fx)&&K(Et.fy)?(R.push(Et.fx||.001),D.push(Et.fy||.001)):(R.push(0),D.push(0))});const U=Iv([x,s.degrees,E,R]),W=Iv([_,T,M,D]),J=s.workerEnabled;let zt;J?zt=vo.create({canvas:i,engineOptions:{supportCompute:!0}}):zt=vo.create({engineOptions:{supportCompute:!0}});const Ae=s.onLayoutEnd,qt=[];y.forEach(Et=>{qt.push(Et)});for(let Et=0;Et<4;Et++)qt.push(0);const le=zt.createKernel(Nh).setDispatch([p,1,1]).setBinding({u_Data:y,u_damping:s.damping,u_maxSpeed:s.maxSpeed,u_minMovement:s.minMovement,u_coulombDisScale:s.coulombDisScale,u_factor:s.factor,u_NodeAttributeArray1:U,u_NodeAttributeArray2:W,MAX_EDGE_PER_VERTEX:v,VERTEX_COUNT:p,u_AveMovement:qt,u_interval:s.interval}),ce=zt.createKernel(t).setDispatch([1,1,1]).setBinding({u_Data:y,VERTEX_COUNT:p,u_AveMovement:[0,0,0,0]});yield(()=>e(this,void 0,void 0,function*(){for(let Le=0;Le<d;Le++){yield le.execute(),ce.setBinding({u_Data:le}),yield ce.execute();const nn=Math.max(.02,s.interval-Le*.002);le.setBinding({u_interval:nn,u_AveMovement:ce})}const Et=yield le.getOutput();i?o.postMessage({type:Ke.GPUEND,vertexEdgeData:Et}):c.forEach((Le,nn)=>{const vn=Et[4*nn],fr=Et[4*nn+1];Le.x=vn,Le.y=fr}),Ae&&Ae()}))()})}getType(){return"gForce-gpu"}}class a extends vt{constructor(i){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(i)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const i=this,o=i.nodes,s=i.center;if(i.comboTree={id:"comboTreeRoot",depth:-1,children:i.comboTrees},!o||o.length===0){i.onLayoutEnd&&i.onLayoutEnd();return}if(o.length===1){o[0].x=s[0],o[0].y=s[1],i.onLayoutEnd&&i.onLayoutEnd();return}i.initVals(),i.run(),i.onLayoutEnd&&i.onLayoutEnd()}run(){const i=this,o=i.nodes,s=i.previousLayouted?i.maxIteration/5:i.maxIteration;!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight);const c=i.center,l=i.velocityDecay,d=i.comboMap;i.previousLayouted||i.initPos(d);for(let y=0;y<s;y++){const x=[];o.forEach((E,_)=>{x[_]={x:0,y:0}}),i.applyCalculate(x),i.applyComboCenterForce(x),o.forEach((E,_)=>{!K(E.x)||!K(E.y)||(E.x+=x[_].x*l,E.y+=x[_].y*l)}),i.alpha+=(i.alphaTarget-i.alpha)*i.alphaDecay,i.onTick()}const p=[0,0];o.forEach(y=>{!K(y.x)||!K(y.y)||(p[0]+=y.x,p[1]+=y.y)}),p[0]/=o.length,p[1]/=o.length;const v=[c[0]-p[0],c[1]-p[1]];o.forEach((y,x)=>{!K(y.x)||!K(y.y)||(y.x+=v[0],y.y+=v[1])}),i.combos.forEach(y=>{const x=d[y.id];x&&x.empty&&(y.x=x.cx||y.x,y.y=x.cy||y.y)}),i.previousLayouted=!0}initVals(){const i=this,o=i.edges,s=i.nodes,c=i.combos,l={},d={},p={};s.forEach((ce,Ne)=>{d[ce.id]=ce,p[ce.id]=Ne}),i.nodeMap=d,i.indexMap=p;const v={};c.forEach(ce=>{v[ce.id]=ce}),i.oriComboMap=v,i.comboMap=i.getComboMap();const y=i.preventOverlap;i.preventComboOverlap=i.preventComboOverlap||y,i.preventNodeOverlap=i.preventNodeOverlap||y;const x=i.collideStrength;x&&(i.comboCollideStrength=x,i.nodeCollideStrength=x),i.comboCollideStrength=i.comboCollideStrength?i.comboCollideStrength:0,i.nodeCollideStrength=i.nodeCollideStrength?i.nodeCollideStrength:0;for(let ce=0;ce<o.length;++ce){const Ne=ht(o[ce],"source"),Et=ht(o[ce],"target");l[Ne]?l[Ne]++:l[Ne]=1,l[Et]?l[Et]++:l[Et]=1}const E=[];for(let ce=0;ce<o.length;++ce){const Ne=ht(o[ce],"source"),Et=ht(o[ce],"target");E[ce]=l[Ne]/(l[Ne]+l[Et])}this.bias=E;const _=i.nodeSize,T=i.nodeSpacing;let M,R;if(K(T)?R=()=>T:Hn(T)?R=T:R=()=>0,this.nodeSpacing=R,!_)M=ce=>ce.size?Zt(ce.size)?(ce.size[0]>ce.size[1]?ce.size[0]:ce.size[1])/2:gt(ce.size)?(ce.size.width>ce.size.height?ce.size.width:ce.size.height)/2:ce.size/2:10;else if(Hn(_))M=ce=>_(ce);else if(Zt(_)){const Ne=(_[0]>_[1]?_[0]:_[1])/2;M=Et=>Ne}else{const ce=_/2;M=Ne=>ce}this.nodeSize=M;const D=i.comboSpacing;let k;K(D)?k=()=>D:Hn(D)?k=D:k=()=>0,this.comboSpacing=k;const L=i.comboPadding;let U;K(L)?U=()=>L:Zt(L)?U=()=>Math.max.apply(null,L):Hn(L)?U=L:U=()=>0,this.comboPadding=U;let W=this.linkDistance,J;W||(W=10),K(W)?J=ce=>W:J=W,this.linkDistance=J;let zt=this.edgeStrength,Ae;zt||(zt=1),K(zt)?Ae=ce=>zt:Ae=zt,this.edgeStrength=Ae;let qt=this.nodeStrength,le;qt||(qt=30),K(qt)?le=ce=>qt:le=qt,this.nodeStrength=le}initPos(i){this.nodes.forEach((c,l)=>{const d=c.comboId,p=i[d];d&&p?(c.x=p.cx+100/(l+1),c.y=p.cy+100/(l+1)):(c.x=100/(l+1),c.y=100/(l+1))})}getComboMap(){const i=this,o=i.nodeMap,s=i.comboTrees,c=i.oriComboMap,l={};return(s||[]).forEach(d=>{const p=[];ue(d,v=>{if(v.itemType==="node"||!c[v.id])return!0;if(l[v.id]===void 0){const E={id:v.id,name:v.id,cx:0,cy:0,count:0,depth:i.oriComboMap[v.id].depth||0,children:[]};l[v.id]=E}const y=v.children;y&&y.forEach(E=>{if(!l[E.id]&&!o[E.id])return!0;p.push(E)});const x=l[v.id];if(x.cx=0,x.cy=0,p.length===0){x.empty=!0;const E=c[v.id];x.cx=E.x,x.cy=E.y}return p.forEach(E=>{if(x.count++,E.itemType!=="node"){const T=l[E.id];K(T.cx)&&(x.cx+=T.cx),K(T.cy)&&(x.cy+=T.cy);return}const _=o[E.id];_&&(K(_.x)&&(x.cx+=_.x),K(_.y)&&(x.cy+=_.y))}),x.cx/=x.count||1,x.cy/=x.count||1,x.children=p,!0})}),l}applyComboCenterForce(i){const o=this,s=o.gravity,c=o.comboGravity||s,l=this.alpha,d=o.comboTrees,p=o.indexMap,v=o.nodeMap,y=o.comboMap;(d||[]).forEach(x=>{ue(x,E=>{if(E.itemType==="node"||!y[E.id])return!0;const T=y[E.id],M=(T.depth+1)/10*.5,R=T.cx,D=T.cy;return T.cx=0,T.cy=0,T.children.forEach(k=>{if(k.itemType!=="node"){const qt=y[k.id];qt&&K(qt.cx)&&(T.cx+=qt.cx),qt&&K(qt.cy)&&(T.cy+=qt.cy);return}const L=v[k.id],U=L.x-R||.005,W=L.y-D||.005,J=Math.sqrt(U*U+W*W),zt=p[L.id],Ae=c*l/J*M;i[zt].x-=U*Ae,i[zt].y-=W*Ae,K(L.x)&&(T.cx+=L.x),K(L.y)&&(T.cy+=L.y)}),T.cx/=T.count||1,T.cy/=T.count||1,!0})})}applyCalculate(i){const o=this,s=o.comboMap,c=o.nodes,l={};c.forEach((p,v)=>{c.forEach((y,x)=>{if(v<x)return;const E=p.x-y.x||.005,_=p.y-y.y||.005;let T=E*E+_*_;const M=Math.sqrt(T);T<1&&(T=M),l[`${p.id}-${y.id}`]={vx:E,vy:_,vl2:T,vl:M},l[`${y.id}-${p.id}`]={vl2:T,vl:M,vx:-E,vy:-_}})}),o.updateComboSizes(s),o.calRepulsive(i,l),o.calAttractive(i,l),o.preventComboOverlap&&o.comboNonOverlapping(i,s)}updateComboSizes(i){const o=this,s=o.comboTrees,c=o.nodeMap,l=o.nodeSize,d=o.comboSpacing,p=o.comboPadding;(s||[]).forEach(v=>{const y=[];ue(v,x=>{if(x.itemType==="node")return!0;const E=i[x.id];if(!E)return!1;const _=x.children;_&&_.forEach(R=>{!i[R.id]&&!c[R.id]||y.push(R)}),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0,y.forEach(R=>{if(R.itemType!=="node")return!0;const D=c[R.id];if(!D)return!0;const k=l(D),L=D.x-k,U=D.y-k,W=D.x+k,J=D.y+k;E.minX>L&&(E.minX=L),E.minY>U&&(E.minY=U),E.maxX<W&&(E.maxX=W),E.maxY<J&&(E.maxY=J)});let T=o.oriComboMap[x.id].size||10;Zt(T)&&(T=T[0]);const M=Math.max(E.maxX-E.minX,E.maxY-E.minY,T);return E.r=M/2+d(E)/2+p(E),!0})})}comboNonOverlapping(i,o){const s=this,c=s.comboTree,l=s.comboCollideStrength,d=s.indexMap,p=s.nodeMap;ue(c,v=>{if(!o[v.id]&&!p[v.id]&&v.id!=="comboTreeRoot")return!1;const y=v.children;return y&&y.length>1&&y.forEach((x,E)=>{if(x.itemType==="node")return!1;const _=o[x.id];_&&y.forEach((T,M)=>{if(E<=M||T.itemType==="node")return!1;const R=o[T.id];if(!R)return!1;const D=_.cx-R.cx||.005,k=_.cy-R.cy||.005,L=D*D+k*k,U=_.r||1,W=R.r||1,J=U+W,zt=W*W,Ae=U*U;if(L<J*J){const qt=x.children;if(!qt||qt.length===0)return!1;const le=T.children;if(!le||le.length===0)return!1;const ce=Math.sqrt(L),Ne=(J-ce)/ce*l,Et=D*Ne,Le=k*Ne,nn=zt/(Ae+zt),vn=1-nn;qt.forEach(fr=>{if(fr.itemType!=="node")return!1;if(!p[fr.id])return;const Dn=d[fr.id];le.forEach(vr=>{if(vr.itemType!=="node"||!p[vr.id])return!1;const nr=d[vr.id];i[Dn].x+=Et*nn,i[Dn].y+=Le*nn,i[nr].x-=Et*vn,i[nr].y-=Le*vn})})}})}),!0})}calRepulsive(i,o){const s=this,c=s.nodes,l=s.width*s.optimizeRangeFactor,d=s.nodeStrength,p=s.alpha,v=s.nodeCollideStrength,y=s.preventNodeOverlap,x=s.nodeSize,E=s.nodeSpacing,_=s.depthRepulsiveForceScale,T=s.center;c.forEach((M,R)=>{if(!(!M.x||!M.y)){if(T){const D=s.gravity,k=M.x-T[0]||.005,L=M.y-T[1]||.005,U=Math.sqrt(k*k+L*L);i[R].x-=k*D*p/U,i[R].y-=L*D*p/U}c.forEach((D,k)=>{if(R===k||!D.x||!D.y)return;const{vl2:L,vl:U}=o[`${M.id}-${D.id}`];if(U>l)return;const{vx:W,vy:J}=o[`${M.id}-${D.id}`];let zt=Math.log(Math.abs(D.depth-M.depth)/10)+1||1;zt=zt<1?1:zt,D.comboId!==M.comboId&&(zt+=1);const Ae=zt?Math.pow(_,zt):1,qt=d(D)*p/L*Ae;if(i[R].x+=W*qt,i[R].y+=J*qt,R<k&&y){const le=x(M)+E(M)||1,ce=x(D)+E(D)||1,Ne=le+ce;if(L<Ne*Ne){const Et=(Ne-U)/U*v,Le=ce*ce;let nn=Le/(le*le+Le);const vn=W*Et,fr=J*Et;i[R].x+=vn*nn,i[R].y+=fr*nn,nn=1-nn,i[k].x-=vn*nn,i[k].y-=fr*nn}}})}})}calAttractive(i,o){const s=this,c=s.edges,l=s.linkDistance,d=s.alpha,p=s.edgeStrength,v=s.bias,y=s.depthAttractiveForceScale;c.forEach((x,E)=>{const _=ht(x,"source"),T=ht(x,"target");if(!_||!T||_===T)return;const M=s.indexMap[_],R=s.indexMap[T],D=s.nodeMap[_],k=s.nodeMap[T];if(!D||!k)return;let L=D.depth===k.depth?0:Math.log(Math.abs(D.depth-k.depth)/10);D.comboId===k.comboId&&(L=L/2);let U=L?Math.pow(y,L):1;if(D.comboId!==k.comboId&&U===1?U=y/2:D.comboId===k.comboId&&(U=2),!K(k.x)||!K(D.x)||!K(k.y)||!K(D.y))return;const{vl:W,vx:J,vy:zt}=o[`${T}-${_}`],Ae=(W-l(x))/W*d*p(x)*U,qt=J*Ae,le=zt*Ae,ce=v[E];i[R].x-=qt*ce,i[R].y-=le*ce,i[M].x+=qt*(1-ce),i[M].y+=le*(1-ce)})}getType(){return"comboForce"}}class f extends vt{constructor(i){super(),this.center=[0,0],this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.comboPadding=10,this.comboTrees=[],this.updateCfg(i)}getDefaultCfg(){return{}}execute(){const i=this,o=i.nodes,s=i.center;if(!o||o.length===0){i.onLayoutEnd&&i.onLayoutEnd();return}if(o.length===1){o[0].x=s[0],o[0].y=s[1],i.onLayoutEnd&&i.onLayoutEnd();return}i.initVals(),i.run(),i.onLayoutEnd&&i.onLayoutEnd()}run(){var i;const o=this,{nodes:s,edges:c,combos:l,comboEdges:d,center:p}=o,v={};s.forEach(k=>{v[k.id]=k});const y={};l.forEach(k=>{y[k.id]=k});const x=o.getInnerGraphs(v),E=[],_=[],T={};let M=!0;this.comboTrees.forEach(k=>{const L=x[k.id],U=Object.assign(Object.assign({},k),{x:L.x||y[k.id].x,y:L.y||y[k.id].y,fx:L.fx||y[k.id].fx,fy:L.fy||y[k.id].fy,mass:L.mass||y[k.id].mass,size:L.size});_.push(U),!isNaN(U.x)&&U.x!==0&&!isNaN(U.y)&&U.y!==0?M=!1:(U.x=Math.random()*100,U.y=Math.random()*100),E.push(k.id),ue(k,W=>(W.id!==k.id&&(T[W.id]=k.id),!0))}),s.forEach(k=>{if(k.comboId&&y[k.comboId])return;const L=Object.assign({},k);_.push(L),!isNaN(L.x)&&L.x!==0&&!isNaN(L.y)&&L.y!==0?M=!1:(L.x=Math.random()*100,L.y=Math.random()*100),E.push(k.id)});const R=[];if(c.concat(d).forEach(k=>{const L=T[k.source]||k.source,U=T[k.target]||k.target;L!==U&&E.includes(L)&&E.includes(U)&&R.push({source:L,target:U})}),_!=null&&_.length){if(_.length===1)_[0].x=p[0],_[0].y=p[1];else{const k={nodes:_,edges:R},L=this.outerLayout||new Dt({gravity:1,factor:4,linkDistance:(W,J,zt)=>{var Ae,qt;const le=((((Ae=J.size)===null||Ae===void 0?void 0:Ae[0])||30)+(((qt=zt.size)===null||qt===void 0?void 0:qt[0])||30))/2;return Math.min(le*1.5,700)}}),U=(i=L.getType)===null||i===void 0?void 0:i.call(L);L.updateCfg({center:p,kg:5,preventOverlap:!0,animate:!1}),M&&Ir[U]&&(_.length<100?new wv:new Qt).layout(k),L.layout(k)}_.forEach(k=>{const L=x[k.id];if(!L){const U=v[k.id];U&&(U.x=k.x,U.y=k.y);return}L.visited=!0,L.x=k.x,L.y=k.y,L.nodes.forEach(U=>{U.x+=k.x,U.y+=k.y})})}const D=Object.keys(x);for(let k=D.length-1;k>=0;k--){const L=D[k],U=x[L];U&&(U.nodes.forEach(W=>{U.visited||(W.x+=U.x||0,W.y+=U.y||0),v[W.id]&&(v[W.id].x=W.x,v[W.id].y=W.y)}),y[L]&&(y[L].x=U.x,y[L].y=U.y))}return{nodes:s,edges:c,combos:l,comboEdges:d}}getInnerGraphs(i){const o=this,{comboTrees:s,nodeSize:c,edges:l,comboPadding:d,spacing:p}=o,v={},y=this.innerLayout||new v0({sortBy:"id"});return y.center=[0,0],y.preventOverlap=!0,y.nodeSpacing=p,(s||[]).forEach(x=>{ue(x,E=>{var _;let T=(d==null?void 0:d(E))||10;if(Zt(T)&&(T=Math.max(...T)),!((_=E.children)===null||_===void 0)&&_.length){const M=E.children.map(qt=>{if(qt.itemType==="combo")return v[qt.id];const le=i[qt.id]||{};return Object.assign(Object.assign({},le),qt)}),R=M.map(qt=>qt.id),D={nodes:M,edges:l.filter(qt=>R.includes(qt.source)&&R.includes(qt.target))};let k=1/0;M.forEach(qt=>{var le;qt.size||(qt.size=((le=v[qt.id])===null||le===void 0?void 0:le.size)||(c==null?void 0:c(qt))||[30,30]),K(qt.size)&&(qt.size=[qt.size,qt.size]),k>qt.size[0]&&(k=qt.size[0]),k>qt.size[1]&&(k=qt.size[1])}),y.layout(D);const{minX:L,minY:U,maxX:W,maxY:J}=xe(M),zt={x:(W+L)/2,y:(J+U)/2};D.nodes.forEach(qt=>{qt.x-=zt.x,qt.y-=zt.y});const Ae=Math.max(W-L,J-U,k)+T*2;v[E.id]={id:E.id,nodes:M,size:[Ae,Ae]}}else if(E.itemType==="combo"){const M=T?[T*2,T*2]:[30,30];v[E.id]={id:E.id,nodes:[],size:M}}return!0})}),v}initVals(){const i=this,o=i.nodeSize,s=i.spacing;let c,l;if(K(s)?l=()=>s:Hn(s)?l=s:l=()=>0,this.spacing=l,!o)c=v=>{const y=l(v);return v.size?Zt(v.size)?((v.size[0]>v.size[1]?v.size[0]:v.size[1])+y)/2:gt(v.size)?((v.size.width>v.size.height?v.size.width:v.size.height)+y)/2:(v.size+y)/2:10+y/2};else if(Hn(o))c=v=>{const y=o(v),x=l(v);return Zt(v.size)?((v.size[0]>v.size[1]?v.size[0]:v.size[1])+x)/2:((y||10)+x)/2};else if(Zt(o)){const y=(o[0]>o[1]?o[0]:o[1])/2;c=x=>y+l(x)/2}else{const v=o/2;c=y=>v+l(y)/2}this.nodeSize=c;const d=i.comboPadding;let p;K(d)?p=()=>d:Zt(d)?p=()=>Math.max.apply(null,d):Hn(d)?p=d:p=()=>0,this.comboPadding=p}getType(){return"comboCombined"}}class h{constructor(i){this.id=i.id||0,this.rx=i.rx,this.ry=i.ry,this.fx=0,this.fy=0,this.mass=i.mass,this.degree=i.degree,this.g=i.g||0}distanceTo(i){const o=this.rx-i.rx,s=this.ry-i.ry;return Math.hypot(o,s)}setPos(i,o){this.rx=i,this.ry=o}resetForce(){this.fx=0,this.fy=0}addForce(i){const o=i.rx-this.rx,s=i.ry-this.ry;let c=Math.hypot(o,s);c=c<1e-4?1e-4:c;const l=this.g*(this.degree+1)*(i.degree+1)/c;this.fx+=l*o/c,this.fy+=l*s/c}in(i){return i.contains(this.rx,this.ry)}add(i){const o=this.mass+i.mass,s=(this.rx*this.mass+i.rx*i.mass)/o,c=(this.ry*this.mass+i.ry*i.mass)/o,l=this.degree+i.degree,d={rx:s,ry:c,mass:o,degree:l};return new h(d)}}class g{constructor(i){this.xmid=i.xmid,this.ymid=i.ymid,this.length=i.length,this.massCenter=i.massCenter||[0,0],this.mass=i.mass||1}getLength(){return this.length}contains(i,o){const s=this.length/2;return i<=this.xmid+s&&i>=this.xmid-s&&o<=this.ymid+s&&o>=this.ymid-s}NW(){const i=this.xmid-this.length/4,o=this.ymid+this.length/4,s=this.length/2,c={xmid:i,ymid:o,length:s};return new g(c)}NE(){const i=this.xmid+this.length/4,o=this.ymid+this.length/4,s=this.length/2,c={xmid:i,ymid:o,length:s};return new g(c)}SW(){const i=this.xmid-this.length/4,o=this.ymid-this.length/4,s=this.length/2,c={xmid:i,ymid:o,length:s};return new g(c)}SE(){const i=this.xmid+this.length/4,o=this.ymid-this.length/4,s=this.length/2,c={xmid:i,ymid:o,length:s};return new g(c)}}class m{constructor(i){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,i!=null&&(this.quad=i)}insert(i){if(this.body==null){this.body=i;return}this._isExternal()?(this.quad&&(this.NW=new m(this.quad.NW()),this.NE=new m(this.quad.NE()),this.SW=new m(this.quad.SW()),this.SE=new m(this.quad.SE())),this._putBody(this.body),this._putBody(i),this.body=this.body.add(i)):(this.body=this.body.add(i),this._putBody(i))}_putBody(i){this.quad&&(i.in(this.quad.NW())&&this.NW?this.NW.insert(i):i.in(this.quad.NE())&&this.NE?this.NE.insert(i):i.in(this.quad.SW())&&this.SW?this.SW.insert(i):i.in(this.quad.SE())&&this.SE&&this.SE.insert(i))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(i){if(!(this.body==null||i===this.body))if(this._isExternal())i.addForce(this.body);else{const o=this.quad?this.quad.getLength():0,s=this.body.distanceTo(i);o/s<this.theta?i.addForce(this.body):(this.NW&&this.NW.updateForce(i),this.NE&&this.NE.updateForce(i),this.SW&&this.SW.updateForce(i),this.SE&&this.SE.updateForce(i))}}}class b extends vt{constructor(i){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(i)}getDefaultCfg(){return{}}execute(){const i=this,{nodes:o,onLayoutEnd:s,prune:c}=i;let l=i.maxIteration;!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight);const d=[],p=o.length;for(let v=0;v<p;v+=1){const y=o[v];let x=10,E=10;K(y.size)&&(x=y.size,E=y.size),Zt(y.size)?(isNaN(y.size[0])||(x=y.size[0]),isNaN(y.size[1])||(E=y.size[1])):gt(y.size)&&(x=y.size.width,E=y.size.height),i.getWidth&&!isNaN(i.getWidth(y))&&(E=i.getWidth(y)),i.getHeight&&!isNaN(i.getHeight(y))&&(x=i.getHeight(y));const _=Math.max(x,E);d.push(_)}i.barnesHut===void 0&&p>250&&(i.barnesHut=!0),i.prune===void 0&&p>100&&(i.prune=!0),this.maxIteration===0&&!i.prune?(l=250,p<=200&&p>100?l=1e3:p>200&&(l=1200),this.maxIteration=l):this.maxIteration===0&&c&&(l=100,p<=200&&p>100?l=500:p>200&&(l=950),this.maxIteration=l),i.kr||(i.kr=50,p>100&&p<=500?i.kr=20:p>500&&(i.kr=1)),i.kg||(i.kg=20,p>100&&p<=500?i.kg=10:p>500&&(i.kg=1)),this.nodes=i.updateNodesByForces(d),s()}updateNodesByForces(i){const o=this,{edges:s,maxIteration:c}=o;let l=o.nodes;const d=s.filter(M=>{const R=ht(M,"source"),D=ht(M,"target");return R!==D}),p=l.length,v=d.length,y=[],x={},E={},_=[];for(let M=0;M<p;M+=1)x[l[M].id]=M,y[M]=0,(l[M].x===void 0||isNaN(l[M].x))&&(l[M].x=Math.random()*1e3),(l[M].y===void 0||isNaN(l[M].y))&&(l[M].y=Math.random()*1e3),_.push({x:l[M].x,y:l[M].y});for(let M=0;M<v;M+=1){let R,D,k=0,L=0;for(let U=0;U<p;U+=1){const W=ht(d[M],"source"),J=ht(d[M],"target");l[U].id===W?(R=l[U],k=U):l[U].id===J&&(D=l[U],L=U),E[M]={sourceIdx:k,targetIdx:L}}R&&(y[x[R.id]]+=1),D&&(y[x[D.id]]+=1)}let T=c;if(l=this.iterate(T,x,E,v,y,i),o.prune){for(let M=0;M<v;M+=1)y[E[M].sourceIdx]<=1?(l[E[M].sourceIdx].x=l[E[M].targetIdx].x,l[E[M].sourceIdx].y=l[E[M].targetIdx].y):y[E[M].targetIdx]<=1&&(l[E[M].targetIdx].x=l[E[M].sourceIdx].x,l[E[M].targetIdx].y=l[E[M].sourceIdx].y);o.prune=!1,o.barnesHut=!1,T=100,l=this.iterate(T,x,E,v,y,i)}return l}iterate(i,o,s,c,l,d){const p=this;let{nodes:v}=p;const{kr:y,preventOverlap:x}=p,{barnesHut:E}=p,_=v.length;let T=0;const M=100;let R=i;const D=50;let k=[];const L=[],U=[];for(let W=0;W<_;W+=1)if(k[2*W]=0,k[2*W+1]=0,E){const J={id:W,rx:v[W].x,ry:v[W].y,mass:1,g:y,degree:l[W]};U[W]=new h(J)}for(;R>0;){for(let J=0;J<_;J+=1)L[2*J]=k[2*J],L[2*J+1]=k[2*J+1],k[2*J]=0,k[2*J+1]=0;k=this.getAttrForces(R,D,c,o,s,l,d,k),E&&(x&&R>D||!x)?k=this.getOptRepGraForces(k,U,l):k=this.getRepGraForces(R,D,k,M,d,l);const W=this.updatePos(k,L,T,l);v=W.nodes,T=W.sg,R--,p.tick&&p.tick()}return v}getAttrForces(i,o,s,c,l,d,p,v){const y=this,{nodes:x,preventOverlap:E,dissuadeHubs:_,mode:T,prune:M}=y;for(let R=0;R<s;R+=1){const D=x[l[R].sourceIdx],k=l[R].sourceIdx,L=x[l[R].targetIdx],U=l[R].targetIdx;if(M&&(d[k]<=1||d[U]<=1))continue;const W=[L.x-D.x,L.y-D.y];let J=Math.hypot(W[0],W[1]);J=J<1e-4?1e-4:J,W[0]=W[0]/J,W[1]=W[1]/J,E&&i<o&&(J=J-p[k]-p[U]);let zt=J,Ae=zt;T==="linlog"&&(zt=Math.log(1+J),Ae=zt),_&&(zt=J/d[k],Ae=J/d[U]),E&&i<o&&J<=0?(zt=0,Ae=0):E&&i<o&&J>0&&(zt=J,Ae=J),v[2*c[D.id]]+=zt*W[0],v[2*c[L.id]]-=Ae*W[0],v[2*c[D.id]+1]+=zt*W[1],v[2*c[L.id]+1]-=Ae*W[1]}return v}getRepGraForces(i,o,s,c,l,d){const p=this,{nodes:v,preventOverlap:y,kr:x,kg:E,center:_,prune:T}=p,M=v.length;for(let R=0;R<M;R+=1){for(let U=R+1;U<M;U+=1){if(T&&(d[R]<=1||d[U]<=1))continue;const W=[v[U].x-v[R].x,v[U].y-v[R].y];let J=Math.hypot(W[0],W[1]);J=J<1e-4?1e-4:J,W[0]=W[0]/J,W[1]=W[1]/J,y&&i<o&&(J=J-l[R]-l[U]);let zt=x*(d[R]+1)*(d[U]+1)/J;y&&i<o&&J<0?zt=c*(d[R]+1)*(d[U]+1):y&&i<o&&J===0?zt=0:y&&i<o&&J>0&&(zt=x*(d[R]+1)*(d[U]+1)/J),s[2*R]-=zt*W[0],s[2*U]+=zt*W[0],s[2*R+1]-=zt*W[1],s[2*U+1]+=zt*W[1]}const D=[v[R].x-_[0],v[R].y-_[1]],k=Math.hypot(D[0],D[1]);D[0]=D[0]/k,D[1]=D[1]/k;const L=E*(d[R]+1);s[2*R]-=L*D[0],s[2*R+1]-=L*D[1]}return s}getOptRepGraForces(i,o,s){const c=this,{nodes:l,kg:d,center:p,prune:v}=c,y=l.length;let x=9e10,E=-9e10,_=9e10,T=-9e10;for(let L=0;L<y;L+=1)v&&s[L]<=1||(o[L].setPos(l[L].x,l[L].y),l[L].x>=E&&(E=l[L].x),l[L].x<=x&&(x=l[L].x),l[L].y>=T&&(T=l[L].y),l[L].y<=_&&(_=l[L].y));const M=Math.max(E-x,T-_),R={xmid:(E+x)/2,ymid:(T+_)/2,length:M,massCenter:p,mass:y},D=new g(R),k=new m(D);for(let L=0;L<y;L+=1)v&&s[L]<=1||o[L].in(D)&&k.insert(o[L]);for(let L=0;L<y;L+=1){if(v&&s[L]<=1)continue;o[L].resetForce(),k.updateForce(o[L]),i[2*L]-=o[L].fx,i[2*L+1]-=o[L].fy;const U=[l[L].x-p[0],l[L].y-p[1]];let W=Math.hypot(U[0],U[1]);W=W<1e-4?1e-4:W,U[0]=U[0]/W,U[1]=U[1]/W;const J=d*(s[L]+1);i[2*L]-=J*U[0],i[2*L+1]-=J*U[1]}return i}updatePos(i,o,s,c){const l=this,{nodes:d,ks:p,tao:v,prune:y,ksmax:x}=l,E=d.length,_=[],T=[];let M=0,R=0;for(let k=0;k<E;k+=1){if(y&&c[k]<=1)continue;const L=[i[2*k]-o[2*k],i[2*k+1]-o[2*k+1]],U=Math.hypot(L[0],L[1]),W=[i[2*k]+o[2*k],i[2*k+1]+o[2*k+1]],J=Math.hypot(W[0],W[1]);_[k]=U,T[k]=J/2,M+=(c[k]+1)*_[k],R+=(c[k]+1)*T[k]}const D=s;s=v*R/M,D!==0&&(s=s>1.5*D?1.5*D:s);for(let k=0;k<E;k+=1){if(y&&c[k]<=1||K(d[k].fx)&&K(d[k].fy))continue;let L=p*s/(1+s*Math.sqrt(_[k])),U=Math.hypot(i[2*k],i[2*k+1]);U=U<1e-4?1e-4:U;const W=x/U;L=L>W?W:L;const J=L*i[2*k],zt=L*i[2*k+1];d[k].x+=J,d[k].y+=zt}return{nodes:d,sg:s}}}class w{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(i,o,s){this.cells=[],this.CELL_W=s.CELL_W||w.DEFAULT_CELL_W,this.CELL_H=s.CELL_H||w.DEFAULT_CELL_H,this.columnNum=Math.ceil(i/this.CELL_W),this.rowNum=Math.ceil(o/this.CELL_H),w.MIN_DIST=Math.pow(i,2)+Math.pow(o,2);for(let c=0;c<this.columnNum;c++){const l=[];for(let d=0;d<this.rowNum;d++){const p={dx:c,dy:d,x:c*this.CELL_W,y:d*this.CELL_H,occupied:!1};l.push(p)}this.cells.push(l)}}findGridByNodeId(i){var o,s;for(let c=0;c<this.columnNum;c++)for(let l=0;l<this.rowNum;l++)if(this.cells[c][l].node&&((s=(o=this.cells[c][l])===null||o===void 0?void 0:o.node)===null||s===void 0?void 0:s.id)===i)return{column:c,row:l};return null}sqdist(i,o){return Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2)}occupyNearest(i){let o=w.MIN_DIST,s,c=null;for(let l=0;l<this.columnNum;l++)for(let d=0;d<this.rowNum;d++)!this.cells[l][d].occupied&&(s=this.sqdist(i,this.cells[l][d]))<o&&(o=s,c=this.cells[l][d]);return c&&(c.occupied=!0),c}insertColumn(i,o){if(!(o<=0)){for(let s=0;s<o;s++){this.cells[s+this.columnNum]=[];for(let c=0;c<this.rowNum;c++)this.cells[s+this.columnNum][c]={dx:s,dy:c,x:s*this.CELL_W,y:c*this.CELL_H,occupied:!1,node:null}}for(let s=this.columnNum-1;s>i;s--)for(let c=0;c<this.rowNum;c++)this.cells[s+o][c]=Object.assign(Object.assign({},this.cells[s][c]),{x:(s+o)*this.CELL_W,y:c*this.CELL_H}),this.cells[s][c]={x:s*this.CELL_W,y:c*this.CELL_H,occupied:!0,node:null};for(let s=0;s<this.additionColumn.length;s++)this.additionColumn[s]>=i&&(this.additionColumn[s]+=o);for(let s=0;s<o;s++)this.additionColumn.push(i+s+1);this.columnNum+=o}}insertRow(i,o){if(!(o<=0)){for(let s=0;s<o;s++)for(let c=0;c<this.columnNum;c++)this.cells[c][s+this.rowNum]={dx:c,dy:s,x:c*this.CELL_W,y:s*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.columnNum;s++)for(let c=this.rowNum-1;c>i;c--)this.cells[s][c+o]=Object.assign(Object.assign({},this.cells[s][c]),{dx:s,dy:c+o,x:s*this.CELL_W,y:(c+o)*this.CELL_H}),this.cells[s][c]={dx:s,dy:c,x:s*this.CELL_W,y:c*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.additionRow.length;s++)this.additionRow[s]>=i&&(this.additionRow[s]+=o);for(let s=0;s<o;s++)this.additionRow.push(i+s+1);this.rowNum+=o}}getNodes(){const i=[];for(let o=0;o<this.columnNum;o++)for(let s=0;s<this.rowNum;s++)this.cells[o][s].node&&i.push(this.cells[o][s]);return i}}w.MIN_DIST=50,w.DEFAULT_CELL_W=80,w.DEFAULT_CELL_H=80;function S(n,i){if(!n.nodes||n.nodes.length===0)return n;const o=i.width,s=i.height,c=i.nodeMinGap;let l=1e4,d=1e4;n.nodes.forEach(v=>{const y=v.size[0]||50,x=v.size[1]||50;l=Math.min(y,l),d=Math.min(x,d)});const p=new w;p.init(o,s,{CELL_H:d,CELL_W:l}),n.nodes.forEach(v=>{const y=p.occupyNearest(v);y&&(y.node={id:v.id,size:v.size},v.x=y.x,v.y=y.y,v.dx=y.dx,v.dy=y.dy)});for(let v=0;v<n.nodes.length;v++){const y=n.nodes[v],x=p.findGridByNodeId(y.id);if(!x)throw new Error("can not find node cell");const{column:E,row:_}=x;if(y.size[0]+c>l){const T=Math.ceil((y.size[0]+c)/l)-1;let M=T;for(let R=0;R<T&&(p.additionColumn.indexOf(E+R+1)>-1&&!p.cells[E+R+1][_].node);R++)M--;p.insertColumn(E,M)}if(y.size[1]+c>d){const T=Math.ceil((y.size[1]+c)/d)-1;let M=T;for(let R=0;R<T&&(p.additionRow.indexOf(_+R+1)>-1&&!p.cells[E][_+R+1].node);R++)M--;p.insertRow(_,M)}}for(let v=0;v<p.columnNum;v++)for(let y=0;y<p.rowNum;y++){const x=p.cells[v][y];if(x.node){const E=n.nodes.find(_=>{var T;return _.id===((T=x==null?void 0:x.node)===null||T===void 0?void 0:T.id)});E&&(E.x=x.x+E.size[0]/2,E.y=x.y+E.size[1]/2)}}}const C=1200,A=800,B=1e7,j=10,H=3.141592653589793,nt=1.5707963267948966,ct=H*.375,Y=H*.625,Pt=new Map,Xt=10,pe=10;let qe=.8;const xn=.1,En=.5;function jn(n,i,o){const s=n.x-n.size[0]/2,c=n.y-n.size[1]/2,l=n.x+n.size[0]/2,d=n.y+n.size[1]/2,p=i.x-i.size[0]/2,v=i.y-i.size[1]/2,y=i.x+i.size[0]/2,x=i.y+i.size[1]/2,E=n.x,_=n.y,T=i.x,M=i.y,R=T-E,D=Math.atan2(R,M-_);let k=0,L=0,U=0,W=0;D>nt?(L=c-x,k=p-l,U=parseFloat(L?(L/Math.cos(D)).toFixed(2):k.toFixed(2)),W=parseFloat(k?(k/Math.sin(D)).toFixed(2):L.toFixed(2))):0<D&&D<=nt?(L=v-d,k=p-l,L>k?U=W=parseFloat(L?(L/Math.cos(D)).toFixed(2):k.toFixed(2)):U=W=parseFloat(k?(k/Math.sin(D)).toFixed(2):L.toFixed(2))):D<-nt?(L=c-x,k=-(y-s),L>k?U=W=parseFloat(L?(L/Math.cos(D)).toFixed(2):k.toFixed(2)):U=W=parseFloat(k?(k/Math.sin(D)).toFixed(2):L.toFixed(2))):(L=v-d,Math.abs(R)>(l-s)/2?k=s-y:k=R,L>k?U=W=parseFloat(L?(L/Math.cos(D)).toFixed(2):k.toFixed(2)):U=W=parseFloat(k&&D!==0?(k/Math.sin(D)).toFixed(2):L.toFixed(2)));const J=parseFloat(D.toFixed(2));let zt=o;return o&&(zt=ct<J&&J<Y),{distance:Math.abs(U<W?U:W),isHoriz:zt}}function wn(n,i){const s=(Pt.get(n.id)||[]).find(Ae=>Ae.source===i.id||Ae.target===i.id),c=n.size[0]*n.size[1],l=i.size[0]*i.size[1],d=c>l?i:n,p=c>l?n:i,v=d.x-d.size[0]/2,y=d.y-d.size[1]/2,x=d.x+d.size[0]/2,E=d.y+d.size[1]/2,_=p.x-p.size[0]/2,T=p.y-p.size[1]/2,M=p.x+p.size[0]/2,R=p.y+p.size[1]/2,D=d.x,k=d.y,L=p.x,U=p.y,W=x>=_&&M>=v&&E>=T&&R>=y;let J=0,zt=0;if(W){zt=Math.sqrt(Math.pow(L-D,2)+Math.pow(U-k,2));const Ae=v>_?v:_,qt=y>T?y:T,le=x<M?x:M,ce=E<R?E:R,Ne=le-Ae,Et=ce-qt,Le=Ne*Et;zt===0&&(zt=1e-7),J=j*1/zt*100+Le,J*=B}else{let Ae=!1;const qt=jn(d,p,Ae);zt=qt.distance,Ae=qt.isHoriz,zt<=j?zt!==0?s?J+=j+B*1/zt:J+=j+B*j/zt:J+=B:(J+=zt,s&&(J+=zt*zt))}return J}function Un(n){let i=0;for(let o=0;o<n.length;o++){const s=n[o];(s.x<0||s.y<0||s.x>C||s.y>A)&&(i+=1e12);for(let c=o+1;c<n.length;c++)i+=wn(s,n[c])}return i}function Di(n,i,o,s){const c=new Map;o.forEach((v,y)=>{c.set(v.id,v)});const l=s.filter(v=>v.source===n.id||v.target===n.id)||[],d=[];l.forEach(v=>{const y=v.source===n.id?v.target:v.source,x=c.get(y);x&&d.push(x)});let p=!0;for(let v=0;v<d.length;v++){const y=d[v],x=Math.atan((n.y-y.y)/(y.x-n.y))*180,E=Math.atan((i.y-y.y)/(y.x-i.y))*180,_=x<30||x>150,T=E<30||E>150,M=x>70&&x<110,R=E>70&&E<110;if(_&&!T||x*E<0){p=!1;break}else if(M&&!R||x*E<0){p=!1;break}else if((y.x-n.x)*(y.x-i.x)<0){p=!1;break}else if((y.y-n.y)*(y.y-i.y)<0){p=!1;break}}return p}function Ur(n,i){let o=!1;const s=1,c=Xt*s,l=pe*s,d=[c,-c,0,0],p=[0,0,l,-l];for(let v=0;v<n.length;++v){const y=n[v];let x=be(y,n);for(let E=0;E<d.length;E++)if(Di(y,{x:y.x+d[E],y:y.y+p[E]},n,i)){y.x+=d[E],y.y+=p[E];const T=be(y,n),M=Math.random();T<x||M<qe&&M>xn?(x=T,o=!0):(y.x-=d[E],y.y-=p[E])}}return qe>xn&&(qe*=En),o?Un(n):0}function be(n,i){let o=0;(n.x<0||n.y<0||n.x+n.size[0]+20>C||n.y+n.size[1]+20>A)&&(o+=1e12);for(let s=0;s<i.length;++s)n.id!==i[s].id&&(o+=wn(n,i[s]));return o}function tn(n,i){if(n.length===0)return{nodes:n,edges:i};n.forEach(v=>{const y=i.filter(x=>x.source===v.id||x.target===v.id);Pt.set(v,y)}),n.sort((v,y)=>{var x,E;return((x=Pt.get(v.id))===null||x===void 0?void 0:x.length)-((E=Pt.get(y.id))===null||E===void 0?void 0:E.length)});let o=Un(n),s=20,c=1,l=0;const d=50;let p=0;for(;s>0&&(p++,!(p>=d));){const v=Ur(n,i);v!==0&&(l=v),c=l-o,o=l,c===0?--s:s=20}return n.forEach(v=>{v.x=v.x-v.size[0]/2,v.y=v.y-v.size[1]/2}),{nodes:n,edges:i}}var Nr=tn;function qi(n,i){const{nodes:o,edges:s}=n,c=i.width,l=i.height;if(!(o!=null&&o.length))return Promise.resolve();const d=[];o.forEach(M=>{if(s.filter(D=>D.source===M.id||D.target===M.id).length>1){const D=Object.assign({},M);delete D.size,d.push(D)}});const p=[];s.forEach(M=>{const R=d.find(k=>k.id===M.source),D=d.find(k=>k.id===M.target);R&&D&&p.push(M)});const v=new Hl({type:"dagre",ranksep:i.nodeMinGap,nodesep:i.nodeMinGap}),{nodes:y}=v.layout({nodes:d,edges:p});o.forEach(M=>{const R=(y||[]).find(D=>D.id===M.id);M.x=(R==null?void 0:R.x)||c/2,M.y=(R==null?void 0:R.y)||l/2});const x=JSON.parse(JSON.stringify(o)),E=JSON.parse(JSON.stringify(s)),_=Ca().nodes(x).force("link",Ro(E).id(M=>M.id).distance(M=>p.find(D=>D.source===M.source&&D.target===M.target)?30:20)).force("charge",No()).force("center",mc(c/2,l/2)).force("x",Xr(c/2)).force("y",sa(l/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(M=>{_.on("end",()=>{o.forEach(J=>{const zt=x.find(Ae=>Ae.id===J.id);zt&&(J.x=zt.x,J.y=zt.y)});const R=Math.min(...o.map(J=>J.x)),D=Math.max(...o.map(J=>J.x)),k=Math.min(...o.map(J=>J.y)),L=Math.max(...o.map(J=>J.y)),U=c/(D-R),W=l/(L-k);o.forEach(J=>{J.x!==void 0&&U<1&&(J.x=(J.x-R)*U),J.y!==void 0&&W<1&&(J.y=(J.y-k)*W)}),o.forEach(J=>{J.sizeTemp=J.size,J.size=[10,10]}),Nr(o,s),o.forEach(J=>{J.size=J.sizeTemp||[],delete J.sizeTemp}),S({nodes:o,edges:s},i),M()})})}class Ji extends vt{constructor(i){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},i&&this.updateCfg(i)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const i=this,o=i.nodes,s=i.edges;return o==null||o.forEach(c=>{c.size||(c.size=[50,50])}),qi({nodes:o,edges:s},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{i.onLayoutEnd&&i.onLayoutEnd()})}getType(){return"er"}}class Go extends vt{constructor(i){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(i)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const i=this,o=i.nodes,s=.9,c=i.center;return!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),o&&o.forEach(l=>{l.x=(Math.random()-.5)*s*i.width+c[0],l.y=(Math.random()-.5)*s*i.height+c[1]}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:this.edges}}getType(){return"random"}}class Ws{constructor(i){const o=getLayoutByName(i.type);this.layoutInstance=new o(i)}layout(i){return this.layoutInstance.layout(i)}updateCfg(i){this.layoutInstance.updateCfg(i)}init(i){this.correctLayers(i.nodes),this.layoutInstance.init(i)}correctLayers(i){if(!(i!=null&&i.length))return;let o=1/0;const s=[];if(i.forEach(c=>{isString(c.layer)&&(c.layer=parseInt(c.layer,10)),!(c.layer===void 0||isNaN(c.layer))&&(s.push(c),c.layer<o&&(o=c.layer))}),o<=0){const c=Math.abs(o)+1;s.forEach(l=>l.layer+=c)}}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const Pv={force:bi,fruchterman:Rb,forceAtlas2:b,gForce:Dt,force2:Tu,dagre:Hl,dagreCompound:ub,circular:zs,radial:Pb,concentric:v0,grid:Qt,mds:wv,comboForce:a,comboCombined:f,random:Go,"gForce-gpu":r,"fruchterman-gpu":Hs,er:Ji}},89478:function(){typeof window=="object"&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(At){At.forEach(yt=>{Object.prototype.hasOwnProperty.call(yt,"append")||Object.defineProperty(yt,"append",{configurable:!0,enumerable:!0,writable:!0,value(...O){const V=document.createDocumentFragment();O.forEach(ft=>{const rt=ft instanceof Node;V.appendChild(rt?ft:document.createTextNode(String(ft)))}),this.appendChild(V)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype])},6790:function(At,yt,O){"use strict";O.d(yt,{a:function(){return wt}});var V=O(17011);const ft=`.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizespeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
`;var rt=function(K,Z,ot,gt){var $t=arguments.length,ht=$t<3?Z:gt===null?gt=Object.getOwnPropertyDescriptor(Z,ot):gt,bt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ht=Reflect.decorate(K,Z,ot,gt);else for(var Ut=K.length-1;Ut>=0;Ut--)(bt=K[Ut])&&(ht=($t<3?bt(ht):$t>3?bt(Z,ot,ht):bt(Z,ot))||ht);return $t>3&&ht&&Object.defineProperty(Z,ot,ht),ht};class wt extends V.G7{get scroller(){return this.graph.getPlugin("scroller")}get graphContainer(){return this.scroller?this.scroller.container:this.graph.container}constructor(Z){super(),this.name="minimap",this.options=Object.assign(Object.assign({},Zt.defaultOptions),Z),V.mf.ensure(this.name,ft)}init(Z){this.graph=Z,this.updateViewport=V.Iw.debounce(this.updateViewport.bind(this),0),this.container=document.createElement("div"),V.is.addClass(this.container,this.prefixClassName(Tt.root));const ot=document.createElement("div");this.container.appendChild(ot),this.viewport=document.createElement("div"),V.is.addClass(this.viewport,this.prefixClassName(Tt.viewport)),this.options.scalable&&(this.zoomHandle=document.createElement("div"),V.is.addClass(this.zoomHandle,this.prefixClassName(Tt.zoom)),V.is.appendTo(this.zoomHandle,this.viewport)),V.is.append(this.container,this.viewport),V.is.css(this.container,{width:this.options.width,height:this.options.height,padding:this.options.padding}),this.options.container&&this.options.container.appendChild(this.container),this.sourceGraph=this.graph;const gt=Object.assign(Object.assign({},this.options.graphOptions),{container:ot,model:this.sourceGraph.model,interacting:!1,grid:!1,background:!1,embedding:!1});this.targetGraph=this.options.createGraph?this.options.createGraph(gt):new V.kJ(gt),this.updatePaper(this.sourceGraph.options.width,this.sourceGraph.options.height),this.startListening()}startListening(){this.scroller?V.is.Event.on(this.graphContainer,`scroll${this.getEventNamespace()}`,this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents({mousedown:"startAction",touchstart:"startAction",[`mousedown .${this.prefixClassName("graph")}`]:"scrollTo",[`touchstart .${this.prefixClassName("graph")}`]:"scrollTo"})}stopListening(){this.scroller?V.is.Event.off(this.graphContainer,this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}onRemove(){this.stopListening(),this.targetGraph.model=new V.Hn,this.targetGraph.dispose()}onTransform(Z){(Z.ui||this.targetGraphTransforming)&&this.updateViewport()}onModelUpdated(){this.targetGraph.zoomToFit()}updatePaper(Z,ot){let gt,$t;typeof Z=="object"?(gt=Z.width,$t=Z.height):(gt=Z,$t=ot);const ht=this.sourceGraph.options,bt=this.sourceGraph.transform.getScale(),Ut=this.options.width-2*this.options.padding,ut=this.options.height-2*this.options.padding;gt/=bt.sx,$t/=bt.sy,this.ratio=Math.min(Ut/gt,ut/$t);const Bt=this.ratio,Gt=ht.x*Bt/bt.sx,fe=ht.y*Bt/bt.sy;return gt*=Bt,$t*=Bt,this.targetGraph.resize(gt,$t),this.targetGraph.translate(Gt,fe),this.scroller?this.targetGraph.scale(Bt,Bt):this.targetGraph.zoomToFit(),this.updateViewport(),this}updateViewport(){const Z=this.sourceGraph.transform.getScale(),ot=this.targetGraph.transform.getScale();let gt=null;this.scroller?gt=this.scroller.clientToLocalPoint(0,0):gt=this.graph.graphToLocal(0,0);const $t=V.is.position(this.targetGraph.container),ht=this.targetGraph.translate();ht.ty=ht.ty||0,this.geometry={top:$t.top+gt.y*ot.sy+ht.ty,left:$t.left+gt.x*ot.sx+ht.tx,width:this.graphContainer.clientWidth*ot.sx/Z.sx,height:this.graphContainer.clientHeight*ot.sy/Z.sy},V.is.css(this.viewport,this.geometry)}startAction(Z){const ot=this.normalizeEvent(Z),gt=ot.target===this.zoomHandle?"zooming":"panning",{tx:$t,ty:ht}=this.sourceGraph.translate(),bt={action:gt,clientX:ot.clientX,clientY:ot.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:$t,translateY:ht};this.targetGraphTransforming=!0,this.delegateDocumentEvents(Zt.documentEvents,bt)}doAction(Z){const ot=this.normalizeEvent(Z),gt=ot.clientX,$t=ot.clientY,ht=ot.data;switch(ht.action){case"panning":{const bt=this.sourceGraph.transform.getScale(),Ut=(gt-ht.clientX)*bt.sx,ut=($t-ht.clientY)*bt.sy;this.scroller?(this.graphContainer.scrollLeft=ht.scrollLeft+Ut/this.ratio,this.graphContainer.scrollTop=ht.scrollTop+ut/this.ratio):this.sourceGraph.translate(ht.translateX-Ut/this.ratio,ht.translateY-ut/this.ratio);break}case"zooming":{const bt=ht.scale,Ut=ht.geometry,ut=1+(ht.clientX-gt)/Ut.width/bt.sx;ht.frameId&&cancelAnimationFrame(ht.frameId),ht.frameId=requestAnimationFrame(()=>{this.sourceGraph.zoom(ut*ht.zoom,{absolute:!0,minScale:this.options.minScale,maxScale:this.options.maxScale})});break}default:break}}stopAction(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}scrollTo(Z){const ot=this.normalizeEvent(Z);let gt,$t;const ht=this.targetGraph.translate();if(ht.ty=ht.ty||0,ot.offsetX==null){const ut=V.is.offset(this.targetGraph.container);gt=ot.pageX-ut.left,$t=ot.pageY-ut.top}else gt=ot.offsetX,$t=ot.offsetY;const bt=(gt-ht.tx)/this.ratio,Ut=($t-ht.ty)/this.ratio;this.sourceGraph.centerPoint(bt,Ut)}dispose(){this.remove(),V.mf.clean(this.name)}}rt([V.G7.dispose()],wt.prototype,"dispose",null);var Tt;(function(K){K.root="widget-minimap",K.viewport=`${K.root}-viewport`,K.zoom=`${K.viewport}-zoom`})(Tt||(Tt={}));var Zt;(function(K){K.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:Z=>new V.kJ(Z)},K.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(Zt||(Zt={}))},76502:function(At,yt,O){"use strict";O.d(yt,{z2:function(){return ot}});var V=O(17011);class ft extends V.NB{}(function(ht){function bt(Ut){const ut=[],Bt=V.Lu.getForeignObjectMarkup();return Ut?ut.push({tagName:Ut,selector:"body"},Bt):ut.push(Bt),ut}ht.config({view:"react-shape-view",markup:bt(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(Ut){if(Ut.markup==null){const ut=Ut.primer;if(ut){Ut.markup=bt(ut);let Bt={};switch(ut){case"circle":Bt={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":Bt={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"};break;default:break}Ut.attrs=V.QK.merge({},{body:Object.assign({refWidth:null,refHeight:null},Bt)},Ut.attrs||{})}}return Ut}}),V.NB.registry.register("react-shape",ht,!0)})(ft||(ft={}));var rt=O(93236),wt=O(19103),Tt=O(92628),Zt;(function(ht){let bt=!1,Ut;const ut=(xe,Qe)=>{const Pn=Qe.payload;switch(Qe.type){case"add":{const yn=xe.findIndex(Ht=>Ht.id===Pn.id);return yn>=0?(xe[yn]=Pn,[...xe]):[...xe,Pn]}case"remove":{const yn=xe.findIndex(Ht=>Ht.id===Pn.id);if(yn>=0){const Ht=[...xe];return Ht.splice(yn,1),Ht}break}default:break}return xe};function Bt(xe,Qe){bt&&Ut({type:"add",payload:{id:xe,portal:Qe}})}ht.connect=Bt;function Gt(xe){bt&&Ut({type:"remove",payload:{id:xe}})}ht.disconnect=Gt;function fe(){return bt}ht.isActive=fe;function ue(){return()=>{bt=!0;const[xe,Qe]=(0,rt.useReducer)(ut,[]);return Ut=Qe,rt.createElement(rt.Fragment,{children:xe.map(Pn=>Pn.portal)})}}ht.getProvider=ue})(Zt||(Zt={}));var K=function(ht,bt){var Ut={};for(var ut in ht)Object.prototype.hasOwnProperty.call(ht,ut)&&bt.indexOf(ut)<0&&(Ut[ut]=ht[ut]);if(ht!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Bt=0,ut=Object.getOwnPropertySymbols(ht);Bt<ut.length;Bt++)bt.indexOf(ut[Bt])<0&&Object.prototype.propertyIsEnumerable.call(ht,ut[Bt])&&(Ut[ut[Bt]]=ht[ut[Bt]]);return Ut};const Z={};function ot(ht){const{shape:bt,component:Ut,effect:ut,inherit:Bt}=ht,Gt=K(ht,["shape","component","effect","inherit"]);if(!bt)throw new Error("should specify shape in config");Z[bt]={component:Ut,effect:ut},V.kJ.registerNode(bt,Object.assign({inherit:Bt||"react-shape"},Gt),!0)}class gt extends rt.PureComponent{constructor(bt){super(bt),this.state={tick:0}}componentDidMount(){const{node:bt}=this.props;bt.on("change:*",({key:Ut})=>{const ut=Z[bt.shape];if(ut){const{effect:Bt}=ut;(!Bt||Bt.includes(Ut))&&this.setState({tick:this.state.tick+1})}})}clone(bt){const{node:Ut,graph:ut}=this.props;return typeof bt.type=="string"?rt.cloneElement(bt):rt.cloneElement(bt,{node:Ut,graph:ut})}render(){const{node:bt}=this.props,Ut=Z[bt.shape];if(!Ut)return null;const{component:ut}=Ut;if(rt.isValidElement(ut))return this.clone(ut);const Bt=ut;return this.clone(rt.createElement(Bt,null))}}class $t extends V.DK{targetId(){return`${this.graph.view.cid}:${this.cell.id}`}getComponentContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(bt){const Ut=super.confirmUpdate(bt);return this.handleAction(Ut,$t.action,()=>{this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const bt=this.getComponentContainer(),Ut=this.cell;if(bt){const ut=rt.createElement(gt,{node:Ut,graph:this.graph});if(Zt.isActive()){const Bt=(0,wt.createPortal)(ut,bt);Zt.connect(this.targetId(),Bt)}else this.root=(0,Tt.createRoot)(bt),this.root.render(ut)}}unmountReactComponent(){this.getComponentContainer()&&this.root&&(this.root.unmount(),this.root=void 0)}onMouseDown(bt,Ut,ut){const Bt=bt.target;if(Bt.tagName.toLowerCase()==="input"){const fe=Bt.getAttribute("type");if(fe==null||["text","password","number","email","search","tel","url"].includes(fe))return}super.onMouseDown(bt,Ut,ut)}unmount(){return Zt.isActive()&&Zt.disconnect(this.targetId()),this.unmountReactComponent(),super.unmount(),this}}(function(ht){ht.action="react",ht.config({bootstrap:[ht.action],actions:{component:ht.action}}),V.DK.registry.register("react-shape-view",ht,!0)})($t||($t={}))},17011:function(At,yt,O){"use strict";O.d(yt,{mf:function(){return wt},is:function(){return rt},Iw:function(){return ft},kJ:function(){return Hs},Lu:function(){return Ri},Hn:function(){return _o},NB:function(){return po},DK:function(){return ma},QK:function(){return V},y$:function(){return Kn},bn:function(){return ue},G7:function(){return Ki}});var V={};O.r(V),O.d(V,{applyMixins:function(){return Fu},clone:function(){return ua},cloneDeep:function(){return vi.Z},createClass:function(){return _l},defaults:function(){return xl},defaultsDeep:function(){return ku},ensure:function(){return qc},flatten:function(){return Ec},getBoolean:function(){return zh},getByPath:function(){return Gu},getNumber:function(){return Cl},getValue:function(){return Gh},has:function(){return ps},inherit:function(){return Oa},isEmpty:function(){return xc},isEqual:function(){return wi},isMaliciousProp:function(){return Tl},isObject:function(){return Yn.Z},isPlainObject:function(){return Ii},merge:function(){return xi},pick:function(){return jc},setByPath:function(){return Us},unsetByPath:function(){return Al}});var ft={};O.r(ft),O.d(ft,{apply:function(){return lr},call:function(){return bn},debounce:function(){return Ht.Z},isAsync:function(){return kt},isAsyncLike:function(){return Je},throttle:function(){return rn},toAsyncBoolean:function(){return vt},toDeferredBoolean:function(){return Qt}});var rt={};O.r(rt),O.d(rt,{CASE_SENSITIVE_ATTR:function(){return Vt},Event:function(){return Ns},EventHook:function(){return pa},EventObject:function(){return Da},KAPPA:function(){return Ag},MouseWheelHandle:function(){return Mg},addClass:function(){return tr},after:function(){return Ot},append:function(){return Ft},appendTo:function(){return tt},attr:function(){return Ye},before:function(){return mt},breakText:function(){return Tg},children:function(){return Lt},circleToPathData:function(){return Fp},clearSelection:function(){return zv},computeStyle:function(){return oh},computeStyleInt:function(){return Ed},contains:function(){return $},createElement:function(){return Pr},createElementNS:function(){return gi},createSVGMatrix:function(){return Ti},createSVGPoint:function(){return Kv},createSVGTransform:function(){return sf},createSlicePathData:function(){return Yv},createSvgDocument:function(){return Vs},createSvgElement:function(){return wo},css:function(){return nf},data:function(){return al},decomposeMatrix:function(){return qv},ellipseToPathData:function(){return _d},empty:function(){return Rt},ensureId:function(){return Ui},find:function(){return un},findOne:function(){return wr},findParentByClass:function(){return et},getAttribute:function(){return de},getClass:function(){return li},getComputedStyle:function(){return Sg},getData:function(){return Np},getPointsFromSvgElement:function(){return Sd},getTransformToElement:function(){return hh},getTransformToParentElement:function(){return Jv},getVendorPrefixedName:function(){return Mp},hasClass:function(){return di},hasScrollbars:function(){return _g},height:function(){return B0},index:function(){return Yt},isCSSVariable:function(){return Ip},isElement:function(){return dt},isHTMLElement:function(){return q},isSVGGraphicsElement:function(){return xr},kebablizeAttrs:function(){return ln},lineToPathData:function(){return Wv},matrixToRotation:function(){return Up},matrixToScale:function(){return jp},matrixToTransformString:function(){return af},matrixToTranslation:function(){return Vp},measureText:function(){return ah},mergeAttrs:function(){return Xn},ns:function(){return gn},offset:function(){return $p},parseTransformString:function(){return fh},parseXML:function(){return it},polygonToPathData:function(){return of},polylineToPathData:function(){return Lp},position:function(){return G0},prepend:function(){return _t},prop:function(){return Vv},qualifyAttr:function(){return ir},rectToPathData:function(){return uh},rectangleToPathData:function(){return ch},remove:function(){return pt},removeAttribute:function(){return ye},removeClass:function(){return ei},rotate:function(){return Td},sample:function(){return Hv},scale:function(){return Og},setAttribute:function(){return ae},setAttributes:function(){return Re},setData:function(){return jv},setPrefixedStyle:function(){return N0},splitTextByLength:function(){return wd},styleToObject:function(){return Gn},svgVersion:function(){return Er},tagName:function(){return te},text:function(){return Dp},toLocalPoint:function(){return Qv},toPath:function(){return Xv},toPathData:function(){return Bp},toggleClass:function(){return oo},transform:function(){return cf},transformStringToMatrix:function(){return lh},translate:function(){return Zp},uniqueId:function(){return ur},width:function(){return F0}});var wt={};O.r(wt),O.d(wt,{clean:function(){return nm},ensure:function(){return em}});var Tt={};O.r(Tt),O.d(Tt,{dot:function(){return Z0},doubleMesh:function(){return Rg},fixedDot:function(){return qp},mesh:function(){return am}});var Zt={};O.r(Zt),O.d(Zt,{flipX:function(){return Jp},flipXY:function(){return cm},flipY:function(){return Pd},watermark:function(){return lc}});var K={};O.r(K),O.d(K,{blur:function(){return W0},brightness:function(){return Dg},contrast:function(){return ty},dropShadow:function(){return X0},grayScale:function(){return Y0},highlight:function(){return H0},hueRotate:function(){return J0},invert:function(){return Q0},outline:function(){return $0},saturate:function(){return q0},sepia:function(){return K0}});var Z={};O.r(Z),O.d(Z,{async:function(){return Im},block:function(){return Sm},circle:function(){return Nm},circlePlus:function(){return Oy},classic:function(){return _m},cross:function(){return Ay},diamond:function(){return Tm},ellipse:function(){return Iy},path:function(){return Om}});var ot={};O.r(ot),O.d(ot,{annotations:function(){return by},atConnectionLength:function(){return Ry},atConnectionLengthIgnoreGradient:function(){return Dm},atConnectionLengthKeepGradient:function(){return sv},atConnectionRatio:function(){return Dy},atConnectionRatioIgnoreGradient:function(){return Lm},atConnectionRatioKeepGradient:function(){return av},connection:function(){return Rm},displayEmpty:function(){return kg},eol:function(){return xy},fill:function(){return dy},filter:function(){return Cy},html:function(){return _y},lineHeight:function(){return vy},port:function(){return Ty},ref:function(){return um},refCx:function(){return iy},refCy:function(){return oy},refD:function(){return cy},refDKeepOffset:function(){return ev},refDResetOffset:function(){return vm},refDx:function(){return ny},refDy:function(){return Qp},refHeight:function(){return dm},refHeight2:function(){return hy},refPoints:function(){return ym},refPointsKeepOffset:function(){return sy},refPointsResetOffset:function(){return mm},refR:function(){return ay},refRCircumscribed:function(){return pm},refRInscribed:function(){return gm},refRx:function(){return tv},refRy:function(){return ry},refWidth:function(){return hm},refWidth2:function(){return fy},refX:function(){return lm},refX2:function(){return uy},refY:function(){return fm},refY2:function(){return ly},resetOffset:function(){return Fg},sourceMarker:function(){return Ny},stroke:function(){return gy},style:function(){return Sy},targetMarker:function(){return hf},text:function(){return wm},textPath:function(){return yy},textVerticalAnchor:function(){return my},textWrap:function(){return py},title:function(){return Ey},vertexMarker:function(){return iv},xAlign:function(){return xt},yAlign:function(){return wy}});var gt={};O.r(gt),O.d(gt,{className:function(){return Ly},opacity:function(){return km},stroke:function(){return lv}});var $t={};O.r($t),O.d($t,{absolute:function(){return ky},bottom:function(){return Zy},ellipse:function(){return Fy},ellipseSpread:function(){return By},left:function(){return jy},line:function(){return zy},right:function(){return Uy},top:function(){return Vy}});var ht={};O.r(ht),O.d(ht,{bottom:function(){return Xy},inside:function(){return qy},insideOriented:function(){return Jy},left:function(){return Hy},manual:function(){return $y},outside:function(){return Yy},outsideOriented:function(){return Ky},radial:function(){return Qy},radialOriented:function(){return tb},right:function(){return Wy},top:function(){return Gm}});var bt={};O.r(bt),O.d(bt,{noop:function(){return pv},pinAbsolute:function(){return ob},pinRelative:function(){return ib}});var Ut={};O.r(Ut),O.d(Ut,{bottom:function(){return t0},bottomLeft:function(){return fb},bottomRight:function(){return hb},center:function(){return ab},left:function(){return e0},midSide:function(){return gb},nodeCenter:function(){return db},orth:function(){return Hg},right:function(){return cb},top:function(){return Qm},topLeft:function(){return ub},topRight:function(){return lb}});var ut={};O.r(ut),O.d(ut,{closest:function(){return Wg},length:function(){return vb},orth:function(){return yb},ratio:function(){return pb}});var Bt={};O.r(Bt),O.d(Bt,{anchor:function(){return Ch},bbox:function(){return r0},boundary:function(){return hc},rect:function(){return fc}});var Gt={};O.r(Gt),O.d(Gt,{er:function(){return vl},loop:function(){return dc},manhattan:function(){return wv},metro:function(){return Rb},normal:function(){return bb},oneSide:function(){return i0},orth:function(){return s0}});var fe={};O.r(fe),O.d(fe,{jumpover:function(){return zd},loop:function(){return Kg},normal:function(){return Db},rounded:function(){return Lb},smooth:function(){return kb}});var ue={};O.r(ue),O.d(ue,{kS:function(){return gc}});var xe=O(89478);class Qe{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(u){function t(){return(e,r,a)=>{const f=a.value,h=e.__proto__;a.value=function(){this.disposed||(f.call(this),h.dispose.call(this))}}}u.dispose=t})(Qe||(Qe={}));class Pn{constructor(t){this.callback=t}get disposed(){return!this.callback}dispose(){if(!this.callback)return;const t=this.callback;this.callback=null,t()}}class yn{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(t=>{t.dispose()}),this.items.clear())}contains(t){return this.items.has(t)}add(t){this.items.add(t)}remove(t){this.items.delete(t)}clear(){this.items.clear()}}(function(u){function t(e){const r=new u;return e.forEach(a=>{r.add(a)}),r}u.from=t})(yn||(yn={}));var Ht=O(48831),Yn=O(82433),Hn="Expected a function";function _r(u,t,e){var r=!0,a=!0;if(typeof u!="function")throw new TypeError(Hn);return(0,Yn.Z)(e)&&(r="leading"in e?!!e.leading:r,a="trailing"in e?!!e.trailing:a),(0,Ht.Z)(u,t,{leading:r,maxWait:t,trailing:a})}var rn=_r;function lr(u,t,e){if(e)switch(e.length){case 0:return u.call(t);case 1:return u.call(t,e[0]);case 2:return u.call(t,e[0],e[1]);case 3:return u.call(t,e[0],e[1],e[2]);case 4:return u.call(t,e[0],e[1],e[2],e[3]);case 5:return u.call(t,e[0],e[1],e[2],e[3],e[4]);case 6:return u.call(t,e[0],e[1],e[2],e[3],e[4],e[5]);default:return u.apply(t,e)}return u.call(t)}function bn(u,t,...e){return lr(u,t,e)}function Je(u){return typeof u=="object"&&u.then&&typeof u.then=="function"}function kt(u){return u!=null&&(u instanceof Promise||Je(u))}function vt(...u){const t=[];if(u.forEach(r=>{Array.isArray(r)?t.push(...r):t.push(r)}),t.some(r=>kt(r))){const r=t.map(a=>kt(a)?a:Promise.resolve(a!==!1));return Promise.all(r).then(a=>a.reduce((f,h)=>h!==!1&&f,!0))}return t.every(r=>r!==!1)}function Qt(...u){const t=vt(u);return typeof t=="boolean"?Promise.resolve(t):t}function jt(u,t){const e=[];for(let r=0;r<u.length;r+=2){const a=u[r],f=u[r+1],h=Array.isArray(t)?t:[t],g=lr(a,f,h);e.push(g)}return vt(e)}class Dt{constructor(){this.listeners={}}on(t,e,r){return e==null?this:(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e,r),this)}once(t,e,r){const a=(...f)=>(this.off(t,a),jt([e,r],f));return this.on(t,a,this)}off(t,e,r){if(!(t||e||r))return this.listeners={},this;const a=this.listeners;return(t?[t]:Object.keys(a)).forEach(h=>{const g=a[h];if(g){if(!(e||r)){delete a[h];return}for(let m=g.length-2;m>=0;m-=2)e&&g[m]!==e||r&&g[m+1]!==r||g.splice(m,2)}}),this}trigger(t,...e){let r=!0;if(t!=="*"){const f=this.listeners[t];f!=null&&(r=jt([...f],e))}const a=this.listeners["*"];return a!=null?vt([r,jt([...a],[t,...e])]):r}emit(t,...e){return this.trigger(t,...e)}}var on=Object.prototype,Oe=on.hasOwnProperty;function Jn(u,t){return u!=null&&Oe.call(u,t)}var Cn=Jn,Tn=O(64765),zn=O(65380),Rn=O(56052),si=O(99313),Kr=O(65743),qr=O(13383);function Fi(u,t,e){t=(0,Tn.Z)(t,u);for(var r=-1,a=t.length,f=!1;++r<a;){var h=(0,qr.Z)(t[r]);if(!(f=u!=null&&e(u,h)))break;u=u[h]}return f||++r!=a?f:(a=u==null?0:u.length,!!a&&(0,Kr.Z)(a)&&(0,si.Z)(h,a)&&((0,Rn.Z)(u)||(0,zn.Z)(u)))}var to=Fi;function Ks(u,t){return u!=null&&to(u,t,Cn)}var ps=Ks;function Oi(u,t){t=(0,Tn.Z)(t,u);for(var e=0,r=t.length;u!=null&&e<r;)u=u[(0,qr.Z)(t[e++])];return e&&e==r?u:void 0}var Ls=Oi,jo=O(23188);function ba(u,t,e){for(var r=-1,a=t.length,f={};++r<a;){var h=t[r],g=Ls(u,h);e(g,h)&&(0,jo.Z)(f,(0,Tn.Z)(h,u),g)}return f}var ks=ba;function Q(u,t){return u!=null&&t in Object(u)}var kc=Q;function Bi(u,t){return u!=null&&to(u,t,kc)}var yo=Bi;function Fc(u,t){return ks(u,t,function(e,r){return yo(u,r)})}var ii=Fc,Bc=O(18573),vs=O(66711),za=vs.Z?vs.Z.isConcatSpreadable:void 0;function ja(u){return(0,Rn.Z)(u)||(0,zn.Z)(u)||!!(za&&u&&u[za])}var Tu=ja;function Hi(u,t,e,r,a){var f=-1,h=u.length;for(e||(e=Tu),a||(a=[]);++f<h;){var g=u[f];t>0&&e(g)?t>1?Hi(g,t-1,e,r,a):(0,Bc.Z)(a,g):r||(a[a.length]=g)}return a}var ai=Hi;function xa(u){var t=u==null?0:u.length;return t?ai(u,1):[]}var Fs=xa;function Ea(u,t,e){switch(e.length){case 0:return u.call(t);case 1:return u.call(t,e[0]);case 2:return u.call(t,e[0],e[1]);case 3:return u.call(t,e[0],e[1],e[2])}return u.apply(t,e)}var Gc=Ea,qs=Math.max;function vc(u,t,e){return t=qs(t===void 0?u.length-1:t,0),function(){for(var r=arguments,a=-1,f=qs(r.length-t,0),h=Array(f);++a<f;)h[a]=r[t+a];a=-1;for(var g=Array(t+1);++a<t;)g[a]=r[a];return g[t]=e(h),Gc(u,this,g)}}var Qo=vc;function To(u){return function(){return u}}var eo=To,Uo=O(55136);function ao(u){return u}var ci=ao,ms=Uo.Z?function(u,t){return(0,Uo.Z)(u,"toString",{configurable:!0,enumerable:!1,value:eo(t),writable:!0})}:ci,Or=ms,Vo=800,wa=16,ys=Date.now;function Bs(u){var t=0,e=0;return function(){var r=ys(),a=wa-(r-e);if(e=r,a>0){if(++t>=Vo)return arguments[0]}else t=0;return u.apply(void 0,arguments)}}var Ua=Bs,bo=Ua(Or),Vr=bo;function bs(u){return Vr(Qo(u,void 0,Fs),u+"")}var Jr=bs,zc=Jr(function(u,t){return u==null?{}:ii(u,t)}),jc=zc,Js=O(24507),no=O(857),Zo=O(54523);function Qs(u,t,e){(e!==void 0&&!(0,Zo.Z)(u[t],e)||e===void 0&&!(t in u))&&(0,no.Z)(u,t,e)}var xs=Qs;function Es(u){return function(t,e,r){for(var a=-1,f=Object(t),h=r(t),g=h.length;g--;){var m=h[u?g:++a];if(e(f[m],m,f)===!1)break}return t}}var Sa=Es,_a=Sa(),ts=_a,Ao=O(14054),Ca=O(11523),No=O(32126),mc=O(16448),Gs=O(49634),Mi=O(13795);function yc(u){return(0,Mi.Z)(u)&&(0,Gs.Z)(u)}var oa=yc,Ro=O(45673),es=O(88987),Ta=O(33918),Va=O(10964),Xr="[object Object]",sa=Function.prototype,yi=Object.prototype,Ke=sa.toString,Ir=yi.hasOwnProperty,bi=Ke.call(Object);function ns(u){if(!(0,Mi.Z)(u)||(0,Ta.Z)(u)!=Xr)return!1;var t=(0,Va.Z)(u);if(t===null)return!0;var e=Ir.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Ke.call(e)==bi}var Ii=ns,co=O(79064);function ro(u,t){if(!(t==="constructor"&&typeof u[t]=="function")&&t!="__proto__")return u[t]}var ta=ro,zs=O(52949),Za=O(32817);function bc(u){return(0,zs.Z)(u,(0,Za.Z)(u))}var ws=bc;function rs(u,t,e,r,a,f,h){var g=ta(u,e),m=ta(t,e),b=h.get(m);if(b){xs(u,e,b);return}var w=f?f(g,m,e+"",u,t,h):void 0,S=w===void 0;if(S){var C=(0,Rn.Z)(m),A=!C&&(0,Ro.Z)(m),B=!C&&!A&&(0,co.Z)(m);w=m,C||A||B?(0,Rn.Z)(g)?w=g:oa(g)?w=(0,No.Z)(g):A?(S=!1,w=(0,Ao.Z)(m,!0)):B?(S=!1,w=(0,Ca.Z)(m,!0)):w=[]:Ii(m)||(0,zn.Z)(m)?(w=g,(0,zn.Z)(g)?w=ws(g):(!(0,Yn.Z)(g)||(0,es.Z)(g))&&(w=(0,mc.Z)(m))):S=!1}S&&(h.set(m,w),a(w,m,r,f,h),h.delete(m)),xs(u,e,w)}var Wi=rs;function Xi(u,t,e,r,a){u!==t&&ts(t,function(f,h){if(a||(a=new Js.Z),(0,Yn.Z)(f))Wi(u,t,h,e,Xi,r,a);else{var g=r?r(ta(u,h),f,h+"",u,t,a):void 0;g===void 0&&(g=f),xs(u,h,g)}},Za.Z)}var Ss=Xi;function Do(u,t){return Vr(Qo(u,t,ci),u+"")}var uo=Do;function $a(u,t,e){if(!(0,Yn.Z)(e))return!1;var r=typeof t;return(r=="number"?(0,Gs.Z)(e)&&(0,si.Z)(t,e.length):r=="string"&&t in e)?(0,Zo.Z)(e[t],u):!1}var Ha=$a;function $o(u){return uo(function(t,e){var r=-1,a=e.length,f=a>1?e[a-1]:void 0,h=a>2?e[2]:void 0;for(f=u.length>3&&typeof f=="function"?(a--,f):void 0,h&&Ha(e[0],e[1],h)&&(f=a<3?void 0:f,a=1),t=Object(t);++r<a;){var g=e[r];g&&u(t,g,r,f)}return t})}var Au=$o,Wa=Au(function(u,t,e){Ss(u,t,e)}),xi=Wa,Uc=O(91380),Vc="__lodash_hash_undefined__";function Ou(u){return this.__data__.set(u,Vc),this}var is=Ou;function Zc(u){return this.__data__.has(u)}var Mu=Zc;function os(u){var t=-1,e=u==null?0:u.length;for(this.__data__=new Uc.Z;++t<e;)this.add(u[t])}os.prototype.add=os.prototype.push=is,os.prototype.has=Mu;var lo=os;function Xa(u,t){for(var e=-1,r=u==null?0:u.length;++e<r;)if(t(u[e],e,u))return!0;return!1}var Ya=Xa;function Iu(u,t){return u.has(t)}var Aa=Iu,Ka=1,$c=2;function Hc(u,t,e,r,a,f){var h=e&Ka,g=u.length,m=t.length;if(g!=m&&!(h&&m>g))return!1;var b=f.get(u),w=f.get(t);if(b&&w)return b==t&&w==u;var S=-1,C=!0,A=e&$c?new lo:void 0;for(f.set(u,t),f.set(t,u);++S<g;){var B=u[S],j=t[S];if(r)var H=h?r(j,B,S,t,u,f):r(B,j,S,u,t,f);if(H!==void 0){if(H)continue;C=!1;break}if(A){if(!Ya(t,function(nt,ct){if(!Aa(A,ct)&&(B===nt||a(B,nt,e,r,f)))return A.push(ct)})){C=!1;break}}else if(!(B===j||a(B,j,e,r,f))){C=!1;break}}return f.delete(u),f.delete(t),C}var Pu=Hc,Ct=O(16299);function Jt(u){var t=-1,e=Array(u.size);return u.forEach(function(r,a){e[++t]=[a,r]}),e}var ne=Jt;function me(u){var t=-1,e=Array(u.size);return u.forEach(function(r){e[++t]=r}),e}var Me=me,An=1,On=2,Nn="[object Boolean]",$n="[object Date]",er="[object Error]",Cr="[object Map]",mr="[object Number]",br="[object RegExp]",Qr="[object Set]",hi="[object String]",or="[object Symbol]",Ei="[object ArrayBuffer]",Zr="[object DataView]",ui=vs.Z?vs.Z.prototype:void 0,Dr=ui?ui.valueOf:void 0;function _s(u,t,e,r,a,f,h){switch(e){case Zr:if(u.byteLength!=t.byteLength||u.byteOffset!=t.byteOffset)return!1;u=u.buffer,t=t.buffer;case Ei:return!(u.byteLength!=t.byteLength||!f(new Ct.Z(u),new Ct.Z(t)));case Nn:case $n:case mr:return(0,Zo.Z)(+u,+t);case er:return u.name==t.name&&u.message==t.message;case br:case hi:return u==t+"";case Cr:var g=ne;case Qr:var m=r&An;if(g||(g=Me),u.size!=t.size&&!m)return!1;var b=h.get(u);if(b)return b==t;r|=On,h.set(u,t);var w=Pu(g(u),g(t),r,a,f,h);return h.delete(u),w;case or:if(Dr)return Dr.call(u)==Dr.call(t)}return!1}var Ci=_s,ti=O(38366),Tr=1,Cs=Object.prototype,io=Cs.hasOwnProperty;function $r(u,t,e,r,a,f){var h=e&Tr,g=(0,ti.Z)(u),m=g.length,b=(0,ti.Z)(t),w=b.length;if(m!=w&&!h)return!1;for(var S=m;S--;){var C=g[S];if(!(h?C in t:io.call(t,C)))return!1}var A=f.get(u),B=f.get(t);if(A&&B)return A==t&&B==u;var j=!0;f.set(u,t),f.set(t,u);for(var H=h;++S<m;){C=g[S];var nt=u[C],ct=t[C];if(r)var Y=h?r(ct,nt,C,t,u,f):r(nt,ct,C,u,t,f);if(!(Y===void 0?nt===ct||a(nt,ct,e,r,f):Y)){j=!1;break}H||(H=C=="constructor")}if(j&&!H){var Pt=u.constructor,Xt=t.constructor;Pt!=Xt&&"constructor"in u&&"constructor"in t&&!(typeof Pt=="function"&&Pt instanceof Pt&&typeof Xt=="function"&&Xt instanceof Xt)&&(j=!1)}return f.delete(u),f.delete(t),j}var fo=$r,Ho=O(23313),aa=1,Hr="[object Arguments]",ca="[object Array]",ho="[object Object]",xo=Object.prototype,ss=xo.hasOwnProperty;function js(u,t,e,r,a,f){var h=(0,Rn.Z)(u),g=(0,Rn.Z)(t),m=h?ca:(0,Ho.Z)(u),b=g?ca:(0,Ho.Z)(t);m=m==Hr?ho:m,b=b==Hr?ho:b;var w=m==ho,S=b==ho,C=m==b;if(C&&(0,Ro.Z)(u)){if(!(0,Ro.Z)(t))return!1;h=!0,w=!1}if(C&&!w)return f||(f=new Js.Z),h||(0,co.Z)(u)?Pu(u,t,e,r,a,f):Ci(u,t,m,e,r,a,f);if(!(e&aa)){var A=w&&ss.call(u,"__wrapped__"),B=S&&ss.call(t,"__wrapped__");if(A||B){var j=A?u.value():u,H=B?t.value():t;return f||(f=new Js.Z),a(j,H,e,r,f)}}return C?(f||(f=new Js.Z),fo(u,t,e,r,a,f)):!1}var ea=js;function na(u,t,e,r,a){return u===t?!0:u==null||t==null||!(0,Mi.Z)(u)&&!(0,Mi.Z)(t)?u!==u&&t!==t:ea(u,t,e,r,na,a)}var as=na;function qa(u,t){return as(u,t)}var wi=qa,Ja=O(88343),Nu=O(5196),Ru="[object Map]",Wc="[object Set]",Qa=Object.prototype,yl=Qa.hasOwnProperty;function Bh(u){if(u==null)return!0;if((0,Gs.Z)(u)&&((0,Rn.Z)(u)||typeof u=="string"||typeof u.splice=="function"||(0,Ro.Z)(u)||(0,co.Z)(u)||(0,zn.Z)(u)))return!u.length;var t=(0,Ho.Z)(u);if(t==Ru||t==Wc)return!u.size;if((0,Nu.Z)(u))return!(0,Ja.Z)(u).length;for(var e in u)if(yl.call(u,e))return!1;return!0}var xc=Bh,Du=O(12653),Lu=4;function wf(u){return(0,Du.Z)(u,Lu)}var ua=wf,vi=O(54834),bl=Object.prototype,Sf=bl.hasOwnProperty,_f=uo(function(u,t){u=Object(u);var e=-1,r=t.length,a=r>2?t[2]:void 0;for(a&&Ha(t[0],t[1],a)&&(r=1);++e<r;)for(var f=t[e],h=(0,Za.Z)(f),g=-1,m=h.length;++g<m;){var b=h[g],w=u[b];(w===void 0||(0,Zo.Z)(w,bl[b])&&!Sf.call(u,b))&&(u[b]=f[b])}return u}),xl=_f;function El(u,t,e,r,a,f){return(0,Yn.Z)(u)&&(0,Yn.Z)(t)&&(f.set(t,u),Ss(u,t,void 0,El,f),f.delete(t)),u}var Xc=El,wl=Au(function(u,t,e,r){Ss(u,t,e,r)}),Yc=wl,Sl=uo(function(u){return u.push(void 0,Xc),Gc(Yc,void 0,u)}),ku=Sl;function Fu(u,...t){t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(u.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})})}const Kc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,t){u.__proto__=t}||function(u,t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(u[e]=t[e])};function Oa(u,t){Kc(u,t);function e(){this.constructor=u}u.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}class Cf{}const Bu=/^\s*class\s+/.test(`${Cf}`)||/^\s*class\s*\{/.test(`${class{}}`);function _l(u,t){let e;return Bu?e=class extends t{}:(e=function(){return t.apply(this,arguments)},Oa(e,t)),Object.defineProperty(e,"name",{value:u}),e}function qc(u,t){return u!=null?u:t}function Gh(u,t,e){const r=u!=null?u[t]:null;return e!==void 0?qc(r,e):r}function Cl(u,t,e){let r=u!=null?u[t]:null;return r==null||(r=+r,Number.isNaN(r)||!Number.isFinite(r))?e:r}function zh(u,t,e){const r=u!=null?u[t]:null;return r==null?e:!!r}function Tl(u){return u==="__proto__"}function Gu(u,t,e="/"){let r;const a=Array.isArray(t)?t:t.split(e);if(a.length)for(r=u;a.length;){const f=a.shift();if(Object(r)===r&&f&&f in r)r=r[f];else return}return r}function Us(u,t,e,r="/"){const a=Array.isArray(t)?t:t.split(r),f=a.pop();if(f&&!Tl(f)){let h=u;a.forEach(g=>{Tl(g)||(h[g]==null&&(h[g]={}),h=h[g])}),h[f]=e}return u}function Al(u,t,e="/"){const r=Array.isArray(t)?t.slice():t.split(e),a=r.pop();if(a)if(r.length>0){const f=Gu(u,r);f&&delete f[a]}else delete u[a];return u}function Ec(u,t="/",e){const r={};Object.keys(u).forEach(a=>{const f=u[a];let h=typeof f=="object"||Array.isArray(f);if(h&&e&&e(f)&&(h=!1),h){const g=Ec(f,t,e);Object.keys(g).forEach(m=>{r[a+t+m]=g[m]})}else r[a]=f});for(const a in u)Object.prototype.hasOwnProperty.call(u,a);return r}class cs extends Dt{}(function(u){u.dispose=Qe.dispose})(cs||(cs={})),Fu(cs,Qe);class jh extends null{get disabled(){return this._disabled===!0}enable(){delete this._disabled}disable(){this._disabled=!0}}function Ol(u,t,e,r){for(var a=u.length,f=e+(r?1:-1);r?f--:++f<a;)if(t(u[f],f,u))return f;return-1}var Kd=Ol;function Jc(u){return u!==u}var la=Jc;function Uh(u,t,e){for(var r=e-1,a=u.length;++r<a;)if(u[r]===t)return r;return-1}var wc=Uh;function Vh(u,t,e){return t===t?wc(u,t,e):Kd(u,la,e)}var Tf=Vh;function Af(u,t){var e=u==null?0:u.length;return!!e&&Tf(u,t,0)>-1}var Zh=Af;function tc(u,t,e){for(var r=-1,a=u==null?0:u.length;++r<a;)if(e(t,u[r]))return!0;return!1}var ec=tc,nc=O(36169);function Qc(){}var Ts=Qc,rc=1/0,Ml=nc.Z&&1/Me(new nc.Z([,-0]))[1]==rc?function(u){return new nc.Z(u)}:Ts,Of=Ml,zu=200;function Il(u,t,e){var r=-1,a=Zh,f=u.length,h=!0,g=[],m=g;if(e)h=!1,a=ec;else if(f>=zu){var b=t?null:Of(u);if(b)return Me(b);h=!1,a=Aa,m=new lo}else m=t?[]:g;t:for(;++r<f;){var w=u[r],S=t?t(w):w;if(w=e||w!==0?w:0,h&&S===S){for(var C=m.length;C--;)if(m[C]===S)continue t;t&&m.push(S),g.push(w)}else a(m,S,e)||(m!==g&&m.push(S),g.push(w))}return g}var tu=Il;function Mf(u){return u&&u.length?tu(u):[]}var If=Mf,eu=uo(function(u){return tu(ai(u,1,oa,!0))}),Gi=eu,fa=O(98111),Pl=4294967295,Oo=Pl-1,$h=Math.floor,Nl=Math.min;function Hh(u,t,e,r){var a=0,f=u==null?0:u.length;if(f===0)return 0;t=e(t);for(var h=t!==t,g=t===null,m=(0,fa.Z)(t),b=t===void 0;a<f;){var w=$h((a+f)/2),S=e(u[w]),C=S!==void 0,A=S===null,B=S===S,j=(0,fa.Z)(S);if(h)var H=r||B;else b?H=B&&(r||C):g?H=B&&C&&(r||!A):m?H=B&&C&&!A&&(r||!j):A||j?H=!1:H=r?S<=t:S<t;H?a=w+1:f=w}return Nl(f,Oo)}var nu=Hh,Wh=4294967295,Pf=Wh>>>1;function ju(u,t,e){var r=0,a=u==null?r:u.length;if(typeof t=="number"&&t===t&&a<=Pf){for(;r<a;){var f=r+a>>>1,h=u[f];h!==null&&!(0,fa.Z)(h)&&(e?h<=t:h<t)?r=f+1:a=f}return a}return nu(u,t,ci,e)}var Xh=ju;function Nf(u,t){return Xh(u,t)}var Rl=Nf,Rf=1,us=2;function ra(u,t,e,r){var a=e.length,f=a,h=!r;if(u==null)return!f;for(u=Object(u);a--;){var g=e[a];if(h&&g[2]?g[1]!==u[g[0]]:!(g[0]in u))return!1}for(;++a<f;){g=e[a];var m=g[0],b=u[m],w=g[1];if(h&&g[2]){if(b===void 0&&!(m in u))return!1}else{var S=new Js.Z;if(r)var C=r(b,w,m,u,t,S);if(!(C===void 0?as(w,b,Rf|us,r,S):C))return!1}}return!0}var ru=ra;function As(u){return u===u&&!(0,Yn.Z)(u)}var Sc=As,Dl=O(77251);function iu(u){for(var t=(0,Dl.Z)(u),e=t.length;e--;){var r=t[e],a=u[r];t[e]=[r,a,Sc(a)]}return t}var Df=iu;function Lf(u,t){return function(e){return e==null?!1:e[u]===t&&(t!==void 0||u in Object(e))}}var Ll=Lf;function kl(u){var t=Df(u);return t.length==1&&t[0][2]?Ll(t[0][0],t[0][1]):function(e){return e===u||ru(e,u,t)}}var kf=kl;function Yh(u,t,e){var r=u==null?void 0:Ls(u,t);return r===void 0?e:r}var Fl=Yh,Os=O(61070),Kh=1,qd=2;function ha(u,t){return(0,Os.Z)(u)&&Sc(t)?Ll((0,qr.Z)(u),t):function(e){var r=Fl(e,u);return r===void 0&&r===t?yo(e,u):as(t,r,Kh|qd)}}var z=ha;function P(u){return function(t){return t==null?void 0:t[u]}}var I=P;function G(u){return function(t){return Ls(t,u)}}var F=G;function st(u){return(0,Os.Z)(u)?I((0,qr.Z)(u)):F(u)}var at=st;function Mt(u){return typeof u=="function"?u:u==null?ci:typeof u=="object"?(0,Rn.Z)(u)?z(u[0],u[1]):kf(u):at(u)}var It=Mt;function Wt(u,t,e){return nu(u,t,It(e,2))}var re=Wt,he=O(28019);function Se(u,t){return u&&ts(u,t,Dl.Z)}var Mn=Se;function hn(u,t){return function(e,r){if(e==null)return e;if(!(0,Gs.Z)(e))return u(e,r);for(var a=e.length,f=t?a:-1,h=Object(e);(t?f--:++f<a)&&r(h[f],f,h)!==!1;);return e}}var ze=hn,Ue=ze(Mn),Te=Ue;function fn(u,t){var e=-1,r=(0,Gs.Z)(u)?Array(u.length):[];return Te(u,function(a,f,h){r[++e]=t(a,f,h)}),r}var We=fn;function sn(u,t){var e=u.length;for(u.sort(t);e--;)u[e]=u[e].value;return u}var Fn=sn,an=O(5467);function In(u,t){if(u!==t){var e=u!==void 0,r=u===null,a=u===u,f=(0,fa.Z)(u),h=t!==void 0,g=t===null,m=t===t,b=(0,fa.Z)(t);if(!g&&!b&&!f&&u>t||f&&h&&m&&!g&&!b||r&&h&&m||!e&&m||!a)return 1;if(!r&&!f&&!b&&u<t||b&&e&&a&&!r&&!f||g&&e&&a||!h&&a||!m)return-1}return 0}var sr=In;function dr(u,t,e){for(var r=-1,a=u.criteria,f=t.criteria,h=a.length,g=e.length;++r<h;){var m=sr(a[r],f[r]);if(m){if(r>=g)return m;var b=e[r];return m*(b=="desc"?-1:1)}}return u.index-t.index}var Bn=dr;function Ar(u,t,e){t.length?t=(0,he.Z)(t,function(f){return(0,Rn.Z)(f)?function(h){return Ls(h,f.length===1?f[0]:f)}:f}):t=[ci];var r=-1;t=(0,he.Z)(t,(0,an.Z)(It));var a=We(u,function(f,h,g){var m=(0,he.Z)(t,function(b){return b(f)});return{criteria:m,index:++r,value:f}});return Fn(a,function(f,h){return Bn(f,h,e)})}var rr=Ar,yr=uo(function(u,t){if(u==null)return[];var e=t.length;return e>1&&Ha(u,t[0],t[1])?t=[]:e>2&&Ha(t[0],t[1],t[2])&&(t=[t[0]]),rr(u,ai(t,1),[])}),Rr=yr;function Pi(u,t,e,r){for(var a=-1,f=u==null?0:u.length;++a<f;){var h=u[a];t(r,h,e(h),u)}return r}var Mo=Pi;function Ma(u,t,e,r){return Te(u,function(a,f,h){t(r,a,e(a),h)}),r}var Bl=Ma;function Ff(u,t){return function(e,r){var a=(0,Rn.Z)(e)?Mo:Bl,f=t?t():{};return a(e,u,It(r,2),f)}}var Gl=Ff,zl=Object.prototype,Ms=zl.hasOwnProperty,ic=Gl(function(u,t,e){Ms.call(u,e)?u[e].push(t):(0,no.Z)(u,e,[t])}),jl=ic,Uu=200;function fp(u,t,e,r){var a=-1,f=Zh,h=!0,g=u.length,m=[],b=t.length;if(!g)return m;e&&(t=(0,he.Z)(t,(0,an.Z)(e))),r?(f=ec,h=!1):t.length>=Uu&&(f=Aa,h=!1,t=new lo(t));t:for(;++a<g;){var w=u[a],S=e==null?w:e(w);if(w=r||w!==0?w:0,h&&S===S){for(var C=b;C--;)if(t[C]===S)continue t;m.push(w)}else f(t,S,r)||m.push(w)}return m}var Jd=fp,Ul=uo(function(u,t){return oa(u)?Jd(u,ai(t,1,oa,!0)):[]}),hp=Ul;function Vl(u,t,e){for(var r=-1,a=u.length;++r<a;){var f=u[r],h=t(f);if(h!=null&&(g===void 0?h===h&&!(0,fa.Z)(h):e(h,g)))var g=h,m=f}return m}var dp=Vl;function Vu(u,t){return u>t}var Zu=Vu;function gp(u){return u&&u.length?dp(u,ci,Zu):void 0}var ou=gp,su=O(99757),_c=0;function qh(u){var t=++_c;return(0,su.Z)(u)+t}var Jh=qh;function Qh(u,t,e,r){var a=-1,f=u==null?0:u.length;for(r&&f&&(e=u[++a]);++a<f;)e=t(e,u[a],a,u);return e}var Bf=Qh;function Gf(u){return function(t){return u==null?void 0:u[t]}}var zf=Gf,td={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Qd=zf(td),ed=Qd,nd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tg="\\u0300-\\u036f",jf="\\ufe20-\\ufe2f",Uf="\\u20d0-\\u20ff",rd=tg+jf+Uf,pp="["+rd+"]",eg=RegExp(pp,"g");function ng(u){return u=(0,su.Z)(u),u&&u.replace(nd,ed).replace(eg,"")}var id=ng,rg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function vp(u){return u.match(rg)||[]}var od=vp,ig=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function og(u){return ig.test(u)}var sd=og,ad="\\ud800-\\udfff",sg="\\u0300-\\u036f",cd="\\ufe20-\\ufe2f",ag="\\u20d0-\\u20ff",cg=sg+cd+ag,$u="\\u2700-\\u27bf",Vf="a-z\\xdf-\\xf6\\xf8-\\xff",Zl="\\xac\\xb1\\xd7\\xf7",ug="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zf="\\u2000-\\u206f",da=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Hu="A-Z\\xc0-\\xd6\\xd8-\\xde",au="\\ufe0e\\ufe0f",Wu=Zl+ug+Zf+da,Xu="['\u2019]",Cc="["+Wu+"]",cu="["+cg+"]",Tc="\\d+",$f="["+$u+"]",$l="["+Vf+"]",Yu="[^"+ad+Wu+Tc+$u+Vf+Hu+"]",ud="\\ud83c[\\udffb-\\udfff]",ld="(?:"+cu+"|"+ud+")",Ku="[^"+ad+"]",oc="(?:\\ud83c[\\udde6-\\uddff]){2}",Hf="[\\ud800-\\udbff][\\udc00-\\udfff]",qu="["+Hu+"]",lg="\\u200d",Hl="(?:"+$l+"|"+Yu+")",fg="(?:"+qu+"|"+Yu+")",Wl="(?:"+Xu+"(?:d|ll|m|re|s|t|ve))?",Ia="(?:"+Xu+"(?:D|LL|M|RE|S|T|VE))?",fd=ld+"?",uu="["+au+"]?",mp="(?:"+lg+"(?:"+[Ku,oc,Hf].join("|")+")"+uu+fd+")*",Wo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ju="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Xl=uu+fd+mp,Wf="(?:"+[$f,oc,Hf].join("|")+")"+Xl,Xf=RegExp([qu+"?"+$l+"+"+Wl+"(?="+[Cc,qu,"$"].join("|")+")",fg+"+"+Ia+"(?="+[Cc,qu+Hl,"$"].join("|")+")",qu+"?"+Hl+"+"+Wl,qu+"+"+Ia,Ju,Wo,Tc,Wf].join("|"),"g");function hd(u){return u.match(Xf)||[]}var yp=hd;function Qu(u,t,e){return u=(0,su.Z)(u),t=e?void 0:t,t===void 0?sd(u)?yp(u):od(u):u.match(t)||[]}var Yf=Qu,bp="['\u2019]",xp=RegExp(bp,"g");function dd(u){return function(t){return Bf(Yf(id(t).replace(xp,"")),u,"")}}var lu=dd;function Kf(u,t,e){var r=-1,a=u.length;t<0&&(t=-t>a?0:a+t),e=e>a?a:e,e<0&&(e+=a),a=t>e?0:e-t>>>0,t>>>=0;for(var f=Array(a);++r<a;)f[r]=u[r+t];return f}var sc=Kf;function tl(u,t,e){var r=u.length;return e=e===void 0?r:e,!t&&e>=r?u:sc(u,t,e)}var qf=tl,Jf="\\ud800-\\udfff",Qf="\\u0300-\\u036f",gd="\\ufe20-\\ufe2f",Yl="\\u20d0-\\u20ff",th=Qf+gd+Yl,Is="\\ufe0e\\ufe0f",Xo="\\u200d",el=RegExp("["+Xo+Jf+th+Is+"]");function Kl(u){return el.test(u)}var nl=Kl;function ac(u){return u.split("")}var hg=ac,rl="\\ud800-\\udfff",fu="\\u0300-\\u036f",pd="\\ufe20-\\ufe2f",Pa="\\u20d0-\\u20ff",Ps=fu+pd+Pa,dg="\\ufe0e\\ufe0f",ql="["+rl+"]",ia="["+Ps+"]",Jl="\\ud83c[\\udffb-\\udfff]",gg="(?:"+ia+"|"+Jl+")",vd="[^"+rl+"]",Ac="(?:\\ud83c[\\udde6-\\uddff]){2}",md="[\\ud800-\\udbff][\\udc00-\\udfff]",Ep="\\u200d",ga=gg+"?",yd="["+dg+"]?",il="(?:"+Ep+"(?:"+[vd,Ac,md].join("|")+")"+yd+ga+")*",Oc=yd+ga+il,pg="(?:"+[vd+ia+"?",ia,Ac,md,ql].join("|")+")",bd=RegExp(Jl+"(?="+Jl+")|"+pg+Oc,"g");function Na(u){return u.match(bd)||[]}var ol=Na;function Eo(u){return nl(u)?ol(u):hg(u)}var Mc=Eo;function Yi(u){return function(t){t=(0,su.Z)(t);var e=nl(t)?Mc(t):void 0,r=e?e[0]:t.charAt(0),a=e?qf(e,1).join(""):t.slice(1);return r[u]()+a}}var ls=Yi,vg=ls("toUpperCase"),Ql=vg,wp=lu(function(u,t,e){return u+(e?" ":"")+Ql(t)}),mg=wp;function sl(u){return Ql((0,su.Z)(u).toLowerCase())}var xd=sl,Sp=lu(function(u,t,e){return t=t.toLowerCase(),u+(e?xd(t):t)}),tf=Sp,eh=lu(function(u,t,e){return u+(e?" ":"")+t.toUpperCase()}),_p=eh,Cp=lu(function(u,t,e){return u+(e?" ":"")+t.toLowerCase()}),nh=Cp,yg=ls("toLowerCase"),hu=yg;const Ra=u=>{const t=Object.create(null);return e=>t[e]||(t[e]=u(e))},bg=Ra(u=>u.replace(/\B([A-Z])/g,"-$1").toLowerCase()),cc=Ra(u=>mg(tf(u)).replace(/ /g,"")),ef=Ra(u=>_p(u).replace(/ /g,"_")),N=Ra(u=>nh(u).replace(/ /g,".")),X=Ra(u=>nh(u).replace(/ /g,"/")),lt=Ra(u=>Ql(nh(u))),ee=Ra(u=>mg(tf(u)));function ge(u){let t=2166136261,e=!1,r=u;for(let a=0,f=r.length;a<f;a+=1){let h=r.charCodeAt(a);h>127&&!e&&(r=unescape(encodeURIComponent(r)),h=r.charCodeAt(a),e=!0),t^=h,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}return t>>>0}function Kt(){let u="";const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let e=0,r=t.length;e<r;e+=1){const a=t[e],f=Math.random()*16|0,h=a==="x"?f:a==="y"?f&3|8:a;u+=h.toString(16)}return u}function oe(u,t,e){const r=Math.min(2,Math.floor(u.length*.34));let a=Math.floor(u.length*.4)+1,f,h=!1;const g=u.toLowerCase();for(const m of t){const b=e(m);if(b!==void 0&&Math.abs(b.length-g.length)<=r){const w=b.toLowerCase();if(w===g){if(b===u)continue;return m}if(h||b.length<3)continue;const S=_e(g,w,a-1);if(S===void 0)continue;S<3?(h=!0,f=m):(a=S,f=m)}}return f}function _e(u,t,e){let r=new Array(t.length+1),a=new Array(t.length+1);const f=e+1;for(let g=0;g<=t.length;g+=1)r[g]=g;for(let g=1;g<=u.length;g+=1){const m=u.charCodeAt(g-1),b=g>e?g-e:1,w=t.length>e+g?e+g:t.length;a[0]=g;let S=g;for(let A=1;A<b;A+=1)a[A]=f;for(let A=b;A<=w;A+=1){const B=m===t.charCodeAt(A-1)?r[A-1]:Math.min(r[A]+1,a[A-1]+1,r[A-1]+2);a[A]=B,S=Math.min(S,B)}for(let A=w+1;A<=t.length;A+=1)a[A]=f;if(S>e)return;const C=r;r=a,a=C}const h=r[t.length];return h>e?void 0:h}var Ie="[object Number]";function Be(u){return typeof u=="number"||(0,Mi.Z)(u)&&(0,Ta.Z)(u)==Ie}var Pe=Be;function Ve(u,t,e){return u===u&&(e!==void 0&&(u=u<=e?u:e),t!==void 0&&(u=u>=t?u:t)),u}var $e=Ve,ve=O(28106);function Ze(u,t,e){return e===void 0&&(e=t,t=void 0),e!==void 0&&(e=(0,ve.Z)(e),e=e===e?e:0),t!==void 0&&(t=(0,ve.Z)(t),t=t===t?t:0),$e((0,ve.Z)(u),t,e)}var Nt=Ze;function se(u,t){return(u%t+t)%t}function ke(u,t){if(t==null)t=u==null?1:u,u=0;else if(t<u){const e=u;u=t,t=e}return Math.floor(Math.random()*(t-u+1)+u)}function He(u){return typeof u=="string"&&u.slice(-1)==="%"}function ie(u,t){if(u==null)return 0;let e;if(typeof u=="string"){if(e=parseFloat(u),He(u)&&(e/=100,Number.isFinite(e)))return e*t}else e=u;return Number.isFinite(e)?e>0&&e<1?e*t:e:0}function cn(u,t){function e(h){const g=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${h})$`).exec(u);return g?g[1]:null}const r=parseFloat(u);if(Number.isNaN(r))return null;let a;if(t==null)a="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;a=t.join("|")}else typeof t=="string"&&(a=t);const f=e(a);return f===null?null:{unit:f,value:r}}function Ee(u){if(typeof u=="object"){let e=0,r=0,a=0,f=0;return u.vertical!=null&&Number.isFinite(u.vertical)&&(r=f=u.vertical),u.horizontal!=null&&Number.isFinite(u.horizontal)&&(a=e=u.horizontal),u.left!=null&&Number.isFinite(u.left)&&(e=u.left),u.top!=null&&Number.isFinite(u.top)&&(r=u.top),u.right!=null&&Number.isFinite(u.right)&&(a=u.right),u.bottom!=null&&Number.isFinite(u.bottom)&&(f=u.bottom),{top:r,right:a,bottom:f,left:e}}let t=0;return u!=null&&Number.isFinite(u)&&(t=u),{top:t,right:t,bottom:t,left:t}}let Ge=!1,Ce=!1,je=!1,Ln=!1,Wn=!1,Xe=!1,Fe=!1,we=!1,Zn=!1,cr=!1,dn=!1,Qn=!1,Vn=!1,gr=!1,Lr=!1,zi=!1;if(typeof navigator=="object"){const u=navigator.userAgent;Ge=u.indexOf("Macintosh")>=0,Ce=!!u.match(/(iPad|iPhone|iPod)/g),je=u.indexOf("Windows")>=0,Ln=u.indexOf("MSIE")>=0,Wn=!!u.match(/Trident\/7\./),Xe=!!u.match(/Edge\//),Fe=u.indexOf("Mozilla/")>=0&&u.indexOf("MSIE")<0&&u.indexOf("Edge/")<0,Zn=u.indexOf("Chrome/")>=0&&u.indexOf("Edge/")<0,cr=u.indexOf("Opera/")>=0||u.indexOf("OPR/")>=0,dn=u.indexOf("Firefox/")>=0,Qn=u.indexOf("AppleWebKit/")>=0&&u.indexOf("Chrome/")<0&&u.indexOf("Edge/")<0,typeof document=="object"&&(zi=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||u.indexOf("Opera/")>=0)}if(typeof window=="object"&&(we=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,gr=window.PointerEvent!=null&&!Ge),typeof document=="object"){Vn="ontouchstart"in document.documentElement;try{const u=Object.defineProperty({},"passive",{get(){Lr=!0}}),t=document.createElement("div");t.addEventListener&&t.addEventListener("click",()=>{},u)}catch(u){}}var mi;(function(u){u.IS_MAC=Ge,u.IS_IOS=Ce,u.IS_WINDOWS=je,u.IS_IE=Ln,u.IS_IE11=Wn,u.IS_EDGE=Xe,u.IS_NETSCAPE=Fe,u.IS_CHROME_APP=we,u.IS_CHROME=Zn,u.IS_OPERA=cr,u.IS_FIREFOX=dn,u.IS_SAFARI=Qn,u.SUPPORT_TOUCH=Vn,u.SUPPORT_POINTER=gr,u.SUPPORT_PASSIVE=Lr,u.NO_FOREIGNOBJECT=zi,u.SUPPORT_FOREIGNOBJECT=!u.NO_FOREIGNOBJECT})(mi||(mi={})),function(u){function t(){const f=window.module;return f!=null&&f.hot!=null&&f.hot.status!=null?f.hot.status():"unkonwn"}u.getHMRStatus=t;function e(){return t()==="apply"}u.isApplyingHMR=e;const r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function a(f){const h=document.createElement(r[f]||"div"),g=`on${f}`;let m=g in h;return m||(h.setAttribute(g,"return;"),m=typeof h[g]=="function"),m}u.isEventSupported=a}(mi||(mi={}));const ar=/[\t\r\n\f]/g,ji=/\S+/g,Wr=u=>` ${u} `;function li(u){return u&&u.getAttribute&&u.getAttribute("class")||""}function di(u,t){if(u==null||t==null)return!1;const e=Wr(li(u)),r=Wr(t);return u.nodeType===1?e.replace(ar," ").includes(r):!1}function tr(u,t){if(!(u==null||t==null)){if(typeof t=="function")return tr(u,t(li(u)));if(typeof t=="string"&&u.nodeType===1){const e=t.match(ji)||[],r=Wr(li(u)).replace(ar," ");let a=e.reduce((f,h)=>f.indexOf(Wr(h))<0?`${f}${h} `:f,r);a=a.trim(),r!==a&&u.setAttribute("class",a)}}}function ei(u,t){if(u!=null){if(typeof t=="function")return ei(u,t(li(u)));if((!t||typeof t=="string")&&u.nodeType===1){const e=(t||"").match(ji)||[],r=Wr(li(u)).replace(ar," ");let a=e.reduce((f,h)=>{const g=Wr(h);return f.indexOf(g)>-1?f.replace(g," "):f},r);a=t?a.trim():"",r!==a&&u.setAttribute("class",a)}}}function oo(u,t,e){if(!(u==null||t==null)){if(e!=null&&typeof t=="string"){e?tr(u,t):ei(u,t);return}if(typeof t=="function")return oo(u,t(li(u),e),e);typeof t=="string"&&(t.match(ji)||[]).forEach(a=>{di(u,a)?ei(u,a):tr(u,a)})}}let Si=0;function ur(){return Si+=1,`v${Si}`}function Ui(u){return(u.id==null||u.id==="")&&(u.id=ur()),u.id}function xr(u){return u==null?!1:typeof u.getScreenCTM=="function"&&u instanceof SVGElement}const gn={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Er="1.1";function Pr(u,t=document){return t.createElement(u)}function gi(u,t=gn.xhtml,e=document){return e.createElementNS(t,u)}function wo(u,t=document){return gi(u,gn.svg,t)}function Vs(u){if(u){const e=`<svg xmlns="${gn.svg}" xmlns:xlink="${gn.xlink}" version="${Er}">${u}</svg>`,{documentElement:r}=it(e,{async:!1});return r}const t=document.createElementNS(gn.svg,"svg");return t.setAttributeNS(gn.xmlns,"xmlns:xlink",gn.xlink),t.setAttribute("version",Er),t}function it(u,t={}){let e;try{const r=new DOMParser;if(t.async!=null){const a=r;a.async=t.async}e=r.parseFromString(u,t.mimeType||"text/xml")}catch(r){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${u}`);return e}function te(u,t=!0){const e=u.nodeName;return t?e.toLowerCase():e.toUpperCase()}function Yt(u){let t=0,e=u.previousSibling;for(;e;)e.nodeType===1&&(t+=1),e=e.previousSibling;return t}function un(u,t){return u.querySelectorAll(t)}function wr(u,t){return u.querySelector(t)}function et(u,t,e){const r=u.ownerSVGElement;let a=u.parentNode;for(;a&&a!==e&&a!==r;){if(di(a,t))return a;a=a.parentNode}return null}function $(u,t){const e=t&&t.parentNode;return u===e||!!(e&&e.nodeType===1&&u.compareDocumentPosition(e)&16)}function pt(u){u&&(Array.isArray(u)?u:[u]).forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}function Rt(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Ft(u,t){(Array.isArray(t)?t:[t]).forEach(r=>{r!=null&&u.appendChild(r)})}function _t(u,t){const e=u.firstChild;return e?mt(e,t):Ft(u,t)}function mt(u,t){const e=u.parentNode;e&&(Array.isArray(t)?t:[t]).forEach(a=>{a!=null&&e.insertBefore(a,u)})}function Ot(u,t){const e=u.parentNode;e&&(Array.isArray(t)?t:[t]).forEach(a=>{a!=null&&e.insertBefore(a,u.nextSibling)})}function tt(u,t){t!=null&&t.appendChild(u)}function dt(u){return!!u&&u.nodeType===1}function q(u){try{return u instanceof HTMLElement}catch(t){return typeof u=="object"&&u.nodeType===1&&typeof u.style=="object"&&typeof u.ownerDocument=="object"}}function Lt(u,t){const e=[];let r=u.firstChild;for(;r;r=r.nextSibling)r.nodeType===1&&(!t||di(r,t))&&e.push(r);return e}const Vt=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust"];function de(u,t){return u.getAttribute(t)}function ye(u,t){const e=ir(t);e.ns?u.hasAttributeNS(e.ns,e.local)&&u.removeAttributeNS(e.ns,e.local):u.hasAttribute(t)&&u.removeAttribute(t)}function ae(u,t,e){if(e==null)return ye(u,t);const r=ir(t);r.ns&&typeof e=="string"?u.setAttributeNS(r.ns,t,e):t==="id"?u.id=`${e}`:u.setAttribute(t,`${e}`)}function Re(u,t){Object.keys(t).forEach(e=>{ae(u,e,t[e])})}function Ye(u,t,e){if(t==null){const r=u.attributes,a={};for(let f=0;f<r.length;f+=1)a[r[f].name]=r[f].value;return a}if(typeof t=="string"&&e===void 0)return u.getAttribute(t);typeof t=="object"?Re(u,t):ae(u,t,e)}function ir(u){if(u.indexOf(":")!==-1){const t=u.split(":");return{ns:gn[t[0]],local:t[1]}}return{ns:null,local:u}}function ln(u){const t={};return Object.keys(u).forEach(e=>{const r=Vt.includes(e)?e:bg(e);t[r]=u[e]}),t}function Gn(u){const t={};return u.split(";").forEach(r=>{const a=r.trim();if(a){const f=a.split("=");f.length&&(t[f[0].trim()]=f[1]?f[1].trim():"")}}),t}function Xn(u,t){return Object.keys(t).forEach(e=>{if(e==="class")u[e]=u[e]?`${u[e]} ${t[e]}`:t[e];else if(e==="style"){const r=typeof u[e]=="object",a=typeof t[e]=="object";let f,h;r&&a?(f=u[e],h=t[e]):r?(f=u[e],h=Gn(t[e])):a?(f=Gn(u[e]),h=t[e]):(f=Gn(u[e]),h=Gn(t[e])),u[e]=Xn(f,h)}else u[e]=t[e]}),u}function kr(u,t,e={}){const r=e.offset||0,a=[],f=[];let h,g,m=null;for(let b=0;b<u.length;b+=1){h=f[b]=u[b];for(let w=0,S=t.length;w<S;w+=1){const C=t[w],A=C.start+r,B=C.end+r;b>=A&&b<B&&(typeof h=="string"?h=f[b]={t:u[b],attrs:C.attrs}:h.attrs=Xn(Xn({},h.attrs),C.attrs),e.includeAnnotationIndices&&(h.annotations==null&&(h.annotations=[]),h.annotations.push(w)))}g=f[b-1],g?Yn.Z(h)&&Yn.Z(g)?(m=m,JSON.stringify(h.attrs)===JSON.stringify(g.attrs)?m.t+=h.t:(a.push(m),m=h)):Yn.Z(h)||Yn.Z(g)?(m=m,a.push(m),m=h):m=(m||"")+h:m=h}return m!=null&&a.push(m),a}function Vi(u,t){return u?u.filter(e=>e.start<t&&t<=e.end):[]}function fs(u,t,e){return u?u.filter(r=>t>=r.start&&t<r.end||e>r.start&&e<=r.end||r.start>=t&&r.end<e):[]}function xg(u,t,e){return u&&u.forEach(r=>{r.start<t&&r.end>=t?r.end+=e:r.start>=t&&(r.start+=e,r.end+=e)}),u}function Gr(u){return u.replace(/ /g,"\xA0")}var rh;(function(u){function t(b){const w="data:";return b.substr(0,w.length)===w}u.isDataUrl=t;function e(b,w){if(!b||t(b)){setTimeout(()=>w(null,b));return}const S=()=>{w(new Error(`Failed to load image: ${b}`))},C=window.FileReader?B=>{if(B.status===200){const j=new FileReader;j.onload=H=>{const nt=H.target.result;w(null,nt)},j.onerror=S,j.readAsDataURL(B.response)}else S()}:B=>{const j=H=>{const ct=[];for(let Y=0;Y<H.length;Y+=32768)ct.push(String.fromCharCode.apply(null,H.subarray(Y,Y+32768)));return ct.join("")};if(B.status===200){let H=b.split(".").pop()||"png";H==="svg"&&(H="svg+xml");const nt=`data:image/${H};base64,`,ct=new Uint8Array(B.response),Y=nt+btoa(j(ct));w(null,Y)}else S()},A=new XMLHttpRequest;A.responseType=window.FileReader?"blob":"arraybuffer",A.open("GET",b,!0),A.addEventListener("error",S),A.addEventListener("load",()=>C(A)),A.send()}u.imageToDataUri=e;function r(b){let w=b.replace(/\s/g,"");w=decodeURIComponent(w);const S=w.indexOf(","),C=w.slice(0,S),A=C.split(":")[1].split(";")[0],B=w.slice(S+1);let j;C.indexOf("base64")>=0?j=atob(B):j=unescape(encodeURIComponent(B));const H=new Uint8Array(j.length);for(let nt=0;nt<j.length;nt+=1)H[nt]=j.charCodeAt(nt);return new Blob([H],{type:A})}u.dataUriToBlob=r;function a(b,w){const S=window.navigator.msSaveBlob;if(S)S(b,w);else{const C=window.URL.createObjectURL(b),A=document.createElement("a");A.href=C,A.download=w,document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(C)}}u.downloadBlob=a;function f(b,w){const S=r(b);a(S,w)}u.downloadDataUri=f;function h(b){const w=b.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return w&&w[2]?w[2].replace(/\s+/," ").split(" "):null}function g(b){const w=parseFloat(b);return Number.isNaN(w)?null:w}function m(b,w={}){let S=null;const C=Y=>(S==null&&(S=h(b)),S!=null?g(S[Y]):null),A=Y=>{const Pt=b.match(Y);return Pt&&Pt[2]?g(Pt[2]):null};let B=w.width;if(B==null&&(B=A(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),B==null&&(B=C(2)),B==null)throw new Error("Can not parse width from svg string");let j=w.height;if(j==null&&(j=A(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),j==null&&(j=C(3)),j==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(b).replace(/'/g,"%27").replace(/"/g,"%22")}`}u.svgToDataUrl=m})(rh||(rh={}));let Lo;const ih={px(u){return u},mm(u){return Lo*u},cm(u){return Lo*u*10},in(u){return Lo*u*25.4},pt(u){return Lo*(25.4*u/72)},pc(u){return Lo*(25.4*u/6)}};var Eg;(function(u){function t(r,a,f){const h=document.createElement("div"),g=h.style;g.display="inline-block",g.position="absolute",g.left="-15000px",g.top="-15000px",g.width=r+(f||"px"),g.height=a+(f||"px"),document.body.appendChild(h);const m=h.getBoundingClientRect(),b={width:m.width||0,height:m.height||0};return document.body.removeChild(h),b}u.measure=t;function e(r,a){Lo==null&&(Lo=t("1","1","mm").width);const f=a?ih[a]:null;return f?f(r):r}u.toPx=e})(Eg||(Eg={}));const Tp=/-(.)/g;function wg(u){return u.replace(Tp,(t,e)=>e.toUpperCase())}const du={},Ap=["webkit","ms","moz","o"],Op=document?document.createElement("div").style:{};function Gv(u){for(let t=0;t<Ap.length;t+=1){const e=Ap[t]+u;if(e in Op)return e}return null}function Mp(u){const t=wg(u);if(du[t]==null){const e=t.charAt(0).toUpperCase()+t.slice(1);du[t]=t in Op?t:Gv(e)}return du[t]}function N0(u,t,e){const r=Mp(t);r!=null&&(u[r]=e),u[t]=e}function Sg(u,t){const e=u.ownerDocument&&u.ownerDocument.defaultView&&u.ownerDocument.defaultView.opener?u.ownerDocument.defaultView.getComputedStyle(u,null):window.getComputedStyle(u,null);return e&&t?e.getPropertyValue(t)||e[t]:e}function _g(u){const t=Sg(u);return t!=null&&(t.overflow==="scroll"||t.overflow==="auto")}const zv=function(){const u=document;return u.selection?function(){u.selection.empty()}:window.getSelection?function(){const t=window.getSelection();t&&(t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges())}:function(){}}(),R0={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Ip(u){return/^--/.test(u)}function oh(u,t,e){const r=window.getComputedStyle(u,null);return e?r.getPropertyValue(t)||void 0:r[t]||u.style[t]}function Ed(u,t){return parseInt(oh(u,t),10)||0}function Pp(u,t){return!R0[u]&&typeof t=="number"?`${t}px`:t}function nf(u,t,e){if(typeof t=="string"){const r=Ip(t);if(r||(t=Mp(t)),e===void 0)return oh(u,t,r);r||(e=Pp(t,e));const a=u.style;r?a.setProperty(t,e):a[t]=e;return}for(const r in t)nf(u,r,t[r])}const sh=new WeakMap;function Np(u,t){const e=tf(t),r=sh.get(u);if(r)return r[e]}function jv(u,t,e){const r=tf(t),a=sh.get(u);a?a[r]=e:sh.set(u,{[r]:e})}function al(u,t,e){if(!t){const r={};return Object.keys(sh).forEach(a=>{r[a]=Np(u,a)}),r}if(typeof t=="string"){if(e===void 0)return Np(u,t);jv(u,t,e);return}for(const r in t)al(u,r,t[r])}const Uv={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};function Vv(u,t,e){if(t){if(typeof t=="string"){if(t=Uv[t]||t,arguments.length<3)return u[t];u[t]=e;return}for(const r in t)Vv(u,r,t[r])}}class Sr{get[Symbol.toStringTag](){return Sr.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(t){this.node.id=t}constructor(t,e,r){if(!t)throw new TypeError("Invalid element to create vector");let a;if(Sr.isVector(t))a=t.node;else if(typeof t=="string")if(t.toLowerCase()==="svg")a=Vs();else if(t[0]==="<"){const f=Vs(t);a=document.importNode(f.firstChild,!0)}else a=document.createElementNS(gn.svg,t);else a=t;this.node=a,e&&this.setAttributes(e),r&&this.append(r)}transform(t,e){return t==null?cf(this.node):(cf(this.node,t,e),this)}translate(t,e=0,r={}){return t==null?Zp(this.node):(Zp(this.node,t,e,r),this)}rotate(t,e,r,a={}){return t==null?Td(this.node):(Td(this.node,t,e,r,a),this)}scale(t,e){return t==null?Og(this.node):(Og(this.node,t,e),this)}getTransformToElement(t){const e=Sr.toNode(t);return hh(this.node,e)}removeAttribute(t){return ye(this.node,t),this}getAttribute(t){return de(this.node,t)}setAttribute(t,e){return ae(this.node,t,e),this}setAttributes(t){return Re(this.node,t),this}attr(t,e){return t==null?Ye(this.node):typeof t=="string"&&e===void 0?Ye(this.node,t):(typeof t=="object"?Ye(this.node,t):Ye(this.node,t,e),this)}svg(){return this.node instanceof SVGSVGElement?this:Sr.create(this.node.ownerSVGElement)}defs(){const t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?Sr.create(e):Sr.create("defs").appendTo(t)}text(t,e={}){return Dp(this.node,t,e),this}tagName(){return te(this.node)}clone(){return Sr.create(this.node.cloneNode(!0))}remove(){return pt(this.node),this}empty(){return Rt(this.node),this}append(t){return Ft(this.node,Sr.toNodes(t)),this}appendTo(t){return tt(this.node,Sr.isVector(t)?t.node:t),this}prepend(t){return _t(this.node,Sr.toNodes(t)),this}before(t){return mt(this.node,Sr.toNodes(t)),this}replace(t){return this.node.parentNode&&this.node.parentNode.replaceChild(Sr.toNode(t),this.node),Sr.create(t)}first(){return this.node.firstChild?Sr.create(this.node.firstChild):null}last(){return this.node.lastChild?Sr.create(this.node.lastChild):null}get(t){const e=this.node.childNodes[t];return e?Sr.create(e):null}indexOf(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(Sr.toNode(t))}find(t){const e=[],r=un(this.node,t);if(r)for(let a=0,f=r.length;a<f;a+=1)e.push(Sr.create(r[a]));return e}findOne(t){const e=wr(this.node,t);return e?Sr.create(e):null}findParentByClass(t,e){const r=et(this.node,t,e);return r?Sr.create(r):null}matches(t){const e=this.node,r=this.node.matches,a=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return a&&a.call(e,t)}contains(t){return $(this.node,Sr.isVector(t)?t.node:t)}wrap(t){const e=Sr.create(t),r=this.node.parentNode;return r!=null&&r.insertBefore(e.node,this.node),e.append(this)}parent(t){let e=this;if(e.node.parentNode==null)return null;if(e=Sr.create(e.node.parentNode),t==null)return e;do if(typeof t=="string"?e.matches(t):e instanceof t)return e;while(e=Sr.create(e.node.parentNode));return e}children(){const t=this.node.childNodes,e=[];for(let r=0;r<t.length;r+=1)t[r].nodeType===1&&e.push(Sr.create(t[r]));return e}eachChild(t,e){const r=this.children();for(let a=0,f=r.length;a<f;a+=1)t.call(r[a],r[a],a,r),e&&r[a].eachChild(t,e);return this}index(){return Yt(this.node)}hasClass(t){return di(this.node,t)}addClass(t){return tr(this.node,t),this}removeClass(t){return ei(this.node,t),this}toggleClass(t,e){return oo(this.node,t,e),this}toLocalPoint(t,e){return Qv(this.node,t,e)}sample(t=1){return this.node instanceof SVGPathElement?Hv(this.node,t):[]}toPath(){return Sr.create(Xv(this.node))}toPathData(){return Bp(this.node)}}(function(u){u.toStringTag=`X6.${u.name}`;function t(h){if(h==null)return!1;if(h instanceof u)return!0;const g=h[Symbol.toStringTag],m=h;return(g==null||g===u.toStringTag)&&m.node instanceof SVGElement&&typeof m.sample=="function"&&typeof m.toPath=="function"}u.isVector=t;function e(h,g,m){return new u(h,g,m)}u.create=e;function r(h){if(h[0]==="<"){const g=Vs(h),m=[];for(let b=0,w=g.childNodes.length;b<w;b+=1){const S=g.childNodes[b];m.push(e(document.importNode(S,!0)))}return m}return[e(h)]}u.createVectors=r;function a(h){return t(h)?h.node:h}u.toNode=a;function f(h){return Array.isArray(h)?h.map(g=>a(g)):[a(h)]}u.toNodes=f})(Sr||(Sr={}));const Zv=document.createElement("canvas").getContext("2d");function $v(u,t){const e=Sr.create(t),r=Sr.create("textPath"),a=u.d;if(a&&u["xlink:href"]===void 0){const f=Sr.create("path").attr("d",a).appendTo(e.defs());r.attr("xlink:href",`#${f.id}`)}return typeof u=="object"&&r.attr(u),r.node}function D0(u,t,e){const r=e.eol,a=e.baseSize,f=e.lineHeight;let h=0,g;const m={},b=t.length-1;for(let w=0;w<=b;w+=1){let S=t[w],C=null;if(typeof S=="object"){const A=S.attrs,B=Sr.create("tspan",A);g=B.node;let j=S.t;r&&w===b&&(j+=r),g.textContent=j;const H=A.class;H&&B.addClass(H),e.includeAnnotationIndices&&B.attr("annotations",S.annotations.join(",")),C=parseFloat(A["font-size"]),C===void 0&&(C=a),C&&C>h&&(h=C)}else r&&w===b&&(S+=r),g=document.createTextNode(S||" "),a&&a>h&&(h=a);u.appendChild(g)}return h&&(m.maxFontSize=h),f?m.lineHeight=f:h&&(m.lineHeight=h*1.2),m}const Rp=/em$/;function Cg(u,t){const e=parseFloat(u);return Rp.test(u)?e*t:e}function rf(u,t,e,r){if(!Array.isArray(t))return 0;const a=t.length;if(!a)return 0;let f=t[0];const h=Cg(f.maxFontSize,e)||e;let g=0;const m=Cg(r,e);for(let S=1;S<a;S+=1){f=t[S];const C=Cg(f.lineHeight,e)||m;g+=C}const b=Cg(f.maxFontSize,e)||e;let w;switch(u){case"middle":w=h/2-.15*b-g/2;break;case"bottom":w=-(.25*b)-g;break;case"top":default:w=.8*h;break}return w}function Dp(u,t,e={}){t=Gr(t);const r=e.eol;let a=e.textPath;const f=e.textVerticalAnchor,h=f==="middle"||f==="bottom"||f==="top";let g=e.x;g===void 0&&(g=u.getAttribute("x")||0);const m=e.includeAnnotationIndices;let b=e.annotations;b&&!Array.isArray(b)&&(b=[b]);const w=e.lineHeight,S=w==="auto",C=S?"1.5em":w||"1em";let A=!0;const B=u.children;B.length===1&&B[0].tagName.toUpperCase()==="TITLE"&&(A=!1),A&&Rt(u),Ye(u,{"xml:space":"preserve",display:t||e.displayEmpty?null:"none"});const j=Ye(u,"font-size");let H=parseFloat(j);H||(H=16,(h||b)&&!j&&Ye(u,"font-size",`${H}`));let nt;a?(typeof a=="string"&&(a={d:a}),nt=$v(a,u)):nt=document.createDocumentFragment();let ct,Y=0,Pt;const Xt=t.split(`
`),pe=[],qe=Xt.length-1;for(let En=0;En<=qe;En+=1){ct=C;let jn="v-line";const wn=wo("tspan");let Un,Di=Xt[En];if(Di)if(b){const Ur=kr(Di,b,{offset:-Y,includeAnnotationIndices:m});Un=D0(wn,Ur,{eol:En!==qe&&r,baseSize:H,lineHeight:S?null:C,includeAnnotationIndices:m});const be=Un.lineHeight;be&&S&&En!==0&&(ct=be),En===0&&(Pt=Un.maxFontSize*.8)}else r&&En!==qe&&(Di+=r),wn.textContent=Di;else{wn.textContent="-",jn+=" v-empty-line";const Ur=wn.style;Ur.fillOpacity=0,Ur.strokeOpacity=0,b&&(Un={})}Un&&pe.push(Un),En>0&&wn.setAttribute("dy",ct),(En>0||a)&&wn.setAttribute("x",g),wn.className.baseVal=jn,nt.appendChild(wn),Y+=Di.length+1}if(h)if(b)ct=rf(f,pe,H,C);else if(f==="top")ct="0.8em";else{let En;switch(qe>0?(En=parseFloat(C)||1,En*=qe,Rp.test(C)||(En/=H)):En=0,f){case"middle":ct=`${.3-En/2}em`;break;case"bottom":ct=`${-En-.3}em`;break;default:break}}else f===0?ct="0em":f?ct=f:(ct=0,u.getAttribute("y")==null&&u.setAttribute("y",`${Pt||"0.8em"}`));nt.firstChild.setAttribute("dy",ct),u.appendChild(nt)}function ah(u,t={}){if(!u)return{width:0};const e=[],r=t["font-size"]?`${parseFloat(t["font-size"])}px`:"14px";return e.push(t["font-style"]||"normal"),e.push(t["font-variant"]||"normal"),e.push(t["font-weight"]||400),e.push(r),e.push(t["font-family"]||"sans-serif"),Zv.font=e.join(" "),Zv.measureText(u)}function wd(u,t,e,r={}){if(t>=e)return[u,""];const a=u.length,f={};let h=Math.round(t/e*a-1);for(h<0&&(h=0);h>=0&&h<a;){const g=u.slice(0,h),m=f[g]||ah(g,r).width,b=u.slice(0,h+1),w=f[b]||ah(b,r).width;if(f[g]=m,f[b]=w,m>t)h-=1;else if(w<=t)h+=1;else break}return[u.slice(0,h),u.slice(h)]}function Tg(u,t,e={},r={}){const a=t.width,f=t.height,h=r.eol||`
`,{width:g}=ah(u,e);if(g<a)return u;const m=[],b=e.fontSize||14,w=e.lineHeight?parseFloat(e.lineHeight):Math.ceil(b*1.4),S=Math.floor(f/w);let C=u,A=g,B=r.ellipsis,j=0;B&&(typeof B!="string"&&(B="\u2026"),j=ah(B,e).width);for(let H=0;H<S;H+=1)if(A>a)if(H===S-1){const[ct]=wd(C,a-j,A,e);m.push(B?`${ct}${B}`:ct)}else{const[ct,Y]=wd(C,a,A,e);m.push(ct),C=Y,A=ah(C,e).width}else{m.push(C);break}return m.join(h)}const Ag=.551784;function hs(u,t,e=NaN){const r=u.getAttribute(t);if(r==null)return e;const a=parseFloat(r);return Number.isNaN(a)?e:a}function Hv(u,t=1){const e=u.getTotalLength(),r=[];let a=0,f;for(;a<e;)f=u.getPointAtLength(a),r.push({distance:a,x:f.x,y:f.y}),a+=t;return r}function Wv(u){return["M",hs(u,"x1"),hs(u,"y1"),"L",hs(u,"x2"),hs(u,"y2")].join(" ")}function of(u){const t=Sd(u);return t.length===0?null:`${kp(t)} Z`}function Lp(u){const t=Sd(u);return t.length===0?null:kp(t)}function kp(u){return`M ${u.map(e=>`${e.x} ${e.y}`).join(" L")}`}function Sd(u){const t=[],e=u.points;if(e)for(let r=0,a=e.numberOfItems;r<a;r+=1)t.push(e.getItem(r));return t}function Fp(u){const t=hs(u,"cx",0),e=hs(u,"cy",0),r=hs(u,"r"),a=r*Ag;return["M",t,e-r,"C",t+a,e-r,t+r,e-a,t+r,e,"C",t+r,e+a,t+a,e+r,t,e+r,"C",t-a,e+r,t-r,e+a,t-r,e,"C",t-r,e-a,t-a,e-r,t,e-r,"Z"].join(" ")}function _d(u){const t=hs(u,"cx",0),e=hs(u,"cy",0),r=hs(u,"rx"),a=hs(u,"ry")||r,f=r*Ag,h=a*Ag;return["M",t,e-a,"C",t+f,e-a,t+r,e-h,t+r,e,"C",t+r,e+h,t+f,e+a,t,e+a,"C",t-f,e+a,t-r,e+h,t-r,e,"C",t-r,e-h,t-f,e-a,t,e-a,"Z"].join(" ")}function ch(u){return uh({x:hs(u,"x",0),y:hs(u,"y",0),width:hs(u,"width",0),height:hs(u,"height",0),rx:hs(u,"rx",0),ry:hs(u,"ry",0)})}function uh(u){let t;const e=u.x,r=u.y,a=u.width,f=u.height,h=Math.min(u.rx||u["top-rx"]||0,a/2),g=Math.min(u.rx||u["bottom-rx"]||0,a/2),m=Math.min(u.ry||u["top-ry"]||0,f/2),b=Math.min(u.ry||u["bottom-ry"]||0,f/2);return h||g||m||b?t=["M",e,r+m,"v",f-m-b,"a",g,b,0,0,0,g,b,"h",a-2*g,"a",g,b,0,0,0,g,-b,"v",-(f-b-m),"a",h,m,0,0,0,-h,-m,"h",-(a-2*h),"a",h,m,0,0,0,-h,m,"Z"]:t=["M",e,r,"H",e+a,"V",r+f,"H",e,"V",r,"Z"],t.join(" ")}function Xv(u){const t=wo("path");Ye(t,Ye(u));const e=Bp(u);return e&&t.setAttribute("d",e),t}function Bp(u){const t=u.tagName.toLowerCase();switch(t){case"path":return u.getAttribute("d");case"line":return Wv(u);case"polygon":return of(u);case"polyline":return Lp(u);case"ellipse":return _d(u);case"circle":return Fp(u);case"rect":return ch(u);default:break}throw new Error(`"${t}" cannot be converted to svg path element.`)}function Yv(u,t,e,r){const a=2*Math.PI-1e-6,f=u,h=t;let g=e,m=r;if(m<g){const j=g;g=m,m=j}const b=m-g,w=b<Math.PI?"0":"1",S=Math.cos(g),C=Math.sin(g),A=Math.cos(m),B=Math.sin(m);return b>=a?f?`M0,${h}A${h},${h} 0 1,1 0,${-h}A${h},${h} 0 1,1 0,${h}M0,${f}A${f},${f} 0 1,0 0,${-f}A${f},${f} 0 1,0 0,${f}Z`:`M0,${h}A${h},${h} 0 1,1 0,${-h}A${h},${h} 0 1,1 0,${h}Z`:f?`M${h*S},${h*C}A${h},${h} 0 ${w},1 ${h*A},${h*B}L${f*A},${f*B}A${f},${f} 0 ${w},0 ${f*S},${f*C}Z`:`M${h*S},${h*C}A${h},${h} 0 ${w},1 ${h*A},${h*B}L0,0Z`}const Cd=wo("svg"),L0=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,Gp=/[ ,]+/,k0=/^(\w+)\((.*)\)/;function Kv(u,t){const e=Cd.createSVGPoint();return e.x=u,e.y=t,e}function Ti(u){const t=Cd.createSVGMatrix();if(u!=null){const e=u,r=t;for(const a in e)r[a]=e[a]}return t}function sf(u){return u!=null?(u instanceof DOMMatrix||(u=Ti(u)),Cd.createSVGTransformFromMatrix(u)):Cd.createSVGTransform()}function lh(u){let t=Ti();const e=u!=null&&u.match(L0);if(!e)return t;for(let r=0,a=e.length;r<a;r+=1){const h=e[r].match(k0);if(h){let g,m,b,w,S,C=Ti();const A=h[2].split(Gp);switch(h[1].toLowerCase()){case"scale":g=parseFloat(A[0]),m=A[1]===void 0?g:parseFloat(A[1]),C=C.scaleNonUniform(g,m);break;case"translate":b=parseFloat(A[0]),w=parseFloat(A[1]),C=C.translate(b,w);break;case"rotate":S=parseFloat(A[0]),b=parseFloat(A[1])||0,w=parseFloat(A[2])||0,b!==0||w!==0?C=C.translate(b,w).rotate(S).translate(-b,-w):C=C.rotate(S);break;case"skewx":S=parseFloat(A[0]),C=C.skewX(S);break;case"skewy":S=parseFloat(A[0]),C=C.skewY(S);break;case"matrix":C.a=parseFloat(A[0]),C.b=parseFloat(A[1]),C.c=parseFloat(A[2]),C.d=parseFloat(A[3]),C.e=parseFloat(A[4]),C.f=parseFloat(A[5]);break;default:continue}t=t.multiply(C)}}return t}function af(u){const t=u||{},e=t.a!=null?t.a:1,r=t.b!=null?t.b:0,a=t.c!=null?t.c:0,f=t.d!=null?t.d:1,h=t.e!=null?t.e:0,g=t.f!=null?t.f:0;return`matrix(${e},${r},${a},${f},${h},${g})`}function fh(u){let t,e,r;if(u){const f=Gp;if(u.trim().indexOf("matrix")>=0){const h=lh(u),g=qv(h);t=[g.translateX,g.translateY],e=[g.rotation],r=[g.scaleX,g.scaleY];const m=[];(t[0]!==0||t[1]!==0)&&m.push(`translate(${t.join(",")})`),(r[0]!==1||r[1]!==1)&&m.push(`scale(${r.join(",")})`),e[0]!==0&&m.push(`rotate(${e[0]})`),u=m.join(" ")}else{const h=u.match(/translate\((.*?)\)/);h&&(t=h[1].split(f));const g=u.match(/rotate\((.*?)\)/);g&&(e=g[1].split(f));const m=u.match(/scale\((.*?)\)/);m&&(r=m[1].split(f))}}const a=r&&r[0]?parseFloat(r[0]):1;return{raw:u||"",translation:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotation:{angle:e&&e[0]?parseInt(e[0],10):0,cx:e&&e[1]?parseInt(e[1],10):void 0,cy:e&&e[2]?parseInt(e[2],10):void 0},scale:{sx:a,sy:r&&r[1]?parseFloat(r[1]):a}}}function zp(u,t){const e=t.x*u.a+t.y*u.c+0,r=t.x*u.b+t.y*u.d+0;return{x:e,y:r}}function qv(u){const t=zp(u,{x:0,y:1}),e=zp(u,{x:1,y:0}),r=180/Math.PI*Math.atan2(t.y,t.x)-90,a=180/Math.PI*Math.atan2(e.y,e.x);return{skewX:r,skewY:a,translateX:u.e,translateY:u.f,scaleX:Math.sqrt(u.a*u.a+u.b*u.b),scaleY:Math.sqrt(u.c*u.c+u.d*u.d),rotation:r}}function jp(u){let t,e,r,a;return u?(t=u.a==null?1:u.a,a=u.d==null?1:u.d,e=u.b,r=u.c):t=a=1,{sx:e?Math.sqrt(t*t+e*e):t,sy:r?Math.sqrt(r*r+a*a):a}}function Up(u){let t={x:0,y:1};u&&(t=zp(u,t));const e=180*Math.atan2(t.y,t.x)/Math.PI%360-90;return{angle:e%360+(e<0?360:0)}}function Vp(u){return{tx:u&&u.e||0,ty:u&&u.f||0}}function cf(u,t,e={}){if(t==null)return lh(Ye(u,"transform"));if(e.absolute){u.setAttribute("transform",af(t));return}const r=u.transform,a=sf(t);r.baseVal.appendItem(a)}function Zp(u,t,e=0,r={}){let a=Ye(u,"transform");const f=fh(a);if(t==null)return f.translation;a=f.raw,a=a.replace(/translate\([^)]*\)/g,"").trim();const h=r.absolute?t:f.translation.tx+t,g=r.absolute?e:f.translation.ty+e,m=`translate(${h},${g})`;u.setAttribute("transform",`${m} ${a}`.trim())}function Td(u,t,e,r,a={}){let f=Ye(u,"transform");const h=fh(f);if(t==null)return h.rotation;f=h.raw,f=f.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;const g=a.absolute?t:h.rotation.angle+t,m=e!=null&&r!=null?`,${e},${r}`:"",b=`rotate(${g}${m})`;u.setAttribute("transform",`${f} ${b}`.trim())}function Og(u,t,e){let r=Ye(u,"transform");const a=fh(r);if(t==null)return a.scale;e=e==null?t:e,r=a.raw,r=r.replace(/scale\([^)]*\)/g,"").trim();const f=`scale(${t},${e})`;u.setAttribute("transform",`${r} ${f}`.trim())}function hh(u,t){if(xr(t)&&xr(u)){const e=t.getScreenCTM(),r=u.getScreenCTM();if(e&&r)return e.inverse().multiply(r)}return Ti()}function Jv(u,t){let e=Ti();if(xr(t)&&xr(u)){let r=u;const a=[];for(;r&&r!==t;){const f=r.getAttribute("transform")||null,h=lh(f);a.push(h),r=r.parentNode}a.reverse().forEach(f=>{e=e.multiply(f)})}return e}function Qv(u,t,e){const r=u instanceof SVGSVGElement?u:u.ownerSVGElement,a=r.createSVGPoint();a.x=t,a.y=e;try{const f=r.getScreenCTM(),h=a.matrixTransform(f.inverse()),g=hh(u,r).inverse();return h.matrixTransform(g)}catch(f){return a}}var pa;(function(u){const t={};function e(f){return t[f]||{}}u.get=e;function r(f,h){t[f]=h}u.register=r;function a(f){delete t[f]}u.unregister=a})(pa||(pa={}));var gu;(function(u){const t=new WeakMap;function e(f){return t.has(f)||t.set(f,{events:Object.create(null)}),t.get(f)}u.ensure=e;function r(f){return t.get(f)}u.get=r;function a(f){return t.delete(f)}u.remove=a})(gu||(gu={}));var Mr;(function(u){u.returnTrue=()=>!0,u.returnFalse=()=>!1;function t(a){a.stopPropagation()}u.stopPropagationCallback=t;function e(a,f,h){a.addEventListener!=null&&a.addEventListener(f,h)}u.addEventListener=e;function r(a,f,h){a.removeEventListener!=null&&a.removeEventListener(f,h)}u.removeEventListener=r})(Mr||(Mr={})),function(u){const t=/[^\x20\t\r\n\f]+/g,e=/^([^.]*)(?:\.(.+)|)/;function r(g){return(g||"").match(t)||[""]}u.splitType=r;function a(g){const m=e.exec(g)||[];return{originType:m[1]?m[1].trim():m[1],namespaces:m[2]?m[2].split(".").map(b=>b.trim()).sort():[]}}u.normalizeType=a;function f(g){return g.nodeType===1||g.nodeType===9||!+g.nodeType}u.isValidTarget=f;function h(g,m){if(m){const b=g;return b.querySelector!=null&&b.querySelector(m)!=null}return!0}u.isValidSelector=h}(Mr||(Mr={})),function(u){let t=0;const e=new WeakMap;function r(g){return e.has(g)||(e.set(g,t),t+=1),e.get(g)}u.ensureHandlerId=r;function a(g){return e.get(g)}u.getHandlerId=a;function f(g){return e.delete(g)}u.removeHandlerId=f;function h(g,m){return e.set(g,m)}u.setHandlerId=h}(Mr||(Mr={})),function(u){function t(e,r){const a=[],f=gu.get(e),h=f&&f.events&&f.events[r.type],g=h&&h.handlers||[],m=h?h.delegateCount:0;if(m>0&&!(r.type==="click"&&typeof r.button=="number"&&r.button>=1)){for(let b=r.target;b!==e;b=b.parentNode||e)if(b.nodeType===1&&!(r.type==="click"&&b.disabled===!0)){const w=[],S={};for(let C=0;C<m;C+=1){const A=g[C],B=A.selector;if(B!=null&&S[B]==null){const j=e,H=[];j.querySelectorAll(B).forEach(nt=>{H.push(nt)}),S[B]=H.includes(b)}S[B]&&w.push(A)}w.length&&a.push({elem:b,handlers:w})}}return m<g.length&&a.push({elem:e,handlers:g.slice(m)}),a}u.getHandlerQueue=t}(Mr||(Mr={})),function(u){function t(e){return e!=null&&e===e.window}u.isWindow=t}(Mr||(Mr={})),function(u){function t(e,r){const a=e.nodeType===9?e.documentElement:e,f=r&&r.parentNode;return e===f||!!(f&&f.nodeType===1&&(a.contains?a.contains(f):e.compareDocumentPosition&&e.compareDocumentPosition(f)&16))}u.contains=t}(Mr||(Mr={}));class Da{constructor(t,e){this.isDefaultPrevented=Mr.returnFalse,this.isPropagationStopped=Mr.returnFalse,this.isImmediatePropagationStopped=Mr.returnFalse,this.isSimulated=!1,typeof t=="string"?this.type=t:t.type&&(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Mr.returnTrue:Mr.returnFalse,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.timeStamp=t.timeStamp),e&&Object.assign(this,e),this.timeStamp||(this.timeStamp=Date.now())}preventDefault(){const t=this.originalEvent;this.isDefaultPrevented=Mr.returnTrue,t&&!this.isSimulated&&t.preventDefault()}stopPropagation(){const t=this.originalEvent;this.isPropagationStopped=Mr.returnTrue,t&&!this.isSimulated&&t.stopPropagation()}stopImmediatePropagation(){const t=this.originalEvent;this.isImmediatePropagationStopped=Mr.returnTrue,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}}(function(u){function t(e){return e instanceof u?e:new u(e)}u.create=t})(Da||(Da={})),function(u){function t(e,r){Object.defineProperty(u.prototype,e,{enumerable:!0,configurable:!0,get:typeof r=="function"?function(){if(this.originalEvent)return r(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set(a){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:a})}})}u.addProperty=t}(Da||(Da={})),function(u){const t={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(t).forEach(e=>u.addProperty(e,t[e]))}(Da||(Da={}));var uf;(function(u){pa.register("load",{noBubble:!0})})(uf||(uf={})),function(u){pa.register("beforeunload",{postDispatch(t,e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}})}(uf||(uf={})),function(u){pa.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(t,e){let r;const a=e.relatedTarget,f=e.handleObj;return(!a||a!==t&&!Mr.contains(t,a))&&(e.type=f.originType,r=f.handler.call(t,e),e.type="mouseover"),r}}),pa.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(t,e){let r;const a=e.relatedTarget,f=e.handleObj;return(!a||a!==t&&!Mr.contains(t,a))&&(e.type=f.originType,r=f.handler.call(t,e),e.type="mouseout"),r}})}(uf||(uf={}));var tm=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e},dh;(function(u){let t;function e(h,g,m,b,w){if(!Mr.isValidTarget(h))return;let S;if(typeof m!="function"){const{handler:j,selector:H}=m,nt=tm(m,["handler","selector"]);m=j,w=H,S=nt}const C=gu.ensure(h);let A=C.handler;A==null&&(A=C.handler=function(j,...H){return t!==j.type?a(h,j,...H):void 0});const B=Mr.ensureHandlerId(m);Mr.splitType(g).forEach(j=>{const{originType:H,namespaces:nt}=Mr.normalizeType(j);if(!H)return;let ct=H,Y=pa.get(ct);ct=(w?Y.delegateType:Y.bindType)||ct,Y=pa.get(ct);const Pt=Object.assign({type:ct,originType:H,data:b,selector:w,guid:B,handler:m,namespace:nt.join(".")},S),Xt=C.events;let pe=Xt[ct];pe||(pe=Xt[ct]={handlers:[],delegateCount:0},(!Y.setup||Y.setup(h,b,nt,A)===!1)&&Mr.addEventListener(h,ct,A)),Y.add&&(Mr.removeHandlerId(Pt.handler),Y.add(h,Pt),Mr.setHandlerId(Pt.handler,B)),w?(pe.handlers.splice(pe.delegateCount,0,Pt),pe.delegateCount+=1):pe.handlers.push(Pt)})}u.on=e;function r(h,g,m,b,w){const S=gu.get(h);if(!S)return;const C=S.events;C&&(Mr.splitType(g).forEach(A=>{const{originType:B,namespaces:j}=Mr.normalizeType(A);if(!B){Object.keys(C).forEach(Xt=>{r(h,Xt+A,m,b,!0)});return}let H=B;const nt=pa.get(H);H=(b?nt.delegateType:nt.bindType)||H;const ct=C[H]||{},Y=j.length>0?new RegExp(`(^|\\.)${j.join("\\.(?:.*\\.|)")}(\\.|$)`):null,Pt=ct.handlers.length;for(let Xt=ct.handlers.length-1;Xt>=0;Xt-=1){const pe=ct.handlers[Xt];(w||B===pe.originType)&&(!m||Mr.getHandlerId(m)===pe.guid)&&(Y==null||pe.namespace&&Y.test(pe.namespace))&&(b==null||b===pe.selector||b==="**"&&pe.selector)&&(ct.handlers.splice(Xt,1),pe.selector&&(ct.delegateCount-=1),nt.remove&&nt.remove(h,pe))}Pt&&ct.handlers.length===0&&((!nt.teardown||nt.teardown(h,j,S.handler)===!1)&&Mr.removeEventListener(h,H,S.handler),delete C[H])}),Object.keys(C).length===0&&gu.remove(h))}u.off=r;function a(h,g,...m){const b=Da.create(g);b.delegateTarget=h;const w=pa.get(b.type);if(w.preDispatch&&w.preDispatch(h,b)===!1)return;const S=Mr.getHandlerQueue(h,b);for(let C=0,A=S.length;C<A&&!b.isPropagationStopped();C+=1){const B=S[C];b.currentTarget=B.elem;for(let j=0,H=B.handlers.length;j<H&&!b.isImmediatePropagationStopped();j+=1){const nt=B.handlers[j];if(b.rnamespace==null||nt.namespace&&b.rnamespace.test(nt.namespace)){b.handleObj=nt,b.data=nt.data;const ct=pa.get(nt.originType).handle,Y=ct?ct(B.elem,b,...m):nt.handler.call(B.elem,b,...m);Y!==void 0&&(b.result=Y,Y===!1&&(b.preventDefault(),b.stopPropagation()))}}}return w.postDispatch&&w.postDispatch(h,b),b.result}u.dispatch=a;function f(h,g,m,b){let w=h,S=typeof h=="string"?h:h.type,C=typeof h=="string"||w.namespace==null?[]:w.namespace.split(".");const A=m;if(A.nodeType===3||A.nodeType===8)return;S.indexOf(".")>-1&&(C=S.split("."),S=C.shift(),C.sort());const B=S.indexOf(":")<0&&`on${S}`;w=h instanceof Da?h:new Da(S,typeof h=="object"?h:null),w.namespace=C.join("."),w.rnamespace=w.namespace?new RegExp(`(^|\\.)${C.join("\\.(?:.*\\.|)")}(\\.|$)`):null,w.result=void 0,w.target||(w.target=A);const j=[w];Array.isArray(g)?j.push(...g):j.push(g);const H=pa.get(S);if(!b&&H.trigger&&H.trigger(A,w,g)===!1)return;let nt;const ct=[A];if(!b&&!H.noBubble&&!Mr.isWindow(A)){nt=H.delegateType||S;let Pt=A,Xt=A.parentNode;for(;Xt!=null;)ct.push(Xt),Pt=Xt,Xt=Xt.parentNode;const pe=A.ownerDocument||document;if(Pt===pe){const qe=Pt.defaultView||Pt.parentWindow||window;ct.push(qe)}}let Y=A;for(let Pt=0,Xt=ct.length;Pt<Xt&&!w.isPropagationStopped();Pt+=1){const pe=ct[Pt];Y=pe,w.type=Pt>1?nt:H.bindType||S;const qe=gu.get(pe);qe&&qe.events[w.type]&&qe.handler&&qe.handler.call(pe,...j);const xn=B&&pe[B]||null;xn&&Mr.isValidTarget(pe)&&(w.result=xn.call(pe,...j),w.result===!1&&w.preventDefault())}if(w.type=S,!b&&!w.isDefaultPrevented()){const Pt=H.preventDefault;if((Pt==null||Pt(ct.pop(),w,g)===!1)&&Mr.isValidTarget(A)&&B&&typeof A[S]=="function"&&!Mr.isWindow(A)){const Xt=A[B];Xt&&(A[B]=null),t=S,w.isPropagationStopped()&&Y.addEventListener(S,Mr.stopPropagationCallback),A[S](),w.isPropagationStopped()&&Y.removeEventListener(S,Mr.stopPropagationCallback),t=void 0,Xt&&(A[B]=Xt)}}return w.result}u.trigger=f})(dh||(dh={}));var Ns;(function(u){function t(f,h,g,m,b){return Ad.on(f,h,g,m,b),f}u.on=t;function e(f,h,g,m,b){return Ad.on(f,h,g,m,b,!0),f}u.once=e;function r(f,h,g,m){return Ad.off(f,h,g,m),f}u.off=r;function a(f,h,g,m){return dh.trigger(h,g,f,m),f}u.trigger=a})(Ns||(Ns={}));var Ad;(function(u){function t(r,a,f,h,g,m){if(typeof a=="object"){typeof f!="string"&&(h=h||f,f=void 0),Object.keys(a).forEach(b=>t(r,b,f,h,a[b],m));return}if(h==null&&g==null?(g=f,h=f=void 0):g==null&&(typeof f=="string"?(g=h,h=void 0):(g=h,h=f,f=void 0)),g===!1)g=Mr.returnFalse;else if(!g)return;if(m){const b=g;g=function(w,...S){return u.off(r,w),b.call(this,w,...S)},Mr.setHandlerId(g,Mr.ensureHandlerId(b))}dh.on(r,a,g,h,f)}u.on=t;function e(r,a,f,h){const g=a;if(g&&g.preventDefault!=null&&g.handleObj!=null){const m=g.handleObj;e(g.delegateTarget,m.namespace?`${m.originType}.${m.namespace}`:m.originType,m.selector,m.handler);return}if(typeof a=="object"){const m=a;Object.keys(m).forEach(b=>e(r,b,f,m[b]));return}(f===!1||typeof f=="function")&&(h=f,f=void 0),h===!1&&(h=Mr.returnFalse),dh.off(r,a,h,f)}u.off=e})(Ad||(Ad={}));class Mg{constructor(t,e,r){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=mi.isEventSupported("wheel")?"wheel":"mousewheel",this.target=t,this.onWheelCallback=e,this.onWheelGuard=r,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(t){if(this.onWheelGuard!=null&&!this.onWheelGuard(t))return;this.deltaX+=t.deltaX,this.deltaY+=t.deltaY,t.preventDefault();let e;(this.deltaX!==0||this.deltaY!==0)&&(t.stopPropagation(),e=!0),e===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(t)}))}didWheel(t){this.animationFrameId=0,this.onWheelCallback(t,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function $p(u){const t=u.getBoundingClientRect(),e=u.ownerDocument.defaultView;return{top:t.top+e.pageYOffset,left:t.left+e.pageXOffset}}function F0(u){return u.getBoundingClientRect().width}function B0(u){return u.getBoundingClientRect().height}function G0(u){const t=oh(u,"position")==="fixed";let e;if(t){const r=u.getBoundingClientRect();e={left:r.left,top:r.top}}else e=$p(u);if(!t){const r=u.ownerDocument;let a=u.offsetParent||r.documentElement;for(;(a===r.body||a===r.documentElement)&&oh(a,"position")==="static";)a=a.parentNode;if(a!==u&&dt(a)){const f=$p(a);e.top-=f.top+Ed(a,"borderTopWidth"),e.left-=f.left+Ed(a,"borderLeftWidth")}}return{top:e.top-Ed(u,"marginTop"),left:e.left-Ed(u,"marginLeft")}}function Hp(u,t=60){let e=null;return(...r)=>{e&&clearTimeout(e),e=window.setTimeout(()=>{u.apply(this,r)},t)}}function z0(u){let t=null,e=[];const r=()=>{if(getComputedStyle(u).position==="static"){const b=u.style;b.position="relative"}const m=document.createElement("object");return m.onload=()=>{m.contentDocument.defaultView.addEventListener("resize",a),a()},m.style.display="block",m.style.position="absolute",m.style.top="0",m.style.left="0",m.style.height="100%",m.style.width="100%",m.style.overflow="hidden",m.style.pointerEvents="none",m.style.zIndex="-1",m.style.opacity="0",m.setAttribute("tabindex","-1"),m.type="text/html",u.appendChild(m),m.data="about:blank",m},a=Hp(()=>{e.forEach(m=>m(u))}),f=m=>{t||(t=r()),e.indexOf(m)===-1&&e.push(m)},h=()=>{t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",a),t.parentNode.removeChild(t),t=null,e=[])};return{element:u,bind:f,destroy:h,unbind:m=>{const b=e.indexOf(m);b!==-1&&e.splice(b,1),e.length===0&&t&&h()}}}function Wp(u){let t=null,e=[];const r=Hp(()=>{e.forEach(m=>{m(u)})}),a=()=>{const m=new ResizeObserver(r);return m.observe(u),r(),m},f=m=>{t||(t=a()),e.indexOf(m)===-1&&e.push(m)},h=()=>{t&&(t.disconnect(),e=[],t=null)};return{element:u,bind:f,destroy:h,unbind:m=>{const b=e.indexOf(m);b!==-1&&e.splice(b,1),e.length===0&&t&&h()}}}const j0=typeof ResizeObserver!="undefined"?Wp:z0;var Od;(function(u){const t=new WeakMap;function e(a){let f=t.get(a);return f||(f=j0(a),t.set(a,f),f)}function r(a){a.destroy(),t.delete(a.element)}u.bind=(a,f)=>{const h=e(a);return h.bind(f),()=>h.unbind(f)},u.clear=a=>{const f=e(a);r(f)}})(Od||(Od={}));class gh{constructor(t={}){this.comparator=t.comparator||gh.defaultComparator,this.index={},this.data=t.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(t,e,r){const a={priority:t,value:e},f=this.data.length;return r&&(a.id=r,this.index[r]=f),this.data.push(a),this.bubbleUp(f),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(t,e){const r=this.index[t];if(typeof r=="undefined")throw new Error(`Node with id '${t}' was not found in the heap.`);const a=this.data,f=a[r].priority,h=this.comparator(e,f);h<0?(a[r].priority=e,this.bubbleUp(r)):h>0&&(a[r].priority=e,this.bubbleDown(r))}remove(){const t=this.data,e=t[0],r=t.pop();return e.id&&delete this.index[e.id],t.length>0&&(t[0]=r,r.id&&(this.index[r.id]=0),this.bubbleDown(0)),e?e.value:null}heapify(){for(let t=0;t<this.data.length;t+=1)this.bubbleUp(t)}bubbleUp(t){const e=this.data;let r,a,f=t;for(;f>0&&(a=f-1>>>1,this.comparator(e[f].priority,e[a].priority)<0);){r=e[a],e[a]=e[f];let h=e[f].id;h!=null&&(this.index[h]=a),e[f]=r,h=e[f].id,h!=null&&(this.index[h]=f),f=a}}bubbleDown(t){const e=this.data,r=e.length-1;let a=t;for(;;){const f=(a<<1)+1,h=f+1;let g=a;if(f<=r&&this.comparator(e[f].priority,e[g].priority)<0&&(g=f),h<=r&&this.comparator(e[h].priority,e[g].priority)<0&&(g=h),g!==a){const m=e[g];e[g]=e[a];let b=e[a].id;b!=null&&(this.index[b]=g),e[a]=m,b=e[a].id,b!=null&&(this.index[b]=a),a=g}else break}}}(function(u){u.defaultComparator=(t,e)=>t-e})(gh||(gh={}));var Xp;(function(u){function t(e,r,a=(f,h)=>1){const f={},h={},g={},m=new gh;for(f[r]=0,Object.keys(e).forEach(b=>{b!==r&&(f[b]=1/0),m.insert(f[b],b,b)});!m.isEmpty();){const b=m.remove();g[b]=!0;const w=e[b]||[];for(let S=0;S<w.length;S+=1){const C=w[S];if(!g[C]){const A=f[b]+a(b,C);A<f[C]&&(f[C]=A,h[C]=b,m.updatePriority(C,A))}}}return h}u.run=t})(Xp||(Xp={}));class pu{constructor(t,e,r,a){if(t==null)return this.set(255,255,255,1);if(typeof t=="number")return this.set(t,e,r,a);if(typeof t=="string")return pu.fromString(t)||this;if(Array.isArray(t))return this.set(t);this.set(t.r,t.g,t.b,t.a==null?1:t.a)}blend(t,e,r){this.set(t.r+(e.r-t.r)*r,t.g+(e.g-t.g)*r,t.b+(e.b-t.b)*r,t.a+(e.a-t.a)*r)}lighten(t){const e=pu.lighten(this.toArray(),t);this.r=e[0],this.g=e[1],this.b=e[2],this.a=e[3]}darken(t){this.lighten(-t)}set(t,e,r,a){const f=Array.isArray(t)?t[0]:t,h=Array.isArray(t)?t[1]:e,g=Array.isArray(t)?t[2]:r,m=Array.isArray(t)?t[3]:a;return this.r=Math.round(Nt(f,0,255)),this.g=Math.round(Nt(h,0,255)),this.b=Math.round(Nt(g,0,255)),this.a=m==null?1:Nt(m,0,1),this}toHex(){return`#${["r","g","b"].map(e=>{const r=this[e].toString(16);return r.length<2?`0${r}`:r}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return pu.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(t){const e=`${this.r},${this.g},${this.b},`;return t?`rgb(${e})`:`rgba(${e},${this.a})`}toGrey(){return pu.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(u){function t(Y){return new u(Y)}u.fromArray=t;function e(Y){return new u([...B(Y),1])}u.fromHex=e;function r(Y){const Pt=Y.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(Pt){const Xt=Pt[1].split(/\s*,\s*/).map(pe=>parseInt(pe,10));return new u(Xt)}return null}u.fromRGBA=r;function a(Y,Pt,Xt){Xt<0&&++Xt,Xt>1&&--Xt;const pe=6*Xt;return pe<1?Y+(Pt-Y)*pe:2*Xt<1?Pt:3*Xt<2?Y+(Pt-Y)*(2/3-Xt)*6:Y}function f(Y){const Pt=Y.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(Pt){const Xt=Pt[2].split(/\s*,\s*/),pe=(parseFloat(Xt[0])%360+360)%360/360,qe=parseFloat(Xt[1])/100,xn=parseFloat(Xt[2])/100,En=Xt[3]==null?1:parseInt(Xt[3],10);return new u(b(pe,qe,xn,En))}return null}u.fromHSLA=f;function h(Y){if(Y.startsWith("#"))return e(Y);if(Y.startsWith("rgb"))return r(Y);const Pt=u.named[Y];return Pt?e(Pt):f(Y)}u.fromString=h;function g(Y,Pt){return u.fromArray([Y,Y,Y,Pt])}u.makeGrey=g;function m(Y,Pt,Xt,pe){const qe=Array.isArray(Y)?Y[0]:Y,xn=Array.isArray(Y)?Y[1]:Pt,En=Array.isArray(Y)?Y[2]:Xt,jn=Array.isArray(Y)?Y[3]:pe,wn=Math.max(qe,xn,En),Un=Math.min(qe,xn,En),Di=(wn+Un)/2;let Ur=0,be=0;if(Un!==wn){const tn=wn-Un;switch(be=Di>.5?tn/(2-wn-Un):tn/(wn+Un),wn){case qe:Ur=(xn-En)/tn+(xn<En?6:0);break;case xn:Ur=(En-qe)/tn+2;break;case En:Ur=(qe-xn)/tn+4;break;default:break}Ur/=6}return[Ur,be,Di,jn==null?1:jn]}u.rgba2hsla=m;function b(Y,Pt,Xt,pe){const qe=Array.isArray(Y)?Y[0]:Y,xn=Array.isArray(Y)?Y[1]:Pt,En=Array.isArray(Y)?Y[2]:Xt,jn=Array.isArray(Y)?Y[3]:pe,wn=En<=.5?En*(xn+1):En+xn-En*xn,Un=2*En-wn;return[a(Un,wn,qe+1/3)*256,a(Un,wn,qe)*256,a(Un,wn,qe-1/3)*256,jn==null?1:jn]}u.hsla2rgba=b;function w(Y){return new u(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),Y?void 0:parseFloat(Math.random().toFixed(2)))}u.random=w;function S(){const Y="0123456789ABCDEF";let Pt="#";for(let Xt=0;Xt<6;Xt+=1)Pt+=Y[Math.floor(Math.random()*16)];return Pt}u.randomHex=S;function C(Y){return w(Y).toString()}u.randomRGBA=C;function A(Y,Pt){if(typeof Y=="string"){const En=Y[0]==="#",[jn,wn,Un]=B(Y);return Pt?jn*.299+wn*.587+Un*.114>186?"#000000":"#ffffff":`${En?"#":""}${j(255-jn,255-wn,255-Un)}`}const Xt=Y[0],pe=Y[1],qe=Y[2],xn=Y[3];return Pt?Xt*.299+pe*.587+qe*.114>186?[0,0,0,xn]:[255,255,255,xn]:[255-Xt,255-pe,255-qe,xn]}u.invert=A;function B(Y){const Pt=Y.indexOf("#")===0?Y:`#${Y}`;let Xt=Number(`0x${Pt.substr(1)}`);if(!(Pt.length===4||Pt.length===7)||Number.isNaN(Xt))throw new Error("Invalid hex color.");const pe=Pt.length===4?4:8,qe=(1<<pe)-1,xn=["b","g","r"].map(()=>{const En=Xt&qe;return Xt>>=pe,pe===4?17*En:En});return[xn[2],xn[1],xn[0]]}function j(Y,Pt,Xt){const pe=qe=>qe.length<2?`0${qe}`:qe;return`${pe(Y.toString(16))}${pe(Pt.toString(16))}${pe(Xt.toString(16))}`}function H(Y,Pt){return ct(Y,Pt)}u.lighten=H;function nt(Y,Pt){return ct(Y,-Pt)}u.darken=nt;function ct(Y,Pt){if(typeof Y=="string"){const qe=Y[0]==="#",xn=parseInt(qe?Y.substr(1):Y,16),En=Nt((xn>>16)+Pt,0,255),jn=Nt((xn>>8&255)+Pt,0,255),wn=Nt((xn&255)+Pt,0,255);return`${qe?"#":""}${(wn|jn<<8|En<<16).toString(16)}`}const Xt=j(Y[0],Y[1],Y[2]),pe=B(ct(Xt,Pt));return[pe[0],pe[1],pe[2],Y[3]]}})(pu||(pu={})),function(u){u.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(pu||(pu={}));class Ig{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(t){return this.map.has(t)}get(t){return this.map.get(t)}set(t,e){this.map.set(t,e),this.arr.push(t)}delete(t){const e=this.arr.indexOf(t);e>=0&&this.arr.splice(e,1);const r=this.map.get(t);return this.map.delete(t),r}each(t){this.arr.forEach(e=>{const r=this.map.get(e);t(r,e)})}dispose(){this.clear()}}var cl;(function(u){function t(a){const f=[],h=[];return Array.isArray(a)?f.push(...a):a.split("|").forEach(g=>{g.indexOf("&")===-1?f.push(g):h.push(...g.split("&"))}),{or:f,and:h}}u.parse=t;function e(a,f){if(a!=null&&f!=null){const h=t(a),g=t(f),m=h.or.sort(),b=g.or.sort(),w=h.and.sort(),S=g.and.sort(),C=(A,B)=>A.length===B.length&&(A.length===0||A.every((j,H)=>j===B[H]));return C(m,b)&&C(w,S)}return a==null&&f==null}u.equals=e;function r(a,f,h){if(f==null||Array.isArray(f)&&f.length===0)return h?a.altKey!==!0&&a.ctrlKey!==!0&&a.metaKey!==!0&&a.shiftKey!==!0:!0;const{or:g,and:m}=t(f),b=w=>{const S=`${w.toLowerCase()}Key`;return a[S]===!0};return g.some(w=>b(w))&&m.every(w=>b(w))}u.isMatch=r})(cl||(cl={}));var ul;(function(u){u.linear=t=>t,u.quad=t=>t*t,u.cubic=t=>t*t*t,u.inout=t=>{if(t<=0)return 0;if(t>=1)return 1;const e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)},u.exponential=t=>Math.pow(2,10*(t-1)),u.bounce=t=>{for(let e=0,r=1;;e+=r,r/=2)if(t>=(7-4*e)/11){const a=(11-6*e-11*t)/4;return-a*a+r*r}}})(ul||(ul={})),function(u){u.decorators={reverse(t){return e=>1-t(1-e)},reflect(t){return e=>.5*(e<.5?t(2*e):2-t(2-2*e))},clamp(t,e=0,r=1){return a=>{const f=t(a);return f<e?e:f>r?r:f}},back(t=1.70158){return e=>e*e*((t+1)*e-t)},elastic(t=1.5){return e=>Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}}(ul||(ul={})),function(u){function t(be){return-1*Math.cos(be*(Math.PI/2))+1}u.easeInSine=t;function e(be){return Math.sin(be*(Math.PI/2))}u.easeOutSine=e;function r(be){return-.5*(Math.cos(Math.PI*be)-1)}u.easeInOutSine=r;function a(be){return be*be}u.easeInQuad=a;function f(be){return be*(2-be)}u.easeOutQuad=f;function h(be){return be<.5?2*be*be:-1+(4-2*be)*be}u.easeInOutQuad=h;function g(be){return be*be*be}u.easeInCubic=g;function m(be){const tn=be-1;return tn*tn*tn+1}u.easeOutCubic=m;function b(be){return be<.5?4*be*be*be:(be-1)*(2*be-2)*(2*be-2)+1}u.easeInOutCubic=b;function w(be){return be*be*be*be}u.easeInQuart=w;function S(be){const tn=be-1;return 1-tn*tn*tn*tn}u.easeOutQuart=S;function C(be){const tn=be-1;return be<.5?8*be*be*be*be:1-8*tn*tn*tn*tn}u.easeInOutQuart=C;function A(be){return be*be*be*be*be}u.easeInQuint=A;function B(be){const tn=be-1;return 1+tn*tn*tn*tn*tn}u.easeOutQuint=B;function j(be){const tn=be-1;return be<.5?16*be*be*be*be*be:1+16*tn*tn*tn*tn*tn}u.easeInOutQuint=j;function H(be){return be===0?0:Math.pow(2,10*(be-1))}u.easeInExpo=H;function nt(be){return be===1?1:-Math.pow(2,-10*be)+1}u.easeOutExpo=nt;function ct(be){if(be===0||be===1)return be;const tn=be*2,Nr=tn-1;return tn<1?.5*Math.pow(2,10*Nr):.5*(-Math.pow(2,-10*Nr)+2)}u.easeInOutExpo=ct;function Y(be){const tn=be/1;return-1*(Math.sqrt(1-tn*be)-1)}u.easeInCirc=Y;function Pt(be){const tn=be-1;return Math.sqrt(1-tn*tn)}u.easeOutCirc=Pt;function Xt(be){const tn=be*2,Nr=tn-2;return tn<1?-.5*(Math.sqrt(1-tn*tn)-1):.5*(Math.sqrt(1-Nr*Nr)+1)}u.easeInOutCirc=Xt;function pe(be,tn=1.70158){return be*be*((tn+1)*be-tn)}u.easeInBack=pe;function qe(be,tn=1.70158){const Nr=be/1-1;return Nr*Nr*((tn+1)*Nr+tn)+1}u.easeOutBack=qe;function xn(be,tn=1.70158){const Nr=be*2,qi=Nr-2,Ji=tn*1.525;return Nr<1?.5*Nr*Nr*((Ji+1)*Nr-Ji):.5*(qi*qi*((Ji+1)*qi+Ji)+2)}u.easeInOutBack=xn;function En(be,tn=.7){if(be===0||be===1)return be;const qi=be/1-1,Ji=1-tn,Go=Ji/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*qi)*Math.sin((qi-Go)*(2*Math.PI)/Ji))}u.easeInElastic=En;function jn(be,tn=.7){const Nr=1-tn,qi=be*2;if(be===0||be===1)return be;const Ji=Nr/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*qi)*Math.sin((qi-Ji)*(2*Math.PI)/Nr)+1}u.easeOutElastic=jn;function wn(be,tn=.65){const Nr=1-tn;if(be===0||be===1)return be;const qi=be*2,Ji=qi-1,Go=Nr/(2*Math.PI)*Math.asin(1);return qi<1?-.5*(Math.pow(2,10*Ji)*Math.sin((Ji-Go)*(2*Math.PI)/Nr)):Math.pow(2,-10*Ji)*Math.sin((Ji-Go)*(2*Math.PI)/Nr)*.5+1}u.easeInOutElastic=wn;function Un(be){const tn=be/1;if(tn<1/2.75)return 7.5625*tn*tn;if(tn<2/2.75){const Nr=tn-.5454545454545454;return 7.5625*Nr*Nr+.75}if(tn<2.5/2.75){const Nr=tn-.8181818181818182;return 7.5625*Nr*Nr+.9375}{const Nr=tn-.9545454545454546;return 7.5625*Nr*Nr+.984375}}u.easeOutBounce=Un;function Di(be){return 1-Un(1-be)}u.easeInBounce=Di;function Ur(be){return be<.5?Di(be*2)*.5:Un(be*2-1)*.5+.5}u.easeInOutBounce=Ur}(ul||(ul={}));var lf;(function(u){u.number=(t,e)=>{const r=e-t;return a=>t+r*a},u.object=(t,e)=>{const r=Object.keys(t);return a=>{const f={};for(let h=r.length-1;h!==-1;h-=1){const g=r[h];f[g]=t[g]+(e[g]-t[g])*a}return f}},u.unit=(t,e)=>{const r=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,a=r.exec(t),f=r.exec(e),h=f?f[1]:"",g=a?+a[1]:0,m=f?+f[1]:0,b=h.indexOf("."),w=b>0?h[1].length-b-1:0,S=m-g,C=a?a[2]:"";return A=>(g+S*A).toFixed(w)+C},u.color=(t,e)=>{const r=parseInt(t.slice(1),16),a=parseInt(e.slice(1),16),f=r&255,h=(a&255)-f,g=r&65280,m=(a&65280)-g,b=r&16711680,w=(a&16711680)-b;return S=>{const C=f+h*S&255,A=g+m*S&65280,B=b+w*S&16711680;return`#${(1<<24|C|A|B).toString(16).slice(1)}`}}})(lf||(lf={}));const Md=[];function em(u,t){const e=Md.find(r=>r.name===u);if(!(e&&(e.loadTimes+=1,e.loadTimes>1))&&!mi.isApplyingHMR()){const r=document.createElement("style");r.setAttribute("type","text/css"),r.textContent=t;const a=document.querySelector("head");a&&a.insertBefore(r,a.firstChild),Md.push({name:u,loadTimes:1,styleElement:r})}}function nm(u){const t=Md.findIndex(e=>e.name===u);if(t>-1){const e=Md[t];if(e.loadTimes-=1,e.loadTimes>0)return;let r=e.styleElement;r&&r.parentNode&&r.parentNode.removeChild(r),r=null,Md.splice(t,1)}}var Ni;(function(u){function t(r){return 180*r/Math.PI%360}u.toDeg=t,u.toRad=function(r,a=!1){return(a?r:r%360)*Math.PI/180};function e(r){return r%360+(r<0?360:0)}u.normalize=e})(Ni||(Ni={}));var Ai;(function(u){function t(g,m=0){return Number.isInteger(g)?g:+g.toFixed(m)}u.round=t;function e(g,m){let b,w;if(m==null?(w=g==null?1:g,b=0):(w=m,b=g==null?0:g),w<b){const S=b;b=w,w=S}return Math.floor(Math.random()*(w-b+1)+b)}u.random=e;function r(g,m,b){return Number.isNaN(g)?NaN:Number.isNaN(m)||Number.isNaN(b)?0:m<b?g<m?m:g>b?b:g:g<b?b:g>m?m:g}u.clamp=r;function a(g,m){return m*Math.round(g/m)}u.snapToGrid=a;function f(g,m){return m!=null&&g!=null&&m.x>=g.x&&m.x<=g.x+g.width&&m.y>=g.y&&m.y<=g.y+g.height}u.containsPoint=f;function h(g,m){const b=g.x-m.x,w=g.y-m.y;return b*b+w*w}u.squaredLength=h})(Ai||(Ai={}));class ll{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class St extends ll{constructor(t,e){super(),this.x=t==null?0:t,this.y=e==null?0:e}round(t=0){return this.x=Ai.round(this.x,t),this.y=Ai.round(this.y,t),this}add(t,e){const r=St.create(t,e);return this.x+=r.x,this.y+=r.y,this}update(t,e){const r=St.create(t,e);return this.x=r.x,this.y=r.y,this}translate(t,e){const r=St.create(t,e);return this.x+=r.x,this.y+=r.y,this}rotate(t,e){const r=St.rotate(this,t,e);return this.x=r.x,this.y=r.y,this}scale(t,e,r=new St){const a=St.create(r);return this.x=a.x+t*(this.x-a.x),this.y=a.y+e*(this.y-a.y),this}closest(t){if(t.length===1)return St.create(t[0]);let e=null,r=1/0;return t.forEach(a=>{const f=this.squaredDistance(a);f<r&&(e=a,r=f)}),e?St.create(e):null}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredDistance(t){const e=St.create(t),r=this.x-e.x,a=this.y-e.y;return r*r+a*a}manhattanDistance(t){const e=St.create(t);return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(t=new St){const e=St.create(t),r=-(e.y-this.y),a=e.x-this.x;let f=Math.atan2(r,a);return f<0&&(f=2*Math.PI+f),180*f/Math.PI}angleBetween(t,e){if(this.equals(t)||this.equals(e))return NaN;let r=this.theta(e)-this.theta(t);return r<0&&(r+=360),r}vectorAngle(t){return new St(0,0).angleBetween(this,t)}toPolar(t){return this.update(St.toPolar(this,t)),this}changeInAngle(t,e,r=new St){return this.clone().translate(-t,-e).theta(r)-this.theta(r)}adhereToRect(t){return Ai.containsPoint(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}bearing(t){const e=St.create(t),r=Ni.toRad(this.y),a=Ni.toRad(e.y),f=this.x,h=e.x,g=Ni.toRad(h-f),m=Math.sin(g)*Math.cos(a),b=Math.cos(r)*Math.sin(a)-Math.sin(r)*Math.cos(a)*Math.cos(g),w=Ni.toDeg(Math.atan2(m,b)),S=["NE","E","SE","S","SW","W","NW","N"];let C=w-22.5;return C<0&&(C+=360),C=parseInt(C/45,10),S[C]}cross(t,e){if(t!=null&&e!=null){const r=St.create(t),a=St.create(e);return(a.x-this.x)*(r.y-this.y)-(a.y-this.y)*(r.x-this.x)}return NaN}dot(t){const e=St.create(t);return this.x*e.x+this.y*e.y}diff(t,e){if(typeof t=="number")return new St(this.x-t,this.y-e);const r=St.create(t);return new St(this.x-r.x,this.y-r.y)}lerp(t,e){const r=St.create(t);return new St((1-e)*this.x+e*r.x,(1-e)*this.y+e*r.y)}normalize(t=1){const e=t/this.magnitude();return this.scale(e,e)}move(t,e){const r=St.create(t),a=Ni.toRad(r.theta(this));return this.translate(Math.cos(a)*e,-Math.sin(a)*e)}reflection(t){return St.create(t).move(this,this.distance(t))}snapToGrid(t,e){return this.x=Ai.snapToGrid(this.x,t),this.y=Ai.snapToGrid(this.y,e==null?t:e),this}equals(t){const e=St.create(t);return e!=null&&e.x===this.x&&e.y===this.y}clone(){return St.clone(this)}toJSON(){return St.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(u){function t(e){return e!=null&&e instanceof u}u.isPoint=t})(St||(St={})),function(u){function t(r){return r!=null&&typeof r=="object"&&typeof r.x=="number"&&typeof r.y=="number"}u.isPointLike=t;function e(r){return r!=null&&Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"}u.isPointData=e}(St||(St={})),function(u){function t(S,C){return S==null||typeof S=="number"?new u(S,C):e(S)}u.create=t;function e(S){return u.isPoint(S)?new u(S.x,S.y):Array.isArray(S)?new u(S[0],S[1]):new u(S.x,S.y)}u.clone=e;function r(S){return u.isPoint(S)?{x:S.x,y:S.y}:Array.isArray(S)?{x:S[0],y:S[1]}:{x:S.x,y:S.y}}u.toJSON=r;function a(S,C,A=new u){let B=Math.abs(S*Math.cos(C)),j=Math.abs(S*Math.sin(C));const H=e(A),nt=Ni.normalize(Ni.toDeg(C));return nt<90?j=-j:nt<180?(B=-B,j=-j):nt<270&&(B=-B),new u(H.x+B,H.y+j)}u.fromPolar=a;function f(S,C=new u){const A=e(S),B=e(C),j=A.x-B.x,H=A.y-B.y;return new u(Math.sqrt(j*j+H*H),Ni.toRad(B.theta(A)))}u.toPolar=f;function h(S,C){return S===C?!0:S!=null&&C!=null?S.x===C.x&&S.y===C.y:!1}u.equals=h;function g(S,C){if(S==null&&C!=null||S!=null&&C==null||S!=null&&C!=null&&S.length!==C.length)return!1;if(S!=null&&C!=null){for(let A=0,B=S.length;A<B;A+=1)if(!h(S[A],C[A]))return!1}return!0}u.equalPoints=g;function m(S,C,A,B){return new u(Ai.random(S,C),Ai.random(A,B))}u.random=m;function b(S,C,A){const B=Ni.toRad(Ni.normalize(-C)),j=Math.sin(B),H=Math.cos(B);return w(S,H,j,A)}u.rotate=b;function w(S,C,A,B=new u){const j=e(S),H=e(B),nt=j.x-H.x,ct=j.y-H.y,Y=nt*C-ct*A,Pt=ct*C+nt*A;return new u(Y+H.x,Pt+H.y)}u.rotateEx=w}(St||(St={}));class pn extends ll{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new St(this.x,this.y)}get topLeft(){return new St(this.x,this.y)}get topCenter(){return new St(this.x+this.width/2,this.y)}get topRight(){return new St(this.x+this.width,this.y)}get center(){return new St(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new St(this.x,this.y+this.height)}get bottomCenter(){return new St(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new St(this.x+this.width,this.y+this.height)}get corner(){return new St(this.x+this.width,this.y+this.height)}get rightMiddle(){return new St(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new St(this.x,this.y+this.height/2)}get topLine(){return new kn(this.topLeft,this.topRight)}get rightLine(){return new kn(this.topRight,this.bottomRight)}get bottomLine(){return new kn(this.bottomLeft,this.bottomRight)}get leftLine(){return new kn(this.topLeft,this.bottomLeft)}constructor(t,e,r,a){super(),this.x=t==null?0:t,this.y=e==null?0:e,this.width=r==null?0:r,this.height=a==null?0:a}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(t){if(!t)return this.clone();const e=Ni.toRad(t),r=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e)),f=this.width*a+this.height*r,h=this.width*r+this.height*a;return new pn(this.x+(this.width-f)/2,this.y+(this.height-h)/2,f,h)}round(t=0){return this.x=Ai.round(this.x,t),this.y=Ai.round(this.y,t),this.width=Ai.round(this.width,t),this.height=Ai.round(this.height,t),this}add(t,e,r,a){const f=pn.create(t,e,r,a),h=Math.min(this.x,f.x),g=Math.min(this.y,f.y),m=Math.max(this.x+this.width,f.x+f.width),b=Math.max(this.y+this.height,f.y+f.height);return this.x=h,this.y=g,this.width=m-h,this.height=b-g,this}update(t,e,r,a){const f=pn.create(t,e,r,a);return this.x=f.x,this.y=f.y,this.width=f.width,this.height=f.height,this}inflate(t,e){const r=t,a=e!=null?e:t;return this.x-=r,this.y-=a,this.width+=2*r,this.height+=2*a,this}snapToGrid(t,e){const r=this.origin.snapToGrid(t,e),a=this.corner.snapToGrid(t,e);return this.x=r.x,this.y=r.y,this.width=a.x-r.x,this.height=a.y-r.y,this}translate(t,e){const r=St.create(t,e);return this.x+=r.x,this.y+=r.y,this}scale(t,e,r=new St){const a=this.origin.scale(t,e,r);return this.x=a.x,this.y=a.y,this.width*=t,this.height*=e,this}rotate(t,e=this.getCenter()){if(t!==0){const r=Ni.toRad(t),a=Math.cos(r),f=Math.sin(r);let h=this.getOrigin(),g=this.getTopRight(),m=this.getBottomRight(),b=this.getBottomLeft();h=St.rotateEx(h,a,f,e),g=St.rotateEx(g,a,f,e),m=St.rotateEx(m,a,f,e),b=St.rotateEx(b,a,f,e);const w=new pn(h.x,h.y,0,0);w.add(g.x,g.y,0,0),w.add(m.x,m.y,0,0),w.add(b.x,b.y,0,0),this.update(w)}return this}rotate90(){const t=(this.width-this.height)/2;this.x+=t,this.y-=t;const e=this.width;return this.width=this.height,this.height=e,this}moveAndExpand(t){const e=pn.clone(t);return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this}getMaxScaleToFit(t,e=this.center){const r=pn.clone(t),a=e.x,f=e.y;let h=1/0,g=1/0,m=1/0,b=1/0,w=1/0,S=1/0,C=1/0,A=1/0;const B=r.topLeft;B.x<a&&(h=(this.x-a)/(B.x-a)),B.y<f&&(w=(this.y-f)/(B.y-f));const j=r.bottomRight;j.x>a&&(g=(this.x+this.width-a)/(j.x-a)),j.y>f&&(S=(this.y+this.height-f)/(j.y-f));const H=r.topRight;H.x>a&&(m=(this.x+this.width-a)/(H.x-a)),H.y<f&&(C=(this.y-f)/(H.y-f));const nt=r.bottomLeft;return nt.x<a&&(b=(this.x-a)/(nt.x-a)),nt.y>f&&(A=(this.y+this.height-f)/(nt.y-f)),{sx:Math.min(h,g,m,b),sy:Math.min(w,S,C,A)}}getMaxUniformScaleToFit(t,e=this.center){const r=this.getMaxScaleToFit(t,e);return Math.min(r.sx,r.sy)}containsPoint(t,e){return Ai.containsPoint(this,St.create(t,e))}containsRect(t,e,r,a){const f=pn.create(t,e,r,a),h=this.x,g=this.y,m=this.width,b=this.height,w=f.x,S=f.y,C=f.width,A=f.height;return m===0||b===0||C===0||A===0?!1:w>=h&&S>=g&&w+C<=h+m&&S+A<=g+b}intersectsWithLine(t){const e=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],r=[],a=[];return e.forEach(f=>{const h=t.intersectsWithLine(f);h!==null&&a.indexOf(h.toString())<0&&(r.push(h),a.push(h.toString()))}),r.length>0?r:null}intersectsWithLineFromCenterToPoint(t,e){const r=St.clone(t),a=this.center;let f=null;e!=null&&e!==0&&r.rotate(e,a);const h=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],g=new kn(a,r);for(let m=h.length-1;m>=0;m-=1){const b=h[m].intersectsWithLine(g);if(b!==null){f=b;break}}return f&&e!=null&&e!==0&&f.rotate(-e,a),f}intersectsWithRect(t,e,r,a){const f=pn.create(t,e,r,a);if(!this.isIntersectWithRect(f))return null;const h=this.origin,g=this.corner,m=f.origin,b=f.corner,w=Math.max(h.x,m.x),S=Math.max(h.y,m.y);return new pn(w,S,Math.min(g.x,b.x)-w,Math.min(g.y,b.y)-S)}isIntersectWithRect(t,e,r,a){const f=pn.create(t,e,r,a),h=this.origin,g=this.corner,m=f.origin,b=f.corner;return!(b.x<=h.x||b.y<=h.y||m.x>=g.x||m.y>=g.y)}normalize(){let t=this.x,e=this.y,r=this.width,a=this.height;return this.width<0&&(t=this.x+this.width,r=-this.width),this.height<0&&(e=this.y+this.height,a=-this.height),this.x=t,this.y=e,this.width=r,this.height=a,this}union(t){const e=pn.clone(t),r=this.origin,a=this.corner,f=e.origin,h=e.corner,g=Math.min(r.x,f.x),m=Math.min(r.y,f.y),b=Math.max(a.x,h.x),w=Math.max(a.y,h.y);return new pn(g,m,b-g,w-m)}getNearestSideToPoint(t){const e=St.clone(t),r=e.x-this.x,a=this.x+this.width-e.x,f=e.y-this.y,h=this.y+this.height-e.y;let g=r,m="left";return a<g&&(g=a,m="right"),f<g&&(g=f,m="top"),h<g&&(m="bottom"),m}getNearestPointToPoint(t){const e=St.clone(t);if(this.containsPoint(e)){const r=this.getNearestSideToPoint(e);if(r==="left")return new St(this.x,e.y);if(r==="top")return new St(e.x,this.y);if(r==="right")return new St(this.x+this.width,e.y);if(r==="bottom")return new St(e.x,this.y+this.height)}return e.adhereToRect(this)}equals(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}clone(){return new pn(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(u){function t(e){return e!=null&&e instanceof u}u.isRectangle=t})(pn||(pn={})),function(u){function t(e){return e!=null&&typeof e=="object"&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.width=="number"&&typeof e.height=="number"}u.isRectangleLike=t}(pn||(pn={})),function(u){function t(h,g,m,b){return h==null||typeof h=="number"?new u(h,g,m,b):e(h)}u.create=t;function e(h){return u.isRectangle(h)?h.clone():Array.isArray(h)?new u(h[0],h[1],h[2],h[3]):new u(h.x,h.y,h.width,h.height)}u.clone=e;function r(h){return new u(h.x-h.a,h.y-h.b,2*h.a,2*h.b)}u.fromEllipse=r;function a(h){return new u(0,0,h.width,h.height)}u.fromSize=a;function f(h,g){return new u(h.x,h.y,g.width,g.height)}u.fromPositionAndSize=f}(pn||(pn={}));class kn extends ll{get center(){return new St((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(t,e,r,a){super(),typeof t=="number"&&typeof e=="number"?(this.start=new St(t,e),this.end=new St(r,a)):(this.start=St.create(t),this.end=St.create(e))}getCenter(){return this.center}round(t=0){return this.start.round(t),this.end.round(t),this}translate(t,e){return typeof t=="number"?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this}rotate(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this}scale(t,e,r){return this.start.scale(t,e,r),this.end.scale(t,e,r),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e}setLength(t){const e=this.length();if(!e)return this;const r=t/e;return this.scale(r,r,this.start)}parallel(t){const e=this.clone();if(!e.isDifferentiable())return e;const{start:r,end:a}=e,f=r.clone().rotate(270,a),h=a.clone().rotate(90,r);return r.move(h,t),a.move(f,t),e}vector(){return new St(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const t=new St(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}bbox(){const t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),r=Math.max(this.start.x,this.end.x),a=Math.max(this.start.y,this.end.y);return new pn(t,e,r-t,a-e)}bearing(){return this.start.bearing(this.end)}closestPoint(t){return this.pointAt(this.closestPointNormalizedLength(t))}closestPointLength(t){return this.closestPointNormalizedLength(t)*this.length()}closestPointTangent(t){return this.tangentAt(this.closestPointNormalizedLength(t))}closestPointNormalizedLength(t){const e=this.vector().dot(new kn(this.start,t).vector()),r=Math.min(1,Math.max(0,e/this.squaredLength()));return Number.isNaN(r)?0:r}pointAt(t){const e=this.start,r=this.end;return t<=0?e.clone():t>=1?r.clone():e.lerp(r,t)}pointAtLength(t){const e=this.start,r=this.end;let a=!0;t<0&&(a=!1,t=-t);const f=this.length();if(t>=f)return a?r.clone():e.clone();const h=(a?t:f-t)/f;return this.pointAt(h)}divideAt(t){const e=this.pointAt(t);return[new kn(this.start,e),new kn(e,this.end)]}divideAtLength(t){const e=this.pointAtLength(t);return[new kn(this.start,e),new kn(e,this.end)]}containsPoint(t){const e=this.start,r=this.end;if(e.cross(t,r)!==0)return!1;const a=this.length();return!(new kn(e,t).length()>a||new kn(t,r).length()>a)}intersect(t,e){const r=t.intersectsWithLine(this,e);return r?Array.isArray(r)?r:[r]:null}intersectsWithLine(t){const e=new St(this.end.x-this.start.x,this.end.y-this.start.y),r=new St(t.end.x-t.start.x,t.end.y-t.start.y),a=e.x*r.y-e.y*r.x,f=new St(t.start.x-this.start.x,t.start.y-this.start.y),h=f.x*r.y-f.y*r.x,g=f.x*e.y-f.y*e.x;if(a===0||h*a<0||g*a<0)return null;if(a>0){if(h>a||g>a)return null}else if(h<a||g<a)return null;return new St(this.start.x+h*e.x/a,this.start.y+h*e.y/a)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(t){const e=St.clone(t),r=this.start,a=this.end;return((a.x-r.x)*(e.y-r.y)-(a.y-r.y)*(e.x-r.x))/this.length()}pointSquaredDistance(t,e){const r=St.create(t,e);return this.closestPoint(r).squaredDistance(r)}pointDistance(t,e){const r=St.create(t,e);return this.closestPoint(r).distance(r)}tangentAt(t){if(!this.isDifferentiable())return null;const e=this.start,r=this.end,a=this.pointAt(t),f=new kn(e,r);return f.translate(a.x-e.x,a.y-e.y),f}tangentAtLength(t){if(!this.isDifferentiable())return null;const e=this.start,r=this.end,a=this.pointAtLength(t),f=new kn(e,r);return f.translate(a.x-e.x,a.y-e.y),f}relativeCcw(t,e){const r=St.create(t,e);let a=r.x-this.start.x,f=r.y-this.start.y;const h=this.end.x-this.start.x,g=this.end.y-this.start.y;let m=a*g-f*h;return m===0&&(m=a*h+f*g,m>0&&(a-=h,f-=g,m=a*h+f*g,m<0&&(m=0))),m<0?-1:m>0?1:0}equals(t){return t!=null&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}clone(){return new kn(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}(function(u){function t(e){return e!=null&&e instanceof u}u.isLine=t})(kn||(kn={}));class uc extends ll{get center(){return new St(this.x,this.y)}constructor(t,e,r,a){super(),this.x=t==null?0:t,this.y=e==null?0:e,this.a=r==null?0:r,this.b=a==null?0:a}bbox(){return pn.fromEllipse(this)}getCenter(){return this.center}inflate(t,e){const r=t,a=e!=null?e:t;return this.a+=2*r,this.b+=2*a,this}normalizedDistance(t,e){const r=St.create(t,e),a=r.x-this.x,f=r.y-this.y,h=this.a,g=this.b;return a*a/(h*h)+f*f/(g*g)}containsPoint(t,e){return this.normalizedDistance(t,e)<=1}intersectsWithLine(t){const e=[],r=this.a,a=this.b,f=t.start,h=t.end,g=t.vector(),m=f.diff(new St(this.x,this.y)),b=new St(g.x/(r*r),g.y/(a*a)),w=new St(m.x/(r*r),m.y/(a*a)),S=g.dot(b),C=g.dot(w),A=m.dot(w)-1,B=C*C-S*A;if(B<0)return null;if(B>0){const j=Math.sqrt(B),H=(-C-j)/S,nt=(-C+j)/S;if((H<0||H>1)&&(nt<0||nt>1))return null;H>=0&&H<=1&&e.push(f.lerp(h,H)),nt>=0&&nt<=1&&e.push(f.lerp(h,nt))}else{const j=-C/S;if(j>=0&&j<=1)e.push(f.lerp(h,j));else return null}return e}intersectsWithLineFromCenterToPoint(t,e=0){const r=St.clone(t);e&&r.rotate(e,this.getCenter());const a=r.x-this.x,f=r.y-this.y;let h;if(a===0)return h=this.bbox().getNearestPointToPoint(r),e?h.rotate(-e,this.getCenter()):h;const g=f/a,m=g*g,b=this.a*this.a,w=this.b*this.b;let S=Math.sqrt(1/(1/b+m/w));S=a<0?-S:S;const C=g*S;return h=new St(this.x+S,this.y+C),e?h.rotate(-e,this.getCenter()):h}tangentTheta(t){const e=St.clone(t),r=e.x,a=e.y,f=this.a,h=this.b,g=this.bbox().center,m=g.x,b=g.y,w=30,S=r>g.x+f/2,C=r<g.x-f/2;let A,B;return S||C?(B=r>g.x?a-w:a+w,A=f*f/(r-m)-f*f*(a-b)*(B-b)/(h*h*(r-m))+m):(A=a>g.y?r+w:r-w,B=h*h/(a-b)-h*h*(r-m)*(A-m)/(f*f*(a-b))+b),new St(A,B).theta(e)}scale(t,e){return this.a*=t,this.b*=e,this}rotate(t,e){const r=pn.fromEllipse(this);r.rotate(t,e);const a=uc.fromRect(r);return this.a=a.a,this.b=a.b,this.x=a.x,this.y=a.y,this}translate(t,e){const r=St.create(t,e);return this.x+=r.x,this.y+=r.y,this}equals(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}clone(){return new uc(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(u){function t(e){return e!=null&&e instanceof u}u.isEllipse=t})(uc||(uc={})),function(u){function t(a,f,h,g){return a==null||typeof a=="number"?new u(a,f,h,g):e(a)}u.create=t;function e(a){return u.isEllipse(a)?a.clone():Array.isArray(a)?new u(a[0],a[1],a[2],a[3]):new u(a.x,a.y,a.a,a.b)}u.parse=e;function r(a){const f=a.center;return new u(f.x,f.y,a.width/2,a.height/2)}u.fromRect=r}(uc||(uc={}));const Pg=new RegExp("^[\\s\\dLMCZz,.]*$");function rm(u){return typeof u!="string"?!1:Pg.test(u)}function _n(u,t){return(u%t+t)%t}function Yp(u,t,e,r,a){const f=[],h=u[u.length-1],g=t!=null&&t>0,m=t||0;if(r&&g){u=u.slice();const S=u[0],C=new St(h.x+(S.x-h.x)/2,h.y+(S.y-h.y)/2);u.splice(0,0,C)}let b=u[0],w=1;for(e?f.push("M",b.x,b.y):f.push("L",b.x,b.y);w<(r?u.length:u.length-1);){let S=u[_n(w,u.length)],C=b.x-S.x,A=b.y-S.y;if(g&&(C!==0||A!==0)&&(a==null||a.indexOf(w-1)<0)){let B=Math.sqrt(C*C+A*A);const j=C*Math.min(m,B/2)/B,H=A*Math.min(m,B/2)/B,nt=S.x+j,ct=S.y+H;f.push("L",nt,ct);let Y=u[_n(w+1,u.length)];for(;w<u.length-2&&Math.round(Y.x-S.x)===0&&Math.round(Y.y-S.y)===0;)Y=u[_n(w+2,u.length)],w+=1;C=Y.x-S.x,A=Y.y-S.y,B=Math.max(1,Math.sqrt(C*C+A*A));const Pt=C*Math.min(m,B/2)/B,Xt=A*Math.min(m,B/2)/B,pe=S.x+Pt,qe=S.y+Xt;f.push("Q",S.x,S.y,pe,qe),S=new St(pe,qe)}else f.push("L",S.x,S.y);b=S,w+=1}return r?f.push("Z"):f.push("L",h.x,h.y),f.map(S=>typeof S=="string"?S:+S.toFixed(3)).join(" ")}function zr(u,t={}){const e=[];return u&&u.length&&u.forEach(r=>{Array.isArray(r)?e.push({x:r[0],y:r[1]}):e.push({x:r.x,y:r.y})}),Yp(e,t.round,t.initialMove==null||t.initialMove,t.close,t.exclude)}function Id(u,t,e,r,a=0,f=0,h=0,g,m){if(e===0||r===0)return[];g-=u,m-=t,e=Math.abs(e),r=Math.abs(r);const b=-g/2,w=-m/2,S=Math.cos(a*Math.PI/180),C=Math.sin(a*Math.PI/180),A=S*b+C*w,B=-1*C*b+S*w,j=A*A,H=B*B,nt=e*e,ct=r*r,Y=j/nt+H/ct;let Pt;if(Y>1)e=Math.sqrt(Y)*e,r=Math.sqrt(Y)*r,Pt=0;else{let c=1;f===h&&(c=-1),Pt=c*Math.sqrt((nt*ct-nt*H-ct*j)/(nt*H+ct*j))}const Xt=Pt*e*B/r,pe=-1*Pt*r*A/e,qe=S*Xt-C*pe+g/2,xn=C*Xt+S*pe+m/2;let En=Math.atan2((B-pe)/r,(A-Xt)/e)-Math.atan2(0,1),jn=En>=0?En:2*Math.PI+En;En=Math.atan2((-B-pe)/r,(-A-Xt)/e)-Math.atan2((B-pe)/r,(A-Xt)/e);let wn=En>=0?En:2*Math.PI+En;h===0&&wn>0?wn-=2*Math.PI:h!==0&&wn<0&&(wn+=2*Math.PI);const Un=wn*2/Math.PI,Di=Math.ceil(Un<0?-1*Un:Un),Ur=wn/Di,be=8/3*Math.sin(Ur/4)*Math.sin(Ur/4)/Math.sin(Ur/2),tn=S*e,Nr=S*r,qi=C*e,Ji=C*r;let Go=Math.cos(jn),Ws=Math.sin(jn),Pv=-be*(tn*Ws+Ji*Go),n=-be*(qi*Ws-Nr*Go),i=0,o=0;const s=[];for(let c=0;c<Di;c+=1){jn+=Ur,Go=Math.cos(jn),Ws=Math.sin(jn),i=tn*Go-Ji*Ws+qe,o=qi*Go+Nr*Ws+xn;const l=-be*(tn*Ws+Ji*Go),d=-be*(qi*Ws-Nr*Go),p=c*6;s[p]=Number(Pv+u),s[p+1]=Number(n+t),s[p+2]=Number(i-l+u),s[p+3]=Number(o-d+t),s[p+4]=Number(i+u),s[p+5]=Number(o+t),Pv=i+l,n=o+d}return s.map(c=>+c.toFixed(2))}function im(u,t,e,r,a=0,f=0,h=0,g,m){const b=[],w=Id(u,t,e,r,a,f,h,g,m);if(w!=null)for(let S=0,C=w.length;S<C;S+=6)b.push("C",w[S],w[S+1],w[S+2],w[S+3],w[S+4],w[S+5]);return b.join(" ")}class Zi extends ll{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(t){if(super(),t!=null){if(typeof t=="string")return Zi.parse(t);this.points=t.map(e=>St.create(e))}else this.points=[]}scale(t,e,r=new St){return this.points.forEach(a=>a.scale(t,e,r)),this}rotate(t,e){return this.points.forEach(r=>r.rotate(t,e)),this}translate(t,e){const r=St.create(t,e);return this.points.forEach(a=>a.translate(r.x,r.y)),this}round(t=0){return this.points.forEach(e=>e.round(t)),this}bbox(){if(this.points.length===0)return new pn;let t=1/0,e=-1/0,r=1/0,a=-1/0;const f=this.points;for(let h=0,g=f.length;h<g;h+=1){const m=f[h],b=m.x,w=m.y;b<t&&(t=b),b>e&&(e=b),w<r&&(r=w),w>a&&(a=w)}return new pn(t,r,e-t,a-r)}closestPoint(t){const e=this.closestPointLength(t);return this.pointAtLength(e)}closestPointLength(t){const e=this.points,r=e.length;if(r===0||r===1)return 0;let a=0,f=0,h=1/0;for(let g=0,m=r-1;g<m;g+=1){const b=new kn(e[g],e[g+1]),w=b.length(),S=b.closestPointNormalizedLength(t),A=b.pointAt(S).squaredDistance(t);A<h&&(h=A,f=a+S*w),a+=w}return f}closestPointNormalizedLength(t){const e=this.length();return e===0?0:this.closestPointLength(t)/e}closestPointTangent(t){const e=this.closestPointLength(t);return this.tangentAtLength(e)}containsPoint(t){if(this.points.length===0)return!1;const e=St.clone(t),r=e.x,a=e.y,f=this.points,h=f.length;let g=h-1,m=0;for(let b=0;b<h;b+=1){const w=f[g],S=f[b];if(e.equals(w))return!0;const C=new kn(w,S);if(C.containsPoint(t))return!0;if(a<=w.y&&a>S.y||a>w.y&&a<=S.y){const A=w.x-r>S.x-r?w.x-r:S.x-r;if(A>=0){const B=new St(r+A,a),j=new kn(t,B);C.intersectsWithLine(j)&&(m+=1)}}g=b}return m%2===1}intersectsWithLine(t){const e=[];for(let r=0,a=this.points.length-1;r<a;r+=1){const f=this.points[r],h=this.points[r+1],g=t.intersectsWithLine(new kn(f,h));g&&e.push(g)}return e.length>0?e:null}isDifferentiable(){for(let t=0,e=this.points.length-1;t<e;t+=1){const r=this.points[t],a=this.points[t+1];if(new kn(r,a).isDifferentiable())return!0}return!1}length(){let t=0;for(let e=0,r=this.points.length-1;e<r;e+=1){const a=this.points[e],f=this.points[e+1];t+=a.distance(f)}return t}pointAt(t){const e=this.points,r=e.length;if(r===0)return null;if(r===1||t<=0)return e[0].clone();if(t>=1)return e[r-1].clone();const f=this.length()*t;return this.pointAtLength(f)}pointAtLength(t){const e=this.points,r=e.length;if(r===0)return null;if(r===1)return e[0].clone();let a=!0;t<0&&(a=!1,t=-t);let f=0;for(let g=0,m=r-1;g<m;g+=1){const b=a?g:m-1-g,w=e[b],S=e[b+1],C=new kn(w,S),A=w.distance(S);if(t<=f+A)return C.pointAtLength((a?1:-1)*(t-f));f+=A}return(a?e[r-1]:e[0]).clone()}tangentAt(t){const r=this.points.length;if(r===0||r===1)return null;t<0&&(t=0),t>1&&(t=1);const f=this.length()*t;return this.tangentAtLength(f)}tangentAtLength(t){const e=this.points,r=e.length;if(r===0||r===1)return null;let a=!0;t<0&&(a=!1,t=-t);let f,h=0;for(let g=0,m=r-1;g<m;g+=1){const b=a?g:m-1-g,w=e[b],S=e[b+1],C=new kn(w,S),A=w.distance(S);if(C.isDifferentiable()){if(t<=h+A)return C.tangentAtLength((a?1:-1)*(t-h));f=C}h+=A}if(f){const g=a?1:0;return f.tangentAt(g)}return null}simplify(t={}){const e=this.points;if(e.length<3)return this;const r=t.threshold||0;let a=0;for(;e[a+2];){const f=a,h=a+1,g=a+2,m=e[f],b=e[h],w=e[g];new kn(m,w).closestPoint(b).distance(b)<=r?e.splice(h,1):a+=1}return this}toHull(){const t=this.points,e=t.length;if(e===0)return new Zi;let r=t[0];for(let C=1;C<e;C+=1)(t[C].y<r.y||t[C].y===r.y&&t[C].x>r.x)&&(r=t[C]);const a=[];for(let C=0;C<e;C+=1){let A=r.theta(t[C]);A===0&&(A=360),a.push([t[C],C,A])}if(a.sort((C,A)=>{let B=C[2]-A[2];return B===0&&(B=A[1]-C[1]),B}),a.length>2){const C=a[a.length-1];a.unshift(C)}const f={},h=[],g=C=>`${C[0].toString()}@${C[1]}`;for(;a.length!==0;){const C=a.pop(),A=C[0];if(f[g(C)])continue;let B=!1;for(;!B;)if(h.length<2)h.push(C),B=!0;else{const j=h.pop(),H=j[0],nt=h.pop(),ct=nt[0],Y=ct.cross(H,A);if(Y<0)h.push(nt),h.push(j),h.push(C),B=!0;else if(Y===0){const Xt=H.angleBetween(ct,A);Math.abs(Xt-180)<1e-10||H.equals(A)||ct.equals(H)?(f[g(j)]=H,h.push(nt)):Math.abs((Xt+1)%360-1)<1e-10&&(h.push(nt),a.push(j))}else f[g(j)]=H,h.push(nt)}}h.length>2&&h.pop();let m,b=-1;for(let C=0,A=h.length;C<A;C+=1){const B=h[C][1];(m===void 0||B<m)&&(m=B,b=C)}let w=[];if(b>0){const C=h.slice(b),A=h.slice(0,b);w=C.concat(A)}else w=h;const S=[];for(let C=0,A=w.length;C<A;C+=1)S.push(w[C][0]);return new Zi(S)}equals(t){return t==null||t.points.length!==this.points.length?!1:t.points.every((e,r)=>e.equals(this.points[r]))}clone(){return new Zi(this.points.map(t=>t.clone()))}toJSON(){return this.points.map(t=>t.toJSON())}serialize(){return this.points.map(t=>`${t.serialize()}`).join(" ")}}(function(u){function t(e){return e!=null&&e instanceof u}u.isPolyline=t})(Zi||(Zi={})),function(u){function t(e){const r=e.trim();if(r==="")return new u;const a=[],f=r.split(/\s*,\s*|\s+/);for(let h=0,g=f.length;h<g;h+=2)a.push({x:+f[h],y:+f[h+1]});return new u(a)}u.parse=t}(Zi||(Zi={}));class go extends ll{constructor(t,e,r,a){super(),this.PRECISION=3,this.start=St.create(t),this.controlPoint1=St.create(e),this.controlPoint2=St.create(r),this.end=St.create(a)}bbox(){const t=this.start,e=this.controlPoint1,r=this.controlPoint2,a=this.end,f=t.x,h=t.y,g=e.x,m=e.y,b=r.x,w=r.y,S=a.x,C=a.y,A=[],B=[],j=[[],[]];let H,nt,ct,Y,Pt,Xt,pe,qe;for(let Nr=0;Nr<2;Nr+=1){if(Nr===0?(nt=6*f-12*g+6*b,H=-3*f+9*g-9*b+3*S,ct=3*g-3*f):(nt=6*h-12*m+6*w,H=-3*h+9*m-9*w+3*C,ct=3*m-3*h),Math.abs(H)<1e-12){if(Math.abs(nt)<1e-12)continue;Y=-ct/nt,Y>0&&Y<1&&B.push(Y);continue}pe=nt*nt-4*ct*H,qe=Math.sqrt(pe),!(pe<0)&&(Pt=(-nt+qe)/(2*H),Pt>0&&Pt<1&&B.push(Pt),Xt=(-nt-qe)/(2*H),Xt>0&&Xt<1&&B.push(Xt))}let xn,En,jn,wn=B.length;const Un=wn;for(;wn;)wn-=1,Y=B[wn],jn=1-Y,xn=jn*jn*jn*f+3*jn*jn*Y*g+3*jn*Y*Y*b+Y*Y*Y*S,j[0][wn]=xn,En=jn*jn*jn*h+3*jn*jn*Y*m+3*jn*Y*Y*w+Y*Y*Y*C,j[1][wn]=En,A[wn]={X:xn,Y:En};B[Un]=0,B[Un+1]=1,A[Un]={X:f,Y:h},A[Un+1]={X:S,Y:C},j[0][Un]=f,j[1][Un]=h,j[0][Un+1]=S,j[1][Un+1]=C,B.length=Un+2,j[0].length=Un+2,j[1].length=Un+2,A.length=Un+2;const Di=Math.min.apply(null,j[0]),Ur=Math.min.apply(null,j[1]),be=Math.max.apply(null,j[0]),tn=Math.max.apply(null,j[1]);return new pn(Di,Ur,be-Di,tn-Ur)}closestPoint(t,e={}){return this.pointAtT(this.closestPointT(t,e))}closestPointLength(t,e={}){const r=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,r),r)}closestPointNormalizedLength(t,e={}){const r=this.getOptions(e),a=this.closestPointLength(t,r);if(!a)return 0;const f=this.length(r);return f===0?0:a/f}closestPointT(t,e={}){const r=this.getPrecision(e),a=this.getDivisions(e),f=Math.pow(10,-r);let h=null,g=0,m=0,b=0,w=0,S=0,C=null;const A=a.length;let B=A>0?1/A:0;for(a.forEach((j,H)=>{const nt=j.start.distance(t),ct=j.end.distance(t),Y=nt+ct;(C==null||Y<C)&&(h=j,g=H*B,m=(H+1)*B,b=nt,w=ct,C=Y,S=j.endpointDistance())});;){const j=b?Math.abs(b-w)/b:0,H=w!=null?Math.abs(b-w)/w:0,nt=j<f||H<f,ct=b?b<S*f:!0,Y=w?w<S*f:!0;if(nt||(ct||Y))return b<=w?g:m;const Xt=h.divide(.5);B/=2;const pe=Xt[0].start.distance(t),qe=Xt[0].end.distance(t),xn=pe+qe,En=Xt[1].start.distance(t),jn=Xt[1].end.distance(t),wn=En+jn;xn<=wn?(h=Xt[0],m-=B,b=pe,w=qe):(h=Xt[1],g+=B,b=En,w=jn)}}closestPointTangent(t,e={}){return this.tangentAtT(this.closestPointT(t,e))}containsPoint(t,e={}){return this.toPolyline(e).containsPoint(t)}divideAt(t,e={}){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);const r=this.tAt(t,e);return this.divideAtT(r)}divideAtLength(t,e={}){const r=this.tAtLength(t,e);return this.divideAtT(r)}divide(t){return this.divideAtT(t)}divideAtT(t){const e=this.start,r=this.controlPoint1,a=this.controlPoint2,f=this.end;if(t<=0)return[new go(e,e,e,e),new go(e,r,a,f)];if(t>=1)return[new go(e,r,a,f),new go(f,f,f,f)];const h=this.getSkeletonPoints(t),g=h.startControlPoint1,m=h.startControlPoint2,b=h.divider,w=h.dividerControlPoint1,S=h.dividerControlPoint2;return[new go(e,g,m,b),new go(b,w,S,f)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(t){const e=this.start,r=this.controlPoint1,a=this.controlPoint2,f=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:a.clone()};if(t>=1)return{startControlPoint1:r.clone(),startControlPoint2:a.clone(),divider:f.clone(),dividerControlPoint1:f.clone(),dividerControlPoint2:f.clone()};const h=new kn(e,r).pointAt(t),g=new kn(r,a).pointAt(t),m=new kn(a,f).pointAt(t),b=new kn(h,g).pointAt(t),w=new kn(g,m).pointAt(t),S=new kn(b,w).pointAt(t);return{startControlPoint1:h,startControlPoint2:b,divider:S,dividerControlPoint1:w,dividerControlPoint2:m}}getSubdivisions(t={}){const e=this.getPrecision(t);let r=[new go(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(e===0)return r;let a=this.endpointDistance();const f=Math.pow(10,-e);let h=0;for(;;){h+=1;const g=[];r.forEach(w=>{const S=w.divide(.5);g.push(S[0],S[1])});const m=g.reduce((w,S)=>w+S.endpointDistance(),0),b=m!==0?(m-a)/m:0;if(h>1&&b<f)return g;r=g,a=m}}length(t={}){return this.getDivisions(t).reduce((r,a)=>r+a.endpointDistance(),0)}lengthAtT(t,e={}){if(t<=0)return 0;const r=e.precision===void 0?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:r})}pointAt(t,e={}){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const r=this.tAt(t,e);return this.pointAtT(r)}pointAtLength(t,e={}){const r=this.tAtLength(t,e);return this.pointAtT(r)}pointAtT(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}isDifferentiable(){const t=this.start,e=this.controlPoint1,r=this.controlPoint2,a=this.end;return!(t.equals(e)&&e.equals(r)&&r.equals(a))}tangentAt(t,e={}){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);const r=this.tAt(t,e);return this.tangentAtT(r)}tangentAtLength(t,e={}){if(!this.isDifferentiable())return null;const r=this.tAtLength(t,e);return this.tangentAtT(r)}tangentAtT(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);const e=this.getSkeletonPoints(t),r=e.startControlPoint2,a=e.dividerControlPoint1,f=e.divider,h=new kn(r,a);return h.translate(f.x-r.x,f.y-r.y),h}getPrecision(t={}){return t.precision==null?this.PRECISION:t.precision}getDivisions(t={}){if(t.subdivisions!=null)return t.subdivisions;const e=this.getPrecision(t);return this.getSubdivisions({precision:e})}getOptions(t={}){const e=this.getPrecision(t),r=this.getDivisions(t);return{precision:e,subdivisions:r}}tAt(t,e={}){if(t<=0)return 0;if(t>=1)return 1;const r=this.getOptions(e),f=this.length(r)*t;return this.tAtLength(f,r)}tAtLength(t,e={}){let r=!0;t<0&&(r=!1,t=-t);const a=this.getPrecision(e),f=this.getDivisions(e),h={precision:a,subdivisions:f};let g=null,m,b,w=0,S=0,C=0;const A=f.length;let B=A>0?1/A:0;for(let nt=0;nt<A;nt+=1){const ct=r?nt:A-1-nt,Y=f[nt],Pt=Y.endpointDistance();if(t<=C+Pt){g=Y,m=ct*B,b=(ct+1)*B,w=r?t-C:Pt+C-t,S=r?Pt+C-t:t-C;break}C+=Pt}if(g==null)return r?1:0;const j=this.length(h),H=Math.pow(10,-a);for(;;){let nt;if(nt=j!==0?w/j:0,nt<H)return m;if(nt=j!==0?S/j:0,nt<H)return b;let ct,Y;const Pt=g.divide(.5);B/=2;const Xt=Pt[0].endpointDistance(),pe=Pt[1].endpointDistance();w<=Xt?(g=Pt[0],b-=B,ct=w,Y=Xt-ct):(g=Pt[1],m+=B,ct=w-Xt,Y=pe-ct),w=ct,S=Y}}toPoints(t={}){const e=this.getDivisions(t),r=[e[0].start.clone()];return e.forEach(a=>r.push(a.end.clone())),r}toPolyline(t={}){return new Zi(this.toPoints(t))}scale(t,e,r){return this.start.scale(t,e,r),this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this}rotate(t,e){return this.start.rotate(t,e),this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return t!=null&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}clone(){return new go(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(u){function t(e){return e!=null&&e instanceof u}u.isCurve=t})(go||(go={})),function(u){function t(a){const f=a.length,h=[],g=[];let m=2;h[0]=a[0]/m;for(let b=1;b<f;b+=1)g[b]=1/m,m=(b<f-1?4:3.5)-g[b],h[b]=(a[b]-h[b-1])/m;for(let b=1;b<f;b+=1)h[f-b-1]-=g[f-b]*h[f-b];return h}function e(a){const f=a.map(C=>St.clone(C)),h=[],g=[],m=f.length-1;if(m===1)return h[0]=new St((2*f[0].x+f[1].x)/3,(2*f[0].y+f[1].y)/3),g[0]=new St(2*h[0].x-f[0].x,2*h[0].y-f[0].y),[h,g];const b=[];for(let C=1;C<m-1;C+=1)b[C]=4*f[C].x+2*f[C+1].x;b[0]=f[0].x+2*f[1].x,b[m-1]=(8*f[m-1].x+f[m].x)/2;const w=t(b);for(let C=1;C<m-1;C+=1)b[C]=4*f[C].y+2*f[C+1].y;b[0]=f[0].y+2*f[1].y,b[m-1]=(8*f[m-1].y+f[m].y)/2;const S=t(b);for(let C=0;C<m;C+=1)h.push(new St(w[C],S[C])),C<m-1?g.push(new St(2*f[C+1].x-w[C+1],2*f[C+1].y-S[C+1])):g.push(new St((f[m].x+w[m-1])/2,(f[m].y+S[m-1])/2));return[h,g]}function r(a){if(a==null||Array.isArray(a)&&a.length<2)throw new Error("At least 2 points are required");const f=e(a),h=[];for(let g=0,m=f[0].length;g<m;g+=1){const b=new St(f[0][g].x,f[0][g].y),w=new St(f[1][g].x,f[1][g].y);h.push(new u(a[g],b,w,a[g+1]))}return h}u.throughPoints=r}(go||(go={}));class ph extends ll{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(t,e){if(t<=0)return 0;const r=this.length();return t>=1?r:r*t}divideAtT(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class ds extends ph{constructor(t,e){super(),kn.isLine(t)?this.endPoint=t.end.clone().round(2):this.endPoint=St.create(t,e).round(2)}get type(){return"L"}get line(){return new kn(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[new ds(e[0]),new ds(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[new ds(e[0]),new ds(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new ds(this.end)}scale(t,e,r){return this.end.scale(t,e,r),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}(function(u){function t(...e){const r=e.length,a=e[0];if(kn.isLine(a))return new u(a);if(St.isPointLike(a))return r===1?new u(a):e.map(h=>new u(h));if(r===2)return new u(+e[0],+e[1]);const f=[];for(let h=0;h<r;h+=2){const g=+e[h],m=+e[h+1];f.push(new u(g,m))}return f}u.create=t})(ds||(ds={}));class vh extends ph{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new kn(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[e[1].isDifferentiable()?new ds(e[0]):this.clone(),new ds(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[e[1].isDifferentiable()?new ds(e[0]):this.clone(),new ds(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}clone(){return new vh}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(u){function t(){return new u}u.create=t})(vh||(vh={}));class mh extends ph{constructor(t,e){super(),this.isVisible=!1,this.isSubpathStart=!0,kn.isLine(t)||go.isCurve(t)?this.endPoint=t.end.clone().round(2):this.endPoint=St.create(t,e).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(t,e,r){return this.end.scale(t,e,r),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this}clone(){return new mh(this.end)}equals(t){return this.type===t.type&&this.end.equals(t.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}(function(u){function t(...e){const r=e.length,a=e[0];if(kn.isLine(a))return new u(a);if(go.isCurve(a))return new u(a);if(St.isPointLike(a)){if(r===1)return new u(a);const h=[];for(let g=0;g<r;g+=1)g===0?h.push(new u(e[g])):h.push(new ds(e[g]));return h}if(r===2)return new u(+e[0],+e[1]);const f=[];for(let h=0;h<r;h+=2){const g=+e[h],m=+e[h+1];h===0?f.push(new u(g,m)):f.push(new ds(g,m))}return f}u.create=t})(mh||(mh={}));class La extends ph{constructor(t,e,r,a,f,h){super(),go.isCurve(t)?(this.controlPoint1=t.controlPoint1.clone().round(2),this.controlPoint2=t.controlPoint2.clone().round(2),this.endPoint=t.end.clone().round(2)):typeof t=="number"?(this.controlPoint1=new St(t,e).round(2),this.controlPoint2=new St(r,a).round(2),this.endPoint=new St(f,h).round(2)):(this.controlPoint1=St.create(t).round(2),this.controlPoint2=St.create(e).round(2),this.endPoint=St.create(r).round(2))}get type(){return"C"}get curve(){return new go(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(t){return this.curve.closestPoint(t)}closestPointLength(t){return this.curve.closestPointLength(t)}closestPointNormalizedLength(t){return this.curve.closestPointNormalizedLength(t)}closestPointTangent(t){return this.curve.closestPointTangent(t)}length(){return this.curve.length()}divideAt(t,e={}){const r=this.curve.divideAt(t,e);return[new La(r[0]),new La(r[1])]}divideAtLength(t,e={}){const r=this.curve.divideAtLength(t,e);return[new La(r[0]),new La(r[1])]}divideAtT(t){const e=this.curve.divideAtT(t);return[new La(e[0]),new La(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.curve.pointAt(t)}pointAtLength(t){return this.curve.pointAtLength(t)}tangentAt(t){return this.curve.tangentAt(t)}tangentAtLength(t){return this.curve.tangentAtLength(t)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.start,e=this.controlPoint1,r=this.controlPoint2,a=this.end;return!(t.equals(e)&&e.equals(r)&&r.equals(a))}scale(t,e,r){return this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this}rotate(t,e){return this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)}clone(){return new La(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.controlPoint1,e=this.controlPoint2,r=this.end;return[this.type,t.x,t.y,e.x,e.y,r.x,r.y].join(" ")}}(function(u){function t(...e){const r=e.length,a=e[0];if(go.isCurve(a))return new u(a);if(St.isPointLike(a)){if(r===3)return new u(e[0],e[1],e[2]);const h=[];for(let g=0;g<r;g+=3)h.push(new u(e[g],e[g+1],e[g+2]));return h}if(r===6)return new u(e[0],e[1],e[2],e[3],e[4],e[5]);const f=[];for(let h=0;h<r;h+=6)f.push(new u(e[h],e[h+1],e[h+2],e[h+3],e[h+4],e[h+5]));return f}u.create=t})(La||(La={}));function Ng(u,t,e){return{x:u*Math.cos(e)-t*Math.sin(e),y:u*Math.sin(e)+t*Math.cos(e)}}function Kp(u,t,e,r,a,f){const h=.3333333333333333,g=2/3;return[h*u+g*e,h*t+g*r,h*a+g*e,h*f+g*r,a,f]}function va(u,t,e,r,a,f,h,g,m,b){const w=Math.PI*120/180,S=Math.PI/180*(+a||0);let C=[],A,B,j,H,nt;if(b)B=b[0],j=b[1],H=b[2],nt=b[3];else{A=Ng(u,t,-S),u=A.x,t=A.y,A=Ng(g,m,-S),g=A.x,m=A.y;const Ur=(u-g)/2,be=(t-m)/2;let tn=Ur*Ur/(e*e)+be*be/(r*r);tn>1&&(tn=Math.sqrt(tn),e=tn*e,r=tn*r);const Nr=e*e,qi=r*r,Ji=(f===h?-1:1)*Math.sqrt(Math.abs((Nr*qi-Nr*be*be-qi*Ur*Ur)/(Nr*be*be+qi*Ur*Ur)));H=Ji*e*be/r+(u+g)/2,nt=Ji*-r*Ur/e+(t+m)/2,B=Math.asin((t-nt)/r),j=Math.asin((m-nt)/r),B=u<H?Math.PI-B:B,j=g<H?Math.PI-j:j,B<0&&(B=Math.PI*2+B),j<0&&(j=Math.PI*2+j),h&&B>j&&(B-=Math.PI*2),!h&&j>B&&(j-=Math.PI*2)}let ct=j-B;if(Math.abs(ct)>w){const Ur=j,be=g,tn=m;j=B+w*(h&&j>B?1:-1),g=H+e*Math.cos(j),m=nt+r*Math.sin(j),C=va(g,m,e,r,a,0,h,be,tn,[j,Ur,H,nt])}ct=j-B;const Y=Math.cos(B),Pt=Math.sin(B),Xt=Math.cos(j),pe=Math.sin(j),qe=Math.tan(ct/4),xn=4/3*(e*qe),En=4/3*(r*qe),jn=[u,t],wn=[u+xn*Pt,t-En*Y],Un=[g+xn*pe,m-En*Xt],Di=[g,m];if(wn[0]=2*jn[0]-wn[0],wn[1]=2*jn[1]-wn[1],b)return[wn,Un,Di].concat(C);{C=[wn,Un,Di].concat(C).join().split(",");const Ur=[],be=C.length;for(let tn=0;tn<be;tn+=1)Ur[tn]=tn%2?Ng(+C[tn-1],+C[tn],S).y:Ng(+C[tn],+C[tn+1],S).x;return Ur}}function om(u){if(!u)return null;const t=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,e=new RegExp(`([a-z])[${t},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${t}]*,?[${t}]*)+)`,"ig"),r=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${t}]*,?[${t}]*`,"ig"),a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},f=[];return u.replace(e,(h,g,m)=>{const b=[];let w=g.toLowerCase();m.replace(r,(C,A)=>(A&&b.push(+A),C)),w==="m"&&b.length>2&&(f.push([g,...b.splice(0,2)]),w="l",g=g==="m"?"l":"L");const S=a[w];for(;b.length>=S&&(f.push([g,...b.splice(0,S)]),!!S););return h}),f}function U0(u){const t=om(u);if(!t||!t.length)return[["M",0,0]];let e=0,r=0,a=0,f=0;const h=[];for(let g=0,m=t.length;g<m;g+=1){const b=[];h.push(b);const w=t[g],S=w[0];if(S!==S.toUpperCase())switch(b[0]=S.toUpperCase(),b[0]){case"A":b[1]=w[1],b[2]=w[2],b[3]=w[3],b[4]=w[4],b[5]=w[5],b[6]=+w[6]+e,b[7]=+w[7]+r;break;case"V":b[1]=+w[1]+r;break;case"H":b[1]=+w[1]+e;break;case"M":a=+w[1]+e,f=+w[2]+r;for(let C=1,A=w.length;C<A;C+=1)b[C]=+w[C]+(C%2?e:r);break;default:for(let C=1,A=w.length;C<A;C+=1)b[C]=+w[C]+(C%2?e:r);break}else for(let C=0,A=w.length;C<A;C+=1)b[C]=w[C];switch(b[0]){case"Z":e=+a,r=+f;break;case"H":e=b[1];break;case"V":r=b[1];break;case"M":a=b[b.length-2],f=b[b.length-1],e=b[b.length-2],r=b[b.length-1];break;default:e=b[b.length-2],r=b[b.length-1];break}}return h}function V0(u){const t=U0(u),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(m,b,w){let S,C;if(!m)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(m[0]in{T:1,Q:1}||(b.qx=null,b.qy=null),m[0]){case"M":b.X=m[1],b.Y=m[2];break;case"A":return parseFloat(m[1])===0||parseFloat(m[2])===0?["L",m[6],m[7]]:["C"].concat(va.apply(0,[b.x,b.y].concat(m.slice(1))));case"S":return w==="C"||w==="S"?(S=b.x*2-b.bx,C=b.y*2-b.by):(S=b.x,C=b.y),["C",S,C].concat(m.slice(1));case"T":return w==="Q"||w==="T"?(b.qx=b.x*2-b.qx,b.qy=b.y*2-b.qy):(b.qx=b.x,b.qy=b.y),["C"].concat(Kp(b.x,b.y,b.qx,b.qy,m[1],m[2]));case"Q":return b.qx=m[1],b.qy=m[2],["C"].concat(Kp(b.x,b.y,m[1],m[2],m[3],m[4]));case"H":return["L"].concat(m[1],b.y);case"V":return["L"].concat(b.x,m[1]);case"L":break;case"Z":break;default:break}return m}function a(m,b){if(m[b].length>7){m[b].shift();const w=m[b];for(;w.length;)f[b]="A",b+=1,m.splice(b,0,["C"].concat(w.splice(0,6)));m.splice(b,1),g=t.length}}const f=[];let h="",g=t.length;for(let m=0;m<g;m+=1){let b="";t[m]&&(b=t[m][0]),b!=="C"&&(f[m]=b,m>0&&(h=f[m-1])),t[m]=r(t[m],e,h),f[m]!=="A"&&b==="C"&&(f[m]="C"),a(t,m);const w=t[m],S=w.length;e.x=w[S-2],e.y=w[S-1],e.bx=parseFloat(w[S-4])||e.x,e.by=parseFloat(w[S-3])||e.y}return(!t[0][0]||t[0][0]!=="M")&&t.unshift(["M",0,0]),t}function sm(u){return V0(u).map(t=>t.map(e=>typeof e=="string"?e:Ai.round(e,2))).join(",").split(",").join(" ")}class Kn extends ll{constructor(t){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(t))if(kn.isLine(t[0])||go.isCurve(t[0])){let e=null;t.forEach((a,f)=>{f===0&&this.appendSegment(Kn.createSegment("M",a.start)),e!=null&&!e.end.equals(a.start)&&this.appendSegment(Kn.createSegment("M",a.start)),kn.isLine(a)?this.appendSegment(Kn.createSegment("L",a.end)):go.isCurve(a)&&this.appendSegment(Kn.createSegment("C",a.controlPoint1,a.controlPoint2,a.end)),e=a})}else t.forEach(r=>{r.isSegment&&this.appendSegment(r)});else t!=null&&(kn.isLine(t)?(this.appendSegment(Kn.createSegment("M",t.start)),this.appendSegment(Kn.createSegment("L",t.end))):go.isCurve(t)?(this.appendSegment(Kn.createSegment("M",t.start)),this.appendSegment(Kn.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):Zi.isPolyline(t)?t.points&&t.points.length&&t.points.forEach((e,r)=>{const a=r===0?Kn.createSegment("M",e):Kn.createSegment("L",e);this.appendSegment(a)}):t.isSegment&&this.appendSegment(t))}get start(){const t=this.segments,e=t.length;if(e===0)return null;for(let r=0;r<e;r+=1){const a=t[r];if(a.isVisible)return a.start}return t[e-1].end}get end(){const t=this.segments,e=t.length;if(e===0)return null;for(let r=e-1;r>=0;r-=1){const a=t[r];if(a.isVisible)return a.end}return t[e-1].end}moveTo(...t){return this.appendSegment(mh.create.call(null,...t))}lineTo(...t){return this.appendSegment(ds.create.call(null,...t))}curveTo(...t){return this.appendSegment(La.create.call(null,...t))}arcTo(t,e,r,a,f,h,g){const m=this.end||new St,b=typeof h=="number"?Id(m.x,m.y,t,e,r,a,f,h,g):Id(m.x,m.y,t,e,r,a,f,h.x,h.y);if(b!=null)for(let w=0,S=b.length;w<S;w+=6)this.curveTo(b[w],b[w+1],b[w+2],b[w+3],b[w+4],b[w+5]);return this}quadTo(t,e,r,a){const f=this.end||new St,h=["M",f.x,f.y];if(typeof t=="number")h.push("Q",t,e,r,a);else{const m=e;h.push("Q",t.x,t.y,m.x,m.y)}const g=Kn.parse(h.join(" "));return this.appendSegment(g.segments.slice(1)),this}close(){return this.appendSegment(vh.create())}drawPoints(t,e={}){const r=zr(t,e),a=Kn.parse(r);a&&a.segments&&this.appendSegment(a.segments)}bbox(){const t=this.segments,e=t.length;if(e===0)return null;let r;for(let f=0;f<e;f+=1){const h=t[f];if(h.isVisible){const g=h.bbox();g!=null&&(r=r?r.union(g):g)}}if(r!=null)return r;const a=t[e-1];return new pn(a.end.x,a.end.y,0,0)}appendSegment(t){const e=this.segments.length;let r=e!==0?this.segments[e-1]:null,a;const f=null;if(Array.isArray(t))for(let h=0,g=t.length;h<g;h+=1){const m=t[h];a=this.prepareSegment(m,r,f),this.segments.push(a),r=a}else t!=null&&t.isSegment&&(a=this.prepareSegment(t,r,f),this.segments.push(a));return this}insertSegment(t,e){const r=this.segments.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");let a,f=null,h=null;if(r!==0&&(t>=1?(f=this.segments[t-1],h=f.nextSegment):(f=null,h=this.segments[0])),!Array.isArray(e))a=this.prepareSegment(e,f,h),this.segments.splice(t,0,a);else for(let g=0,m=e.length;g<m;g+=1){const b=e[g];a=this.prepareSegment(b,f,h),this.segments.splice(t+g,0,a),f=a}return this}removeSegment(t){const e=this.fixIndex(t),r=this.segments.splice(e,1)[0],a=r.previousSegment,f=r.nextSegment;return a&&(a.nextSegment=f),f&&(f.previousSegment=a),r.isSubpathStart&&f&&this.updateSubpathStartSegment(f),r}replaceSegment(t,e){const r=this.fixIndex(t);let a;const f=this.segments[r];let h=f.previousSegment;const g=f.nextSegment;let m=f.isSubpathStart;if(!Array.isArray(e))a=this.prepareSegment(e,h,g),this.segments.splice(r,1,a),m&&a.isSubpathStart&&(m=!1);else{this.segments.splice(t,1);for(let b=0,w=e.length;b<w;b+=1){const S=e[b];a=this.prepareSegment(S,h,g),this.segments.splice(t+b,0,a),h=a,m&&a.isSubpathStart&&(m=!1)}}m&&g&&this.updateSubpathStartSegment(g)}getSegment(t){const e=this.fixIndex(t);return this.segments[e]}fixIndex(t){const e=this.segments.length;if(e===0)throw new Error("Path has no segments.");let r=t;for(;r<0;)r=e+r;if(r>=e||r<0)throw new Error("Index out of range.");return r}segmentAt(t,e={}){const r=this.segmentIndexAt(t,e);return r?this.getSegment(r):null}segmentAtLength(t,e={}){const r=this.segmentIndexAtLength(t,e);return r?this.getSegment(r):null}segmentIndexAt(t,e={}){if(this.segments.length===0)return null;const r=Ai.clamp(t,0,1),a=this.getOptions(e),h=this.length(a)*r;return this.segmentIndexAtLength(h,a)}segmentIndexAtLength(t,e={}){const r=this.segments.length;if(r===0)return null;let a=!0;t<0&&(a=!1,t=-t);const f=this.getPrecision(e),h=this.getSubdivisions(e);let g=0,m=null;for(let b=0;b<r;b+=1){const w=a?b:r-1-b,S=this.segments[w],C=h[w],A=S.length({precision:f,subdivisions:C});if(S.isVisible){if(t<=g+A)return w;m=w}g+=A}return m}getSegmentSubdivisions(t={}){const e=this.getPrecision(t),r=[];for(let a=0,f=this.segments.length;a<f;a+=1){const g=this.segments[a].getSubdivisions({precision:e});r.push(g)}return r}updateSubpathStartSegment(t){let e=t.previousSegment,r=t;for(;r&&!r.isSubpathStart;)e!=null?r.subpathStartSegment=e.subpathStartSegment:r.subpathStartSegment=null,e=r,r=r.nextSegment}prepareSegment(t,e,r){t.previousSegment=e,t.nextSegment=r,e!=null&&(e.nextSegment=t),r!=null&&(r.previousSegment=t);let a=t;return t.isSubpathStart&&(t.subpathStartSegment=t,a=r),a!=null&&this.updateSubpathStartSegment(a),t}closestPoint(t,e={}){const r=this.closestPointT(t,e);return r?this.pointAtT(r):null}closestPointLength(t,e={}){const r=this.getOptions(e),a=this.closestPointT(t,r);return a?this.lengthAtT(a,r):0}closestPointNormalizedLength(t,e={}){const r=this.getOptions(e),a=this.closestPointLength(t,r);if(a===0)return 0;const f=this.length(r);return f===0?0:a/f}closestPointT(t,e={}){if(this.segments.length===0)return null;const r=this.getPrecision(e),a=this.getSubdivisions(e);let f,h=1/0;for(let g=0,m=this.segments.length;g<m;g+=1){const b=this.segments[g],w=a[g];if(b.isVisible){const S=b.closestPointT(t,{precision:r,subdivisions:w}),C=b.pointAtT(S),A=Ai.squaredLength(C,t);A<h&&(f={segmentIndex:g,value:S},h=A)}}return f||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(t,e={}){if(this.segments.length===0)return null;const r=this.getPrecision(e),a=this.getSubdivisions(e);let f,h=1/0;for(let g=0,m=this.segments.length;g<m;g+=1){const b=this.segments[g],w=a[g];if(b.isDifferentiable()){const S=b.closestPointT(t,{precision:r,subdivisions:w}),C=b.pointAtT(S),A=Ai.squaredLength(C,t);A<h&&(f=b.tangentAtT(S),h=A)}}return f||null}containsPoint(t,e={}){const r=this.toPolylines(e);if(!r)return!1;let a=0;for(let f=0,h=r.length;f<h;f+=1)r[f].containsPoint(t)&&(a+=1);return a%2===1}pointAt(t,e={}){if(this.segments.length===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const r=this.getOptions(e),f=this.length(r)*t;return this.pointAtLength(f,r)}pointAtLength(t,e={}){if(this.segments.length===0)return null;if(t===0)return this.start.clone();let r=!0;t<0&&(r=!1,t=-t);const a=this.getPrecision(e),f=this.getSubdivisions(e);let h,g=0;for(let b=0,w=this.segments.length;b<w;b+=1){const S=r?b:w-1-b,C=this.segments[S],A=f[S],B=C.length({precision:a,subdivisions:A});if(C.isVisible){if(t<=g+B)return C.pointAtLength((r?1:-1)*(t-g),{precision:a,subdivisions:A});h=C}g+=B}return h?r?h.end:h.start:this.segments[this.segments.length-1].end.clone()}pointAtT(t){const e=this.segments,r=e.length;if(r===0)return null;const a=t.segmentIndex;if(a<0)return e[0].pointAtT(0);if(a>=r)return e[r-1].pointAtT(1);const f=Ai.clamp(t.value,0,1);return e[a].pointAtT(f)}divideAt(t,e={}){if(this.segments.length===0)return null;const r=Ai.clamp(t,0,1),a=this.getOptions(e),h=this.length(a)*r;return this.divideAtLength(h,a)}divideAtLength(t,e={}){if(this.segments.length===0)return null;let r=!0;t<0&&(r=!1,t=-t);const a=this.getPrecision(e),f=this.getSubdivisions(e);let h=0,g,m,b,w,S;for(let Xt=0,pe=this.segments.length;Xt<pe;Xt+=1){const qe=r?Xt:pe-1-Xt,xn=this.getSegment(qe),En=f[qe],jn={precision:a,subdivisions:En},wn=xn.length(jn);if(xn.isDifferentiable()&&(b=xn,w=qe,t<=h+wn)){m=qe,g=xn.divideAtLength((r?1:-1)*(t-h),jn);break}h+=wn}if(!b)return null;g||(m=w,S=r?1:0,g=b.divideAtT(S));const C=this.clone(),A=m;C.replaceSegment(A,g);const B=A;let j=A+1,H=A+2;g[0].isDifferentiable()||(C.removeSegment(B),j-=1,H-=1);const nt=C.getSegment(j).start;C.insertSegment(j,Kn.createSegment("M",nt)),H+=1,g[1].isDifferentiable()||(C.removeSegment(H-1),H-=1);const ct=H-B-1;for(let Xt=H,pe=C.segments.length;Xt<pe;Xt+=1){const qe=this.getSegment(Xt-ct),xn=C.getSegment(Xt);if(xn.type==="Z"&&!qe.subpathStartSegment.end.equals(xn.subpathStartSegment.end)){const En=Kn.createSegment("L",qe.end);C.replaceSegment(Xt,En)}}const Y=new Kn(C.segments.slice(0,j)),Pt=new Kn(C.segments.slice(j));return[Y,Pt]}intersectsWithLine(t,e={}){const r=this.toPolylines(e);if(r==null)return null;let a=null;for(let f=0,h=r.length;f<h;f+=1){const g=r[f],m=t.intersect(g);m&&(a==null&&(a=[]),Array.isArray(m)?a.push(...m):a.push(m))}return a}isDifferentiable(){for(let t=0,e=this.segments.length;t<e;t+=1)if(this.segments[t].isDifferentiable())return!0;return!1}isValid(){const t=this.segments;return t.length===0||t[0].type==="M"}length(t={}){if(this.segments.length===0)return 0;const e=this.getSubdivisions(t);let r=0;for(let a=0,f=this.segments.length;a<f;a+=1){const h=this.segments[a],g=e[a];r+=h.length({subdivisions:g})}return r}lengthAtT(t,e={}){const r=this.segments.length;if(r===0)return 0;let a=t.segmentIndex;if(a<0)return 0;let f=Ai.clamp(t.value,0,1);a>=r&&(a=r-1,f=1);const h=this.getPrecision(e),g=this.getSubdivisions(e);let m=0;for(let S=0;S<a;S+=1){const C=this.segments[S],A=g[S];m+=C.length({precision:h,subdivisions:A})}const b=this.segments[a],w=g[a];return m+=b.lengthAtT(f,{precision:h,subdivisions:w}),m}tangentAt(t,e={}){if(this.segments.length===0)return null;const r=Ai.clamp(t,0,1),a=this.getOptions(e),h=this.length(a)*r;return this.tangentAtLength(h,a)}tangentAtLength(t,e={}){if(this.segments.length===0)return null;let r=!0;t<0&&(r=!1,t=-t);const a=this.getPrecision(e),f=this.getSubdivisions(e);let h,g=0;for(let m=0,b=this.segments.length;m<b;m+=1){const w=r?m:b-1-m,S=this.segments[w],C=f[w],A=S.length({precision:a,subdivisions:C});if(S.isDifferentiable()){if(t<=g+A)return S.tangentAtLength((r?1:-1)*(t-g),{precision:a,subdivisions:C});h=S}g+=A}if(h){const m=r?1:0;return h.tangentAtT(m)}return null}tangentAtT(t){const e=this.segments.length;if(e===0)return null;const r=t.segmentIndex;if(r<0)return this.segments[0].tangentAtT(0);if(r>=e)return this.segments[e-1].tangentAtT(1);const a=Ai.clamp(t.value,0,1);return this.segments[r].tangentAtT(a)}getPrecision(t={}){return t.precision==null?this.PRECISION:t.precision}getSubdivisions(t={}){if(t.segmentSubdivisions==null){const e=this.getPrecision(t);return this.getSegmentSubdivisions({precision:e})}return t.segmentSubdivisions}getOptions(t={}){const e=this.getPrecision(t),r=this.getSubdivisions(t);return{precision:e,segmentSubdivisions:r}}toPoints(t={}){const e=this.segments,r=e.length;if(r===0)return null;const a=this.getSubdivisions(t),f=[];let h=[];for(let g=0;g<r;g+=1){const m=e[g];if(m.isVisible){const b=a[g];b.length>0?b.forEach(w=>h.push(w.start)):h.push(m.start)}else h.length>0&&(h.push(e[g-1].end),f.push(h),h=[])}return h.length>0&&(h.push(this.end),f.push(h)),f}toPolylines(t={}){const e=this.toPoints(t);return e?e.map(r=>new Zi(r)):null}scale(t,e,r){return this.segments.forEach(a=>a.scale(t,e,r)),this}rotate(t,e){return this.segments.forEach(r=>r.rotate(t,e)),this}translate(t,e){return typeof t=="number"?this.segments.forEach(r=>r.translate(t,e)):this.segments.forEach(r=>r.translate(t)),this}clone(){const t=new Kn;return this.segments.forEach(e=>t.appendSegment(e.clone())),t}equals(t){if(t==null)return!1;const e=this.segments,r=t.segments,a=e.length;if(r.length!==a)return!1;for(let f=0;f<a;f+=1){const h=e[f],g=r[f];if(h.type!==g.type||!h.equals(g))return!1}return!0}toJSON(){return this.segments.map(t=>t.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(t=>t.serialize()).join(" ")}toString(){return this.serialize()}}(function(u){function t(e){return e!=null&&e instanceof u}u.isPath=t})(Kn||(Kn={})),function(u){function t(r){if(!r)return new u;const a=new u,f=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,h=u.normalize(r).match(f);if(h!=null)for(let g=0,m=h.length;g<m;g+=1){const b=h[g],w=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,S=b.match(w);if(S!=null){const C=S[0],A=S.slice(1).map(j=>+j),B=e.call(null,C,...A);a.appendSegment(B)}}return a}u.parse=t;function e(r,...a){if(r==="M")return mh.create.call(null,...a);if(r==="L")return ds.create.call(null,...a);if(r==="C")return La.create.call(null,...a);if(r==="z"||r==="Z")return vh.create();throw new Error(`Invalid path segment type "${r}"`)}u.createSegment=e}(Kn||(Kn={})),function(u){u.normalize=sm,u.isValid=rm,u.drawArc=im,u.drawPoints=zr,u.arcToCurves=Id}(Kn||(Kn={}));class So{constructor(t){this.options=Object.assign({},t),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(t,e,r=!1){if(typeof t=="object"){Object.entries(t).forEach(([h,g])=>{this.register(h,g,e)});return}this.exist(t)&&!r&&!mi.isApplyingHMR()&&this.onDuplicated(t);const a=this.options.process,f=a?bn(a,this,t,e):e;return this.data[t]=f,f}unregister(t){const e=t?this.data[t]:null;return delete this.data[t],e}get(t){return t?this.data[t]:null}exist(t){return t?this.data[t]!=null:!1}onDuplicated(t){try{throw this.options.onConflict&&bn(this.options.onConflict,this,t),new Error(`${Ql(this.options.type)} with name '${t}' already registered.`)}catch(e){throw e}}onNotFound(t,e){throw new Error(this.getSpellingSuggestion(t,e))}getSpellingSuggestion(t,e){const r=this.getSpellingSuggestionForName(t),a=e?`${e} ${hu(this.options.type)}`:this.options.type;return`${Ql(a)} with name '${t}' does not exist.${r?` Did you mean '${r}'?`:""}`}getSpellingSuggestionForName(t){return oe(t,Object.keys(this.data),e=>e)}}(function(u){function t(e){return new u(e)}u.create=t})(So||(So={}));const Z0={color:"#aaaaaa",thickness:1,markup:"rect",update(u,t){const e=t.thickness*t.sx,r=t.thickness*t.sy;Ye(u,{width:e,height:r,rx:e,ry:r,fill:t.color})}},qp={color:"#aaaaaa",thickness:1,markup:"rect",update(u,t){const e=t.sx<=1?t.thickness*t.sx:t.thickness;Ye(u,{width:e,height:e,rx:e,ry:e,fill:t.color})}},am={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(u,t){let e;const r=t.width,a=t.height,f=t.thickness;r-f>=0&&a-f>=0?e=["M",r,0,"H0 M0 0 V0",a].join(" "):e="M 0 0 0 0",Ye(u,{d:e,stroke:t.color,"stroke-width":t.thickness})}},Rg=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(u,t){let e;const r=t.width,a=t.height,f=t.thickness;r-f>=0&&a-f>=0?e=["M",r,0,"H0 M0 0 V0",a].join(" "):e="M 0 0 0 0",Ye(u,{d:e,stroke:t.color,"stroke-width":t.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(u,t){let e;const r=t.factor||1,a=t.width*r,f=t.height*r,h=t.thickness;a-h>=0&&f-h>=0?e=["M",a,0,"H0 M0 0 V0",f].join(" "):e="M 0 0 0 0",t.width=a,t.height=f,Ye(u,{d:e,stroke:t.color,"stroke-width":t.thickness})}}];class vu{constructor(){this.patterns={},this.root=Sr.create(Vs(),{width:"100%",height:"100%"},[wo("defs")]).node}add(t,e){const r=this.root.childNodes[0];r&&r.appendChild(e),this.patterns[t]=e,Sr.create("rect",{width:"100%",height:"100%",fill:`url(#${t})`}).appendTo(this.root)}get(t){return this.patterns[t]}has(t){return this.patterns[t]!=null}}(function(u){u.presets=Tt,u.registry=So.create({type:"grid"}),u.registry.register(u.presets,!0)})(vu||(vu={}));const Jp=function(u){const t=document.createElement("canvas"),e=u.width,r=u.height;t.width=e*2,t.height=r;const a=t.getContext("2d");return a.drawImage(u,0,0,e,r),a.translate(2*e,0),a.scale(-1,1),a.drawImage(u,0,0,e,r),t},Pd=function(u){const t=document.createElement("canvas"),e=u.width,r=u.height;t.width=e,t.height=r*2;const a=t.getContext("2d");return a.drawImage(u,0,0,e,r),a.translate(0,2*r),a.scale(1,-1),a.drawImage(u,0,0,e,r),t},cm=function(u){const t=document.createElement("canvas"),e=u.width,r=u.height;t.width=2*e,t.height=2*r;const a=t.getContext("2d");return a.drawImage(u,0,0,e,r),a.setTransform(-1,0,0,-1,t.width,t.height),a.drawImage(u,0,0,e,r),a.setTransform(-1,0,0,1,t.width,0),a.drawImage(u,0,0,e,r),a.setTransform(1,0,0,-1,0,t.height),a.drawImage(u,0,0,e,r),t},lc=function(u,t){const e=u.width,r=u.height,a=document.createElement("canvas");a.width=e*3,a.height=r*3;const f=a.getContext("2d"),h=t.angle!=null?-t.angle:-20,g=Ni.toRad(h),m=a.width/4,b=a.height/4;for(let w=0;w<4;w+=1)for(let S=0;S<4;S+=1)(w+S)%2>0&&(f.setTransform(1,0,0,1,(2*w-1)*m,(2*S-1)*b),f.rotate(g),f.drawImage(u,-e/2,-r/2,e,r));return a};var Nd;(function(u){u.presets=Object.assign({},Zt),u.presets["flip-x"]=Jp,u.presets["flip-y"]=Pd,u.presets["flip-xy"]=cm,u.registry=So.create({type:"background pattern"}),u.registry.register(u.presets,!0)})(Nd||(Nd={}));function ff(u,t){return u!=null?u:t}function ko(u,t){return u!=null&&Number.isFinite(u)?u:t}function $0(u={}){const t=ff(u.color,"blue"),e=ko(u.width,1),r=ko(u.margin,2),a=ko(u.opacity,1),f=r,h=r+e;return`
    <filter>
      <feFlood flood-color="${t}" flood-opacity="${a}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${h}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${f}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function H0(u={}){const t=ff(u.color,"red"),e=ko(u.blur,0),r=ko(u.width,1),a=ko(u.opacity,1);return`
      <filter>
        <feFlood flood-color="${t}" flood-opacity="${a}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${r}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${e}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function W0(u={}){const t=ko(u.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${u.y!=null&&Number.isFinite(u.y)?[t,u.y]:t}"/>
    </filter>
  `.trim()}function X0(u={}){const t=ko(u.dx,0),e=ko(u.dy,0),r=ff(u.color,"black"),a=ko(u.blur,4),f=ko(u.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${a}" dx="${t}" dy="${e}" flood-color="${r}" flood-opacity="${f}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${a}" />
         <feOffset dx="${t}" dy="${e}" result="offsetblur" />
         <feFlood flood-color="${r}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${f}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function Y0(u={}){const t=ko(u.amount,1),e=.2126+.7874*(1-t),r=.7152-.7152*(1-t),a=.0722-.0722*(1-t),f=.2126-.2126*(1-t),h=.7152+.2848*(1-t),g=.0722-.0722*(1-t),m=.2126-.2126*(1-t),b=.0722+.9278*(1-t);return`
    <filter>
      <feColorMatrix type="matrix" values="${e} ${r} ${a} 0 0 ${f} ${h} ${g} 0 0 ${m} ${r} ${b} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function K0(u={}){const t=ko(u.amount,1),e=.393+.607*(1-t),r=.769-.769*(1-t),a=.189-.189*(1-t),f=.349-.349*(1-t),h=.686+.314*(1-t),g=.168-.168*(1-t),m=.272-.272*(1-t),b=.534-.534*(1-t),w=.131+.869*(1-t);return`
      <filter>
        <feColorMatrix type="matrix" values="${e} ${r} ${a} 0 0 ${f} ${h} ${g} 0 0 ${m} ${b} ${w} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function q0(u={}){return`
      <filter>
        <feColorMatrix type="saturate" values="${1-ko(u.amount,1)}"/>
      </filter>
    `.trim()}function J0(u={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${ko(u.angle,0)}"/>
      </filter>
    `.trim()}function Q0(u={}){const t=ko(u.amount,1),e=1-t;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${t} ${e}"/>
          <feFuncG type="table" tableValues="${t} ${e}"/>
          <feFuncB type="table" tableValues="${t} ${e}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function Dg(u={}){const t=ko(u.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${t}"/>
        <feFuncG type="linear" slope="${t}"/>
        <feFuncB type="linear" slope="${t}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function ty(u={}){const t=ko(u.amount,1),e=.5-t/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${t}" intercept="${e}"/>
        <feFuncG type="linear" slope="${t}" intercept="${e}"/>
        <feFuncB type="linear" slope="${t}" intercept="${e}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}var yh;(function(u){u.presets=K,u.registry=So.create({type:"filter"}),u.registry.register(u.presets,!0)})(yh||(yh={}));const ey={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},um={},lm={position:Lg("x","width","origin")},fm={position:Lg("y","height","origin")},ny={position:Lg("x","width","corner")},Qp={position:Lg("y","height","corner")},hm={set:fl("width","width")},dm={set:fl("height","height")},tv={set:fl("rx","width")},ry={set:fl("ry","height")},gm={set:(u=>{const t=fl(u,"width"),e=fl(u,"height");return function(r,a){const f=a.refBBox,h=f.height>f.width?t:e;return bn(h,this,r,a)}})("r")},pm={set(u,{refBBox:t}){let e=parseFloat(u);const r=He(u);r&&(e/=100);const a=Math.sqrt(t.height*t.height+t.width*t.width);let f;return Number.isFinite(e)&&(r||e>=0&&e<=1?f=e*a:f=Math.max(e+a,0)),{r:f}}},iy={set:fl("cx","width")},oy={set:fl("cy","height")},vm={set:xm({resetOffset:!0})},ev={set:xm({resetOffset:!1})},mm={set:Em({resetOffset:!0})},sy={set:Em({resetOffset:!1})},ay=gm,cy=vm,ym=mm,uy=lm,ly=fm,fy=hm,hy=dm;function Lg(u,t,e){return(r,{refBBox:a})=>{if(r==null)return null;let f=parseFloat(r);const h=He(r);h&&(f/=100);let g;if(Number.isFinite(f)){const b=a[e];h||f>0&&f<1?g=b[u]+a[t]*f:g=b[u]+f}const m=new St;return m[u]=g||0,m}}function fl(u,t){return function(e,{refBBox:r}){let a=parseFloat(e);const f=He(e);f&&(a/=100);const h={};if(Number.isFinite(a)){const g=f||a>=0&&a<=1?a*r[t]:Math.max(a+r[t],0);h[u]=g}return h}}function bm(u,t){const e="x6-shape",r=t&&t.resetOffset;return function(a,{elem:f,refBBox:h}){let g=al(f,e);if(!g||g.value!==a){const j=u(a);g={value:a,shape:j,shapeBBox:j.bbox()},al(f,e,g)}const m=g.shape.clone(),b=g.shapeBBox.clone(),w=b.getOrigin(),S=h.getOrigin();b.x=S.x,b.y=S.y;const C=h.getMaxScaleToFit(b,S),A=b.width===0||h.width===0?1:C.sx,B=b.height===0||h.height===0?1:C.sy;return m.scale(A,B,w),r&&m.translate(-w.x,-w.y),m}}function xm(u){function t(r){return Kn.parse(r)}const e=bm(t,u);return(r,a)=>({d:e(r,a).serialize()})}function Em(u){const t=bm(e=>new Zi(e),u);return(e,r)=>({points:t(e,r).serialize()})}const dy={qualify:Ii,set(u,{view:t}){return`url(#${t.graph.defineGradient(u)})`}},gy={qualify:Ii,set(u,{view:t}){const e=t.cell,r=Object.assign({},u);if(e.isEdge()&&r.type==="linearGradient"){const a=t,f=a.sourcePoint,h=a.targetPoint;r.id=`gradient-${r.type}-${e.id}`,r.attrs=Object.assign(Object.assign({},r.attrs),{x1:f.x,y1:f.y,x2:h.x,y2:h.y,gradientUnits:"userSpaceOnUse"}),t.graph.defs.remove(r.id)}return`url(#${t.graph.defineGradient(r)})`}},wm={qualify(u,{attrs:t}){return t.textWrap==null||!Ii(t.textWrap)},set(u,{view:t,elem:e,attrs:r}){const a="x6-text",f=al(e,a),h=w=>{try{return JSON.parse(w)}catch(S){return w}},g={x:r.x,eol:r.eol,annotations:h(r.annotations),textPath:h(r["text-path"]||r.textPath),textVerticalAnchor:r["text-vertical-anchor"]||r.textVerticalAnchor,displayEmpty:(r["display-empty"]||r.displayEmpty)==="true",lineHeight:r["line-height"]||r.lineHeight},m=r["font-size"]||r.fontSize,b=JSON.stringify([u,g]);if(m&&e.setAttribute("font-size",m),f==null||f!==b){const w=g.textPath;if(w!=null&&typeof w=="object"){const S=w.selector;if(typeof S=="string"){const C=t.find(S)[0];C instanceof SVGPathElement&&(Ui(C),g.textPath=Object.assign({"xlink:href":`#${C.id}`},w))}}Dp(e,`${u}`,g),al(e,a,b)}}},py={qualify:Ii,set(u,{view:t,elem:e,attrs:r,refBBox:a}){const f=u,h=f.width||0;He(h)?a.width*=parseFloat(h)/100:h<=0?a.width+=h:a.width=h;const g=f.height||0;He(g)?a.height*=parseFloat(g)/100:g<=0?a.height+=g:a.height=g;let m,b=f.text;b==null&&(b=r.text),b!=null?m=Tg(`${b}`,a,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight},{ellipsis:f.ellipsis}):m="",bn(wm.set,this,m,{view:t,elem:e,attrs:r,refBBox:a,cell:t.cell})}},bh=(u,{attrs:t})=>t.text!==void 0,vy={qualify:bh},my={qualify:bh},yy={qualify:bh},by={qualify:bh},xy={qualify:bh},kg={qualify:bh},Ey={qualify(u,{elem:t}){return t instanceof SVGElement},set(u,{elem:t}){const e="x6-title",r=`${u}`,a=al(t,e);if(a==null||a!==r){al(t,e,r);const f=t.firstChild;if(f&&f.tagName.toUpperCase()==="TITLE"){const h=f;h.textContent=r}else{const h=document.createElementNS(t.namespaceURI,"title");h.textContent=r,t.insertBefore(h,f)}}}},xt={offset:nv("x","width","right")},wy={offset:nv("y","height","bottom")},Fg={offset(u,{refBBox:t}){return u?{x:-t.x,y:-t.y}:{x:0,y:0}}};function nv(u,t,e){return(r,{refBBox:a})=>{const f=new St;let h;return r==="middle"?h=a[t]/2:r===e?h=a[t]:typeof r=="number"&&Number.isFinite(r)?h=r>-1&&r<1?-a[t]*r:-r:He(r)?h=a[t]*parseFloat(r)/100:h=0,f[u]=-(a[u]+h),f}}const Sy={qualify:Ii,set(u,{elem:t}){nf(t,u)}},_y={set(u,{elem:t}){t.innerHTML=`${u}`}},Cy={qualify:Ii,set(u,{view:t}){return`url(#${t.graph.defineFilter(u)})`}},Ty={set(u){return u!=null&&typeof u=="object"&&u.id?u.id:u}};function mu(u,t,e){let r,a;typeof t=="object"?(r=t.x,a=t.y):(r=t,a=e);const f=Kn.parse(u),h=f.bbox();if(h){let g=-h.height/2-h.y,m=-h.width/2-h.x;typeof r=="number"&&(m-=r),typeof a=="number"&&(g-=a),f.translate(m,g)}return f.serialize()}var Bg=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const Sm=u=>{var{size:t,width:e,height:r,offset:a,open:f}=u,h=Bg(u,["size","width","height","offset","open"]);return Fo({size:t,width:e,height:r,offset:a},f===!0,!0,void 0,h)},_m=u=>{var{size:t,width:e,height:r,offset:a,factor:f}=u,h=Bg(u,["size","width","height","offset","factor"]);return Fo({size:t,width:e,height:r,offset:a},!1,!1,f,h)};function Fo(u,t,e,r=3/4,a={}){const f=u.size||10,h=u.width||f,g=u.height||f,m=new Kn,b={};if(t)m.moveTo(h,0).lineTo(0,g/2).lineTo(h,g),b.fill="none";else{if(m.moveTo(0,g/2),m.lineTo(h,0),!e){const w=Nt(r,0,1);m.lineTo(h*w,g/2)}m.lineTo(h,g),m.close()}return Object.assign(Object.assign(Object.assign({},b),a),{tagName:"path",d:mu(m.serialize(),{x:u.offset!=null?u.offset:-h/2})})}var Cm=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const Tm=u=>{var{size:t,width:e,height:r,offset:a}=u,f=Cm(u,["size","width","height","offset"]);const h=t||10,g=e||h,m=r||h,b=new Kn;return b.moveTo(0,m/2).lineTo(g/2,0).lineTo(g,m/2).lineTo(g/2,m).close(),Object.assign(Object.assign({},f),{tagName:"path",d:mu(b.serialize(),a==null?-g/2:a)})};var Am=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const Om=u=>{var{d:t,offsetX:e,offsetY:r}=u,a=Am(u,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},a),{tagName:"path",d:mu(t,e,r)})};var Mm=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const Ay=u=>{var{size:t,width:e,height:r,offset:a}=u,f=Mm(u,["size","width","height","offset"]);const h=t||10,g=e||h,m=r||h,b=new Kn;return b.moveTo(0,0).lineTo(g,m).moveTo(0,m).lineTo(g,0),Object.assign(Object.assign({},f),{tagName:"path",fill:"none",d:mu(b.serialize(),a||-g/2)})};var Gg=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const Im=u=>{var{width:t,height:e,offset:r,open:a,flip:f}=u,h=Gg(u,["width","height","offset","open","flip"]);let g=e||6;const m=t||10,b=a===!0,w=f===!0,S=Object.assign(Object.assign({},h),{tagName:"path"});w&&(g=-g);const C=new Kn;return C.moveTo(0,g).lineTo(m,0),b?S.fill="none":(C.lineTo(m,g),C.close()),S.d=mu(C.serialize(),{x:r||-m/2,y:g/2}),S};var Pm=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const Nm=u=>{var{r:t}=u,e=Pm(u,["r"]);const r=t||5;return Object.assign(Object.assign({cx:r},e),{tagName:"circle",r})},Oy=u=>{var{r:t}=u,e=Pm(u,["r"]);const r=t||5,a=new Kn;return a.moveTo(r,0).lineTo(r,r*2),a.moveTo(0,r).lineTo(r*2,r),{children:[Object.assign(Object.assign({},Nm({r})),{fill:"none"}),Object.assign(Object.assign({},e),{tagName:"path",d:mu(a.serialize(),-r)})]}};var My=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const Iy=u=>{var{rx:t,ry:e}=u,r=My(u,["rx","ry"]);const a=t||5,f=e||5;return Object.assign(Object.assign({cx:a},r),{tagName:"ellipse",rx:a,ry:f})};var hl;(function(u){u.presets=Z,u.registry=So.create({type:"marker"}),u.registry.register(u.presets,!0)})(hl||(hl={})),function(u){u.normalize=mu}(hl||(hl={}));var Py=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};function rv(u){return typeof u=="string"||Ii(u)}const Ny={qualify:rv,set(u,{view:t,attrs:e}){return zg("marker-start",u,t,e)}},hf={qualify:rv,set(u,{view:t,attrs:e}){return zg("marker-end",u,t,e,{transform:"rotate(180)"})}},iv={qualify:rv,set(u,{view:t,attrs:e}){return zg("marker-mid",u,t,e)}};function zg(u,t,e,r,a={}){const f=typeof t=="string"?{name:t}:t,{name:h,args:g}=f,m=Py(f,["name","args"]);let b=m;if(h&&typeof h=="string"){const S=hl.registry.get(h);if(S)b=S(Object.assign(Object.assign({},m),g));else return hl.registry.onNotFound(h)}const w=Object.assign(Object.assign(Object.assign({},ov(r,u)),a),b);return{[u]:`url(#${e.graph.defineMarker(w)})`}}function ov(u,t){const e={},r=u.stroke;typeof r=="string"&&(e.stroke=r,e.fill=r);let a=u.strokeOpacity;if(a==null&&(a=u["stroke-opacity"]),a==null&&(a=u.opacity),a!=null&&(e["stroke-opacity"]=a,e["fill-opacity"]=a),t!=="marker-mid"){const f=parseFloat(u.strokeWidth||u["stroke-width"]);if(Number.isFinite(f)&&f>1){const h=Math.ceil(f/2);e.refX=t==="marker-start"?h:-h}}return e}const xh=(u,{view:t})=>t.cell.isEdge(),Rm={qualify:xh,set(u,t){var e,r,a,f;const h=t.view,g=u.reverse||!1,m=u.stubs||0;let b;if(Number.isFinite(m)&&m!==0)if(g){let w,S;const C=h.getConnectionLength()||0;m<0?(w=(C+m)/2,S=-m):(w=m,S=C-m*2);const A=h.getConnection();b=(f=(a=(r=(e=A==null?void 0:A.divideAtLength(w))===null||e===void 0?void 0:e[1])===null||r===void 0?void 0:r.divideAtLength(S))===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.serialize()}else{let w;m<0?w=((h.getConnectionLength()||0)+m)/2:w=m;const S=h.getConnection();if(S){const C=S.divideAtLength(w),A=S.divideAtLength(-w);C&&A&&(b=`${C[0].serialize()} ${A[1].serialize()}`)}}return{d:b||h.getConnectionPathData()}}},sv={qualify:xh,set:Rd("getTangentAtLength",{rotate:!0})},Dm={qualify:xh,set:Rd("getTangentAtLength",{rotate:!1})},av={qualify:xh,set:Rd("getTangentAtRatio",{rotate:!0})},Lm={qualify:xh,set:Rd("getTangentAtRatio",{rotate:!1})},Ry=sv,Dy=av;function Rd(u,t){const e={x:1,y:0};return(r,a)=>{let f,h;const g=a.view,m=g[u](Number(r));return m?(h=t.rotate?m.vector().vectorAngle(e):0,f=m.start):(f=g.path.start,h=0),h===0?{transform:`translate(${f.x},${f.y}')`}:{transform:`translate(${f.x},${f.y}') rotate(${h})`}}}var Ic;(function(u){function t(e,r,a){return!!(e!=null&&(typeof e=="string"||typeof e.qualify!="function"||bn(e.qualify,this,r,a)))}u.isValidDefinition=t})(Ic||(Ic={})),function(u){u.presets=Object.assign(Object.assign({},ey),ot),u.registry=So.create({type:"attribute definition"}),u.registry.register(u.presets,!0)}(Ic||(Ic={}));const Yo={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix(u){return`${Yo.prefixCls}-${u}`}},cv=Yo.prefix("highlighted"),Ly={highlight(u,t,e){const r=e&&e.className||cv;tr(t,r)},unhighlight(u,t,e){const r=e&&e.className||cv;ei(t,r)}},uv=Yo.prefix("highlight-opacity"),km={highlight(u,t){tr(t,uv)},unhighlight(u,t){ei(t,uv)}};var pi;(function(u){const t=wo("svg");function e(A,B){const j=Kv(A.x,A.y).matrixTransform(B);return new St(j.x,j.y)}u.transformPoint=e;function r(A,B){return new kn(e(A.start,B),e(A.end,B))}u.transformLine=r;function a(A,B){let j=A instanceof Zi?A.points:A;return Array.isArray(j)||(j=[]),new Zi(j.map(H=>e(H,B)))}u.transformPolyline=a;function f(A,B){const j=t.createSVGPoint();j.x=A.x,j.y=A.y;const H=j.matrixTransform(B);j.x=A.x+A.width,j.y=A.y;const nt=j.matrixTransform(B);j.x=A.x+A.width,j.y=A.y+A.height;const ct=j.matrixTransform(B);j.x=A.x,j.y=A.y+A.height;const Y=j.matrixTransform(B),Pt=Math.min(H.x,nt.x,ct.x,Y.x),Xt=Math.max(H.x,nt.x,ct.x,Y.x),pe=Math.min(H.y,nt.y,ct.y,Y.y),qe=Math.max(H.y,nt.y,ct.y,Y.y);return new pn(Pt,pe,Xt-Pt,qe-pe)}u.transformRectangle=f;function h(A,B,j){let H;const nt=A.ownerSVGElement;if(!nt)return new pn(0,0,0,0);try{H=A.getBBox()}catch(Y){H={x:A.clientLeft,y:A.clientTop,width:A.clientWidth,height:A.clientHeight}}if(B)return pn.create(H);const ct=hh(A,j||nt);return f(H,ct)}u.bbox=h;function g(A,B={}){let j;if(!A.ownerSVGElement||!xr(A)){if(q(A)){const{left:Y,top:Pt,width:Xt,height:pe}=m(A);return new pn(Y,Pt,Xt,pe)}return new pn(0,0,0,0)}let nt=B.target;if(!B.recursive){try{j=A.getBBox()}catch(Pt){j={x:A.clientLeft,y:A.clientTop,width:A.clientWidth,height:A.clientHeight}}if(!nt)return pn.create(j);const Y=hh(A,nt);return f(j,Y)}{const Y=A.childNodes,Pt=Y.length;if(Pt===0)return g(A,{target:nt});nt||(nt=A);for(let Xt=0;Xt<Pt;Xt+=1){const pe=Y[Xt];let qe;pe.childNodes.length===0?qe=g(pe,{target:nt}):qe=g(pe,{target:nt,recursive:!0}),j?j=j.union(qe):j=qe}return j}}u.getBBox=g;function m(A){let B=0,j=0,H=0,nt=0;if(A){let ct=A;for(;ct;)B+=ct.offsetLeft,j+=ct.offsetTop,ct=ct.offsetParent,ct&&(B+=parseInt(Sg(ct,"borderLeft"),10),j+=parseInt(Sg(ct,"borderTop"),10));H=A.offsetWidth,nt=A.offsetHeight}return{left:B,top:j,width:H,height:nt}}u.getBoundingOffsetRect=m;function b(A){const B=j=>{const H=A.getAttribute(j),nt=H?parseFloat(H):0;return Number.isNaN(nt)?0:nt};switch(A instanceof SVGElement&&A.nodeName.toLowerCase()){case"rect":return new pn(B("x"),B("y"),B("width"),B("height"));case"circle":return new uc(B("cx"),B("cy"),B("r"),B("r"));case"ellipse":return new uc(B("cx"),B("cy"),B("rx"),B("ry"));case"polyline":{const j=Sd(A);return new Zi(j)}case"polygon":{const j=Sd(A);return j.length>1&&j.push(j[0]),new Zi(j)}case"path":{let j=A.getAttribute("d");return Kn.isValid(j)||(j=Kn.normalize(j)),Kn.parse(j)}case"line":return new kn(B("x1"),B("y1"),B("x2"),B("y2"));default:break}return g(A)}u.toGeometryShape=b;function w(A,B,j,H){const nt=St.create(B),ct=St.create(j);H||(H=A instanceof SVGSVGElement?A:A.ownerSVGElement);const Y=Og(A);A.setAttribute("transform","");const Pt=g(A,{target:H}).scale(Y.sx,Y.sy),Xt=sf();Xt.setTranslate(-Pt.x-Pt.width/2,-Pt.y-Pt.height/2);const pe=sf(),qe=nt.angleBetween(ct,nt.clone().translate(1,0));qe&&pe.setRotate(qe,0,0);const xn=sf(),En=nt.clone().move(ct,Pt.width/2);xn.setTranslate(2*nt.x-En.x,2*nt.y-En.y);const jn=hh(A,H),wn=sf();wn.setMatrix(xn.matrix.multiply(pe.matrix.multiply(Xt.matrix.multiply(jn.scale(Y.sx,Y.sy))))),A.setAttribute("transform",af(wn.matrix))}u.translateAndAutoOrient=w;function S(A){if(A==null)return null;let B=A;do{let j=B.tagName;if(typeof j!="string")return null;if(j=j.toUpperCase(),di(B,"x6-port"))B=B.nextElementSibling;else if(j==="G")B=B.firstElementChild;else if(j==="TITLE")B=B.nextElementSibling;else break}while(B);return B}u.findShapeNode=S;function C(A){const B=S(A);if(!xr(B)){if(q(A)){const{left:H,top:nt,width:ct,height:Y}=m(A);return new pn(H,nt,ct,Y)}return new pn(0,0,0,0)}return b(B).bbox()||pn.create()}u.getBBoxV2=C})(pi||(pi={}));const Fm={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},lv={highlight(u,t,e){const r=Pc.getHighlighterId(t,e);if(Pc.hasCache(r))return;e=ku({},e,Fm);const a=Sr.create(t);let f,h;try{f=a.toPathData()}catch(w){h=pi.bbox(a.node,!0),f=uh(Object.assign(Object.assign({},e),h))}const g=wo("path");if(Ye(g,Object.assign({d:f,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},e.attrs?ln(e.attrs):null)),u.isEdgeElement(t))Ye(g,"d",u.getConnectionPathData());else{let w=a.getTransformToElement(u.container);const S=e.padding;if(S){h==null&&(h=pi.bbox(a.node,!0));const C=h.x+h.width/2,A=h.y+h.height/2;h=pi.transformRectangle(h,w);const B=Math.max(h.width,1),j=Math.max(h.height,1),H=(B+S)/B,nt=(j+S)/j,ct=Ti({a:H,b:0,c:0,d:nt,e:C-H*C,f:A-nt*A});w=w.multiply(ct)}cf(g,w)}tr(g,Yo.prefix("highlight-stroke"));const m=u.cell,b=()=>Pc.removeHighlighter(r);m.on("removed",b),m.model&&m.model.on("reseted",b),u.container.appendChild(g),Pc.setCache(r,g)},unhighlight(u,t,e){Pc.removeHighlighter(Pc.getHighlighterId(t,e))}};var Pc;(function(u){function t(h,g){return Ui(h),h.id+JSON.stringify(g)}u.getHighlighterId=t;const e={};function r(h,g){e[h]=g}u.setCache=r;function a(h){return e[h]!=null}u.hasCache=a;function f(h){const g=e[h];g&&(pt(g),delete e[h])}u.removeHighlighter=f})(Pc||(Pc={}));var yu;(function(u){function t(e,r){if(typeof r.highlight!="function")throw new Error(`Highlighter '${e}' is missing required \`highlight()\` method`);if(typeof r.unhighlight!="function")throw new Error(`Highlighter '${e}' is missing required \`unhighlight()\` method`)}u.check=t})(yu||(yu={})),function(u){u.presets=gt,u.registry=So.create({type:"highlighter"}),u.registry.register(u.presets,!0)}(yu||(yu={}));function fv(u,t={}){return new St(ie(t.x,u.width),ie(t.y,u.height))}function hv(u,t,e){return Object.assign({angle:t,position:u.toJSON()},e)}const ky=(u,t)=>u.map(({x:e,y:r,angle:a})=>hv(fv(t,{x:e,y:r}),a||0)),Fy=(u,t,e)=>{const r=e.start||0,a=e.step||20;return dv(u,t,r,(f,h)=>(f+.5-h/2)*a)},By=(u,t,e)=>{const r=e.start||0,a=e.step||360/u.length;return dv(u,t,r,f=>f*a)};function dv(u,t,e,r){const a=t.getCenter(),f=t.getTopCenter(),h=t.width/t.height,g=uc.fromRect(t),m=u.length;return u.map((b,w)=>{const S=e+r(w,m),C=f.clone().rotate(-S,a).scale(h,1,a),A=b.compensateRotate?-g.tangentTheta(C):0;return(b.dx||b.dy)&&C.translate(b.dx||0,b.dy||0),b.dr&&C.move(a,b.dr),hv(C.round(),A,b)})}var Gy=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const zy=(u,t,e)=>{const r=fv(t,e.start||t.getOrigin()),a=fv(t,e.end||t.getCorner());return Eh(u,r,a,e)},jy=(u,t,e)=>Eh(u,t.getTopLeft(),t.getBottomLeft(),e),Uy=(u,t,e)=>Eh(u,t.getTopRight(),t.getBottomRight(),e),Vy=(u,t,e)=>Eh(u,t.getTopLeft(),t.getTopRight(),e),Zy=(u,t,e)=>Eh(u,t.getBottomLeft(),t.getBottomRight(),e);function Eh(u,t,e,r){const a=new kn(t,e),f=u.length;return u.map((h,g)=>{var{strict:m}=h,b=Gy(h,["strict"]);const w=m||r.strict?(g+1)/(f+1):(g+.5)/f,S=a.pointAt(w);return(b.dx||b.dy)&&S.translate(b.dx||0,b.dy||0),hv(S.round(),0,b)})}var df;(function(u){u.presets=$t,u.registry=So.create({type:"port layout"}),u.registry.register(u.presets,!0)})(df||(df={}));const Bm={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function dl(u,t){const{x:e,y:r,angle:a,attrs:f}=t||{};return ku({},{angle:a,attrs:f,position:{x:e,y:r}},u,Bm)}const $y=(u,t,e)=>dl({position:t.getTopLeft()},e),Hy=(u,t,e)=>dl({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},e),Wy=(u,t,e)=>dl({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},e),Gm=(u,t,e)=>dl({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},e),Xy=(u,t,e)=>dl({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},e),Yy=(u,t,e)=>zm(u,t,!1,e),Ky=(u,t,e)=>zm(u,t,!0,e),qy=(u,t,e)=>jm(u,t,!1,e),Jy=(u,t,e)=>jm(u,t,!0,e);function zm(u,t,e,r){const a=r.offset!=null?r.offset:15,f=t.getCenter().theta(u),h=Um(t);let g,m,b,w,S=0;return f<h[1]||f>h[2]?(g=".3em",m=a,b=0,w="start"):f<h[0]?(g="0",m=0,b=-a,e?(S=-90,w="start"):w="middle"):f<h[3]?(g=".3em",m=-a,b=0,w="end"):(g=".6em",m=0,b=a,e?(S=90,w="start"):w="middle"),dl({position:{x:Math.round(m),y:Math.round(b)},angle:S,attrs:{".":{y:g,"text-anchor":w}}},r)}function jm(u,t,e,r){const a=r.offset!=null?r.offset:15,f=t.getCenter().theta(u),h=Um(t);let g,m,b,w,S=0;return f<h[1]||f>h[2]?(g=".3em",m=-a,b=0,w="end"):f<h[0]?(g=".6em",m=0,b=a,e?(S=90,w="start"):w="middle"):f<h[3]?(g=".3em",m=a,b=0,w="start"):(g="0em",m=0,b=-a,e?(S=-90,w="start"):w="middle"),dl({position:{x:Math.round(m),y:Math.round(b)},angle:S,attrs:{".":{y:g,"text-anchor":w}}},r)}function Um(u){const t=u.getCenter(),e=t.theta(u.getTopLeft()),r=t.theta(u.getBottomLeft()),a=t.theta(u.getBottomRight()),f=t.theta(u.getTopRight());return[e,f,a,r]}const Qy=(u,t,e)=>bu(u.diff(t.getCenter()),!1,e),tb=(u,t,e)=>bu(u.diff(t.getCenter()),!0,e);function bu(u,t,e){const r=e.offset!=null?e.offset:20,a=new St(0,0),f=-u.theta(a),h=u.clone().move(a,r).diff(u).round();let g=".3em",m,b=f;return(f+90)%180===0?(m=t?"end":"middle",!t&&f===-270&&(g="0em")):f>-270&&f<-90?(m="start",b=f-180):m="end",dl({position:h.round().toJSON(),angle:t?b:0,attrs:{".":{y:g,"text-anchor":m}}},e)}var wh;(function(u){u.presets=ht,u.registry=So.create({type:"port label layout"}),u.registry.register(u.presets,!0)})(wh||(wh={}));class Ki extends cs{get priority(){return 2}constructor(){super(),this.cid=gv.uniqueId(),Ki.views[this.cid]=this}confirmUpdate(t,e){return 0}empty(t=this.container){return Rt(t),this}unmount(t=this.container){return pt(t),this}remove(t=this.container){return t===this.container&&(this.removeEventListeners(document),this.onRemove(),delete Ki.views[this.cid]),this.unmount(t),this}onRemove(){}setClass(t,e=this.container){e.classList.value=Array.isArray(t)?t.join(" "):t}addClass(t,e=this.container){return tr(e,Array.isArray(t)?t.join(" "):t),this}removeClass(t,e=this.container){return ei(e,Array.isArray(t)?t.join(" "):t),this}setStyle(t,e=this.container){return nf(e,t),this}setAttrs(t,e=this.container){return t!=null&&e!=null&&Ye(e,t),this}findAttr(t,e=this.container){let r=e;for(;r&&r.nodeType===1;){const a=r.getAttribute(t);if(a!=null)return a;if(r===this.container)return null;r=r.parentNode}return null}find(t,e=this.container,r=this.selectors){return Ki.find(t,e,r).elems}findOne(t,e=this.container,r=this.selectors){const a=this.find(t,e,r);return a.length>0?a[0]:null}findByAttr(t,e=this.container){let r=e;for(;r&&r.getAttribute;){const a=r.getAttribute(t);if((a!=null||r===this.container)&&a!=="false")return r;r=r.parentNode}return null}getSelector(t,e){let r;if(t===this.container)return typeof e=="string"&&(r=`> ${e}`),r;if(t){const a=Yt(t)+1;r=`${t.tagName.toLowerCase()}:nth-child(${a})`,e&&(r+=` > ${e}`),r=this.getSelector(t.parentNode,r)}return r}prefixClassName(t){return Yo.prefix(t)}delegateEvents(t,e){if(t==null)return this;e||this.undelegateEvents();const r=/^(\S+)\s*(.*)$/;return Object.keys(t).forEach(a=>{const f=a.match(r);if(f==null)return;const h=this.getEventHandler(t[a]);typeof h=="function"&&this.delegateEvent(f[1],f[2],h)}),this}undelegateEvents(){return Ns.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(t,e){return this.addEventListeners(document,t,e),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(t,e,r){return Ns.on(this.container,t+this.getEventNamespace(),e,r),this}undelegateEvent(t,e,r){const a=t+this.getEventNamespace();return e==null?Ns.off(this.container,a):typeof e=="string"?Ns.off(this.container,a,e,r):Ns.off(this.container,a,e),this}addEventListeners(t,e,r){if(e==null)return this;const a=this.getEventNamespace();return Object.keys(e).forEach(f=>{const h=this.getEventHandler(e[f]);typeof h=="function"&&Ns.on(t,f+a,r,h)}),this}removeEventListeners(t){return t!=null&&Ns.off(t,this.getEventNamespace()),this}getEventNamespace(){return`.${Yo.prefixCls}-event-${this.cid}`}getEventHandler(t){let e;if(typeof t=="string"){const r=this[t];typeof r=="function"&&(e=(...a)=>r.call(this,...a))}else e=(...r)=>t.call(this,...r);return e}getEventTarget(t,e={}){const{target:r,type:a,clientX:f=0,clientY:h=0}=t;return e.fromPoint||a==="touchmove"||a==="touchend"?document.elementFromPoint(f,h):r}stopPropagation(t){return this.setEventData(t,{propagationStopped:!0}),this}isPropagationStopped(t){return this.getEventData(t).propagationStopped===!0}getEventData(t){return this.eventData(t)}setEventData(t,e){return this.eventData(t,e)}eventData(t,e){if(t==null)throw new TypeError("Event object required");let r=t.data;const a=`__${this.cid}__`;return e==null?r==null?{}:r[a]||{}:(r==null&&(r=t.data={}),r[a]==null?r[a]=Object.assign({},e):r[a]=Object.assign(Object.assign({},r[a]),e),r[a])}normalizeEvent(t){return Ki.normalizeEvent(t)}}(function(u){function t(a,f){return f?wo(a||"g"):gi(a||"div")}u.createElement=t;function e(a,f,h){if(!a||a===".")return{elems:[f]};if(h){const g=h[a];if(g)return{elems:Array.isArray(g)?g:[g]}}if(Yo.useCSSSelector){const g=a.includes(">")?`:scope ${a}`:a;return{isCSSSelector:!0,elems:Array.prototype.slice.call(f.querySelectorAll(g))}}return{elems:[]}}u.find=e;function r(a){let f=a;const h=a.originalEvent,g=h&&h.changedTouches&&h.changedTouches[0];if(g){for(const b in a)g[b]===void 0&&(g[b]=a[b]);f=g}const m=f.target;if(m){const b=m.correspondingUseElement;b&&(f.target=b)}return f}u.normalizeEvent=r})(Ki||(Ki={})),function(u){u.views={};function t(e){return u.views[e]||null}u.getView=t}(Ki||(Ki={}));var gv;(function(u){let t=0;function e(){const r=`v${t}`;return t+=1,r}u.uniqueId=e})(gv||(gv={}));class eb{constructor(t){this.view=t,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new Ig,this.pathCache={}}get(t){return this.elemCache.has(t)||this.elemCache.set(t,{}),this.elemCache.get(t)}getData(t){const e=this.get(t);return e.data||(e.data={}),e.data}getMatrix(t){const e=this.get(t);if(e.matrix==null){const r=this.view.container;e.matrix=Jv(t,r)}return Ti(e.matrix)}getShape(t){const e=this.get(t);return e.shape==null&&(e.shape=pi.toGeometryShape(t)),e.shape.clone()}getBoundingRect(t){const e=this.get(t);return e.boundingRect==null&&(e.boundingRect=pi.getBBoxV2(t)),e.boundingRect.clone()}}var Ri;(function(u){function t(b){return b!=null&&!e(b)}u.isJSONMarkup=t;function e(b){return b!=null&&typeof b=="string"}u.isStringMarkup=e;function r(b){return b==null||e(b)?b:vi.Z(b)}u.clone=r;function a(b){return`${b}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}u.sanitize=a;function f(b,w={ns:gn.svg}){const S=document.createDocumentFragment(),C={},A={},B=[{markup:Array.isArray(b)?b:[b],parent:S,ns:w.ns}];for(;B.length>0;){const j=B.pop();let H=j.ns||gn.svg;const nt=j.markup,ct=j.parent;nt.forEach(Y=>{const Pt=Y.tagName;if(!Pt)throw new TypeError("Invalid tagName");Y.ns&&(H=Y.ns);const Xt=H?gi(Pt,H):Pr(Pt),pe=Y.attrs;pe&&Ye(Xt,ln(pe));const qe=Y.style;qe&&nf(Xt,qe);const xn=Y.className;xn!=null&&Xt.setAttribute("class",Array.isArray(xn)?xn.join(" "):xn),Y.textContent&&(Xt.textContent=Y.textContent);const En=Y.selector;if(En!=null){if(A[En])throw new TypeError("Selector must be unique");A[En]=Xt}if(Y.groupSelector){let wn=Y.groupSelector;Array.isArray(wn)||(wn=[wn]),wn.forEach(Un=>{C[Un]||(C[Un]=[]),C[Un].push(Xt)})}ct.appendChild(Xt);const jn=Y.children;Array.isArray(jn)&&B.push({ns:H,markup:jn,parent:Xt})})}return Object.keys(C).forEach(j=>{if(A[j])throw new Error("Ambiguous group selector");A[j]=C[j]}),{fragment:S,selectors:A,groups:C}}u.parseJSONMarkup=f;function h(b){return b instanceof SVGElement?wo("g"):Pr("div")}function g(b){if(e(b)){const A=Sr.createVectors(b),B=A.length;if(B===1)return{elem:A[0].node};if(B>1){const j=h(A[0].node);return A.forEach(H=>{j.appendChild(H.node)}),{elem:j}}return{}}const w=f(b),S=w.fragment;let C=null;return S.childNodes.length>1?(C=h(S.firstChild),C.appendChild(S)):C=S.firstChild,{elem:C,selectors:w.selectors}}u.renderMarkup=g;function m(b){const w=Sr.createVectors(b),S=document.createDocumentFragment();for(let C=0,A=w.length;C<A;C+=1){const B=w[C].node;S.appendChild(B)}return{fragment:S,selectors:{}}}u.parseLabelStringMarkup=m})(Ri||(Ri={})),function(u){function t(e,r,a){if(e!=null){let f;const h=e.tagName.toLowerCase();if(e===r)return typeof a=="string"?f=`> ${h} > ${a}`:f=`> ${h}`,f;const g=e.parentNode;if(g&&g.childNodes.length>1){const m=Yt(e)+1;f=`${h}:nth-child(${m})`}else f=h;return a&&(f+=` > ${a}`),t(e.parentNode,r,f)}return a}u.getSelector=t}(Ri||(Ri={})),function(u){function t(){return"g"}u.getPortContainerMarkup=t;function e(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}u.getPortMarkup=e;function r(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}u.getPortLabelMarkup=r}(Ri||(Ri={})),function(u){function t(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}u.getEdgeMarkup=t}(Ri||(Ri={})),function(u){function t(e=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:gn.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:gn.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:e?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}u.getForeignObjectMarkup=t}(Ri||(Ri={}));class Vm{constructor(t){this.view=t}get cell(){return this.view.cell}getDefinition(t){return this.cell.getAttrDefinition(t)}processAttrs(t,e){let r,a,f,h;const g=[];return Object.keys(e).forEach(m=>{const b=e[m],w=this.getDefinition(m),S=bn(Ic.isValidDefinition,this.view,w,b,{elem:t,attrs:e,cell:this.cell,view:this.view});if(w&&S)typeof w=="string"?(r==null&&(r={}),r[w]=b):b!==null&&g.push({name:m,definition:w});else{r==null&&(r={});const C=Vt.includes(m)?m:bg(m);r[C]=b}}),g.forEach(({name:m,definition:b})=>{const w=e[m];typeof b.set=="function"&&(a==null&&(a={}),a[m]=w),typeof b.offset=="function"&&(f==null&&(f={}),f[m]=w),typeof b.position=="function"&&(h==null&&(h={}),h[m]=w)}),{raw:e,normal:r,set:a,offset:f,position:h}}mergeProcessedAttrs(t,e){t.set=Object.assign(Object.assign({},t.set),e.set),t.position=Object.assign(Object.assign({},t.position),e.position),t.offset=Object.assign(Object.assign({},t.offset),e.offset);const r=t.normal&&t.normal.transform;r!=null&&e.normal&&(e.normal.transform=r),t.normal=e.normal}findAttrs(t,e,r,a){const f=[],h=new Ig;return Object.keys(t).forEach(g=>{const m=t[g];if(!Ii(m))return;const{isCSSSelector:b,elems:w}=Ki.find(g,e,a);r[g]=w;for(let S=0,C=w.length;S<C;S+=1){const A=w[S],B=a&&a[g]===A,j=h.get(A);if(j){j.array||(f.push(A),j.array=!0,j.attrs=[j.attrs],j.priority=[j.priority]);const H=j.attrs,nt=j.priority;if(B)H.unshift(m),nt.unshift(-1);else{const ct=Rl(nt,b?-1:C);H.splice(ct,0,m),nt.splice(ct,0,C)}}else h.set(A,{elem:A,attrs:m,priority:B?-1:C,array:!1})}}),f.forEach(g=>{const m=h.get(g),b=m.attrs;m.attrs=b.reduceRight((w,S)=>xi(w,S),{})}),h}updateRelativeAttrs(t,e,r){const a=e.raw||{};let f=e.normal||{};const h=e.set,g=e.position,m=e.offset,b=()=>({elem:t,cell:this.cell,view:this.view,attrs:a,refBBox:r.clone()});if(h!=null&&Object.keys(h).forEach(H=>{const nt=h[H],ct=this.getDefinition(H);if(ct!=null){const Y=bn(ct.set,this.view,nt,b());typeof Y=="object"?f=Object.assign(Object.assign({},f),Y):Y!=null&&(f[H]=Y)}}),t instanceof HTMLElement){this.view.setAttrs(f,t);return}const w=f.transform,S=w?`${w}`:null,C=lh(S),A=new St(C.e,C.f);w&&(delete f.transform,C.e=0,C.f=0);let B=!1;g!=null&&Object.keys(g).forEach(H=>{const nt=g[H],ct=this.getDefinition(H);if(ct!=null){const Y=bn(ct.position,this.view,nt,b());Y!=null&&(B=!0,A.translate(St.create(Y)))}}),this.view.setAttrs(f,t);let j=!1;if(m!=null){const H=this.view.getBoundingRectOfElement(t);if(H.width>0&&H.height>0){const nt=pi.transformRectangle(H,C);Object.keys(m).forEach(ct=>{const Y=m[ct],Pt=this.getDefinition(ct);if(Pt!=null){const Xt=bn(Pt.offset,this.view,Y,{elem:t,cell:this.cell,view:this.view,attrs:a,refBBox:nt});Xt!=null&&(j=!0,A.translate(St.create(Xt)))}})}}(w!=null||B||j)&&(A.round(1),C.e=A.x,C.f=A.y,t.setAttribute("transform",af(C)))}update(t,e,r){const a={},f=this.findAttrs(r.attrs||e,t,a,r.selectors),h=r.attrs?this.findAttrs(e,t,a,r.selectors):f,g=[];f.each(w=>{const S=w.elem,C=w.attrs,A=this.processAttrs(S,C);if(A.set==null&&A.position==null&&A.offset==null)this.view.setAttrs(A.normal,S);else{const B=h.get(S),j=B?B.attrs:null,H=j&&C.ref==null?j.ref:C.ref;let nt;if(H){if(nt=(a[H]||this.view.find(H,t,r.selectors))[0],!nt)throw new Error(`"${H}" reference does not exist.`)}else nt=null;const ct={node:S,refNode:nt,attributes:j,processedAttributes:A},Y=g.findIndex(Pt=>Pt.refNode===S);Y>-1?g.splice(Y,0,ct):g.push(ct)}});const m=new Ig;let b;g.forEach(w=>{const S=w.node,C=w.refNode;let A;const B=C!=null&&r.rotatableNode!=null&&$(r.rotatableNode,C);if(C&&(A=m.get(C)),!A){const nt=B?r.rotatableNode:t;A=C?pi.getBBox(C,{target:nt}):r.rootBBox,C&&m.set(C,A)}let j;r.attrs&&w.attributes?(j=this.processAttrs(S,w.attributes),this.mergeProcessedAttrs(j,w.processedAttributes)):j=w.processedAttributes;let H=A;B&&r.rotatableNode!=null&&!r.rotatableNode.contains(S)&&(b||(b=lh(Ye(r.rotatableNode,"transform"))),H=pi.transformRectangle(A,b)),this.updateRelativeAttrs(S,j,H)})}}class Zm{get cell(){return this.view.cell}constructor(t,e,r=[]){this.view=t;const a={},f={};let h=0;Object.keys(e).forEach(m=>{let b=e[m];Array.isArray(b)||(b=[b]),b.forEach(w=>{let S=a[w];S||(h+=1,S=a[w]=1<<h),f[m]|=S})});let g=r;if(Array.isArray(g)||(g=[g]),g.forEach(m=>{a[m]||(h+=1,a[m]=1<<h)}),h>25)throw new Error("Maximum number of flags exceeded.");this.flags=a,this.attrs=f,this.bootstrap=r}getFlag(t){const e=this.flags;return e==null?0:Array.isArray(t)?t.reduce((r,a)=>r|e[a],0):e[t]|0}hasAction(t,e){return t&this.getFlag(e)}removeAction(t,e){return t^t&this.getFlag(e)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let t=0;return this.attrs&&Object.keys(this.attrs).forEach(e=>{this.cell.hasChanged(e)&&(t|=this.attrs[e])}),t}}var nb=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class Bo extends Ki{static getDefaults(){return this.defaults}static config(t){this.defaults=this.getOptions(t)}static getOptions(t){const e=(b,w)=>w!=null?If([...Array.isArray(b)?b:[b],...Array.isArray(w)?w:[w]]):Array.isArray(b)?[...b]:[b],r=vi.Z(this.getDefaults()),{bootstrap:a,actions:f,events:h,documentEvents:g}=t,m=nb(t,["bootstrap","actions","events","documentEvents"]);return a&&(r.bootstrap=e(r.bootstrap,a)),f&&Object.entries(f).forEach(([b,w])=>{const S=r.actions[b];w&&S?r.actions[b]=e(S,w):w&&(r.actions[b]=e(w))}),h&&(r.events=Object.assign(Object.assign({},r.events),h)),t.documentEvents&&(r.documentEvents=Object.assign(Object.assign({},r.documentEvents),g)),xi(r,m)}get[Symbol.toStringTag](){return Bo.toStringTag}constructor(t,e={}){super(),this.cell=t,this.options=this.ensureOptions(e),this.graph=this.options.graph,this.attr=new Vm(this),this.flag=new Zm(this,this.options.actions,this.options.bootstrap),this.cache=new eb(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(t){return this.getConstructor().getOptions(t)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Ki.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(t){if(this.container!==t){this.undelegateEvents(),this.container=t,this.options.events!=null&&this.delegateEvents(this.options.events);const e=this.getContainerAttrs();e!=null&&this.setAttrs(e,t);const r=this.getContainerStyle();r!=null&&this.setStyle(r,t);const a=this.getContainerClassName();a!=null&&this.addClass(a,t)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(t,e={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(t){return this.flag.getFlag(t)}hasAction(t,e){return this.flag.hasAction(t,e)}removeAction(t,e){return this.flag.removeAction(t,e)}handleAction(t,e,r,a){if(this.hasAction(t,e)){r();const f=[e];return a&&(typeof a=="string"?f.push(a):f.push(...a)),this.removeAction(t,f)}return t}setup(){this.cell.on("changed",({options:t})=>this.onAttrsChange(t))}onAttrsChange(t){let e=this.flag.getChangedFlag();t.updated||!e||(t.dirty&&this.hasAction(e,"update")&&(e|=this.getFlag("render")),t.toolId&&(t.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,e,t))}parseJSONMarkup(t,e){const r=Ri.parseJSONMarkup(t),a=r.selectors,f=this.rootSelector;if(e&&f){if(a[f])throw new Error("Invalid root selector");a[f]=e}return r}can(t){let e=this.graph.options.interacting;if(typeof e=="function"&&(e=bn(e,this.graph,this)),typeof e=="object"){let r=e[t];return typeof r=="function"&&(r=bn(r,this.graph,this)),r!==!1}return typeof e=="boolean"?e:!1}cleanCache(){return this.cache.clean(),this}getCache(t){return this.cache.get(t)}getDataOfElement(t){return this.cache.getData(t)}getMatrixOfElement(t){return this.cache.getMatrix(t)}getShapeOfElement(t){return this.cache.getShape(t)}getBoundingRectOfElement(t){return this.cache.getBoundingRect(t)}getBBoxOfElement(t){const e=this.getBoundingRectOfElement(t),r=this.getMatrixOfElement(t),a=this.getRootRotatedMatrix(),f=this.getRootTranslatedMatrix();return pi.transformRectangle(e,f.multiply(a).multiply(r))}getUnrotatedBBoxOfElement(t){const e=this.getBoundingRectOfElement(t),r=this.getMatrixOfElement(t),a=this.getRootTranslatedMatrix();return pi.transformRectangle(e,a.multiply(r))}getBBox(t={}){let e;if(t.useCellGeometry){const r=this.cell,a=r.isNode()?r.getAngle():0;e=r.getBBox().bbox(a)}else e=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(e)}getRootTranslatedMatrix(){const t=this.cell,e=t.isNode()?t.getPosition():{x:0,y:0};return Ti().translate(e.x,e.y)}getRootRotatedMatrix(){let t=Ti();const e=this.cell,r=e.isNode()?e.getAngle():0;if(r){const a=e.getBBox(),f=a.width/2,h=a.height/2;t=t.translate(f,h).rotate(r).translate(-f,-h)}return t}findMagnet(t=this.container){return this.findByAttr("magnet",t)}updateAttrs(t,e,r={}){r.rootBBox==null&&(r.rootBBox=new pn),r.selectors==null&&(r.selectors=this.selectors),this.attr.update(t,e,r)}isEdgeElement(t){return this.cell.isEdge()&&(t==null||t===this.container)}prepareHighlight(t,e={}){const r=t||this.container;return e.partial=r===this.container,r}highlight(t,e={}){const r=this.prepareHighlight(t,e);return this.notify("cell:highlight",{magnet:r,options:e,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:r,options:e,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:r,options:e,view:this,node:this.cell,cell:this.cell}),this}unhighlight(t,e={}){const r=this.prepareHighlight(t,e);return this.notify("cell:unhighlight",{magnet:r,options:e,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:r,options:e,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:r,options:e,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(t,e){}getEdgeTerminal(t,e,r,a,f){const h=this.cell,g=this.findAttr("port",t),m=t.getAttribute("data-selector"),b={cell:h.id};return m!=null&&(b.magnet=m),g!=null?(b.port=g,h.isNode()&&!h.hasPort(g)&&m==null&&(b.selector=this.getSelector(t))):m==null&&this.container!==t&&(b.selector=this.getSelector(t)),b}getMagnetFromEdgeTerminal(t){const e=this.cell,r=this.container,a=t.port;let f=t.magnet,h;return a!=null&&e.isNode()&&e.hasPort(a)?h=this.findPortElem(a,f)||r:(f||(f=t.selector),!f&&a!=null&&(f=`[port="${a}"]`),h=this.findOne(f,r,this.selectors)),h}hasTools(t){const e=this.tools;return e==null?!1:t==null?!0:e.name===t}addTools(t){if(!this.can("toolsAddable"))return this;if(this.removeTools(),t){const e=Io.isToolsView(t)?t:new Io(t);this.tools=e,e.config({view:this}),e.mount()}return this}updateTools(t={}){return this.tools&&this.tools.update(t),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}notify(t,e){return this.trigger(t,e),this.graph.trigger(t,e),this}getEventArgs(t,e,r){const a=this,f=a.cell;return e==null||r==null?{e:t,view:a,cell:f}:{e:t,x:e,y:r,view:a,cell:f}}onClick(t,e,r){this.notify("cell:click",this.getEventArgs(t,e,r))}onDblClick(t,e,r){this.notify("cell:dblclick",this.getEventArgs(t,e,r))}onContextMenu(t,e,r){this.notify("cell:contextmenu",this.getEventArgs(t,e,r))}onMouseDown(t,e,r){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,e,r))}onMouseUp(t,e,r){this.notify("cell:mouseup",this.getEventArgs(t,e,r)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(t,e,r){this.notify("cell:mousemove",this.getEventArgs(t,e,r))}onMouseOver(t){this.notify("cell:mouseover",this.getEventArgs(t))}onMouseOut(t){this.notify("cell:mouseout",this.getEventArgs(t))}onMouseEnter(t){this.notify("cell:mouseenter",this.getEventArgs(t))}onMouseLeave(t){this.notify("cell:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,r,a){this.notify("cell:mousewheel",Object.assign({delta:a},this.getEventArgs(t,e,r)))}onCustomEvent(t,e,r,a){this.notify("cell:customevent",Object.assign({name:e},this.getEventArgs(t,r,a))),this.notify(e,Object.assign({},this.getEventArgs(t,r,a)))}onMagnetMouseDown(t,e,r,a){}onMagnetDblClick(t,e,r,a){}onMagnetContextMenu(t,e,r,a){}onLabelMouseDown(t,e,r){}checkMouseleave(t){const e=this.getEventTarget(t,{fromPoint:!0}),r=this.graph.findViewByElem(e);r!==this&&(this.onMouseLeave(t),r&&r.onMouseEnter(t))}}Bo.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(u){u.Flag=Zm,u.Attr=Vm}(Bo||(Bo={})),function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag],a=e;return(r==null||r===u.toStringTag)&&typeof a.isNodeView=="function"&&typeof a.isEdgeView=="function"&&typeof a.confirmUpdate=="function"}u.isCellView=t}(Bo||(Bo={})),function(u){function t(r){return function(a){a.config({priority:r})}}u.priority=t;function e(r){return function(a){a.config({bootstrap:r})}}u.bootstrap=e}(Bo||(Bo={})),function(u){u.registry=So.create({type:"view"})}(Bo||(Bo={}));class Io extends Ki{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Io.toStringTag}constructor(t={}){super(),this.svgContainer=this.createContainer(!0,t),this.htmlContainer=this.createContainer(!1,t),this.config(t)}createContainer(t,e){const r=t?Ki.createElement("g",!0):Ki.createElement("div",!1);return tr(r,this.prefixClassName("cell-tools")),e.className&&tr(r,e.className),r}config(t){if(this.options=Object.assign(Object.assign({},this.options),t),!Bo.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(tr(this.svgContainer,this.prefixClassName("edge-tools")),tr(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(tr(this.svgContainer,this.prefixClassName("node-tools")),tr(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const e=this.options.items;if(!Array.isArray(e))return this;this.tools=[];const r=[];e.forEach(a=>{Io.ToolItem.isToolItem(a)?a.name==="vertices"?r.unshift(a):r.push(a):(typeof a=="object"?a.name:a)==="vertices"?r.unshift(a):r.push(a)});for(let a=0;a<r.length;a+=1){const f=r[a];let h;if(Io.ToolItem.isToolItem(f))h=f;else{const g=typeof f=="object"?f.name:f,m=typeof f=="object"?f.args||{}:{};if(g){if(this.cell.isNode()){const b=vf.registry.get(g);if(b)h=new b(m);else return vf.registry.onNotFound(g)}else if(this.cell.isEdge()){const b=Sh.registry.get(g);if(b)h=new b(m);else return Sh.registry.onNotFound(g)}}}h&&(h.config(this.cellView,this),h.render(),(h.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(h.container),this.tools.push(h))}return this}update(t={}){const e=this.tools;return e&&e.forEach(r=>{t.toolId!==r.cid&&r.isVisible()&&r.update()}),this}focus(t){const e=this.tools;return e&&e.forEach(r=>{t===r?r.show():r.hide()}),this}blur(t){const e=this.tools;return e&&e.forEach(r=>{r!==t&&!r.isVisible()&&(r.show(),r.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const t=this.tools;return t&&(t.forEach(e=>e.remove()),this.tools=null),pt(this.svgContainer),pt(this.htmlContainer),super.remove()}mount(){const t=this.tools,e=this.cellView;if(e&&t){const r=t.some(f=>f.options.isSVGElement!==!1),a=t.some(f=>f.options.isSVGElement===!1);r&&(this.options.local?e.container:e.graph.view.decorator).appendChild(this.svgContainer),a&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag],a=e;return(r==null||r===u.toStringTag)&&a.graph!=null&&a.cell!=null&&typeof a.config=="function"&&typeof a.update=="function"&&typeof a.focus=="function"&&typeof a.blur=="function"&&typeof a.show=="function"&&typeof a.hide=="function"}u.isToolsView=t})(Io||(Io={})),function(u){class t extends Ki{static getDefaults(){return this.defaults}static config(r){this.defaults=this.getOptions(r)}static getOptions(r){return xi(vi.Z(this.getDefaults()),r)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}constructor(r={}){super(),this.visible=!0,this.options=this.getOptions(r),this.container=Ki.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),tr(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&tr(this.container,this.options.className),this.init()}init(){}getOptions(r){return this.constructor.getOptions(r)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(r,a){return this.cellView=r,this.parent=a,this.stamp(this.container),this.cell.isEdge()?tr(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&tr(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const r=this.options.markup;if(r){const a=Ri.parseJSONMarkup(r);this.container.appendChild(a.fragment),this.childNodes=a.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(r){r&&r.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const r=this.options.focusOpacity;return r!=null&&Number.isFinite(r)&&(this.container.style.opacity=`${r}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(r){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(r,this.cellView)}}t.defaults={isSVGElement:!0,tagName:"g"},u.ToolItem=t,function(e){let r=0;function a(h){return h?cc(h):(r+=1,`CustomTool${r}`)}function f(h){const g=_l(a(h.name),this);return g.config(h),g}e.define=f}(t=u.ToolItem||(u.ToolItem={})),function(e){e.toStringTag=`X6.${e.name}`;function r(a){if(a==null)return!1;if(a instanceof e)return!0;const f=a[Symbol.toStringTag],h=a;return(f==null||f===e.toStringTag)&&h.graph!=null&&h.cell!=null&&typeof h.config=="function"&&typeof h.update=="function"&&typeof h.focus=="function"&&typeof h.blur=="function"&&typeof h.show=="function"&&typeof h.hide=="function"&&typeof h.isVisible=="function"}e.isToolItem=r}(t=u.ToolItem||(u.ToolItem={}))}(Io||(Io={}));const pv=u=>u;function jg(u,t){return t===0?"0%":`${Math.round(u/t*100)}%`}function $m(u){return(e,r,a,f)=>r.isEdgeElement(a)?rb(u,e,r,a,f):Hm(u,e,r,a,f)}function Hm(u,t,e,r,a){const f=e.cell,h=f.getAngle(),g=e.getUnrotatedBBoxOfElement(r),m=f.getBBox().getCenter(),b=St.create(a).rotate(h,m);let w=b.x-g.x,S=b.y-g.y;return u&&(w=jg(w,g.width),S=jg(S,g.height)),t.anchor={name:"topLeft",args:{dx:w,dy:S,rotate:!0}},t}function rb(u,t,e,r,a){const f=e.getConnection();if(!f)return t;const h=f.closestPointLength(a);if(u){const g=f.length();t.anchor={name:"ratio",args:{ratio:h/g}}}else t.anchor={name:"length",args:{length:h}};return t}const ib=$m(!0),ob=$m(!1);var vv;(function(u){u.presets=bt,u.registry=So.create({type:"connection strategy"}),u.registry.register(u.presets,!0)})(vv||(vv={}));function Wm(u,t,e,r){return bn(vv.presets.pinRelative,this.graph,{},t,e,u,this.cell,r,{}).anchor}function Xm(u,t){return t?u.cell.getBBox():u.cell.isEdge()?u.getConnection().bbox():u.getUnrotatedBBoxOfElement(u.container)}class gl extends Io.ToolItem{onRender(){tr(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const e=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();cf(this.container,e,{absolute:!0})}getNodeMatrix(){const t=this.cellView,e=this.options;let{x:r=0,y:a=0}=e;const{offset:f,useCellGeometry:h,rotate:g}=e;let m=Xm(t,h);const b=t.cell.getAngle();g||(m=m.bbox(b));let w=0,S=0;typeof f=="number"?(w=f,S=f):typeof f=="object"&&(w=f.x,S=f.y),r=ie(r,m.width),a=ie(a,m.height);let C=Ti().translate(m.x+m.width/2,m.y+m.height/2);return g&&(C=C.rotate(b)),C=C.translate(r+w-m.width/2,a+S-m.height/2),C}getEdgeMatrix(){const t=this.cellView,e=this.options,{offset:r=0,distance:a=0,rotate:f}=e;let h,g,m;const b=ie(a,1);b>=0&&b<=1?h=t.getTangentAtRatio(b):h=t.getTangentAtLength(b),h?(g=h.start,m=h.vector().vectorAngle(new St(1,0))||0):(g=t.getConnection().start,m=0);let w=Ti().translate(g.x,g.y).rotate(m);return typeof r=="object"?w=w.translate(r.x||0,r.y||0):w=w.translate(0,r),f||(w=w.rotate(-m)),w}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.options.onClick;typeof e=="function"&&bn(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(u){u.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(gl||(gl={})),function(u){u.Remove=u.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:t,btn:e}){e.parent.remove(),t.cell.remove({ui:!0,toolId:e.cid})}})}(gl||(gl={}));var Ym=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class Dd extends Io.ToolItem{onRender(){if(tr(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const t=this.options.attrs,{class:e}=t,r=Ym(t,["class"]);Ye(this.container,ln(r)),e&&tr(this.container,e)}this.update()}update(){const t=this.cellView,e=this.options,{useCellGeometry:r,rotate:a}=e,f=Ee(e.padding);let h=Xm(t,r).moveAndExpand({x:-f.left,y:-f.top,width:f.left+f.right,height:f.top+f.bottom});const g=t.cell;if(g.isNode()){const m=g.getAngle();if(m)if(a){const b=g.getBBox().getCenter();Td(this.container,m,b.x,b.y,{absolute:!0})}else h=h.bbox(m)}return Ye(this.container,h.toJSON()),this}}(function(u){u.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(Dd||(Dd={}));class gf extends Io.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}renderHandles(){const t=this.vertices;for(let e=0,r=t.length;e<r;e+=1){const a=t[e],f=this.options.createHandle,h=this.options.processHandle,g=f({index:e,graph:this.graph,guard:m=>this.guard(m),attrs:this.options.attrs||{}});h&&h(g),g.updatePosition(a.x,a.y),this.stamp(g.container),this.container.appendChild(g.container),this.handles.push(g),this.startHandleListening(g)}}updateHandles(){const t=this.vertices;for(let e=0,r=t.length;e<r;e+=1){const a=t[e],f=this.handles[e];f&&f.updatePosition(a.x,a.y)}}updatePath(){const t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)}stopHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)}getNeighborPoints(t){const e=this.cellView,r=this.vertices,a=t>0?r[t-1]:e.sourceAnchor,f=t<r.length-1?r[t+1]:e.targetAnchor;return{prev:St.create(a),next:St.create(f)}}getMouseEventArgs(t){const e=this.normalizeEvent(t),{x:r,y:a}=this.graph.snapToGrid(e.clientX,e.clientY);return{e,x:r,y:a}}onHandleChange({e:t}){this.focus();const e=this.cellView;if(e.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:r,x:a,y:f}=this.getMouseEventArgs(t);e.notifyMouseDown(r,a,f)}}onHandleChanging({handle:t,e}){const r=this.cellView,a=t.options.index,{e:f,x:h,y:g}=this.getMouseEventArgs(e),m={x:h,y:g};this.snapVertex(m,a),r.cell.setVertexAt(a,m,{ui:!0,toolId:this.cid}),t.updatePosition(m.x,m.y),this.options.stopPropagation||r.notifyMouseMove(f,h,g)}onHandleChanged({e:t}){const e=this.options,r=this.cellView;if(e.addable&&this.updatePath(),!e.removeRedundancies)return;r.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),r.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(t).vertexAdded&&r.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:f,x:h,y:g}=this.getMouseEventArgs(t);this.options.stopPropagation||r.notifyMouseUp(f,h,g),r.checkMouseleave(f),e.onChanged&&e.onChanged({edge:r.cell,edgeView:r})}snapVertex(t,e){const r=this.options.snapRadius||0;if(r>0){const a=this.getNeighborPoints(e),f=a.prev,h=a.next;Math.abs(t.x-f.x)<r?t.x=f.x:Math.abs(t.x-h.x)<r&&(t.x=h.x),Math.abs(t.y-f.y)<r?t.y=a.prev.y:Math.abs(t.y-h.y)<r&&(t.y=h.y)}}onHandleRemove({handle:t,e}){if(this.options.removable){const r=t.options.index,a=this.cellView;a.cell.removeVertexAt(r,{ui:!0}),this.options.addable&&this.updatePath(),a.checkMouseleave(this.normalizeEvent(e))}}onPathMouseDown(t){const e=this.cellView;if(this.guard(t)||!this.options.addable||!e.can("vertexAddable"))return;t.stopPropagation(),t.preventDefault();const r=this.normalizeEvent(t),a=this.graph.snapToGrid(r.clientX,r.clientY).toJSON();e.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const f=e.getVertexIndex(a.x,a.y);this.snapVertex(a,f),e.cell.insertVertex(a,f,{ui:!0,toolId:this.cid}),this.render();const h=this.handles[f];this.eventData(r,{vertexAdded:!0}),h.onMouseDown(r)}onRemove(){this.resetHandles()}}(function(u){class t extends Ki{get graph(){return this.options.graph}constructor(r){super(),this.options=r,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=Ki.createElement("circle",!0);const r=this.options.attrs;if(typeof r=="function"){const a=u.getDefaults();this.setAttrs(Object.assign(Object.assign({},a.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(r,a){this.setAttrs({cx:r,cy:a})}onMouseDown(r){this.options.guard(r)||(r.stopPropagation(),r.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data),this.emit("change",{e:r,handle:this}))}onMouseMove(r){this.emit("changing",{e:r,handle:this})}onMouseUp(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(r){this.emit("remove",{e:r,handle:this})}}u.Handle=t})(gf||(gf={})),function(u){const t=Yo.prefix("edge-tool-vertex-path");u.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:e=>new u.Handle(e),markup:[{tagName:"path",selector:"connection",className:t,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${t}`]:"onPathMouseDown",[`touchstart .${t}`]:"onPathMouseDown"}})}(gf||(gf={}));class Ld extends Io.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){tr(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const t=this.cellView,e=[...this.vertices];e.unshift(t.sourcePoint),e.push(t.targetPoint);for(let r=0,a=e.length;r<a-1;r+=1){const f=e[r],h=e[r+1],g=this.renderHandle(f,h,r);this.stamp(g.container),this.handles.push(g)}return this}renderHandle(t,e,r){const a=this.options.createHandle({index:r,graph:this.graph,guard:f=>this.guard(f),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(a),this.updateHandle(a,t,e),this.container.appendChild(a.container),this.startHandleListening(a),a}startHandleListening(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)}stopHandleListening(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}shiftHandleIndexes(t){const e=this.handles;for(let r=0,a=e.length;r<a;r+=1)e[r].options.index+=t}resetAnchor(t,e){const r=this.cellView.cell,a={ui:!0,toolId:this.cid};e?r.prop([t,"anchor"],e,a):r.removeProp([t,"anchor"],a)}snapHandle(t,e,r){const a=t.options.axis,f=t.options.index,m=this.cellView.cell.getVertices(),b=m[f-2]||r.sourceAnchor,w=m[f+1]||r.targetAnchor,S=this.options.snapRadius;return Math.abs(e[a]-b[a])<S?e[a]=b[a]:Math.abs(e[a]-w[a])<S&&(e[a]=w[a]),e}onHandleChanging({handle:t,e}){const r=this.graph,a=this.options,f=this.cellView,h=a.anchor,g=t.options.axis,m=t.options.index-1,b=this.getEventData(e),w=this.normalizeEvent(e),S=r.snapToGrid(w.clientX,w.clientY),C=this.snapHandle(t,S.clone(),b),A=vi.Z(this.vertices);let B=A[m],j=A[m+1];const H=f.sourceView,nt=f.sourceBBox;let ct=!1,Y=!1;if(B?m===0?nt.containsPoint(B)?(A.shift(),this.shiftHandleIndexes(-1),ct=!0):(B[g]=C[g],Y=!0):B[g]=C[g]:(B=f.sourceAnchor.toJSON(),B[g]=C[g],nt.containsPoint(B)?ct=!0:(A.unshift(B),this.shiftHandleIndexes(1),Y=!0)),typeof h=="function"&&H){if(ct){const xn=b.sourceAnchor.clone();xn[g]=C[g];const En=bn(h,f,xn,H,f.sourceMagnet||H.container,"source",f,this);this.resetAnchor("source",En)}Y&&this.resetAnchor("source",b.sourceAnchorDef)}const Pt=f.targetView,Xt=f.targetBBox;let pe=!1,qe=!1;if(j?m===A.length-2?Xt.containsPoint(j)?(A.pop(),pe=!0):(j[g]=C[g],qe=!0):j[g]=C[g]:(j=f.targetAnchor.toJSON(),j[g]=C[g],Xt.containsPoint(j)?pe=!0:(A.push(j),qe=!0)),typeof h=="function"&&Pt){if(pe){const xn=b.targetAnchor.clone();xn[g]=C[g];const En=bn(h,f,xn,Pt,f.targetMagnet||Pt.container,"target",f,this);this.resetAnchor("target",En)}qe&&this.resetAnchor("target",b.targetAnchorDef)}St.equalPoints(A,this.vertices)||this.cellView.cell.setVertices(A,{ui:!0,toolId:this.cid}),this.updateHandle(t,B,j,0),a.stopPropagation||f.notifyMouseMove(w,S.x,S.y)}onHandleChange({handle:t,e}){const r=this.options,a=this.handles,f=this.cellView,h=t.options.index;if(Array.isArray(a)){for(let g=0,m=a.length;g<m;g+=1)g!==h&&a[g].hide();if(this.focus(),this.setEventData(e,{sourceAnchor:f.sourceAnchor.clone(),targetAnchor:f.targetAnchor.clone(),sourceAnchorDef:vi.Z(this.cell.prop(["source","anchor"])),targetAnchorDef:vi.Z(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!r.stopPropagation){const g=this.normalizeEvent(e),m=this.graph.snapToGrid(g.clientX,g.clientY);f.notifyMouseDown(g,m.x,m.y)}}}onHandleChanged({e:t}){const e=this.options,r=this.cellView;e.removeRedundancies&&r.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const a=this.normalizeEvent(t),f=this.graph.snapToGrid(a.clientX,a.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),e.stopPropagation||r.notifyMouseUp(a,f.x,f.y),r.checkMouseleave(a),e.onChanged&&e.onChanged({edge:r.cell,edgeView:r})}updateHandle(t,e,r,a=0){const f=this.options.precision||0,h=Math.abs(e.x-r.x)<f,g=Math.abs(e.y-r.y)<f;if(h||g){const m=new kn(e,r);if(m.length()<this.options.threshold)t.hide();else{const w=m.getCenter(),S=h?"x":"y";w[S]+=a||0;const C=m.vector().vectorAngle(new St(1,0));t.updatePosition(w.x,w.y,C,this.cellView),t.show(),t.options.axis=S}}else t.hide()}onRemove(){this.resetHandles()}}(function(u){class t extends Ki{constructor(r){super(),this.options=r,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Ki.createElement("rect",!0);const r=this.options.attrs;if(typeof r=="function"){const a=u.getDefaults();this.setAttrs(Object.assign(Object.assign({},a.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(r,a,f,h){const g=h.getClosestPoint(new St(r,a))||new St(r,a);let m=Ti().translate(g.x,g.y);if(g.equals({x:r,y:a}))m=m.rotate(f);else{let w=new kn(r,a,g.x,g.y).vector().vectorAngle(new St(1,0));w!==0&&(w+=90),m=m.rotate(w)}this.setAttrs({transform:af(m),cursor:f%180===0?"row-resize":"col-resize"})}onMouseDown(r){this.options.guard(r)||(this.trigger("change",{e:r,handle:this}),r.stopPropagation(),r.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data))}onMouseMove(r){this.emit("changing",{e:r,handle:this})}onMouseUp(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}u.Handle=t})(Ld||(Ld={})),function(u){u.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:t=>new u.Handle(t),anchor:Wm})}(Ld||(Ld={}));class Ug extends Io.ToolItem{get type(){return this.options.type}onRender(){tr(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const t=this.type;return this.cellView.getTerminalView(t)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const t=this.childNodes;if(!t)return;const e=t.anchor;if(!e)return;const r=this.type,a=this.cellView,f=this.options,h=a.getTerminalAnchor(r),g=a.cell.prop([r,"anchor"]);e.setAttribute("transform",`translate(${h.x}, ${h.y})`);const m=g?f.customAnchorAttrs:f.defaultAnchorAttrs;m&&Object.keys(m).forEach(b=>{e.setAttribute(b,m[b])})}updateArea(){const t=this.childNodes;if(!t)return;const e=t.area;if(!e)return;const r=this.type,a=this.cellView,f=a.getTerminalView(r);if(f){const h=f.cell,g=a.getTerminalMagnet(r);let m=this.options.areaPadding||0;Number.isFinite(m)||(m=0);let b,w,S;f.isEdgeElement(g)?(b=f.getBBox(),w=0,S=b.getCenter()):(b=f.getUnrotatedBBoxOfElement(g),w=h.getAngle(),S=b.getCenter(),w&&S.rotate(-w,h.getBBox().getCenter())),b.inflate(m),Ye(e,{x:-b.width/2,y:-b.height/2,width:b.width,height:b.height,transform:`translate(${S.x}, ${S.y}) rotate(${w})`})}}toggleArea(t){if(this.childNodes){const e=this.childNodes.area;e&&(e.style.display=t?"":"none")}}onMouseDown(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(t){const e=this.type,r=this.cell;t?r.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):r.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(t){const e=this.type,r=this.cellView,a=r.getTerminalView(e);if(a==null)return;const f=this.normalizeEvent(t),h=a.cell,g=r.getTerminalMagnet(e);let m=this.graph.coord.clientToLocalPoint(f.clientX,f.clientY);const b=this.options.snap;if(typeof b=="function"){const C=bn(b,r,m,a,g,e,r,this);m=St.create(C)}if(this.options.restrictArea)if(a.isEdgeElement(g)){const C=a.getClosestPoint(m);C&&(m=C)}else{const C=a.getUnrotatedBBoxOfElement(g),A=h.getAngle(),B=h.getBBox().getCenter(),j=m.clone().rotate(A,B);C.containsPoint(j)||(m=C.getNearestPointToPoint(j).rotate(-A,B))}let w;const S=this.options.anchor;typeof S=="function"&&(w=bn(S,r,m,a,g,e,r,this)),this.resetAnchor(w),this.update()}onMouseUp(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const e=this.cellView;this.options.removeRedundancies&&e.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const t=this.options.resetAnchor;t&&this.resetAnchor(t===!0?void 0:t),this.update()}}(function(u){u.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:Wm,snap(t,e,r,a,f,h){const g=h.options.snapRadius||0,m=a==="source",b=m?0:-1,w=this.cell.getVertexAt(b)||this.getTerminalAnchor(m?"target":"source");return w&&(Math.abs(w.x-t.x)<g&&(t.x=w.x),Math.abs(w.y-t.y)<g&&(t.y=w.y)),t}})})(Ug||(Ug={}));const Km=Ug.define({name:"source-anchor",type:"source"}),sb=Ug.define({name:"target-anchor",type:"target"});var Vg=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class kd extends Io.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const t=this.options.attrs,{class:e}=t,r=Vg(t,["class"]);this.setAttrs(r,this.container),e&&tr(this.container,e)}}onRender(){tr(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const t=this.ratio,e=this.cellView,r=e.getTangentAtRatio(t),a=r?r.start:e.getPointAtRatio(t),f=r&&r.vector().vectorAngle(new St(1,0))||0;if(!a)return this;const h=Ti().translate(a.x,a.y).rotate(f);return cf(this.container,h,{absolute:!0}),this}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.cellView;if(e.can("arrowheadMovable")){e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const r=this.graph.snapToGrid(t.clientX,t.clientY),a=e.prepareArrowheadDragging(this.type,{x:r.x,y:r.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(t,a),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(t){const e=this.normalizeEvent(t),r=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,r.x,r.y),this.update()}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),r=this.cellView,a=this.graph.snapToGrid(e.clientX,e.clientY);r.onMouseUp(e,a.x,a.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",r.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(u){u.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(kd||(kd={}));const qm=kd.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Jm=kd.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class pf extends Io.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5,this.dblClick=this.onCellDblClick.bind(this)}onRender(){const t=this.cellView;t&&t.on("cell:dblclick",this.dblClick)}createElement(){const t=[this.prefixClassName(`${this.cell.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=Io.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:t,editor:e}=this;if(!e)return;const{style:r}=e;t.isNode()?this.updateNodeEditorTransform():t.isEdge()&&this.updateEdgeEditorTransform();const{attrs:a}=this.options;r.fontSize=`${a.fontSize}px`,r.fontFamily=a.fontFamily,r.color=a.color,r.backgroundColor=a.backgroundColor;const f=this.getCellText()||"";return e.innerText=f,this.setCellText(""),this}updateNodeEditorTransform(){const{graph:t,cell:e,editor:r}=this;if(!r)return;let a=St.create(),f=20,h="",{x:g,y:m}=this.options;if(typeof g!="undefined"&&typeof m!="undefined"){const S=e.getBBox();g=ie(g,S.width),m=ie(m,S.height),a=S.topLeft.translate(g,m),f=S.width-g*2}else{const S=e.getBBox();a=S.center,f=S.width-4,h="translate(-50%, -50%)"}const b=t.scale(),{style:w}=r;a=t.localToGraph(a),w.left=`${a.x}px`,w.top=`${a.y}px`,w.transform=`scale(${b.sx}, ${b.sy}) ${h}`,w.minWidth=`${f}px`}updateEdgeEditorTransform(){if(!this.event)return;const{graph:t,editor:e}=this;if(!e)return;let r=St.create(),a=20;const{style:f}=e,h=this.event.target,g=h.parentElement;if(g&&di(g,this.prefixClassName("edge-label"))){const w=g.getAttribute("data-index")||"0";this.labelIndex=parseInt(w,10);const S=g.getAttribute("transform"),{translation:C}=fh(S);r=new St(C.tx,C.ty),a=pi.getBBox(h).width}else{if(!this.options.labelAddable)return this;r=t.clientToLocal(St.create(this.event.clientX,this.event.clientY));const S=this.cellView.path.closestPointLength(r);this.distance=S,this.labelIndex=-1}r=t.localToGraph(r);const b=t.scale();f.left=`${r.x}px`,f.top=`${r.y}px`,f.minWidth=`${a}px`,f.transform=`scale(${b.sx}, ${b.sy}) translate(-50%, -50%)`}onDocumentMouseDown(t){if(this.editor&&t.target!==this.editor){const e=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(e!==""?e:null),this.removeElement()}}onCellDblClick({e:t}){t.stopPropagation(),this.removeElement(),this.event=t,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents)}onMouseDown(t){t.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.editor),e.removeAllRanges(),e.addRange(t)}}getCellText(){const{getText:t}=this.options;if(typeof t=="function")return bn(t,this.cellView,{cell:this.cell,index:this.labelIndex});if(typeof t=="string"){if(this.cell.isNode())return this.cell.attr(t);if(this.cell.isEdge()&&this.labelIndex!==-1)return this.cell.prop(`labels/${this.labelIndex}/attrs/${t}`)}}setCellText(t){const e=this.options.setText;if(typeof e=="function"){bn(e,this.cellView,{cell:this.cell,value:t,index:this.labelIndex,distance:this.distance});return}if(typeof e=="string"){if(this.cell.isNode()){t!==null&&this.cell.attr(e,t);return}if(this.cell.isEdge()){const r=this.cell;if(this.labelIndex===-1){if(t){const a={position:{distance:this.distance},attrs:{}};Us(a,`attrs/${e}`,t),r.appendLabel(a)}}else t!==null?r.prop(`labels/${this.labelIndex}/attrs/${e}`,t):typeof this.labelIndex=="number"&&r.removeLabelAt(this.labelIndex)}}}onRemove(){const t=this.cellView;t&&t.off("cell:dblclick",this.dblClick),this.removeElement()}}(function(u){u.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(pf||(pf={})),function(u){u.NodeEditor=u.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),u.EdgeEditor=u.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})}(pf||(pf={}));var Zg=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e},vf;(function(u){u.presets={boundary:Dd,button:gl,"button-remove":gl.Remove,"node-editor":pf.NodeEditor},u.registry=So.create({type:"node tool",process(t,e){if(typeof e=="function")return e;let r=Io.ToolItem;const{inherit:a}=e,f=Zg(e,["inherit"]);if(a){const h=this.get(a);h==null?this.onNotFound(a,"inherited"):r=h}return f.name==null&&(f.name=t),r.define.call(r,f)}}),u.registry.register(u.presets,!0)})(vf||(vf={}));var Sh;(function(u){u.presets={boundary:Dd,vertices:gf,segments:Ld,button:gl,"button-remove":gl.Remove,"source-anchor":Km,"target-anchor":sb,"source-arrowhead":qm,"target-arrowhead":Jm,"edge-editor":pf.EdgeEditor},u.registry=So.create({type:"edge tool",process(t,e){if(typeof e=="function")return e;let r=Io.ToolItem;const{inherit:a}=e,f=Zg(e,["inherit"]);if(a){const h=this.get(a);h==null?this.onNotFound(a,"inherited"):r=h}return f.name==null&&(f.name=t),r.define.call(r,f)}}),u.registry.register(u.presets,!0)})(Sh||(Sh={}));const ab=Nc("center"),Qm=Nc("topCenter"),t0=Nc("bottomCenter"),e0=Nc("leftMiddle"),cb=Nc("rightMiddle"),ub=Nc("topLeft"),lb=Nc("topRight"),fb=Nc("bottomLeft"),hb=Nc("bottomRight");function Nc(u){return function(t,e,r,a={}){const f=a.rotate?t.getUnrotatedBBoxOfElement(e):t.getBBoxOfElement(e),h=f[u];h.x+=ie(a.dx,f.width),h.y+=ie(a.dy,f.height);const g=t.cell;return a.rotate?h.rotate(-g.getAngle(),g.getBBox().getCenter()):h}}function $g(u){return function(t,e,r,a){if(r instanceof Element){const f=this.graph.findViewByElem(r);let h;if(f)if(f.isEdgeElement(r)){const g=a.fixedAt!=null?a.fixedAt:"50%";h=mv(f,g)}else h=f.getBBoxOfElement(r).getCenter();else h=new St;return u.call(this,t,e,h,a)}return u.apply(this,arguments)}}function mv(u,t){const e=He(t),r=typeof t=="string"?parseFloat(t):t;return e?u.getPointAtRatio(r/100):u.getPointAtLength(r)}const Hg=$g(function(u,t,e,r){const a=u.cell.getAngle(),f=u.getBBoxOfElement(t),h=f.getCenter(),g=f.getTopLeft(),m=f.getBottomRight();let b=r.padding;if(Number.isFinite(b)||(b=0),g.y+b<=e.y&&e.y<=m.y-b){const w=e.y-h.y;h.x+=a===0||a===180?0:w*1/Math.tan(Ni.toRad(a)),h.y+=w}else if(g.x+b<=e.x&&e.x<=m.x-b){const w=e.x-h.x;h.y+=a===90||a===270?0:w*Math.tan(Ni.toRad(a)),h.x+=w}return h}),db=function(u,t,e,r,a){const f=u.cell.getConnectionPoint(this.cell,a);return(r.dx||r.dy)&&f.translate(r.dx||0,r.dy||0),f},gb=$g(function(u,t,e,r){let a,f=0,h;const g=u.cell;r.rotate?(a=u.getUnrotatedBBoxOfElement(t),h=g.getBBox().getCenter(),f=g.getAngle()):a=u.getBBoxOfElement(t);const m=r.padding;m!=null&&Number.isFinite(m)&&a.inflate(m),r.rotate&&e.rotate(f,h);const b=a.getNearestSideToPoint(e);let w;switch(b){case"left":w=a.getLeftMiddle();break;case"right":w=a.getRightMiddle();break;case"top":w=a.getTopCenter();break;case"bottom":w=a.getBottomCenter();break;default:break}const S=r.direction;return S==="H"?(b==="top"||b==="bottom")&&(e.x<=a.x+a.width?w=a.getLeftMiddle():w=a.getRightMiddle()):S==="V"&&(e.y<=a.y+a.height?w=a.getTopCenter():w=a.getBottomCenter()),r.rotate?w.rotate(-f,h):w});var Ko;(function(u){u.presets=Ut,u.registry=So.create({type:"node endpoint"}),u.registry.register(u.presets,!0)})(Ko||(Ko={}));const pb=function(u,t,e,r){let a=r.ratio!=null?r.ratio:.5;return a>1&&(a/=100),u.getPointAtRatio(a)},vb=function(u,t,e,r){const a=r.length!=null?r.length:20;return u.getPointAtLength(a)},bv=function(u,t,e,r){const a=u.getClosestPoint(e);return a!=null?a:new St},Wg=$g(bv),yb=$g(function(u,t,e,r){const f=u.getConnection(),h=u.getConnectionSubdivisions(),g=new kn(e.clone().translate(0,1e6),e.clone().translate(0,-1e6)),m=new kn(e.clone().translate(1e6,0),e.clone().translate(-1e6,0)),b=g.intersect(f,{segmentSubdivisions:h}),w=m.intersect(f,{segmentSubdivisions:h}),S=[];return b&&S.push(...b),w&&S.push(...w),S.length>0?e.closest(S):r.fallbackAt!=null?mv(u,r.fallbackAt):bn(bv,this,u,t,e,r)});var mf;(function(u){u.presets=ut,u.registry=So.create({type:"edge endpoint"}),u.registry.register(u.presets,!0)})(mf||(mf={}));function Xg(u,t,e){let r;if(typeof e=="object"){if(Number.isFinite(e.y)){const f=new kn(t,u),{start:h,end:g}=f.parallel(e.y);t=h,u=g}r=e.x}else r=e;if(r==null||!Number.isFinite(r))return u;const a=u.distance(t);return r===0&&a>0?u:u.move(t,-Math.min(r,a-1))}function Yg(u){const t=u.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function n0(u){if(u==null)return null;let t=u;do{let e=t.tagName;if(typeof e!="string")return null;if(e=e.toUpperCase(),e==="G")t=t.firstElementChild;else if(e==="TITLE")t=t.nextElementSibling;else break}while(t);return t}const r0=function(u,t,e,r){const a=t.getBBoxOfElement(e);r.stroked&&a.inflate(Yg(e)/2);const f=u.intersect(a),h=f&&f.length?u.start.closest(f):u.end;return Xg(h,u.start,r.offset)},fc=function(u,t,e,r,a){const f=t.cell,h=f.isNode()?f.getAngle():0;if(h===0)return bn(r0,this,u,t,e,r,a);const g=t.getUnrotatedBBoxOfElement(e);r.stroked&&g.inflate(Yg(e)/2);const m=g.getCenter(),b=u.clone().rotate(h,m),w=b.setLength(1e6).intersect(g),S=w&&w.length?b.start.closest(w).rotate(-h,m):u.end;return Xg(S,u.start,r.offset)},hc=function(u,t,e,r){let a,f;const h=u.end,g=r.selector;if(typeof g=="string"?a=t.findOne(g):Array.isArray(g)?a=Gu(e,g):a=n0(e),!xr(a)){if(a===e||!xr(e))return h;a=e}const m=t.getShapeOfElement(a),b=t.getMatrixOfElement(a),w=t.getRootTranslatedMatrix(),S=t.getRootRotatedMatrix(),C=w.multiply(S).multiply(b),A=C.inverse(),B=pi.transformLine(u,A),j=B.start.clone(),H=t.getDataOfElement(a);if(r.insideout===!1){H.shapeBBox==null&&(H.shapeBBox=m.bbox());const Pt=H.shapeBBox;if(Pt!=null&&Pt.containsPoint(j))return h}r.extrapolate===!0&&B.setLength(1e6);let nt;if(Kn.isPath(m)){const Pt=r.precision||2;H.segmentSubdivisions==null&&(H.segmentSubdivisions=m.getSegmentSubdivisions({precision:Pt})),nt={precision:Pt,segmentSubdivisions:H.segmentSubdivisions},f=B.intersect(m,nt)}else f=B.intersect(m);f?Array.isArray(f)&&(f=j.closest(f)):r.sticky===!0&&(pn.isRectangle(m)?f=m.getNearestPointToPoint(j):uc.isEllipse(m)?f=m.intersectsWithLineFromCenterToPoint(j):f=m.closestPoint(j,nt));const ct=f?pi.transformPoint(f,C):h;let Y=r.offset||0;return r.stroked!==!1&&(typeof Y=="object"?(Y=Object.assign({},Y),Y.x==null&&(Y.x=0),Y.x+=Yg(a)/2):Y+=Yg(a)/2),Xg(ct,u.start,Y)};function _h(u,t,e=0){const{start:r,end:a}=u;let f,h,g,m;switch(t){case"left":m="x",f=a,h=r,g=-1;break;case"right":m="x",f=r,h=a,g=1;break;case"top":m="y",f=a,h=r,g=-1;break;case"bottom":m="y",f=r,h=a,g=1;break;default:return}r[m]<a[m]?f[m]=h[m]:h[m]=f[m],Number.isFinite(e)&&(f[m]+=g*e,h[m]+=g*e)}const Ch=function(u,t,e,r){const{alignOffset:a,align:f}=r;return f&&_h(u,f,a),Xg(u.end,u.start,r.offset)};var Th;(function(u){u.presets=Bt,u.registry=So.create({type:"connection point"}),u.registry.register(u.presets,!0)})(Th||(Th={}));const bb=function(u){return[...u]},i0=function(u,t,e){const r=t.side||"bottom",a=Ee(t.padding||40),f=e.sourceBBox,h=e.targetBBox,g=f.getCenter(),m=h.getCenter();let b,w,S;switch(r){case"top":S=-1,b="y",w="height";break;case"left":S=-1,b="x",w="width";break;case"right":S=1,b="x",w="width";break;case"bottom":default:S=1,b="y",w="height";break}return g[b]+=S*(f[w]/2+a[r]),m[b]+=S*(h[w]/2+a[r]),S*(g[b]-m[b])>0?m[b]=g[b]:g[b]=m[b],[g.toJSON(),...u,m.toJSON()]};function yf(u){return new pn(u.x,u.y,0,0)}function bf(u={}){const t=Ee(u.padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function xf(u,t={}){return u.sourceBBox.clone().moveAndExpand(bf(t))}function o0(u,t={}){return u.targetBBox.clone().moveAndExpand(bf(t))}function xb(u,t={}){return u.sourceAnchor?u.sourceAnchor:xf(u,t).getCenter()}function Eb(u,t={}){return u.targetAnchor?u.targetAnchor:o0(u,t).getCenter()}const s0=function(u,t,e){let r=xf(e,t),a=o0(e,t);const f=xb(e,t),h=Eb(e,t);r=r.union(yf(f)),a=a.union(yf(h));const g=u.map(w=>St.create(w));g.unshift(f),g.push(h);let m=null;const b=[];for(let w=0,S=g.length-1;w<S;w+=1){let C=null;const A=g[w],B=g[w+1],j=ka.getBearing(A,B)!=null;if(w===0)w+1===S?r.intersectsWithRect(a.clone().inflate(1))?C=ka.insideNode(A,B,r,a):j||(C=ka.nodeToNode(A,B,r,a)):r.containsPoint(B)?C=ka.insideNode(A,B,r,yf(B).moveAndExpand(bf(t))):j||(C=ka.nodeToVertex(A,B,r));else if(w+1===S){const H=j&&ka.getBearing(B,A)===m;a.containsPoint(A)||H?C=ka.insideNode(A,B,yf(A).moveAndExpand(bf(t)),a,m):j||(C=ka.vertexToNode(A,B,a,m))}else j||(C=ka.vertexToVertex(A,B,m));C?(b.push(...C.points),m=C.direction):m=ka.getBearing(A,B),w+1<S&&b.push(B)}return b};var ka;(function(u){const t={N:"S",S:"N",E:"W",W:"E"},e={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function r(S,C,A){let B=new St(S.x,C.y);return A.containsPoint(B)&&(B=new St(C.x,S.y)),B}function a(S,C){return S[C==="W"||C==="E"?"width":"height"]}u.getBBoxSize=a;function f(S,C){return S.x===C.x?S.y>C.y?"N":"S":S.y===C.y?S.x>C.x?"W":"E":null}u.getBearing=f;function h(S,C,A){const B=new St(S.x,C.y),j=new St(C.x,S.y),H=f(S,B),nt=f(S,j),ct=A?t[A]:null,Y=H===A||H!==ct&&(nt===ct||nt!==A)?B:j;return{points:[Y],direction:f(Y,C)}}u.vertexToVertex=h;function g(S,C,A){const B=r(S,C,A);return{points:[B],direction:f(B,C)}}u.nodeToVertex=g;function m(S,C,A,B){const j=[new St(S.x,C.y),new St(C.x,S.y)],H=j.filter(Y=>!A.containsPoint(Y)),nt=H.filter(Y=>f(Y,S)!==B);let ct;if(nt.length>0)return ct=nt.filter(Y=>f(S,Y)===B).pop(),ct=ct||nt[0],{points:[ct],direction:f(ct,C)};{ct=hp(j,H)[0];const Y=St.create(C).move(ct,-a(A,B)/2);return{points:[r(Y,S,A),Y],direction:f(Y,C)}}}u.vertexToNode=m;function b(S,C,A,B){let j=g(C,S,B);const H=j.points[0];if(A.containsPoint(H)){j=g(S,C,A);const nt=j.points[0];if(B.containsPoint(nt)){const ct=St.create(S).move(nt,-a(A,f(S,nt))/2),Y=St.create(C).move(H,-a(B,f(C,H))/2),Pt=new kn(ct,Y).getCenter(),Xt=g(S,Pt,A),pe=h(Pt,C,Xt.direction);j.points=[Xt.points[0],pe.points[0]],j.direction=pe.direction}}return j}u.nodeToNode=b;function w(S,C,A,B,j){const H=A.union(B).inflate(1),nt=H.getCenter(),ct=nt.distance(C)>nt.distance(S),Y=ct?C:S,Pt=ct?S:C;let Xt,pe,qe;j?(Xt=St.fromPolar(H.width+H.height,e[j],Y),Xt=H.getNearestPointToPoint(Xt).move(Xt,-1)):Xt=H.getNearestPointToPoint(Y).move(Y,1),pe=r(Xt,Pt,H);let xn;Xt.round().equals(pe.round())?(pe=St.fromPolar(H.width+H.height,Ni.toRad(Xt.theta(Y))+Math.PI/2,Pt),pe=H.getNearestPointToPoint(pe).move(Pt,1).round(),qe=r(Xt,pe,H),xn=ct?[pe,qe,Xt]:[Xt,qe,pe]):xn=ct?[pe,Xt]:[Xt,pe];const En=f(ct?Xt:pe,C);return{points:xn,direction:En}}u.insideNode=w})(ka||(ka={}));const wb={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return pl(this.step,this)},directions(){const u=pl(this.step,this),t=pl(this.cost,this);return[{cost:t,offsetX:u,offsetY:0},{cost:t,offsetX:-u,offsetY:0},{cost:t,offsetX:0,offsetY:u},{cost:t,offsetX:0,offsetY:-u}]},penalties(){const u=pl(this.step,this);return{0:0,45:u/2,90:u/2}},paddingBox(){const u=pl(this.step,this);return{x:-u,y:-u,width:2*u,height:2*u}},fallbackRouter:s0,draggingRouter:null,snapToGrid:!0};function pl(u,t){return typeof u=="function"?u.call(t):u}function Sb(u){const t=Object.keys(u).reduce((e,r)=>{const a=e;return r==="fallbackRouter"||r==="draggingRouter"||r==="fallbackRoute"?a[r]=u[r]:a[r]=pl(u[r],u),e},{});if(t.padding){const e=Ee(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}return t.directions.forEach(e=>{const r=new St(0,0),a=new St(e.offsetX,e.offsetY);e.angle=Ni.normalize(r.theta(a))}),t}const a0=1,c0=2;class _b{constructor(){this.items=[],this.hash={},this.values={}}add(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=a0,this.values[t]=e;const r=re(this.items,t,a=>this.values[a]);this.items.splice(r,0,t)}pop(){const t=this.items.shift();return t&&(this.hash[t]=c0),t}isOpen(t){return this.hash[t]===a0}isClose(t){return this.hash[t]===c0}isEmpty(){return this.items.length===0}}class Cb{constructor(t){this.options=t,this.mapGridSize=100,this.map={}}build(t,e){const r=this.options,a=r.excludeTerminals.reduce((b,w)=>{const S=e[w];if(S){const C=t.getCell(S.cell);C&&b.push(C)}return b},[]);let f=[];const h=t.getCell(e.getSourceCellId());h&&(f=Gi(f,h.getAncestors().map(b=>b.id)));const g=t.getCell(e.getTargetCellId());g&&(f=Gi(f,g.getAncestors().map(b=>b.id)));const m=this.mapGridSize;return t.getNodes().reduce((b,w)=>{const S=a.some(H=>H.id===w.id),C=w.shape?r.excludeShapes.includes(w.shape):!1,A=r.excludeNodes.some(H=>typeof H=="string"?w.id===H:H===w),B=f.includes(w.id);if(!(C||S||A||B)){const H=w.getBBox().moveAndExpand(r.paddingBox),nt=H.getOrigin().snapToGrid(m),ct=H.getCorner().snapToGrid(m);for(let Y=nt.x;Y<=ct.x;Y+=m)for(let Pt=nt.y;Pt<=ct.y;Pt+=m){const Xt=new St(Y,Pt).toString();b[Xt]==null&&(b[Xt]=[]),b[Xt].push(H)}}return b},this.map),this}isAccessible(t){const e=t.clone().snapToGrid(this.mapGridSize).toString(),r=this.map[e];return r?r.every(a=>!a.containsPoint(t)):!0}}function u0(u,t){const e=u.sourceBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function l0(u,t){const e=u.targetBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function f0(u,t){return u.sourceAnchor?u.sourceAnchor:u0(u,t).getCenter()}function Tb(u,t){return u.targetAnchor?u.targetAnchor:l0(u,t).getCenter()}function xv(u,t,e,r,a){const f=360/e,h=u.theta(Ab(u,t,r,a)),g=Ni.normalize(h+f/2);return f*Math.floor(g/f)}function Ab(u,t,e,r){const a=r.step,f=t.x-u.x,h=t.y-u.y,g=f/e.x,m=h/e.y,b=g*a,w=m*a;return new St(u.x+b,u.y+w)}function Po(u,t){const e=Math.abs(u-t);return e>180?360-e:e}function h0(u,t){const e=t.step;return t.directions.forEach(r=>{r.gridOffsetX=r.offsetX/e*u.x,r.gridOffsetY=r.offsetY/e*u.y}),t.directions}function Ob(u,t,e){return{source:t.clone(),x:pr(e.x-t.x,u),y:pr(e.y-t.y,u)}}function pr(u,t){if(!u)return t;const e=Math.abs(u),r=Math.round(e/t);if(!r)return e;const a=r*t,h=(e-a)/r;return t+h}function Mb(u,t){const e=t.source,r=Ai.snapToGrid(u.x-e.x,t.x)+e.x,a=Ai.snapToGrid(u.y-e.y,t.y)+e.y;return new St(r,a)}function Rc(u,t){return u.round(t)}function Fd(u,t,e){return Rc(Mb(u.clone(),t),e)}function Bd(u){return u.toString()}function Ev(u){return new St(u.x===0?0:Math.abs(u.x)/u.x,u.y===0?0:Math.abs(u.y)/u.y)}function d0(u,t){let e=1/0;for(let r=0,a=t.length;r<a;r+=1){const f=u.manhattanDistance(t[r]);f<e&&(e=f)}return e}function g0(u,t,e,r,a){const f=a.precision,h=a.directionMap,g=u.diff(t.getCenter()),m=Object.keys(h).reduce((b,w)=>{if(e.includes(w)){const S=h[w],C=new St(u.x+S.x*(Math.abs(g.x)+t.width),u.y+S.y*(Math.abs(g.y)+t.height)),B=new kn(u,C).intersect(t)||[];let j,H=null;for(let nt=0;nt<B.length;nt+=1){const ct=B[nt],Y=u.squaredDistance(ct);(j==null||Y>j)&&(j=Y,H=ct)}if(H){let nt=Fd(H,r,f);t.containsPoint(nt)&&(nt=Fd(nt.translate(S.x*r.x,S.y*r.y),r,f)),b.push(nt)}}return b},[]);return t.containsPoint(u)||m.push(Fd(u,r,f)),m}function Ib(u,t,e,r,a){const f=[];let h=Ev(a.diff(e)),g=Bd(e),m=u[g],b;for(;m;){b=t[g];const C=Ev(b.diff(m));C.equals(h)||(f.unshift(b),h=C),g=Bd(m),m=u[g]}const w=t[g];return Ev(w.diff(r)).equals(h)||f.unshift(w),f}function p0(u,t,e,r,a){const f=a.precision;let h,g;pn.isRectangle(t)?h=Rc(f0(u,a).clone(),f):h=Rc(t.clone(),f),pn.isRectangle(e)?g=Rc(Tb(u,a).clone(),f):g=Rc(e.clone(),f);const m=Ob(a.step,h,g),b=h,w=g;let S,C;if(pn.isRectangle(t)?S=g0(b,t,a.startDirections,m,a):S=[b],pn.isRectangle(e)?C=g0(g,e,a.endDirections,m,a):C=[w],S=S.filter(A=>r.isAccessible(A)),C=C.filter(A=>r.isAccessible(A)),S.length>0&&C.length>0){const A=new _b,B={},j={},H={};for(let jn=0,wn=S.length;jn<wn;jn+=1){const Un=S[jn],Di=Bd(Un);A.add(Di,d0(Un,C)),B[Di]=Un,H[Di]=0}const nt=a.previousDirectionAngle,ct=nt===void 0;let Y,Pt;const Xt=h0(m,a),pe=Xt.length,qe=C.reduce((jn,wn)=>{const Un=Bd(wn);return jn.push(Un),jn},[]),xn=St.equalPoints(S,C);let En=a.maxLoopCount;for(;!A.isEmpty()&&En>0;){const jn=A.pop(),wn=B[jn],Un=j[jn],Di=H[jn],Ur=wn.equals(b),be=Un==null;let tn;if(be?ct?Ur?tn=null:tn=xv(b,wn,pe,m,a):tn=nt:tn=xv(Un,wn,pe,m,a),!(be&&xn)&&qe.indexOf(jn)>=0)return a.previousDirectionAngle=tn,Ib(j,B,wn,b,w);for(let qi=0;qi<pe;qi+=1){Y=Xt[qi];const Ji=Y.angle;if(Pt=Po(tn,Ji),!(ct&&Ur)&&Pt>a.maxDirectionChange)continue;const Go=Fd(wn.clone().translate(Y.gridOffsetX||0,Y.gridOffsetY||0),m,f),Ws=Bd(Go);if(A.isClose(Ws)||!r.isAccessible(Go))continue;if(qe.indexOf(Ws)>=0&&!Go.equals(w)){const s=xv(Go,w,pe,m,a);if(Po(Ji,s)>a.maxDirectionChange)continue}const Pv=Y.cost,n=Ur?0:a.penalties[Pt],i=Di+Pv+n;(!A.isOpen(Ws)||i<H[Ws])&&(B[Ws]=Go,j[Ws]=wn,H[Ws]=i,A.add(Ws,i+d0(Go,C)))}En-=1}}return a.fallbackRoute?bn(a.fallbackRoute,this,b,w,a):null}function Pb(u,t=10){if(u.length<=1)return u;for(let e=0,r=u.length;e<r-1;e+=1){const a=u[e],f=u[e+1];if(a.x===f.x){const h=t*Math.round(a.x/t);a.x!==h&&(a.x=h,f.x=h)}else if(a.y===f.y){const h=t*Math.round(a.y/t);a.y!==h&&(a.y=h,f.y=h)}}return u}const v0=function(u,t,e){const r=Sb(t),a=u0(e,r),f=l0(e,r),h=f0(e,r),g=new Cb(r).build(e.graph.model,e.cell),m=u.map(A=>St.create(A)),b=[];let w=h,S,C;for(let A=0,B=m.length;A<=B;A+=1){let j=null;if(S=C||a,C=m[A],C==null){C=f;const nt=e.cell;if((nt.getSourceCellId()==null||nt.getTargetCellId()==null)&&typeof r.draggingRouter=="function"){const Y=S===a?h:S,Pt=C.getOrigin();j=bn(r.draggingRouter,e,Y,Pt,r)}}if(j==null&&(j=p0(e,S,C,g,r)),j===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),bn(r.fallbackRouter,this,u,r,e);const H=j[0];H&&H.equals(w)&&j.shift(),w=j[j.length-1]||w,b.push(...j)}return r.snapToGrid?Pb(b,e.graph.grid.getGridSize()):b},wv=function(u,t,e){return bn(v0,this,u,Object.assign(Object.assign({},wb),t),e)},Nb={maxDirectionChange:45,directions(){const u=pl(this.step,this),t=pl(this.cost,this),e=Math.ceil(Math.sqrt(u*u<<1));return[{cost:t,offsetX:u,offsetY:0},{cost:e,offsetX:u,offsetY:u},{cost:t,offsetX:0,offsetY:u},{cost:e,offsetX:-u,offsetY:u},{cost:t,offsetX:-u,offsetY:0},{cost:e,offsetX:-u,offsetY:-u},{cost:t,offsetX:0,offsetY:-u},{cost:e,offsetX:u,offsetY:-u}]},fallbackRoute(u,t,e){const r=u.theta(t),a=[];let f={x:t.x,y:u.y},h={x:u.x,y:t.y};if(r%180>90){const Y=f;f=h,h=Y}const g=r%90<45?f:h,m=new kn(u,g),b=90*Math.ceil(r/90),w=St.fromPolar(m.squaredLength(),Ni.toRad(b+135),g),S=new kn(t,w),C=m.intersectsWithLine(S),A=C||t,B=C?A:u,j=360/e.directions.length,H=B.theta(t),nt=Ni.normalize(H+j/2),ct=j*Math.floor(nt/j);return e.previousDirectionAngle=ct,A&&a.push(A.round()),a.push(t),a}},Rb=function(u,t,e){return bn(wv,this,u,Object.assign(Object.assign({},Nb),t),e)},vl=function(u,t,e){const r=t.offset||32,a=t.min==null?16:t.min;let f=0,h=t.direction;const g=e.sourceBBox,m=e.targetBBox,b=g.getCenter(),w=m.getCenter();if(typeof r=="number"&&(f=r),h==null){let nt=m.left-g.right,ct=m.top-g.bottom;nt>=0&&ct>=0?h=nt>=ct?"L":"T":nt<=0&&ct>=0?(nt=g.left-m.right,nt>=0?h=nt>=ct?"R":"T":h="T"):nt>=0&&ct<=0?(ct=g.top-m.bottom,ct>=0?h=nt>=ct?"L":"B":h="L"):(nt=g.left-m.right,ct=g.top-m.bottom,nt>=0&&ct>=0?h=nt>=ct?"R":"B":nt<=0&&ct>=0?h="B":nt>=0&&ct<=0?h="R":h=Math.abs(nt)>Math.abs(ct)?"R":"B")}h==="H"?h=w.x-b.x>=0?"L":"R":h==="V"&&(h=w.y-b.y>=0?"T":"B"),r==="center"&&(h==="L"?f=(m.left-g.right)/2:h==="R"?f=(g.left-m.right)/2:h==="T"?f=(m.top-g.bottom)/2:h==="B"&&(f=(g.top-m.bottom)/2));let S,C,A;const B=h==="L"||h==="R";if(B){if(w.y===b.y)return[...u];A=h==="L"?1:-1,S="x",C="width"}else{if(w.x===b.x)return[...u];A=h==="T"?1:-1,S="y",C="height"}const j=b.clone(),H=w.clone();if(j[S]+=A*(g[C]/2+f),H[S]-=A*(m[C]/2+f),B){const nt=j.x,ct=H.x,Y=g.width/2+a,Pt=m.width/2+a;w.x>b.x?ct<=nt&&(j.x=Math.max(ct,b.x+Y),H.x=Math.min(nt,w.x-Pt)):ct>=nt&&(j.x=Math.min(ct,b.x-Y),H.x=Math.max(nt,w.x+Pt))}else{const nt=j.y,ct=H.y,Y=g.height/2+a,Pt=m.height/2+a;w.y>b.y?ct<=nt&&(j.y=Math.max(ct,b.y+Y),H.y=Math.min(nt,w.y-Pt)):ct>=nt&&(j.y=Math.min(ct,b.y-Y),H.y=Math.max(nt,w.y+Pt))}return[j.toJSON(),...u,H.toJSON()]};function en(u,t){if(t!=null&&t!==!1){const e=typeof t=="boolean"?0:t;if(e>0){const r=St.create(u[1]).move(u[2],e),a=St.create(u[1]).move(u[0],e);return[r.toJSON(),...u,a.toJSON()]}{const r=u[1];return[Object.assign({},r),...u,Object.assign({},r)]}}return u}const dc=function(u,t,e){const r=t.width||50,f=(t.height||80)/2,h=t.angle||"auto",g=e.sourceAnchor,m=e.targetAnchor,b=e.sourceBBox,w=e.targetBBox;if(g.equals(m)){const S=nt=>{const ct=Ni.toRad(nt),Y=Math.sin(ct),Pt=Math.cos(ct),Xt=new St(g.x+Pt*r,g.y+Y*r),pe=new St(Xt.x-Pt*f,Xt.y-Y*f),qe=pe.clone().rotate(-90,Xt),xn=pe.clone().rotate(90,Xt);return[qe.toJSON(),Xt.toJSON(),xn.toJSON()]},C=nt=>{const ct=g.clone().move(nt,-1),Y=new kn(ct,nt);return!b.containsPoint(nt)&&!b.intersectsWithLine(Y)},A=[0,90,180,270,45,135,225,315];if(typeof h=="number")return en(S(h),t.merge);const B=b.getCenter();if(B.equals(g))return en(S(0),t.merge);const j=B.angleBetween(g,B.clone().translate(1,0));let H=S(j);if(C(H[1]))return en(H,t.merge);for(let nt=1,ct=A.length;nt<ct;nt+=1)if(H=S(j+A[nt]),C(H[1]))return en(H,t.merge);return en(H,t.merge)}{const S=new kn(g,m);let C=S.parallel(-r),A=C.getCenter(),B=C.start.clone().move(C.end,f),j=C.end.clone().move(C.start,f);const H=S.parallel(-1),nt=new kn(H.start,A),ct=new kn(H.end,A);if((b.containsPoint(A)||w.containsPoint(A)||b.intersectsWithLine(nt)||b.intersectsWithLine(ct)||w.intersectsWithLine(nt)||w.intersectsWithLine(ct))&&(C=S.parallel(r),A=C.getCenter(),B=C.start.clone().move(C.end,f),j=C.end.clone().move(C.start,f)),t.merge){const Y=new kn(g,m),Pt=new kn(A,Y.center).setLength(Number.MAX_SAFE_INTEGER),Xt=b.intersectsWithLine(Pt),pe=w.intersectsWithLine(Pt),qe=Xt?Array.isArray(Xt)?Xt:[Xt]:[];pe&&(Array.isArray(pe)?qe.push(...pe):qe.push(pe));const xn=Y.center.closest(qe);xn?(e.sourceAnchor=xn.clone(),e.targetAnchor=xn.clone()):(e.sourceAnchor=Y.center.clone(),e.targetAnchor=Y.center.clone())}return en([B.toJSON(),A.toJSON(),j.toJSON()],t.merge)}};var qo;(function(u){u.presets=Gt,u.registry=So.create({type:"router"}),u.registry.register(u.presets,!0)})(qo||(qo={}));const Db=function(u,t,e,r={}){const a=[u,...e,t],f=new Zi(a),h=new Kn(f);return r.raw?h:h.serialize()},Kg=function(u,t,e,r={}){const a=e.length===3?0:1,f=St.create(e[0+a]),h=St.create(e[2+a]),g=St.create(e[1+a]);if(!St.equals(u,t)){const b=new St((u.x+t.x)/2,(u.y+t.y)/2),w=b.angleBetween(St.create(u).rotate(90,b),g);w>1&&(f.rotate(180-w,b),h.rotate(180-w,b),g.rotate(180-w,b))}const m=`
     M ${u.x} ${u.y}
     Q ${f.x} ${f.y} ${g.x} ${g.y}
     Q ${h.x} ${h.y} ${t.x} ${t.y}
  `;return r.raw?Kn.parse(m):m},Lb=function(u,t,e,r={}){const a=new Kn;a.appendSegment(Kn.createSegment("M",u));const f=1/3,h=2/3,g=r.radius||10;let m,b;for(let w=0,S=e.length;w<S;w+=1){const C=St.create(e[w]),A=e[w-1]||u,B=e[w+1]||t;m=b||C.distance(A)/2,b=C.distance(B)/2;const j=-Math.min(g,m),H=-Math.min(g,b),nt=C.clone().move(A,j).round(),ct=C.clone().move(B,H).round(),Y=new St(f*nt.x+h*C.x,h*C.y+f*nt.y),Pt=new St(f*ct.x+h*C.x,h*C.y+f*ct.y);a.appendSegment(Kn.createSegment("L",nt)),a.appendSegment(Kn.createSegment("C",Y,Pt,ct))}return a.appendSegment(Kn.createSegment("L",t)),r.raw?a:a.serialize()},kb=function(u,t,e,r={}){let a,f=r.direction;if(e&&e.length!==0){const h=[u,...e,t],g=go.throughPoints(h);a=new Kn(g)}else if(a=new Kn,a.appendSegment(Kn.createSegment("M",u)),f||(f=Math.abs(u.x-t.x)>=Math.abs(u.y-t.y)?"H":"V"),f==="H"){const h=(u.x+t.x)/2;a.appendSegment(Kn.createSegment("C",h,u.y,h,t.y,t.x,t.y))}else{const h=(u.y+t.y)/2;a.appendSegment(Kn.createSegment("C",u.x,h,t.x,h,t.x,t.y))}return r.raw?a:a.serialize()},m0=1,qg=1/3,Jg=2/3;function Rs(u){let t=u.graph._jumpOverUpdateList;if(t==null&&(t=u.graph._jumpOverUpdateList=[],u.graph.on("cell:mouseup",()=>{const e=u.graph._jumpOverUpdateList;setTimeout(()=>{for(let r=0;r<e.length;r+=1)e[r].update()})}),u.graph.on("model:reseted",()=>{t=u.graph._jumpOverUpdateList=[]})),t.indexOf(u)<0){t.push(u);const e=()=>t.splice(t.indexOf(u),1);u.cell.once("change:connector",e),u.cell.once("removed",e)}}function y0(u,t,e=[]){const r=[u,...e,t],a=[];return r.forEach((f,h)=>{const g=r[h+1];g!=null&&a.push(new kn(f,g))}),a}function Fb(u,t){const e=[];return t.forEach(r=>{const a=u.intersectsWithLine(r);a&&e.push(a)}),e}function Sv(u,t){return new kn(u,t).squaredLength()}function ax(u,t,e){return t.reduce((r,a,f)=>{if(_v.includes(a))return r;const h=r.pop()||u,g=St.create(a).move(h.start,-e);let m=St.create(a).move(h.start,+e);const b=t[f+1];if(b!=null){const C=m.distance(b);C<=e&&(m=b.move(h.start,C),_v.push(b))}else if(g.distance(h.end)<e*2+m0)return r.push(h),r;if(m.distance(h.start)<e*2+m0)return r.push(h),r;const S=new kn(g,m);return Gd.push(S),r.push(new kn(h.start,g),S,new kn(m,h.end)),r},[])}function Bb(u,t,e,r){const a=new Kn;let f;return f=Kn.createSegment("M",u[0].start),a.appendSegment(f),u.forEach((h,g)=>{if(Gd.includes(h)){let m,b,w,S;if(e==="arc"){m=-90,b=h.start.diff(h.end),(b.x<0||b.x===0&&b.y<0)&&(m+=180);const A=h.getCenter(),B=new kn(A,h.end).rotate(m,A);let j;j=new kn(h.start,A),w=j.pointAt(2/3).rotate(m,h.start),S=B.pointAt(1/3).rotate(-m,B.end),f=Kn.createSegment("C",w,S,B.end),a.appendSegment(f),j=new kn(A,h.end),w=B.pointAt(1/3).rotate(m,B.end),S=j.pointAt(1/3).rotate(-m,h.end),f=Kn.createSegment("C",w,S,h.end),a.appendSegment(f)}else if(e==="gap")f=Kn.createSegment("M",h.end),a.appendSegment(f);else if(e==="cubic"){m=h.start.theta(h.end);const C=t*.6;let A=t*1.35;b=h.start.diff(h.end),(b.x<0||b.x===0&&b.y<0)&&(A*=-1),w=new St(h.start.x+C,h.start.y+A).rotate(m,h.start),S=new St(h.end.x-C,h.end.y+A).rotate(m,h.end),f=Kn.createSegment("C",w,S,h.end),a.appendSegment(f)}}else{const m=u[g+1];r===0||!m||Gd.includes(m)?(f=Kn.createSegment("L",h.end),a.appendSegment(f)):De(r,a,h.end,h.start,m.end)}}),a}function De(u,t,e,r,a){const f=e.distance(r)/2,h=e.distance(a)/2,g=-Math.min(u,f),m=-Math.min(u,h),b=e.clone().move(r,g).round(),w=e.clone().move(a,m).round(),S=new St(qg*b.x+Jg*e.x,Jg*e.y+qg*b.y),C=new St(qg*w.x+Jg*e.x,Jg*e.y+qg*w.y);let A;A=Kn.createSegment("L",b),t.appendSegment(A),A=Kn.createSegment("C",S,C,w),t.appendSegment(A)}let Gd,_v;const zd=function(u,t,e,r={}){Gd=[],_v=[],Rs(this);const a=r.size||5,f=r.type||"arc",h=r.radius||0,g=r.ignoreConnectors||["smooth"],m=this.graph,w=m.model.getEdges();if(w.length===1)return Bb(y0(u,t,e),a,f,h);const S=this.cell,C=w.indexOf(S),A=m.options.connecting.connector||{},B=w.filter((Pt,Xt)=>{const pe=Pt.getConnector()||A;return g.includes(pe.name)?!1:Xt>C?pe.name!=="jumpover":!0}),j=B.map(Pt=>m.findViewByCell(Pt)),H=y0(u,t,e),nt=j.map(Pt=>Pt==null?[]:Pt===this?H:y0(Pt.sourcePoint,Pt.targetPoint,Pt.routePoints)),ct=[];H.forEach(Pt=>{const Xt=B.reduce((pe,qe,xn)=>{if(qe!==S){const En=Fb(Pt,nt[xn]);pe.push(...En)}return pe},[]).sort((pe,qe)=>Sv(Pt.start,pe)-Sv(Pt.start,qe));Xt.length>0?ct.push(...ax(Pt,Xt,a)):ct.push(Pt)});const Y=Bb(ct,a,f,h);return Gd=[],_v=[],r.raw?Y:Y.serialize()};var ml;(function(u){u.presets=fe,u.registry=So.create({type:"connector"}),u.registry.register(u.presets,!0)})(ml||(ml={}));var Ah=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class Oh extends cs{constructor(t={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(vi.Z(t)),this.changed={}}mutate(t,e={}){const r=e.unset===!0,a=e.silent===!0,f=[],h=this.changing;this.changing=!0,h||(this.previous=vi.Z(this.data),this.changed={});const g=this.data,m=this.previous,b=this.changed;if(Object.keys(t).forEach(w=>{const S=w,C=t[S];wi(g[S],C)||f.push(S),wi(m[S],C)?delete b[S]:b[S]=C,r?delete g[S]:g[S]=C}),!a&&f.length>0&&(this.pending=!0,this.pendingOptions=e,f.forEach(w=>{this.emit("change:*",{key:w,options:e,store:this,current:g[w],previous:m[w]})})),h)return this;if(!a)for(;this.pending;)this.pending=!1,this.emit("changed",{current:g,previous:m,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(t,e){if(t==null)return this.data;const r=this.data[t];return r==null?e:r}getPrevious(t){if(this.previous){const e=this.previous[t];return e==null?void 0:e}}set(t,e,r){return t!=null&&(typeof t=="object"?this.mutate(t,e):this.mutate({[t]:e},r)),this}remove(t,e){const a={};let f;if(typeof t=="string")a[t]=void 0,f=e;else if(Array.isArray(t))t.forEach(h=>a[h]=void 0),f=e;else{for(const h in this.data)a[h]=void 0;f=t}return this.mutate(a,Object.assign(Object.assign({},f),{unset:!0})),this}getByPath(t){return Gu(this.data,t,"/")}setByPath(t,e,r={}){const a="/",f=Array.isArray(t)?[...t]:t.split(a),h=Array.isArray(t)?t.join(a):t,g=f[0],m=f.length;if(r.propertyPath=h,r.propertyValue=e,r.propertyPathArray=f,m===1)this.set(g,e,r);else{const b={};let w=b,S=g;for(let B=1;B<m;B+=1){const j=f[B],H=Number.isFinite(Number(j));w=w[S]=H?[]:{},S=j}Us(b,f,e,a);const C=vi.Z(this.data);r.rewrite&&Al(C,t,a);const A=xi(C,b);this.set(g,A[g],r)}return this}removeByPath(t,e){const r=Array.isArray(t)?t:t.split("/"),a=r[0];if(r.length===1)this.remove(a,e);else{const f=r.slice(1),h=vi.Z(this.get(a));h&&Al(h,f),this.set(a,h,e)}return this}hasChanged(t){return t==null?Object.keys(this.changed).length>0:t in this.changed}getChanges(t){if(t==null)return this.hasChanged()?vi.Z(this.changed):null;const e=this.changing?this.previous:this.data,r={};let a;for(const f in t){const h=t[f];wi(e[f],h)||(r[f]=h,a=!0)}return a?vi.Z(r):null}toJSON(){return vi.Z(this.data)}clone(){const t=this.constructor;return new t(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}Ah([cs.dispose()],Oh.prototype,"dispose",null);class jd{constructor(t){this.cell=t,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(t,e,r={},a="/"){const f=this.cell.getPropByPath(t),h=xl(r,jd.defaultOptions),g=this.getTiming(h.timing),m=this.getInterp(h.interp,f,e);let b=0;const w=Array.isArray(t)?t.join(a):t,S=Array.isArray(t)?t:t.split(a),C=()=>{const A=new Date().getTime();b===0&&(b=A);let j=(A-b)/h.duration;j<1?this.ids[w]=requestAnimationFrame(C):j=1;const H=m(g(j));this.cell.setPropByPath(S,H),r.progress&&r.progress(Object.assign({progress:j,currentValue:H},this.getArgs(w))),j===1&&(this.cell.notify("transition:complete",this.getArgs(w)),r.complete&&r.complete(this.getArgs(w)),this.cell.notify("transition:finish",this.getArgs(w)),r.finish&&r.finish(this.getArgs(w)),this.clean(w))};return setTimeout(()=>{this.stop(t,void 0,a),this.cache[w]={startValue:f,targetValue:e,options:h},this.ids[w]=requestAnimationFrame(C),this.cell.notify("transition:start",this.getArgs(w)),r.start&&r.start(this.getArgs(w))},r.delay),this.stop.bind(this,t,a,r)}stop(t,e={},r="/"){const a=Array.isArray(t)?t:t.split(r);return Object.keys(this.ids).filter(f=>wi(a,f.split(r).slice(0,a.length))).forEach(f=>{cancelAnimationFrame(this.ids[f]);const h=this.cache[f],g=this.getArgs(f),m=Object.assign(Object.assign({},h.options),e),b=m.jumpedToEnd;b&&h.targetValue!=null&&(this.cell.setPropByPath(f,h.targetValue),this.cell.notify("transition:end",Object.assign({},g)),this.cell.notify("transition:complete",Object.assign({},g)),m.complete&&m.complete(Object.assign({},g)));const w=Object.assign({jumpedToEnd:b},g);this.cell.notify("transition:stop",Object.assign({},w)),m.stop&&m.stop(Object.assign({},w)),this.cell.notify("transition:finish",Object.assign({},g)),m.finish&&m.finish(Object.assign({},g)),this.clean(f)}),this}clean(t){delete this.ids[t],delete this.cache[t]}getTiming(t){return typeof t=="string"?ul[t]:t}getInterp(t,e,r){return t?t(e,r):typeof r=="number"?lf.number(e,r):typeof r=="string"?r[0]==="#"?lf.color(e,r):lf.unit(e,r):lf.object(e,r)}getArgs(t){const e=this.cache[t];return{path:t,startValue:e.startValue,targetValue:e.targetValue,cell:this.cell}}}(function(u){u.defaultOptions={delay:10,duration:100,timing:"linear"}})(jd||(jd={}));var Gb=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f},Cv=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class jr extends cs{static config(t){const{markup:e,propHooks:r,attrHooks:a}=t,f=Cv(t,["markup","propHooks","attrHooks"]);e!=null&&(this.markup=e),r&&(this.propHooks=this.propHooks.slice(),Array.isArray(r)?this.propHooks.push(...r):typeof r=="function"?this.propHooks.push(r):Object.values(r).forEach(h=>{typeof h=="function"&&this.propHooks.push(h)})),a&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),a)),this.defaults=xi({},this.defaults,f)}static getMarkup(){return this.markup}static getDefaults(t){return t?this.defaults:vi.Z(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(t,e){return this.propHooks.reduce((r,a)=>a?bn(a,t,r):r,e)}get[Symbol.toStringTag](){return jr.toStringTag}constructor(t={}){super();const r=this.constructor.getDefaults(!0),a=xi({},this.preprocess(r),this.preprocess(t));this.id=a.id||Kt(),this.store=new Oh(a),this.animation=new jd(this),this.setup(),this.init(),this.postprocess(t)}init(){}get model(){return this._model}set model(t){this._model!==t&&(this._model=t)}preprocess(t,e){const r=t.id,f=this.constructor.applyPropHooks(this,t);return r==null&&e!==!0&&(f.id=Kt()),f}postprocess(t){}setup(){this.store.on("change:*",t=>{const{key:e,current:r,previous:a,options:f}=t;this.notify("change:*",{key:e,options:f,current:r,previous:a,cell:this}),this.notify(`change:${e}`,{options:f,current:r,previous:a,cell:this});const h=e;(h==="source"||h==="target")&&this.notify("change:terminal",{type:h,current:r,previous:a,options:f,cell:this})}),this.store.on("changed",({options:t})=>this.notify("changed",{options:t,cell:this}))}notify(t,e){this.trigger(t,e);const r=this.model;return r&&(r.notify(`cell:${t}`,e),this.isNode()?r.notify(`node:${t}`,Object.assign(Object.assign({},e),{node:this})):this.isEdge()&&r.notify(`edge:${t}`,Object.assign(Object.assign({},e),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(t){return this.store===t.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(t,e){return t==null?this.store.get():this.store.get(t,e)}setProp(t,e,r){if(typeof t=="string")this.store.set(t,e,r);else{const a=this.preprocess(t,!0);this.store.set(xi({},this.getProp(),a),e),this.postprocess(t)}return this}removeProp(t,e){return typeof t=="string"||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this}hasChanged(t){return t==null?this.store.hasChanged():this.store.hasChanged(t)}getPropByPath(t){return this.store.getByPath(t)}setPropByPath(t,e,r={}){return this.model&&(t==="children"?this._children=e?e.map(a=>this.model.getCell(a)).filter(a=>a!=null):null:t==="parent"&&(this._parent=e?this.model.getCell(e):null)),this.store.setByPath(t,e,r),this}removePropByPath(t,e={}){const r=Array.isArray(t)?t:t.split("/");return r[0]==="attrs"&&(e.dirty=!0),this.store.removeByPath(r,e),this}prop(t,e,r){return t==null?this.getProp():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getPropByPath(t):e==null?this.removePropByPath(t,r||{}):this.setPropByPath(t,e,r||{}):this.setProp(t,e||{})}previous(t){return this.store.getPrevious(t)}get zIndex(){return this.getZIndex()}set zIndex(t){t==null?this.removeZIndex():this.setZIndex(t)}getZIndex(){return this.store.get("zIndex")}setZIndex(t,e={}){return this.store.set("zIndex",t,e),this}removeZIndex(t={}){return this.store.remove("zIndex",t),this}toFront(t={}){const e=this.model;if(e){let r=e.getMaxZIndex(),a;t.deep?(a=this.getDescendants({deep:!0,breadthFirst:!0}),a.unshift(this)):a=[this],r=r-a.length+1;const f=e.total();let h=e.indexOf(this)!==f-a.length;h||(h=a.some((g,m)=>g.getZIndex()!==r+m)),h&&this.batchUpdate("to-front",()=>{r+=a.length,a.forEach((g,m)=>{g.setZIndex(r+m,t)})})}return this}toBack(t={}){const e=this.model;if(e){let r=e.getMinZIndex(),a;t.deep?(a=this.getDescendants({deep:!0,breadthFirst:!0}),a.unshift(this)):a=[this];let f=e.indexOf(this)!==0;f||(f=a.some((h,g)=>h.getZIndex()!==r+g)),f&&this.batchUpdate("to-back",()=>{r-=a.length,a.forEach((h,g)=>{h.setZIndex(r+g,t)})})}return this}get markup(){return this.getMarkup()}set markup(t){t==null?this.removeMarkup():this.setMarkup(t)}getMarkup(){let t=this.store.get("markup");return t==null&&(t=this.constructor.getMarkup()),t}setMarkup(t,e={}){return this.store.set("markup",t,e),this}removeMarkup(t={}){return this.store.remove("markup",t),this}get attrs(){return this.getAttrs()}set attrs(t){t==null?this.removeAttrs():this.setAttrs(t)}getAttrs(){const t=this.store.get("attrs");return t?Object.assign({},t):{}}setAttrs(t,e={}){if(t==null)this.removeAttrs(e);else{const r=a=>this.store.set("attrs",a,e);if(e.overwrite===!0)r(t);else{const a=this.getAttrs();e.deep===!1?r(Object.assign(Object.assign({},a),t)):r(xi({},a,t))}}return this}replaceAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{deep:!1}))}removeAttrs(t={}){return this.store.remove("attrs",t),this}getAttrDefinition(t){if(!t)return null;const r=this.constructor.getAttrHooks()||{};let a=r[t]||Ic.registry.get(t);if(!a){const f=tf(t);a=r[f]||Ic.registry.get(f)}return a||null}getAttrByPath(t){return t==null||t===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}setAttrByPath(t,e,r={}){return this.setPropByPath(this.prefixAttrPath(t),e,r),this}removeAttrByPath(t,e={}){return this.removePropByPath(this.prefixAttrPath(t),e),this}prefixAttrPath(t){return Array.isArray(t)?["attrs"].concat(t):`attrs/${t}`}attr(t,e,r){return t==null?this.getAttrByPath():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getAttrByPath(t):e==null?this.removeAttrByPath(t,r||{}):this.setAttrByPath(t,e,r||{}):this.setAttrs(t,e||{})}get visible(){return this.isVisible()}set visible(t){this.setVisible(t)}setVisible(t,e={}){return this.store.set("visible",t,e),this}isVisible(){return this.store.get("visible")!==!1}show(t={}){return this.isVisible()||this.setVisible(!0,t),this}hide(t={}){return this.isVisible()&&this.setVisible(!1,t),this}toggleVisible(t,e={}){const r=typeof t=="boolean"?t:!this.isVisible(),a=typeof t=="boolean"?e:t;return r?this.show(a):this.hide(a),this}get data(){return this.getData()}set data(t){this.setData(t)}getData(){return this.store.get("data")}setData(t,e={}){if(t==null)this.removeData(e);else{const r=a=>this.store.set("data",a,e);if(e.overwrite===!0)r(t);else{const a=this.getData();e.deep===!1?r(typeof t=="object"?Object.assign(Object.assign({},a),t):t):r(xi({},a,t))}}return this}replaceData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{deep:!1}))}removeData(t={}){return this.store.remove("data",t),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const t=this.getParentId();if(t&&this.model){const e=this.model.getCell(t);return this._parent=e,e}return null}getChildren(){const t=this.store.get("children");if(t&&t.length&&this.model){const e=t.map(r=>{var a;return(a=this.model)===null||a===void 0?void 0:a.getCell(r)}).filter(r=>r!=null);return this._children=e,[...e]}return null}hasParent(){return this.parent!=null}isParentOf(t){return t!=null&&t.getParent()===this}isChildOf(t){return t!=null&&this.getParent()===t}eachChild(t,e){return this.children&&this.children.forEach(t,e),this}filterChild(t,e){return this.children?this.children.filter(t,e):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(t){return this.children==null?-1:this.children.indexOf(t)}getChildAt(t){return this.children!=null&&t>=0?this.children[t]:null}getAncestors(t={}){const e=[];let r=this.getParent();for(;r;)e.push(r),r=t.deep!==!1?r.getParent():null;return e}getDescendants(t={}){if(t.deep!==!1){if(t.breadthFirst){const e=[],r=this.getChildren()||[];for(;r.length>0;){const a=r.shift(),f=a.getChildren();e.push(a),f&&r.push(...f)}return e}{const e=this.getChildren()||[];return e.forEach(r=>{e.push(...r.getDescendants(t))}),e}}return this.getChildren()||[]}isDescendantOf(t,e={}){if(t==null)return!1;if(e.deep!==!1){let r=this.getParent();for(;r;){if(r===t)return!0;r=r.getParent()}return!1}return this.isChildOf(t)}isAncestorOf(t,e={}){return t==null?!1:t.isDescendantOf(this,e)}contains(t){return this.isAncestorOf(t)}getCommonAncestor(...t){return jr.getCommonAncestor(this,...t)}setParent(t,e={}){return this._parent=t,t?this.store.set("parent",t.id,e):this.store.remove("parent",e),this}setChildren(t,e={}){return this._children=t,t!=null?this.store.set("children",t.map(r=>r.id),e):this.store.remove("children",e),this}unembed(t,e={}){const r=this.children;if(r!=null&&t!=null){const a=this.getChildIndex(t);a!==-1&&(r.splice(a,1),t.setParent(null,e),this.setChildren(r,e))}return this}embed(t,e={}){return t.addTo(this,e),this}addTo(t,e={}){return jr.isCell(t)?t.addChild(this,e):t.addCell(this,e),this}insertTo(t,e,r={}){return t.insertChild(this,e,r),this}addChild(t,e={}){return this.insertChild(t,void 0,e)}insertChild(t,e,r={}){if(t!=null&&t!==this){const a=t.getParent(),f=this!==a;let h=e;if(h==null&&(h=this.getChildCount(),f||(h-=1)),a){const m=a.getChildren();if(m){const b=m.indexOf(t);b>=0&&(t.setParent(null,r),m.splice(b,1),a.setChildren(m,r))}}let g=this.children;if(g==null?(g=[],g.push(t)):g.splice(h,0,t),t.setParent(this,r),this.setChildren(g,r),f&&this.model){const m=this.model.getIncomingEdges(this),b=this.model.getOutgoingEdges(this);m&&m.forEach(w=>w.updateParent(r)),b&&b.forEach(w=>w.updateParent(r))}this.model&&this.model.addCell(t,r)}return this}removeFromParent(t={}){const e=this.getParent();if(e!=null){const r=e.getChildIndex(this);e.removeChildAt(r,t)}return this}removeChild(t,e={}){const r=this.getChildIndex(t);return this.removeChildAt(r,e)}removeChildAt(t,e={}){const r=this.getChildAt(t);return this.children!=null&&r!=null&&(this.unembed(r,e),r.remove(e)),r}remove(t={}){return this.batchUpdate("remove",()=>{const e=this.getParent();e&&e.removeChild(this,t),t.deep!==!1&&this.eachChild(r=>r.remove(t)),this.model&&this.model.removeCell(this,t)}),this}transition(t,e,r={},a="/"){return this.animation.start(t,e,r,a)}stopTransition(t,e,r="/"){return this.animation.stop(t,e,r),this}getTransitions(){return this.animation.get()}translate(t,e,r){return this}scale(t,e,r,a){return this}addTools(t,e,r){const a=Array.isArray(t)?t:[t],f=typeof e=="string"?e:null,h=typeof e=="object"?e:typeof r=="object"?r:{};if(h.reset)return this.setTools({name:f,items:a,local:h.local},h);let g=vi.Z(this.getTools());if(g==null||f==null||g.name===f)return g==null&&(g={}),g.items||(g.items=[]),g.name=f,g.items=[...g.items,...a],this.setTools(Object.assign({},g),h)}setTools(t,e={}){return t==null?this.removeTools():this.store.set("tools",jr.normalizeTools(t),e),this}getTools(){return this.store.get("tools")}removeTools(t={}){return this.store.remove("tools",t),this}hasTools(t){const e=this.getTools();return e==null?!1:t==null?!0:e.name===t}hasTool(t){const e=this.getTools();return e==null?!1:e.items.some(r=>typeof r=="string"?r===t:r.name===t)}removeTool(t,e={}){const r=vi.Z(this.getTools());if(r){let a=!1;const f=r.items.slice(),h=g=>{f.splice(g,1),a=!0};if(typeof t=="number")h(t);else for(let g=f.length-1;g>=0;g-=1){const m=f[g];(typeof m=="string"?m===t:m.name===t)&&h(g)}a&&(r.items=f,this.setTools(r,e))}return this}getBBox(t){return new pn}getConnectionPoint(t,e){return new St}toJSON(t={}){const e=Object.assign({},this.store.get()),r=Object.prototype.toString,a=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!e.shape){const B=this.constructor;throw new Error(`Unable to serialize ${a} missing "shape" prop, check the ${a} "${B.name||r.call(B)}"`)}const f=this.constructor,h=t.diff===!0,g=e.attrs||{},m=f.getDefaults(!0),b=h?this.preprocess(m,!0):m,w=b.attrs||{},S={};Object.entries(e).forEach(([B,j])=>{if(j!=null&&!Array.isArray(j)&&typeof j=="object"&&!Ii(j))throw new Error(`Can only serialize ${a} with plain-object props, but got a "${r.call(j)}" type of key "${B}" on ${a} "${this.id}"`);if(B!=="attrs"&&B!=="shape"&&h){const H=b[B];wi(j,H)&&delete e[B]}}),Object.keys(g).forEach(B=>{const j=g[B],H=w[B];Object.keys(j).forEach(nt=>{const ct=j[nt],Y=H?H[nt]:null;ct!=null&&typeof ct=="object"&&!Array.isArray(ct)?Object.keys(ct).forEach(Pt=>{const Xt=ct[Pt];if(H==null||Y==null||!Yn.Z(Y)||!wi(Y[Pt],Xt)){S[B]==null&&(S[B]={}),S[B][nt]==null&&(S[B][nt]={});const pe=S[B][nt];pe[Pt]=Xt}}):(H==null||!wi(Y,ct))&&(S[B]==null&&(S[B]={}),S[B][nt]=ct)})});const C=Object.assign(Object.assign({},e),{attrs:xc(S)?void 0:S});C.attrs==null&&delete C.attrs;const A=C;return A.angle===0&&delete A.angle,vi.Z(A)}clone(t={}){if(!t.deep){const r=Object.assign({},this.store.get());t.keepId||delete r.id,delete r.parent,delete r.children;const a=this.constructor;return new a(r)}return jr.deepClone(this)[this.id]}findView(t){return t.findViewByCell(this)}startBatch(t,e={},r=this.model){return this.notify("batch:start",{name:t,data:e,cell:this}),r&&r.startBatch(t,Object.assign(Object.assign({},e),{cell:this})),this}stopBatch(t,e={},r=this.model){return r&&r.stopBatch(t,Object.assign(Object.assign({},e),{cell:this})),this.notify("batch:stop",{name:t,data:e,cell:this}),this}batchUpdate(t,e,r){const a=this.model;this.startBatch(t,r,a);const f=e();return this.stopBatch(t,r,a),f}dispose(){this.removeFromParent(),this.store.dispose()}}jr.defaults={},jr.attrHooks={},jr.propHooks=[],Gb([cs.dispose()],jr.prototype,"dispose",null),function(u){function t(e){return typeof e=="string"?{items:[e]}:Array.isArray(e)?{items:e}:e.items?e:{items:[e]}}u.normalizeTools=t}(jr||(jr={})),function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag],a=e;return(r==null||r===u.toStringTag)&&typeof a.isNode=="function"&&typeof a.isEdge=="function"&&typeof a.prop=="function"&&typeof a.attr=="function"}u.isCell=t}(jr||(jr={})),function(u){function t(...f){const h=f.filter(m=>m!=null).map(m=>m.getAncestors()).sort((m,b)=>m.length-b.length);return h.shift().find(m=>h.every(b=>b.includes(m)))||null}u.getCommonAncestor=t;function e(f,h={}){let g=null;for(let m=0,b=f.length;m<b;m+=1){const w=f[m];let S=w.getBBox(h);if(S){if(w.isNode()){const C=w.getAngle();C!=null&&C!==0&&(S=S.bbox(C))}g=g==null?S:g.union(S)}}return g}u.getCellsBBox=e;function r(f){const h=[f,...f.getDescendants({deep:!0})];return u.cloneCells(h)}u.deepClone=r;function a(f){const h=If(f),g=h.reduce((m,b)=>(m[b.id]=b.clone(),m),{});return h.forEach(m=>{const b=g[m.id];if(b.isEdge()){const C=b.getSourceCellId(),A=b.getTargetCellId();C&&g[C]&&b.setSource(Object.assign(Object.assign({},b.getSource()),{cell:g[C].id})),A&&g[A]&&b.setTarget(Object.assign(Object.assign({},b.getTarget()),{cell:g[A].id}))}const w=m.getParent();w&&g[w.id]&&b.setParent(g[w.id]);const S=m.getChildren();if(S&&S.length){const C=S.reduce((A,B)=>(g[B.id]&&A.push(g[B.id]),A),[]);C.length>0&&b.setChildren(C)}}),g}u.cloneCells=a}(jr||(jr={})),function(u){u.config({propHooks(t){var{tools:e}=t,r=Cv(t,["tools"]);return e&&(r.tools=u.normalizeTools(e)),r}})}(jr||(jr={}));var Mh;(function(u){let t,e;function r(h,g){return g?t!=null&&t.exist(h):e!=null&&e.exist(h)}u.exist=r;function a(h){t=h}u.setEdgeRegistry=a;function f(h){e=h}u.setNodeRegistry=f})(Mh||(Mh={}));class zb{constructor(t){this.ports=[],this.groups={},this.init(vi.Z(t))}getPorts(){return this.ports}getGroup(t){return t!=null?this.groups[t]:null}getPortsByGroup(t){return this.ports.filter(e=>e.group===t||e.group==null&&t==null)}getPortsLayoutByGroup(t,e){const r=this.getPortsByGroup(t),a=t?this.getGroup(t):null,f=a?a.position:null,h=f?f.name:null;let g;if(h!=null){const S=df.registry.get(h);if(S==null)return df.registry.onNotFound(h);g=S}else g=df.presets.left;const m=r.map(S=>S&&S.position&&S.position.args||{}),b=f&&f.args||{};return g(m,e,b).map((S,C)=>{const A=r[C];return{portLayout:S,portId:A.id,portSize:A.size,portAttrs:A.attrs,labelSize:A.label.size,labelLayout:this.getPortLabelLayout(A,St.create(S.position),e)}})}init(t){const{groups:e,items:r}=t;e!=null&&Object.keys(e).forEach(a=>{this.groups[a]=this.parseGroup(e[a])}),Array.isArray(r)&&r.forEach(a=>{this.ports.push(this.parsePort(a))})}parseGroup(t){return Object.assign(Object.assign({},t),{label:this.getLabel(t,!0),position:this.getPortPosition(t.position,!0)})}parsePort(t){const e=Object.assign({},t),r=this.getGroup(t.group)||{};return e.markup=e.markup||r.markup,e.attrs=xi({},r.attrs,e.attrs),e.position=this.createPosition(r,e),e.label=xi({},r.label,this.getLabel(e)),e.zIndex=this.getZIndex(r,e),e.size=Object.assign(Object.assign({},r.size),e.size),e}getZIndex(t,e){return typeof e.zIndex=="number"?e.zIndex:typeof t.zIndex=="number"||t.zIndex==="auto"?t.zIndex:"auto"}createPosition(t,e){return xi({name:"left",args:{}},t.position,{args:e.args})}getPortPosition(t,e=!1){if(t==null){if(e)return{name:"left",args:{}}}else{if(typeof t=="string")return{name:t,args:{}};if(Array.isArray(t))return{name:"absolute",args:{x:t[0],y:t[1]}};if(typeof t=="object")return t}return{args:{}}}getPortLabelPosition(t,e=!1){if(t==null){if(e)return{name:"left",args:{}}}else{if(typeof t=="string")return{name:t,args:{}};if(typeof t=="object")return t}return{args:{}}}getLabel(t,e=!1){const r=t.label||{};return r.position=this.getPortLabelPosition(r.position,e),r}getPortLabelLayout(t,e,r){const a=t.label.position.name||"left",f=t.label.position.args||{},h=wh.registry.get(a)||wh.presets.left;return h?h(e,r,f):null}}var Qg=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class po extends jr{get[Symbol.toStringTag](){return po.toStringTag}constructor(t={}){super(t),this.initPorts()}preprocess(t,e){const{x:r,y:a,width:f,height:h}=t,g=Qg(t,["x","y","width","height"]);if(r!=null||a!=null){const m=g.position;g.position=Object.assign(Object.assign({},m),{x:r!=null?r:m?m.x:0,y:a!=null?a:m?m.y:0})}if(f!=null||h!=null){const m=g.size;g.size=Object.assign(Object.assign({},m),{width:f!=null?f:m?m.width:0,height:h!=null?h:m?m.height:0})}return super.preprocess(g,e)}isNode(){return!0}size(t,e,r){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,e,r):this.setSize(t,e)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,e,r){return typeof t=="object"?this.resize(t.width,t.height,e):this.resize(t,e,r),this}resize(t,e,r={}){this.startBatch("resize",r);const a=r.direction;if(a){const f=this.getSize();switch(a){case"left":case"right":e=f.height;break;case"top":case"bottom":t=f.width;break;default:break}let g={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[a];const m=Ni.normalize(this.getAngle()||0);r.absolute&&(g+=Math.floor((m+45)/90),g%=4);const b=this.getBBox();let w;g===0?w=b.getBottomLeft():g===1?w=b.getCorner():g===2?w=b.getTopRight():w=b.getOrigin();const S=w.clone().rotate(-m,b.getCenter()),C=Math.sqrt(t*t+e*e)/2;let A=g*Math.PI/2;A+=Math.atan(g%2===0?e/t:t/e),A-=Ni.toRad(m);const j=St.fromPolar(C,A,S).clone().translate(t/-2,e/-2);this.store.set("size",{width:t,height:e},r),this.setPosition(j.x,j.y,r)}else this.store.set("size",{width:t,height:e},r);return this.stopBatch("resize",r),this}scale(t,e,r,a={}){const f=this.getBBox().scale(t,e,r==null?void 0:r);return this.startBatch("scale",a),this.setPosition(f.x,f.y,a),this.resize(f.width,f.height,a),this.stopBatch("scale"),this}position(t,e,r){return typeof t=="number"?this.setPosition(t,e,r):this.getPosition(t)}getPosition(t={}){if(t.relative){const r=this.getParent();if(r!=null&&r.isNode()){const a=this.getPosition(),f=r.getPosition();return{x:a.x-f.x,y:a.y-f.y}}}const e=this.store.get("position");return e?Object.assign({},e):{x:0,y:0}}setPosition(t,e,r={}){let a,f,h;if(typeof t=="object"?(a=t.x,f=t.y,h=e||{}):(a=t,f=e,h=r||{}),h.relative){const g=this.getParent();if(g!=null&&g.isNode()){const m=g.getPosition();a+=m.x,f+=m.y}}if(h.deep){const g=this.getPosition();this.translate(a-g.x,f-g.y,h)}else this.store.set("position",{x:a,y:f},h);return this}translate(t=0,e=0,r={}){if(t===0&&e===0)return this;r.translateBy=r.translateBy||this.id;const a=this.getPosition();if(r.restrict!=null&&r.translateBy===this.id){const h=this.getBBox({deep:!0}),g=r.restrict,m=a.x-h.x,b=a.y-h.y,w=Math.max(g.x+m,Math.min(g.x+g.width+m-h.width,a.x+t)),S=Math.max(g.y+b,Math.min(g.y+g.height+b-h.height,a.y+e));t=w-a.x,e=S-a.y}const f={x:a.x+t,y:a.y+e};return r.tx=t,r.ty=e,r.transition?(typeof r.transition!="object"&&(r.transition={}),this.transition("position",f,Object.assign(Object.assign({},r.transition),{interp:lf.object})),this.eachChild(h=>{var g;((g=r.exclude)===null||g===void 0?void 0:g.includes(h))||h.translate(t,e,r)})):(this.startBatch("translate",r),this.store.set("position",f,r),this.eachChild(h=>{var g;((g=r.exclude)===null||g===void 0?void 0:g.includes(h))||h.translate(t,e,r)}),this.stopBatch("translate",r)),this}angle(t,e){return t==null?this.getAngle():this.rotate(t,e)}getAngle(){return this.store.get("angle",0)}rotate(t,e={}){const r=this.getAngle();if(e.center){const a=this.getSize(),f=this.getPosition(),h=this.getBBox().getCenter();h.rotate(r-t,e.center);const g=h.x-a.width/2-f.x,m=h.y-a.height/2-f.y;this.startBatch("rotate",{angle:t,options:e}),this.setPosition(f.x+g,f.y+m,e),this.rotate(t,Object.assign(Object.assign({},e),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",e.absolute?t:(r+t)%360,e);return this}getBBox(t={}){if(t.deep){const e=this.getDescendants({deep:!0,breadthFirst:!0});return e.push(this),jr.getCellsBBox(e)}return pn.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,e){const r=this.getBBox(),a=r.getCenter(),f=t.getTerminal(e);if(f==null)return a;const h=f.port;if(!h||!this.hasPort(h))return a;const g=this.getPort(h);if(!g||!g.group)return a;const b=this.getPortsPosition(g.group)[h].position,w=St.create(b).translate(r.getOrigin()),S=this.getAngle();return S&&w.rotate(-S,a),w}fit(t={}){const r=(this.getChildren()||[]).filter(b=>b.isNode());if(r.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&r.forEach(b=>b.fit(t));let{x:a,y:f,width:h,height:g}=jr.getCellsBBox(r);const m=Ee(t.padding);return a-=m.left,f-=m.top,h+=m.left+m.right,g+=m.bottom+m.top,this.store.set({position:{x:a,y:f},size:{width:h,height:g}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Ri.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,e={}){return this.store.set("portContainerMarkup",Ri.clone(t),e),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Ri.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,e={}){return this.store.set("portMarkup",Ri.clone(t),e),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Ri.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,e={}){return this.store.set("portLabelMarkup",Ri.clone(t),e),this}get ports(){const t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t}getPorts(){return vi.Z(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(e=>e.group===t)}getPort(t){return vi.Z(this.ports.items.find(e=>e.id&&e.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return this.getPortIndex(t)!==-1}getPortIndex(t){const e=typeof t=="string"?t:t.id;return e!=null?this.ports.items.findIndex(r=>r.id===e):-1}getPortsPosition(t){const e=this.getSize();return this.port.getPortsLayoutByGroup(t,new pn(0,0,e.width,e.height)).reduce((a,f)=>{const h=f.portLayout;return a[f.portId]={position:Object.assign({},h.position),angle:h.angle||0},a},{})}getPortProp(t,e){return this.getPropByPath(this.prefixPortPath(t,e))}setPortProp(t,e,r,a){if(typeof e=="string"||Array.isArray(e)){const g=this.prefixPortPath(t,e),m=r;return this.setPropByPath(g,m,a)}const f=this.prefixPortPath(t),h=e;return this.setPropByPath(f,h,r)}removePortProp(t,e,r){return typeof e=="string"||Array.isArray(e)?this.removePropByPath(this.prefixPortPath(t,e),r):this.removePropByPath(this.prefixPortPath(t),e)}portProp(t,e,r,a){return e==null?this.getPortProp(t):typeof e=="string"||Array.isArray(e)?arguments.length===2?this.getPortProp(t,e):r==null?this.removePortProp(t,e,a):this.setPortProp(t,e,r,a):this.setPortProp(t,e,r)}prefixPortPath(t,e){const r=this.getPortIndex(t);if(r===-1)throw new Error(`Unable to find port with id: "${t}"`);return e==null||e===""?["ports","items",`${r}`]:Array.isArray(e)?["ports","items",`${r}`,...e]:`ports/items/${r}/${e}`}addPort(t,e){const r=[...this.ports.items];return r.push(t),this.setPropByPath("ports/items",r,e),this}addPorts(t,e){return this.setPropByPath("ports/items",[...this.ports.items,...t],e),this}insertPort(t,e,r){const a=[...this.ports.items];return a.splice(t,0,e),this.setPropByPath("ports/items",a,r),this}removePort(t,e={}){return this.removePortAt(this.getPortIndex(t),e)}removePortAt(t,e={}){if(t>=0){const r=[...this.ports.items];r.splice(t,1),e.rewrite=!0,this.setPropByPath("ports/items",r,e)}return this}removePorts(t,e){let r;if(Array.isArray(t)){if(r=e||{},t.length){r.rewrite=!0;const f=[...this.ports.items].filter(h=>!t.some(g=>{const m=typeof g=="string"?g:g.id;return h.id===m}));this.setPropByPath("ports/items",f,r)}}else r=t||{},r.rewrite=!0,this.setPropByPath("ports/items",[],r);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,e){return this.port.getPortsLayoutByGroup(t,e)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const t=this.ports,e={};t.items.forEach(h=>{h.id&&(e[h.id]=!0)});const r={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(h=>{h.id&&!e[h.id]&&(r[h.id]=!0)});const f=this.model;f&&!xc(r)&&(f.getConnectedEdges(this,{incoming:!0}).forEach(m=>{const b=m.getTargetPortId();b&&r[b]&&m.remove()}),f.getConnectedEdges(this,{outgoing:!0}).forEach(m=>{const b=m.getSourcePortId();b&&r[b]&&m.remove()}))}validatePorts(){const t={},e=[];return this.ports.items.forEach(r=>{typeof r!="object"&&e.push(`Invalid port ${r}.`),r.id==null&&(r.id=this.generatePortId()),t[r.id]&&e.push("Duplicitied port id."),t[r.id]=!0}),e}generatePortId(){return Kt()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const e=this.port?this.port.getPorts():null;this.port=new zb(this.ports);const r=this.port.getPorts(),a=e?r.filter(h=>e.find(g=>g.id===h.id)?null:h):[...r],f=e?e.filter(h=>r.find(g=>g.id===h.id)?null:h):[];a.length>0&&this.notify("ports:added",{added:a,cell:this,node:this}),f.length>0&&this.notify("ports:removed",{removed:f,cell:this,node:this})}}po.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag],a=e;return(r==null||r===u.toStringTag)&&typeof a.isNode=="function"&&typeof a.isEdge=="function"&&typeof a.prop=="function"&&typeof a.attr=="function"&&typeof a.size=="function"&&typeof a.position=="function"}u.isNode=t}(po||(po={})),function(u){u.config({propHooks(t){var{ports:e}=t,r=Qg(t,["ports"]);return e&&(r.ports=Array.isArray(e)?{items:e}:e),r}})}(po||(po={})),function(u){u.registry=So.create({type:"node",process(t,e){if(Mh.exist(t,!0))throw new Error(`Node with name '${t}' was registered by anthor Edge`);if(typeof e=="function")return e.config({shape:t}),e;let r=u;const{inherit:a}=e,f=Qg(e,["inherit"]);if(a)if(typeof a=="string"){const g=this.get(a);g==null?this.onNotFound(a,"inherited"):r=g}else r=a;f.constructorName==null&&(f.constructorName=t);const h=r.define.call(r,f);return h.config({shape:t}),h}}),Mh.setNodeRegistry(u.registry)}(po||(po={})),function(u){let t=0;function e(f){return f?cc(f):(t+=1,`CustomNode${t}`)}function r(f){const{constructorName:h,overwrite:g}=f,m=Qg(f,["constructorName","overwrite"]),b=_l(e(h||m.shape),this);return b.config(m),m.shape&&u.registry.register(m.shape,b,g),b}u.define=r;function a(f){const h=f.shape||"rect",g=u.registry.get(h);return g?new g(f):u.registry.onNotFound(h)}u.create=a}(po||(po={}));var Fa=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class _i extends jr{get[Symbol.toStringTag](){return _i.toStringTag}constructor(t={}){super(t)}preprocess(t,e){const{source:r,sourceCell:a,sourcePort:f,sourcePoint:h,target:g,targetCell:m,targetPort:b,targetPoint:w}=t,C=Fa(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),A=B=>typeof B=="string"||typeof B=="number";if(r!=null)if(jr.isCell(r))C.source={cell:r.id};else if(A(r))C.source={cell:r};else if(St.isPoint(r))C.source=r.toJSON();else if(Array.isArray(r))C.source={x:r[0],y:r[1]};else{const B=r.cell;jr.isCell(B)?C.source=Object.assign(Object.assign({},r),{cell:B.id}):C.source=r}if(a!=null||f!=null){let B=C.source;if(a!=null){const j=A(a)?a:a.id;B?B.cell=j:B=C.source={cell:j}}f!=null&&B&&(B.port=f)}else h!=null&&(C.source=St.create(h).toJSON());if(g!=null)if(jr.isCell(g))C.target={cell:g.id};else if(A(g))C.target={cell:g};else if(St.isPoint(g))C.target=g.toJSON();else if(Array.isArray(g))C.target={x:g[0],y:g[1]};else{const B=g.cell;jr.isCell(B)?C.target=Object.assign(Object.assign({},g),{cell:B.id}):C.target=g}if(m!=null||b!=null){let B=C.target;if(m!=null){const j=A(m)?m:m.id;B?B.cell=j:B=C.target={cell:j}}b!=null&&B&&(B.port=b)}else w!=null&&(C.target=St.create(w).toJSON());return super.preprocess(C,e)}setup(){super.setup(),this.on("change:labels",t=>this.onLabelsChanged(t)),this.on("change:vertices",t=>this.onVertexsChanged(t))}isEdge(){return!0}disconnect(t={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}get source(){return this.getSource()}set source(t){this.setSource(t)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(t,e,r={}){return this.setTerminal("source",t,e,r)}get target(){return this.getTarget()}set target(t){this.setTarget(t)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(t,e,r={}){return this.setTerminal("target",t,e,r)}getTerminal(t){return Object.assign({},this.store.get(t))}setTerminal(t,e,r,a={}){if(jr.isCell(e))return this.store.set(t,xi({},r,{cell:e.id}),a),this;const f=e;return St.isPoint(e)||f.x!=null&&f.y!=null?(this.store.set(t,xi({},r,{x:f.x,y:f.y}),a),this):(this.store.set(t,vi.Z(e),a),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(t){const e=this[t];if(St.isPointLike(e))return St.create(e);const r=this.getTerminalCell(t);return r?r.getConnectionPoint(this,t):new St}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(t){if(this.model){const e=t==="source"?this.getSourceCellId():this.getTargetCellId();if(e)return this.model.getCell(e)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(t){let e=this;const r={};for(;e&&e.isEdge();){if(r[e.id])return null;r[e.id]=!0,e=e.getTerminalCell(t)}return e&&e.isNode()?e:null}get router(){return this.getRouter()}set router(t){t==null?this.removeRouter():this.setRouter(t)}getRouter(){return this.store.get("router")}setRouter(t,e,r){return typeof t=="object"?this.store.set("router",t,e):this.store.set("router",{name:t,args:e},r),this}removeRouter(t={}){return this.store.remove("router",t),this}get connector(){return this.getConnector()}set connector(t){t==null?this.removeConnector():this.setConnector(t)}getConnector(){return this.store.get("connector")}setConnector(t,e,r){return typeof t=="object"?this.store.set("connector",t,e):this.store.set("connector",{name:t,args:e},r),this}removeConnector(t={}){return this.store.remove("connector",t)}getDefaultLabel(){const t=this.constructor,e=this.store.get("defaultLabel")||t.defaultLabel||{};return vi.Z(e)}get labels(){return this.getLabels()}set labels(t){this.setLabels(t)}getLabels(){return[...this.store.get("labels",[])].map(t=>this.parseLabel(t))}setLabels(t,e={}){return this.store.set("labels",Array.isArray(t)?t:[t],e),this}insertLabel(t,e,r={}){const a=this.getLabels(),f=a.length;let h=e!=null&&Number.isFinite(e)?e:f;return h<0&&(h=f+h+1),a.splice(h,0,this.parseLabel(t)),this.setLabels(a,r)}appendLabel(t,e={}){return this.insertLabel(t,-1,e)}getLabelAt(t){const e=this.getLabels();return t!=null&&Number.isFinite(t)?this.parseLabel(e[t]):null}setLabelAt(t,e,r={}){if(t!=null&&Number.isFinite(t)){const a=this.getLabels();a[t]=this.parseLabel(e),this.setLabels(a,r)}return this}removeLabelAt(t,e={}){const r=this.getLabels(),a=t!=null&&Number.isFinite(t)?t:-1,f=r.splice(a,1);return this.setLabels(r,e),f.length?f[0]:null}parseLabel(t){return typeof t=="string"?this.constructor.parseStringLabel(t):t}onLabelsChanged({previous:t,current:e}){const r=t&&e?e.filter(f=>t.find(h=>f===h||wi(f,h))?null:f):e?[...e]:[],a=t&&e?t.filter(f=>e.find(h=>f===h||wi(f,h))?null:f):t?[...t]:[];r.length>0&&this.notify("labels:added",{added:r,cell:this,edge:this}),a.length>0&&this.notify("labels:removed",{removed:a,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(t){this.setVertices(t)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(t,e={}){const r=Array.isArray(t)?t:[t];return this.store.set("vertices",r.map(a=>St.toJSON(a)),e),this}insertVertex(t,e,r={}){const a=this.getVertices(),f=a.length;let h=e!=null&&Number.isFinite(e)?e:f;return h<0&&(h=f+h+1),a.splice(h,0,St.toJSON(t)),this.setVertices(a,r)}appendVertex(t,e={}){return this.insertVertex(t,-1,e)}getVertexAt(t){return t!=null&&Number.isFinite(t)?this.getVertices()[t]:null}setVertexAt(t,e,r={}){if(t!=null&&Number.isFinite(t)){const a=this.getVertices();a[t]=e,this.setVertices(a,r)}return this}removeVertexAt(t,e={}){const r=this.getVertices(),a=t!=null&&Number.isFinite(t)?t:-1;return r.splice(a,1),this.setVertices(r,e)}onVertexsChanged({previous:t,current:e}){const r=t&&e?e.filter(f=>t.find(h=>St.equals(f,h))?null:f):e?[...e]:[],a=t&&e?t.filter(f=>e.find(h=>St.equals(f,h))?null:f):t?[...t]:[];r.length>0&&this.notify("vertexs:added",{added:r,cell:this,edge:this}),a.length>0&&this.notify("vertexs:removed",{removed:a,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Ri.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(t,e,r={}){return r.translateBy=r.translateBy||this.id,r.tx=t,r.ty=e,this.applyToPoints(a=>({x:(a.x||0)+t,y:(a.y||0)+e}),r)}scale(t,e,r,a={}){return this.applyToPoints(f=>St.create(f).scale(t,e,r).toJSON(),a)}applyToPoints(t,e={}){const r={},a=this.getSource(),f=this.getTarget();St.isPointLike(a)&&(r.source=t(a)),St.isPointLike(f)&&(r.target=t(f));const h=this.getVertices();return h.length>0&&(r.vertices=h.map(t)),this.store.set(r,e),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const t=[this.getSourcePoint(),...this.getVertices().map(e=>St.create(e)),this.getTargetPoint()];return new Zi(t)}updateParent(t){let e=null;const r=this.getSourceCell(),a=this.getTargetCell(),f=this.getParent();return r&&a&&(r===a||r.isDescendantOf(a)?e=a:a.isDescendantOf(r)?e=r:e=jr.getCommonAncestor(r,a)),f&&(!e||e.id!==f.id)&&f.unembed(this,t),e&&e.embed(this,t),e}hasLoop(t={}){const e=this.getSource(),r=this.getTarget(),a=e.cell,f=r.cell;if(!a||!f)return!1;let h=a===f;if(!h&&t.deep&&this._model){const g=this.getSourceCell(),m=this.getTargetCell();g&&m&&(h=g.isAncestorOf(m,t)||m.isAncestorOf(g,t))}return h}getFragmentAncestor(){const t=[this,this.getSourceNode(),this.getTargetNode()].filter(e=>e!=null);return this.getCommonAncestor(...t)}isFragmentDescendantOf(t){const e=this.getFragmentAncestor();return!!e&&(e.id===t.id||e.isDescendantOf(t))}}_i.defaults={},function(u){function t(e,r){const a=e,f=r;return a.cell===f.cell?a.port===f.port||a.port==null&&f.port==null:!1}u.equalTerminals=t}(_i||(_i={})),function(u){u.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function t(e){return{attrs:{label:{text:e}}}}u.parseStringLabel=t}(_i||(_i={})),function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag],a=e;return(r==null||r===u.toStringTag)&&typeof a.isNode=="function"&&typeof a.isEdge=="function"&&typeof a.prop=="function"&&typeof a.attr=="function"&&typeof a.disconnect=="function"&&typeof a.getSource=="function"&&typeof a.getTarget=="function"}u.isEdge=t}(_i||(_i={})),function(u){u.registry=So.create({type:"edge",process(t,e){if(Mh.exist(t,!1))throw new Error(`Edge with name '${t}' was registered by anthor Node`);if(typeof e=="function")return e.config({shape:t}),e;let r=u;const{inherit:a="edge"}=e,f=Fa(e,["inherit"]);if(typeof a=="string"){const g=this.get(a||"edge");g==null&&a?this.onNotFound(a,"inherited"):r=g}else r=a;f.constructorName==null&&(f.constructorName=t);const h=r.define.call(r,f);return h.config({shape:t}),h}}),Mh.setEdgeRegistry(u.registry)}(_i||(_i={})),function(u){let t=0;function e(f){return f?cc(f):(t+=1,`CustomEdge${t}`)}function r(f){const{constructorName:h,overwrite:g}=f,m=Fa(f,["constructorName","overwrite"]),b=_l(e(h||m.shape),this);return b.config(m),m.shape&&u.registry.register(m.shape,b,g),b}u.define=r;function a(f){const h=f.shape||"edge",g=u.registry.get(h);return g?new g(f):u.registry.onNotFound(h)}u.create=a}(_i||(_i={})),function(u){const t="basic.edge";u.config({shape:t,propHooks(e){const{label:r,vertices:a}=e,f=Fa(e,["label","vertices"]);if(r){f.labels==null&&(f.labels=[]);const h=typeof r=="string"?u.parseStringLabel(r):r;f.labels.push(h)}return a&&Array.isArray(a)&&(f.vertices=a.map(h=>St.create(h).toJSON())),f}}),u.registry.register(t,u)}(_i||(_i={}));class xu extends cs{constructor(t,e={}){super(),this.length=0,this.comparator=e.comparator||"zIndex",this.clean(),t&&this.reset(t,{silent:!0})}toJSON(){return this.cells.map(t=>t.toJSON())}add(t,e,r){let a,f;typeof e=="number"?(a=e,f=Object.assign({merge:!1},r)):(a=this.length,f=Object.assign({merge:!1},e)),a>this.length&&(a=this.length),a<0&&(a+=this.length+1);const h=Array.isArray(t)?t:[t],g=this.comparator&&typeof e!="number"&&f.sort!==!1,m=this.comparator||null;let b=!1;const w=[],S=[];return h.forEach(C=>{const A=this.get(C);A?f.merge&&!C.isSameStore(A)&&(A.setProp(C.getProp(),r),S.push(A),g&&!b&&(m==null||typeof m=="function"?b=A.hasChanged():typeof m=="string"?b=A.hasChanged(m):b=m.some(B=>A.hasChanged(B)))):(w.push(C),this.reference(C))}),w.length&&(g&&(b=!0),this.cells.splice(a,0,...w),this.length=this.cells.length),b&&this.sort({silent:!0}),f.silent||(w.forEach((C,A)=>{const B={cell:C,index:a+A,options:f};this.trigger("added",B),f.dryrun||C.notify("added",Object.assign({},B))}),b&&this.trigger("sorted"),(w.length||S.length)&&this.trigger("updated",{added:w,merged:S,removed:[],options:f})),this}remove(t,e={}){const r=Array.isArray(t)?t:[t],a=this.removeCells(r,e);return!e.silent&&a.length>0&&this.trigger("updated",{options:e,removed:a,added:[],merged:[]}),Array.isArray(t)?a:a[0]}removeCells(t,e){const r=[];for(let a=0;a<t.length;a+=1){const f=this.get(t[a]);if(f==null)continue;const h=this.cells.indexOf(f);this.cells.splice(h,1),this.length-=1,delete this.map[f.id],r.push(f),this.unreference(f),e.dryrun||f.remove(),e.silent||(this.trigger("removed",{cell:f,index:h,options:e}),e.dryrun||f.notify("removed",{cell:f,index:h,options:e}))}return r}reset(t,e={}){const r=this.cells.slice();if(r.forEach(a=>this.unreference(a)),this.clean(),this.add(t,Object.assign({silent:!0},e)),!e.silent){const a=this.cells.slice();this.trigger("reseted",{options:e,previous:r,current:a});const f=[],h=[];a.forEach(g=>{r.some(b=>b.id===g.id)||f.push(g)}),r.forEach(g=>{a.some(b=>b.id===g.id)||h.push(g)}),this.trigger("updated",{options:e,added:f,removed:h,merged:[]})}return this}push(t,e){return this.add(t,this.length,e)}pop(t){const e=this.at(this.length-1);return this.remove(e,t)}unshift(t,e){return this.add(t,0,e)}shift(t){const e=this.at(0);return this.remove(e,t)}get(t){if(t==null)return null;const e=typeof t=="string"||typeof t=="number"?t:t.id;return this.map[e]||null}has(t){return this.get(t)!=null}at(t){return t<0&&(t+=this.length),this.cells[t]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(t){return this.cells.indexOf(t)}toArray(){return this.cells.slice()}sort(t={}){return this.comparator!=null&&(this.cells=Rr(this.cells,this.comparator),t.silent||this.trigger("sorted")),this}clone(){const t=this.constructor;return new t(this.cells.slice(),{comparator:this.comparator})}reference(t){this.map[t.id]=t,t.on("*",this.notifyCellEvent,this)}unreference(t){t.off("*",this.notifyCellEvent,this),delete this.map[t.id]}notifyCellEvent(t,e){const r=e.cell;this.trigger(`cell:${t}`,e),r&&(r.isNode()?this.trigger(`node:${t}`,Object.assign(Object.assign({},e),{node:r})):r.isEdge()&&this.trigger(`edge:${t}`,Object.assign(Object.assign({},e),{edge:r})))}clean(){this.length=0,this.cells=[],this.map={}}}class _o extends cs{get[Symbol.toStringTag](){return _o.toStringTag}constructor(t=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new xu(t),this.setup()}notify(t,e){this.trigger(t,e);const r=this.graph;return r&&(t==="sorted"||t==="reseted"||t==="updated"?r.trigger(`model:${t}`,e):r.trigger(t,e)),this}setup(){const t=this.collection;t.on("sorted",()=>this.notify("sorted",null)),t.on("updated",e=>this.notify("updated",e)),t.on("cell:change:zIndex",()=>this.sortOnChangeZ()),t.on("added",({cell:e})=>{this.onCellAdded(e)}),t.on("removed",e=>{const r=e.cell;this.onCellRemoved(r,e.options),this.notify("cell:removed",e),r.isNode()?this.notify("node:removed",Object.assign(Object.assign({},e),{node:r})):r.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},e),{edge:r}))}),t.on("reseted",e=>{this.onReset(e.current),this.notify("reseted",e)}),t.on("edge:change:source",({edge:e})=>this.onEdgeTerminalChanged(e,"source")),t.on("edge:change:target",({edge:e})=>{this.onEdgeTerminalChanged(e,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(t){const e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0}onCellRemoved(t,e){const r=t.id;if(t.isEdge()){delete this.edges[r];const a=t.getSource(),f=t.getTarget();if(a&&a.cell){const h=this.outgoings[a.cell],g=h?h.indexOf(r):-1;g>=0&&(h.splice(g,1),h.length===0&&delete this.outgoings[a.cell])}if(f&&f.cell){const h=this.incomings[f.cell],g=h?h.indexOf(r):-1;g>=0&&(h.splice(g,1),h.length===0&&delete this.incomings[f.cell])}}else delete this.nodes[r];e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)}onReset(t){this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(e=>this.onCellAdded(e))}onEdgeTerminalChanged(t,e){const r=e==="source"?this.outgoings:this.incomings,a=t.previous(e);if(a&&a.cell){const h=jr.isCell(a.cell)?a.cell.id:a.cell,g=r[h],m=g?g.indexOf(t.id):-1;m>=0&&(g.splice(m,1),g.length===0&&delete r[h])}const f=t.getTerminal(e);if(f&&f.cell){const h=jr.isCell(f.cell)?f.cell.id:f.cell,g=r[h]||[];g.indexOf(t.id)===-1&&g.push(t.id),r[h]=g}}prepareCell(t,e){return!t.model&&(!e||!e.dryrun)&&(t.model=this),t.zIndex==null&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}resetCells(t,e={}){return t.map(r=>this.prepareCell(r,Object.assign(Object.assign({},e),{dryrun:!0}))),this.collection.reset(t,e),t.map(r=>this.prepareCell(r,{options:e})),this}clear(t={}){const e=this.getCells();if(e.length===0)return this;const r=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",()=>{const a=e.sort((f,h)=>{const g=f.isEdge()?1:2,m=h.isEdge()?1:2;return g-m});for(;a.length>0;){const f=a.shift();f&&f.remove(r)}},r),this}addNode(t,e={}){const r=po.isNode(t)?t:this.createNode(t);return this.addCell(r,e),r}updateNode(t,e={}){const r=this.createNode(t),a=r.getProp();return r.dispose(),this.updateCell(a,e)}createNode(t){return po.create(t)}addEdge(t,e={}){const r=_i.isEdge(t)?t:this.createEdge(t);return this.addCell(r,e),r}createEdge(t){return _i.create(t)}updateEdge(t,e={}){const r=this.createEdge(t),a=r.getProp();return r.dispose(),this.updateCell(a,e)}addCell(t,e={}){return Array.isArray(t)?this.addCells(t,e):(!this.collection.has(t)&&!this.addings.has(t)&&(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,e),e),t.eachChild(r=>this.addCell(r,e)),this.addings.delete(t)),this)}addCells(t,e={}){const r=t.length;if(r===0)return this;const a=Object.assign(Object.assign({},e),{position:r-1,maxPosition:r-1});return this.startBatch("add",Object.assign(Object.assign({},a),{cells:t})),t.forEach(f=>{this.addCell(f,a),a.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},a),{cells:t})),this}updateCell(t,e={}){const r=t.id&&this.getCell(t.id);return r?this.batchUpdate("update",()=>(Object.entries(t).forEach(([a,f])=>r.setProp(a,f,e)),!0),t):!1}removeCell(t,e={}){const r=typeof t=="string"?this.getCell(t):t;return r&&this.has(r)?this.collection.remove(r,e):null}updateCellId(t,e){this.startBatch("update",{id:e}),t.prop("id",e);const r=t.clone({keepId:!0});return this.addCell(r),this.getConnectedEdges(t).forEach(f=>{const h=f.getSourceCell(),g=f.getTargetCell();h===t&&f.setSource(Object.assign(Object.assign({},f.getSource()),{cell:e})),g===t&&f.setTarget(Object.assign(Object.assign({},f.getTarget()),{cell:e}))}),this.removeCell(t),this.stopBatch("update",{id:e}),r}removeCells(t,e={}){return t.length?this.batchUpdate("remove",()=>t.map(r=>this.removeCell(r,e))):[]}removeConnectedEdges(t,e={}){const r=this.getConnectedEdges(t);return r.forEach(a=>{a.remove(e)}),r}disconnectConnectedEdges(t,e={}){const r=typeof t=="string"?t:t.id;this.getConnectedEdges(t).forEach(a=>{const f=a.getSourceCellId(),h=a.getTargetCellId();f===r&&a.setSource({x:0,y:0},e),h===r&&a.setTarget({x:0,y:0},e)})}has(t){return this.collection.has(t)}total(){return this.collection.length}indexOf(t){return this.collection.indexOf(t)}getCell(t){return this.collection.get(t)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const t=this.collection.first();return t&&t.getZIndex()||0}getMaxZIndex(){const t=this.collection.last();return t&&t.getZIndex()||0}getCellsFromCache(t){return t?Object.keys(t).map(e=>this.getCell(e)).filter(e=>e!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(t){const e=typeof t=="string"?t:t.id,r=this.outgoings[e];return r?r.map(a=>this.getCell(a)).filter(a=>a&&a.isEdge()):null}getIncomingEdges(t){const e=typeof t=="string"?t:t.id,r=this.incomings[e];return r?r.map(a=>this.getCell(a)).filter(a=>a&&a.isEdge()):null}getConnectedEdges(t,e={}){const r=[],a=typeof t=="string"?this.getCell(t):t;if(a==null)return r;const f={},h=e.indirect;let g=e.incoming,m=e.outgoing;g==null&&m==null&&(g=m=!0);const b=(w,S)=>{const C=S?this.getOutgoingEdges(w):this.getIncomingEdges(w);if(C!=null&&C.forEach(A=>{f[A.id]||(r.push(A),f[A.id]=!0,h&&(g&&b(A,!1),m&&b(A,!0)))}),h&&w.isEdge()){const A=S?w.getTargetCell():w.getSourceCell();A&&A.isEdge()&&(f[A.id]||(r.push(A),b(A,S)))}};if(m&&b(a,!0),g&&b(a,!1),e.deep){const w=a.getDescendants({deep:!0}),S={};w.forEach(A=>{A.isNode()&&(S[A.id]=!0)});const C=(A,B)=>{const j=B?this.getOutgoingEdges(A.id):this.getIncomingEdges(A.id);j!=null&&j.forEach(H=>{if(!f[H.id]){const nt=H.getSourceCell(),ct=H.getTargetCell();if(!e.enclosed&&nt&&S[nt.id]&&ct&&S[ct.id])return;r.push(H),f[H.id]=!0}})};w.forEach(A=>{A.isEdge()||(m&&C(A,!0),g&&C(A,!1))})}return r}isBoundary(t,e){const r=typeof t=="string"?this.getCell(t):t,a=e?this.getIncomingEdges(r):this.getOutgoingEdges(r);return a==null||a.length===0}getBoundaryNodes(t){const e=[];return Object.keys(this.nodes).forEach(r=>{if(this.isBoundary(r,t)){const a=this.getCell(r);a&&e.push(a)}}),e}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(t){return this.isBoundary(t,!0)}isLeaf(t){return this.isBoundary(t,!1)}getNeighbors(t,e={}){let r=e.incoming,a=e.outgoing;r==null&&a==null&&(r=a=!0);const h=this.getConnectedEdges(t,e).reduce((g,m)=>{const b=m.hasLoop(e),w=m.getSourceCell(),S=m.getTargetCell();return r&&w&&w.isNode()&&!g[w.id]&&(b||w!==t&&(!e.deep||!w.isDescendantOf(t)))&&(g[w.id]=w),a&&S&&S.isNode()&&!g[S.id]&&(b||S!==t&&(!e.deep||!S.isDescendantOf(t)))&&(g[S.id]=S),g},{});if(t.isEdge()){if(r){const g=t.getSourceCell();g&&g.isNode()&&!h[g.id]&&(h[g.id]=g)}if(a){const g=t.getTargetCell();g&&g.isNode()&&!h[g.id]&&(h[g.id]=g)}}return Object.keys(h).map(g=>h[g])}isNeighbor(t,e,r={}){let a=r.incoming,f=r.outgoing;return a==null&&f==null&&(a=f=!0),this.getConnectedEdges(t,r).some(h=>{const g=h.getSourceCell(),m=h.getTargetCell();return!!(a&&g&&g.id===e.id||f&&m&&m.id===e.id)})}getSuccessors(t,e={}){const r=[];return this.search(t,(a,f)=>{a!==t&&this.matchDistance(f,e.distance)&&r.push(a)},Object.assign(Object.assign({},e),{outgoing:!0})),r}isSuccessor(t,e,r={}){let a=!1;return this.search(t,(f,h)=>{if(f===e&&f!==t&&this.matchDistance(h,r.distance))return a=!0,!1},Object.assign(Object.assign({},r),{outgoing:!0})),a}getPredecessors(t,e={}){const r=[];return this.search(t,(a,f)=>{a!==t&&this.matchDistance(f,e.distance)&&r.push(a)},Object.assign(Object.assign({},e),{incoming:!0})),r}isPredecessor(t,e,r={}){let a=!1;return this.search(t,(f,h)=>{if(f===e&&f!==t&&this.matchDistance(h,r.distance))return a=!0,!1},Object.assign(Object.assign({},r),{incoming:!0})),a}matchDistance(t,e){return e==null?!0:typeof e=="function"?e(t):Array.isArray(e)&&e.includes(t)?!0:t===e}getCommonAncestor(...t){const e=[];return t.forEach(r=>{r&&(Array.isArray(r)?e.push(...r):e.push(r))}),jr.getCommonAncestor(...e)}getSubGraph(t,e={}){const r=[],a={},f=[],h=[],g=m=>{a[m.id]||(r.push(m),a[m.id]=m,m.isEdge()&&h.push(m),m.isNode()&&f.push(m))};return t.forEach(m=>{g(m),e.deep&&m.getDescendants({deep:!0}).forEach(w=>g(w))}),h.forEach(m=>{const b=m.getSourceCell(),w=m.getTargetCell();b&&!a[b.id]&&(r.push(b),a[b.id]=b,b.isNode()&&f.push(b)),w&&!a[w.id]&&(r.push(w),a[w.id]=w,w.isNode()&&f.push(w))}),f.forEach(m=>{this.getConnectedEdges(m,e).forEach(w=>{const S=w.getSourceCell(),C=w.getTargetCell();!a[w.id]&&S&&a[S.id]&&C&&a[C.id]&&(r.push(w),a[w.id]=w)})}),r}cloneSubGraph(t,e={}){const r=this.getSubGraph(t,e);return this.cloneCells(r)}cloneCells(t){return jr.cloneCells(t)}getNodesFromPoint(t,e){const r=typeof t=="number"?{x:t,y:e||0}:t;return this.getNodes().filter(a=>a.getBBox().containsPoint(r))}getNodesInArea(t,e,r,a,f){const h=typeof t=="number"?new pn(t,e,r,a):pn.create(t),g=typeof t=="number"?f:e,m=g&&g.strict;return this.getNodes().filter(b=>{const w=b.getBBox();return m?h.containsRect(w):h.isIntersectWithRect(w)})}getEdgesInArea(t,e,r,a,f){const h=typeof t=="number"?new pn(t,e,r,a):pn.create(t),g=typeof t=="number"?f:e,m=g&&g.strict;return this.getEdges().filter(b=>{const w=b.getBBox();return w.width===0?w.inflate(1,0):w.height===0&&w.inflate(0,1),m?h.containsRect(w):h.isIntersectWithRect(w)})}getNodesUnderNode(t,e={}){const r=t.getBBox();return(e.by==null||e.by==="bbox"?this.getNodesInArea(r):this.getNodesFromPoint(r[e.by])).filter(f=>t.id!==f.id&&!f.isDescendantOf(t))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(t,e={}){return jr.getCellsBBox(t,e)}search(t,e,r={}){r.breadthFirst?this.breadthFirstSearch(t,e,r):this.depthFirstSearch(t,e,r)}breadthFirstSearch(t,e,r={}){const a=[],f={},h={};for(a.push(t),h[t.id]=0;a.length>0;){const g=a.shift();if(g==null||f[g.id]||(f[g.id]=!0,bn(e,this,g,h[g.id])===!1))continue;this.getNeighbors(g,r).forEach(b=>{h[b.id]=h[g.id]+1,a.push(b)})}}depthFirstSearch(t,e,r={}){const a=[],f={},h={};for(a.push(t),h[t.id]=0;a.length>0;){const g=a.pop();if(g==null||f[g.id]||(f[g.id]=!0,bn(e,this,g,h[g.id])===!1))continue;const m=this.getNeighbors(g,r),b=a.length;m.forEach(w=>{h[w.id]=h[g.id]+1,a.splice(b,0,w)})}}getShortestPath(t,e,r={}){const a={};this.getEdges().forEach(b=>{const w=b.getSourceCellId(),S=b.getTargetCellId();w&&S&&(a[w]||(a[w]=[]),a[S]||(a[S]=[]),a[w].push(S),r.directed||a[S].push(w))});const f=typeof t=="string"?t:t.id,h=Xp.run(a,f,r.weight),g=[];let m=typeof e=="string"?e:e.id;for(h[m]&&g.push(m);m=h[m];)g.unshift(m);return g}translate(t,e,r){return this.getCells().filter(a=>!a.hasParent()).forEach(a=>a.translate(t,e,r)),this}resize(t,e,r){return this.resizeCells(t,e,this.getCells(),r)}resizeCells(t,e,r,a={}){const f=this.getCellsBBox(r);if(f){const h=Math.max(t/f.width,0),g=Math.max(e/f.height,0),m=f.getOrigin();r.forEach(b=>b.scale(h,g,m,a))}return this}toJSON(t={}){return _o.toJSON(this.getCells(),t)}parseJSON(t){return _o.fromJSON(t)}fromJSON(t,e={}){const r=this.parseJSON(t);return this.resetCells(r,e),this}startBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this}stopBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this}batchUpdate(t,e,r={}){this.startBatch(t,r);const a=e();return this.stopBatch(t,r),a}hasActiveBatch(t=Object.keys(this.batches)){return(Array.isArray(t)?t:[t]).some(r=>this.batches[r]>0)}}(function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag],a=e;return(r==null||r===u.toStringTag)&&typeof a.addNode=="function"&&typeof a.addEdge=="function"&&a.collection!=null}u.isModel=t})(_o||(_o={})),function(u){function t(r,a={}){return{cells:r.map(f=>f.toJSON(a))}}u.toJSON=t;function e(r){const a=[];return Array.isArray(r)?a.push(...r):(r.cells&&a.push(...r.cells),r.nodes&&r.nodes.forEach(f=>{f.shape==null&&(f.shape="rect"),a.push(f)}),r.edges&&r.edges.forEach(f=>{f.shape==null&&(f.shape="edge"),a.push(f)})),a.map(f=>{const h=f.shape;if(h){if(po.registry.exist(h))return po.create(f);if(_i.registry.exist(h))return _i.create(f)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}u.fromJSON=e}(_o||(_o={}));var Ud=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class Zs extends po{get label(){return this.getLabel()}set label(t){this.setLabel(t)}getLabel(){return this.getAttrByPath("text/text")}setLabel(t,e){return t==null?this.removeLabel():this.setAttrByPath("text/text",t,e),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}(function(u){u.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},u.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},u.config({attrs:{text:Object.assign({},u.labelAttr)},propHooks(t){const{label:e}=t,r=Ud(t,["label"]);return e&&Us(r,"attrs/text/text",e),r},visible:!0})})(Zs||(Zs={}));var Vd=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};function tp(u,t="body"){return[{tagName:u,selector:t},{tagName:"text",selector:"label"}]}function Dc(u="xlink:href"){return e=>{const{imageUrl:r,imageWidth:a,imageHeight:f}=e,h=Vd(e,["imageUrl","imageWidth","imageHeight"]);if(r!=null||a!=null||f!=null){const g=()=>{if(h.attrs){const m=h.attrs.image;r!=null&&(m[u]=r),a!=null&&(m.width=a),f!=null&&(m.height=f),h.attrs.image=m}};h.attrs?(h.attrs.image==null&&(h.attrs.image={}),g()):(h.attrs={image:{}},g())}return h}}function Ba(u,t,e={}){const r={constructorName:u,markup:tp(u,e.selector),attrs:{[u]:Object.assign({},Zs.bodyAttr)}};return(e.parent||Zs).define(xi(r,t,{shape:u}))}const Ds=Ba("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),gc=_i.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),Eu=Ba("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var ep=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class Ih extends Zs{get points(){return this.getPoints()}set points(t){this.setPoints(t)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(t,e){return t==null?this.removePoints():this.setAttrByPath("body/refPoints",Ih.pointsToString(t),e),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(u){function t(e){return typeof e=="string"?e:e.map(r=>Array.isArray(r)?r.join(","):St.isPointLike(r)?`${r.x}, ${r.y}`:"").join(" ")}u.pointsToString=t,u.config({propHooks(e){const{points:r}=e,a=ep(e,["points"]);if(r){const f=t(r);f&&Us(a,"attrs/body/refPoints",f)}return a}})})(Ih||(Ih={}));const jb=Ba("polygon",{},{parent:Ih}),b0=Ba("polyline",{},{parent:Ih});var Ub=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const cx=Zs.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(u){const{path:t}=u,e=Ub(u,["path"]);return t&&Us(e,"attrs/body/refD",t),e}});var x0=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};const Vb=Zs.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},mi.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:gn.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},Zs.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(u){const{text:t}=u,e=x0(u,["text"]);return t&&Us(e,"attrs/label/text",t),e},attrHooks:{text:{set(u,{cell:t,view:e,refBBox:r,elem:a,attrs:f}){if(a instanceof HTMLElement)a.textContent=u;else{const h=f.style||{},g={text:u,width:-5,height:"100%"},m=Object.assign({textVerticalAnchor:"middle"},h),b=Ic.presets.textWrap;return bn(b.set,this,g,{cell:t,view:e,elem:a,refBBox:r,attrs:m}),{fill:h.color||null}}},position(u,{refBBox:t,elem:e}){if(e instanceof SVGElement)return t.getCenter()}}}}),ux=Ba("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:Dc()},{selector:"image"}),lx=Ba("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class ma extends Bo{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return ma.toStringTag}getContainerClassName(){const t=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}updateClassName(t){const e=t.target;if(e.hasAttribute("magnet")){const r=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?ei(e,r):tr(e,r)}else{const r=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(r):this.addClass(r)}}isNodeView(){return!0}confirmUpdate(t,e={}){let r=t;return this.hasAction(r,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","resize","translate","rotate","ports","tools"])):(r=this.handleAction(r,"resize",()=>this.resize(),"update"),r=this.handleAction(r,"update",()=>this.update(),Yo.useCSSSelector?"ports":null),r=this.handleAction(r,"translate",()=>this.translate()),r=this.handleAction(r,"rotate",()=>this.rotate()),r=this.handleAction(r,"ports",()=>this.renderPorts()),r=this.handleAction(r,"tools",()=>{this.getFlag("tools")===t?this.renderTools():this.updateTools(e)})),r}update(t){this.cleanCache(),Yo.useCSSSelector&&this.removePorts();const e=this.cell,r=e.getSize(),a=e.getAttrs();this.updateAttrs(this.container,a,{attrs:t===a?null:t,rootBBox:new pn(0,0,r.width,r.height),selectors:this.selectors}),Yo.useCSSSelector&&this.renderPorts()}renderMarkup(){const t=this.cell.markup;if(t){if(typeof t=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.appendChild(e.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),Yo.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const t=this.cell.getPosition();return`translate(${t.x},${t.y})`}getRotationString(){const t=this.cell.getAngle();if(t){const e=this.cell.getSize();return`rotate(${t},${e.width/2},${e.height/2})`}}updateTransform(){let t=this.getTranslationString();const e=this.getRotationString();e&&(t+=` ${e}`),this.container.setAttribute("transform",t)}findPortElem(t,e){const r=t?this.portsCache[t]:null;if(!r)return null;const a=r.portContentElement,f=r.portContentSelectors||{};return this.findOne(e,a,f)}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(t=>{pt(t.portElement)})}renderPorts(){const t=this.container,e=[];t.childNodes.forEach(h=>{e.push(h)});const r=this.cell.getParsedPorts(),a=jl(r,"zIndex"),f="auto";a[f]&&a[f].forEach(h=>{const g=this.getPortElement(h);t.append(g),e.push(g)}),Object.keys(a).forEach(h=>{if(h!==f){const g=parseInt(h,10);this.appendPorts(a[h],g,e)}}),this.updatePorts()}appendPorts(t,e,r){const a=t.map(f=>this.getPortElement(f));r[e]||e<0?mt(r[Math.max(e,0)],a):Ft(this.container,a)}getPortElement(t){const e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)}createPortElement(t){let e=Ri.renderMarkup(this.cell.getPortContainerMarkup());const r=e.elem;if(r==null)throw new Error("Invalid port container markup.");e=Ri.renderMarkup(this.getPortMarkup(t));const a=e.elem,f=e.selectors;if(a==null)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},a);let h="x6-port";t.group&&(h+=` x6-port-${t.group}`),tr(r,h),tr(r,"x6-port"),tr(a,"x6-port-body"),r.appendChild(a);let g=f,m,b;if(this.existPortLabel(t)){if(e=Ri.renderMarkup(this.getPortLabelMarkup(t.label)),m=e.elem,b=e.selectors,m==null)throw new Error("Invalid port label markup.");if(f&&b){for(const S in b)if(f[S]&&S!==this.rootSelector)throw new Error("Selectors within port must be unique.");g=Object.assign(Object.assign({},f),b)}tr(m,"x6-port-label"),r.appendChild(m)}return this.portsCache[t.id]={portElement:r,portSelectors:g,portLabelElement:m,portLabelSelectors:b,portContentElement:a,portContentSelectors:f},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:t,node:this.cell,container:r,selectors:g,labelContainer:m,labelSelectors:b,contentContainer:a,contentSelectors:f}),r}updatePorts(){const t=this.cell.getParsedGroups(),e=Object.keys(t);e.length===0?this.updatePortGroup():e.forEach(r=>this.updatePortGroup(r))}updatePortGroup(t){const e=pn.fromSize(this.cell.getSize()),r=this.cell.getPortsLayoutByGroup(t,e);for(let a=0,f=r.length;a<f;a+=1){const h=r[a],g=h.portId,m=this.portsCache[g]||{},b=h.portLayout;if(this.applyPortTransform(m.portElement,b),h.portAttrs!=null){const S={selectors:m.portSelectors||{}};h.portSize&&(S.rootBBox=pn.fromSize(h.portSize)),this.updateAttrs(m.portElement,h.portAttrs,S)}const w=h.labelLayout;if(w&&m.portLabelElement&&(this.applyPortTransform(m.portLabelElement,w,-(b.angle||0)),w.attrs)){const S={selectors:m.portLabelSelectors||{}};h.labelSize&&(S.rootBBox=pn.fromSize(h.labelSize)),this.updateAttrs(m.portLabelElement,w.attrs,S)}}}applyPortTransform(t,e,r=0){const a=e.angle,f=e.position,h=Ti().rotate(r).translate(f.x||0,f.y||0).rotate(a||0);cf(t,h,{absolute:!0})}getPortMarkup(t){return t.markup||this.cell.portMarkup}getPortLabelMarkup(t){return t.markup||this.cell.portLabelMarkup}existPortLabel(t){return t.attrs&&t.attrs.text}getEventArgs(t,e,r){const a=this,f=a.cell,h=f;return e==null||r==null?{e:t,view:a,node:f,cell:h}:{e:t,x:e,y:r,view:a,node:f,cell:h}}getPortEventArgs(t,e,r){const a=this,f=a.cell,h=f;return r?{e:t,x:r.x,y:r.y,view:a,node:f,cell:h,port:e}:{e:t,view:a,node:f,cell:h,port:e}}notifyMouseDown(t,e,r){super.onMouseDown(t,e,r),this.notify("node:mousedown",this.getEventArgs(t,e,r))}notifyMouseMove(t,e,r){super.onMouseMove(t,e,r),this.notify("node:mousemove",this.getEventArgs(t,e,r))}notifyMouseUp(t,e,r){super.onMouseUp(t,e,r),this.notify("node:mouseup",this.getEventArgs(t,e,r))}notifyPortEvent(t,e,r){const a=this.findAttr("port",e.target);if(a){const f=e.type;t==="node:port:mouseenter"?e.type="mouseenter":t==="node:port:mouseleave"&&(e.type="mouseleave"),this.notify(t,this.getPortEventArgs(e,a,r)),e.type=f}}onClick(t,e,r){super.onClick(t,e,r),this.notify("node:click",this.getEventArgs(t,e,r)),this.notifyPortEvent("node:port:click",t,{x:e,y:r})}onDblClick(t,e,r){super.onDblClick(t,e,r),this.notify("node:dblclick",this.getEventArgs(t,e,r)),this.notifyPortEvent("node:port:dblclick",t,{x:e,y:r})}onContextMenu(t,e,r){super.onContextMenu(t,e,r),this.notify("node:contextmenu",this.getEventArgs(t,e,r)),this.notifyPortEvent("node:port:contextmenu",t,{x:e,y:r})}onMouseDown(t,e,r){this.isPropagationStopped(t)||(this.notifyMouseDown(t,e,r),this.notifyPortEvent("node:port:mousedown",t,{x:e,y:r}),this.startNodeDragging(t,e,r))}onMouseMove(t,e,r){const a=this.getEventData(t),f=a.action;if(f==="magnet")this.dragMagnet(t,e,r);else{if(f==="move"){const g=a.targetView||this;g.dragNode(t,e,r),g.notify("node:moving",{e:t,x:e,y:r,view:g,cell:g.cell,node:g.cell})}this.notifyMouseMove(t,e,r),this.notifyPortEvent("node:port:mousemove",t,{x:e,y:r})}this.setEventData(t,a)}onMouseUp(t,e,r){const a=this.getEventData(t),f=a.action;f==="magnet"?this.stopMagnetDragging(t,e,r):(this.notifyMouseUp(t,e,r),this.notifyPortEvent("node:port:mouseup",t,{x:e,y:r}),f==="move"&&(a.targetView||this).stopNodeDragging(t,e,r));const h=a.targetMagnet;h&&this.onMagnetClick(t,h,e,r),this.checkMouseleave(t)}onMouseOver(t){super.onMouseOver(t),this.notify("node:mouseover",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseenter",t),this.notifyPortEvent("node:port:mouseover",t)}onMouseOut(t){super.onMouseOut(t),this.notify("node:mouseout",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseleave",t),this.notifyPortEvent("node:port:mouseout",t)}onMouseEnter(t){this.updateClassName(t),super.onMouseEnter(t),this.notify("node:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("node:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,r,a){super.onMouseWheel(t,e,r,a),this.notify("node:mousewheel",Object.assign({delta:a},this.getEventArgs(t,e,r)))}onMagnetClick(t,e,r,a){const f=this.graph;f.view.getMouseMovedCount(t)>f.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:e},this.getEventArgs(t,r,a)))}onMagnetDblClick(t,e,r,a){this.notify("node:magnet:dblclick",Object.assign({magnet:e},this.getEventArgs(t,r,a)))}onMagnetContextMenu(t,e,r,a){this.notify("node:magnet:contextmenu",Object.assign({magnet:e},this.getEventArgs(t,r,a)))}onMagnetMouseDown(t,e,r,a){this.startMagnetDragging(t,r,a)}onCustomEvent(t,e,r,a){this.notify("node:customevent",Object.assign({name:e},this.getEventArgs(t,r,a))),super.onCustomEvent(t,e,r,a)}prepareEmbedding(t){const e=this.graph,a=this.getEventData(t).cell||this.cell,f=e.findViewByCell(a),h=e.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:a,view:f,cell:a,x:h.x,y:h.y,currentParent:a.getParent()})}processEmbedding(t,e){const r=e.cell||this.cell,a=e.graph||this.graph,f=a.options.embedding,h=f.findParent;let g=typeof h=="function"?bn(h,a,{view:this,node:this.cell}).filter(C=>jr.isCell(C)&&this.cell.id!==C.id&&!C.isDescendantOf(this.cell)):a.model.getNodesUnderNode(r,{by:h});if(f.frontOnly&&g.length>0){const C=jl(g,"zIndex"),A=ou(Object.keys(C).map(B=>parseInt(B,10)));A&&(g=C[A])}g=g.filter(C=>C.visible);let m=null;const b=e.candidateEmbedView,w=f.validate;for(let C=g.length-1;C>=0;C-=1){const A=g[C];if(b&&b.cell.id===A.id){m=b;break}else{const B=A.findView(a);if(bn(w,a,{child:this.cell,parent:B.cell,childView:this,parentView:B})){m=B;break}}}this.clearEmbedding(e),m&&m.highlight(null,{type:"embedding"}),e.candidateEmbedView=m;const S=a.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:r,node:r,view:a.findViewByCell(r),x:S.x,y:S.y,currentParent:r.getParent(),candidateParent:m?m.cell:null})}clearEmbedding(t){const e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}finalizeEmbedding(t,e){this.graph.startBatch("embedding");const r=e.cell||this.cell,a=e.graph||this.graph,f=a.findViewByCell(r),h=r.getParent(),g=e.candidateEmbedView;if(g?(g.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,(h==null||h.id!==g.cell.id)&&g.cell.insertChild(r,void 0,{ui:!0})):h&&h.unembed(r,{ui:!0}),a.model.getConnectedEdges(r,{deep:!0}).forEach(m=>{m.updateParent({ui:!0})}),f&&g){const m=a.snapToGrid(t.clientX,t.clientY);f.notify("node:embedded",{e:t,cell:r,x:m.x,y:m.y,node:r,view:a.findViewByCell(r),previousParent:h,currentParent:r.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let t=this.cell,e=this;for(;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.findViewByCell(t)}return null}validateMagnet(t,e,r){if(e.getAttribute("magnet")!=="passive"){const a=this.graph.options.connecting.validateMagnet;return a?bn(a,this.graph,{e:r,magnet:e,view:t,cell:t.cell}):!0}return!1}startMagnetDragging(t,e,r){if(!this.can("magnetConnectable"))return;t.stopPropagation();const a=t.currentTarget,f=this.graph;this.setEventData(t,{targetMagnet:a}),this.validateMagnet(this,a,t)?(f.options.magnetThreshold<=0&&this.startConnectting(t,a,e,r),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):this.onMouseDown(t,e,r),f.view.delegateDragEvents(t,this)}startConnectting(t,e,r,a){this.graph.model.startBatch("add-edge");const f=this.createEdgeFromMagnet(e,r,a);f.setEventData(t,f.prepareArrowheadDragging("target",{x:r,y:a,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:f}),f.notifyMouseDown(t,r,a)}getDefaultEdge(t,e){let r;const a=this.graph.options.connecting.createEdge;return a&&(r=bn(a,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),r}createEdgeFromMagnet(t,e,r){const a=this.graph,f=a.model,h=this.getDefaultEdge(this,t);return h.setSource(Object.assign(Object.assign({},h.getSource()),this.getEdgeTerminal(t,e,r,h,"source"))),h.setTarget(Object.assign(Object.assign({},h.getTarget()),{x:e,y:r})),h.addTo(f,{async:!1,ui:!0}),h.findView(a)}dragMagnet(t,e,r){const a=this.getEventData(t),f=a.edgeView;if(f)f.onMouseMove(t,e,r),this.autoScrollGraph(t.clientX,t.clientY);else{const h=this.graph,g=h.options.magnetThreshold,m=this.getEventTarget(t),b=a.targetMagnet;if(g==="onleave"){if(b===m||b.contains(m))return}else if(h.view.getMouseMovedCount(t)<=g)return;this.startConnectting(t,b,e,r)}}stopMagnetDragging(t,e,r){const f=this.eventData(t).edgeView;f&&(f.onMouseUp(t,e,r),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(t,e,r){this.notify("node:unhandled:mousedown",{e:t,x:e,y:r,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(t,e,r,a,f){let h=[f];const g=this.graph.getPlugin("selection");if(g&&g.isSelectionMovable()){const m=g.getSelectedCells();m.includes(f)&&(h=m.filter(b=>b.isNode()))}h.forEach(m=>{this.notify(t,{e,x:r,y:a,cell:m,node:m,view:m.findView(this.graph)})})}getRestrictArea(t){const e=this.graph.options.translating.restrict,r=typeof e=="function"?bn(e,this.graph,t):e;return typeof r=="number"?this.graph.transform.getGraphArea().inflate(r):r===!0?this.graph.transform.getGraphArea():r||null}startNodeDragging(t,e,r){const a=this.getDelegatedView();if(a==null||!a.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,r);this.setEventData(t,{targetView:a,action:"move"});const f=St.create(a.cell.getPosition());a.setEventData(t,{moving:!1,offset:f.diff(e,r),restrict:this.getRestrictArea(a)})}dragNode(t,e,r){const a=this.cell,f=this.graph,h=f.getGridSize(),g=this.getEventData(t),m=g.offset,b=g.restrict;g.moving||(g.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,e,r,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);const w=Ai.snapToGrid(e+m.x,h),S=Ai.snapToGrid(r+m.y,h);a.setPosition(w,S,{restrict:b,deep:!0,ui:!0}),f.options.embedding.enabled&&(g.embedding||(this.prepareEmbedding(t),g.embedding=!0),this.processEmbedding(t,g))}stopNodeDragging(t,e,r){const a=this.getEventData(t);a.embedding&&this.finalizeEmbedding(t,a),a.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,r,this.cell)),a.moving=!1,a.embedding=!1}autoScrollGraph(t,e){const r=this.graph.getPlugin("scroller");r&&r.autoScroll(t,e)}}(function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag],a=e;return(r==null||r===u.toStringTag)&&typeof a.isNodeView=="function"&&typeof a.isEdgeView=="function"&&typeof a.confirmUpdate=="function"&&typeof a.update=="function"&&typeof a.findPortElem=="function"&&typeof a.resize=="function"&&typeof a.rotate=="function"&&typeof a.translate=="function"}u.isNodeView=t})(ma||(ma={})),ma.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),ma.registry.register("node",ma,!0);class Ga extends Bo{constructor(){super(...arguments),this.POINT_ROUNDING=2}get[Symbol.toStringTag](){return Ga.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const t=this.sourceView;if(!t){const r=this.cell.getSource();return new pn(r.x,r.y)}const e=this.sourceMagnet;return t.isEdgeElement(e)?new pn(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(e||t.container)}get targetBBox(){const t=this.targetView;if(!t){const r=this.cell.getTarget();return new pn(r.x,r.y)}const e=this.targetMagnet;return t.isEdgeElement(e)?new pn(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(e||t.container)}isEdgeView(){return!0}confirmUpdate(t,e={}){let r=t;if(this.hasAction(r,"source")){if(!this.updateTerminalProperties("source"))return r;r=this.removeAction(r,"source")}if(this.hasAction(r,"target")){if(!this.updateTerminalProperties("target"))return r;r=this.removeAction(r,"target")}const a=this.graph,f=this.sourceView,h=this.targetView;return a&&(f&&!a.renderer.isViewMounted(f)||h&&!a.renderer.isViewMounted(h))?r:this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","labels","tools"]),r):(r=this.handleAction(r,"update",()=>this.update(e)),r=this.handleAction(r,"labels",()=>this.onLabelsChange(e)),r=this.handleAction(r,"tools",()=>this.renderTools()),r)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const t=this.cell.markup;if(t){if(typeof t=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.append(e.fragment)}customizeLabels(){if(this.labelContainer){const t=this.cell,e=t.labels;for(let r=0,a=e.length;r<a;r+=1){const f=e[r],h=this.labelCache[r],g=this.labelSelectors[r],m=this.graph.options.onEdgeLabelRendered;m&&m({edge:t,label:f,container:h,selectors:g})}}}renderLabels(){const t=this.cell,e=t.getLabels(),r=e.length;let a=this.labelContainer;if(this.labelCache={},this.labelSelectors={},r<=0)return a&&a.parentNode&&a.parentNode.removeChild(a),this;a?this.empty(a):(a=wo("g"),this.addClass(this.prefixClassName("edge-labels"),a),this.labelContainer=a);for(let f=0,h=e.length;f<h;f+=1){const g=e[f],m=this.normalizeLabelMarkup(this.parseLabelMarkup(g.markup));let b,w;if(m)b=m.node,w=m.selectors;else{const C=t.getDefaultLabel(),A=this.normalizeLabelMarkup(this.parseLabelMarkup(C.markup));b=A.node,w=A.selectors}b.setAttribute("data-index",`${f}`),a.appendChild(b);const S=this.rootSelector;if(w[S])throw new Error("Ambiguous label root selector.");w[S]=b,this.labelCache[f]=b,this.labelSelectors[f]=w}return a.parentNode==null&&this.container.appendChild(a),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(t={}){this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(t={}){const e=this.cell.previous("labels");if(e==null)return!0;if("propertyPathArray"in t&&"propertyValue"in t){const r=t.propertyPathArray||[],a=r.length;if(a>1){const f=r[1];if(e[f]){if(a===2)return typeof t.propertyValue=="object"&&ps(t.propertyValue,"markup");if(r[2]!=="markup")return!1}}}return!0}parseLabelMarkup(t){return t?typeof t=="string"?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}parseLabelStringMarkup(t){const e=Sr.createVectors(t),r=document.createDocumentFragment();for(let a=0,f=e.length;a<f;a+=1){const h=e[a].node;r.appendChild(h)}return{fragment:r,selectors:{}}}normalizeLabelMarkup(t){if(t==null)return;const e=t.fragment;if(!(e instanceof DocumentFragment)||!e.hasChildNodes())throw new Error("Invalid label markup.");let r;const a=e.childNodes;return a.length>1||a[0].nodeName.toUpperCase()!=="G"?r=Sr.create("g").append(e):r=Sr.create(a[0]),r.addClass(this.prefixClassName("edge-label")),{node:r.node,selectors:t.selectors}}updateLabels(){if(this.labelContainer){const t=this.cell,e=t.labels,r=this.can("edgeLabelMovable"),a=t.getDefaultLabel();for(let f=0,h=e.length;f<h;f+=1){const g=this.labelCache[f],m=this.labelSelectors[f];g.setAttribute("cursor",r?"move":"default");const b=e[f],w=xi({},a.attrs,b.attrs);this.updateAttrs(g,w,{selectors:m,rootBBox:b.size?pn.fromSize(b.size):void 0})}}}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}update(t={}){this.cleanCache(),this.updateConnection(t);const e=this.cell.getAttrs();return e!=null&&this.updateAttrs(this.container,e,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(t),this}removeRedundantLinearVertices(t={}){const e=this.cell,r=e.getVertices(),a=[this.sourceAnchor,...r,this.targetAnchor],f=a.length,h=new Zi(a);h.simplify({threshold:.01});const g=h.points.map(b=>b.toJSON()),m=g.length;return f===m?0:(e.setVertices(g.slice(1,m-1),t),f-m)}getTerminalView(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalAnchor(t){switch(t){case"source":return St.create(this.sourceAnchor);case"target":return St.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalConnectionPoint(t){switch(t){case"source":return St.create(this.sourcePoint);case"target":return St.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalMagnet(t,e={}){switch(t){case"source":{if(e.raw)return this.sourceMagnet;const r=this.sourceView;return r?this.sourceMagnet||r.container:null}case"target":{if(e.raw)return this.targetMagnet;const r=this.targetView;return r?this.targetMagnet||r.container:null}default:throw new Error(`Unknown terminal type '${t}'`)}}updateConnection(t={}){const e=this.cell;if(t.translateBy&&e.isFragmentDescendantOf(t.translateBy)){const r=t.tx||0,a=t.ty||0;this.routePoints=new Zi(this.routePoints).translate(r,a).points,this.translateConnectionPoints(r,a),this.path.translate(r,a)}else{const r=e.getVertices(),a=this.findAnchors(r);this.sourceAnchor=a.source,this.targetAnchor=a.target,this.routePoints=this.findRoutePoints(r);const f=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=f.source,this.targetPoint=f.target;const h=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,h.source||this.sourcePoint,h.target||this.targetPoint)}this.cleanCache()}findAnchors(t){const e=this.cell,r=e.source,a=e.target,f=t[0],h=t[t.length-1];return a.priority&&!r.priority?this.findAnchorsOrdered("target",h,"source",f):this.findAnchorsOrdered("source",f,"target",h)}findAnchorsOrdered(t,e,r,a){let f,h;const g=this.cell,m=g[t],b=g[r],w=this.getTerminalView(t),S=this.getTerminalView(r),C=this.getTerminalMagnet(t),A=this.getTerminalMagnet(r);if(w){let B;e?B=St.create(e):S?B=A:B=St.create(b),f=this.getAnchor(m.anchor,w,C,B,t)}else f=St.create(m);if(S){const B=St.create(a||f);h=this.getAnchor(b.anchor,S,A,B,r)}else h=St.isPointLike(b)?St.create(b):new St;return{[t]:f,[r]:h}}getAnchor(t,e,r,a,f){const h=e.isEdgeElement(r),g=this.graph.options.connecting;let m=typeof t=="string"?{name:t}:t;if(!m){const S=h?(f==="source"?g.sourceEdgeAnchor:g.targetEdgeAnchor)||g.edgeAnchor:(f==="source"?g.sourceAnchor:g.targetAnchor)||g.anchor;m=typeof S=="string"?{name:S}:S}if(!m)throw new Error("Anchor should be specified.");let b;const w=m.name;if(h){const S=mf.registry.get(w);if(typeof S!="function")return mf.registry.onNotFound(w);b=bn(S,this,e,r,a,m.args||{},f)}else{const S=Ko.registry.get(w);if(typeof S!="function")return Ko.registry.onNotFound(w);b=bn(S,this,e,r,a,m.args||{},f)}return b?b.round(this.POINT_ROUNDING):new St}findRoutePoints(t=[]){const e=this.graph.options.connecting.router||qo.presets.normal,r=this.cell.getRouter()||e;let a;if(typeof r=="function")a=bn(r,this,t,{},this);else{const f=typeof r=="string"?r:r.name,h=typeof r=="string"?{}:r.args||{},g=f?qo.registry.get(f):qo.presets.normal;if(typeof g!="function")return qo.registry.onNotFound(f);a=bn(g,this,t,h,this)}return a==null?t.map(f=>St.create(f)):a.map(f=>St.create(f))}findConnectionPoints(t,e,r){const a=this.cell,f=this.graph.options.connecting,h=a.getSource(),g=a.getTarget(),m=this.sourceView,b=this.targetView,w=t[0],S=t[t.length-1];let C;if(m&&!m.isEdgeElement(this.sourceMagnet)){const B=this.sourceMagnet||m.container,j=w||r,H=new kn(j,e),nt=h.connectionPoint||f.sourceConnectionPoint||f.connectionPoint;C=this.getConnectionPoint(nt,m,B,H,"source")}else C=e;let A;if(b&&!b.isEdgeElement(this.targetMagnet)){const B=this.targetMagnet||b.container,j=g.connectionPoint||f.targetConnectionPoint||f.connectionPoint,H=S||e,nt=new kn(H,r);A=this.getConnectionPoint(j,b,B,nt,"target")}else A=r;return{source:C,target:A}}getConnectionPoint(t,e,r,a,f){const h=a.end;if(t==null)return h;const g=typeof t=="string"?t:t.name,m=typeof t=="string"?{}:t.args,b=Th.registry.get(g);if(typeof b!="function")return Th.registry.onNotFound(g);const w=bn(b,this,a,e,r,m||{},f);return w?w.round(this.POINT_ROUNDING):h}findMarkerPoints(t,e,r){const a=S=>{const C=this.cell.getAttrs(),A=Object.keys(C);for(let B=0,j=A.length;B<j;B+=1){const H=C[A[B]];if(H[`${S}Marker`]||H[`${S}-marker`]){const nt=H.strokeWidth||H["stroke-width"];if(nt)return parseFloat(nt);break}}return null},f=t[0],h=t[t.length-1];let g,m;const b=a("source");b&&(g=e.clone().move(f||r,-b));const w=a("target");return w&&(m=r.clone().move(h||e,-w)),this.sourceMarkerPoint=g||e.clone(),this.targetMarkerPoint=m||r.clone(),{source:g,target:m}}findPath(t,e,r){const a=this.cell.getConnector()||this.graph.options.connecting.connector;let f,h,g;if(typeof a=="string"?f=a:(f=a.name,h=a.args),f){const b=ml.registry.get(f);if(typeof b!="function")return ml.registry.onNotFound(f);g=b}else g=ml.presets.normal;const m=bn(g,this,e,r,t,Object.assign(Object.assign({},h),{raw:!0}),this);return typeof m=="string"?Kn.parse(m):m}translateConnectionPoints(t,e){this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e),this.sourceMarkerPoint.translate(t,e),this.targetMarkerPoint.translate(t,e)}updateLabelPositions(){if(this.labelContainer==null)return this;if(!this.path)return this;const e=this.cell,r=e.getLabels();if(r.length===0)return this;const a=e.getDefaultLabel(),f=this.normalizeLabelPosition(a.position);for(let h=0,g=r.length;h<g;h+=1){const m=r[h],b=this.normalizeLabelPosition(m.position),w=xi({},f,b),S=this.getLabelTransformationMatrix(w);this.labelCache[h].setAttribute("transform",af(S))}return this}updateTerminalProperties(t){const e=this.cell,r=this.graph,a=e[t],f=a&&a.cell,h=`${t}View`;if(!f)return this[h]=null,this.updateTerminalMagnet(t),!0;const g=r.getCellById(f);if(!g)throw new Error(`Edge's ${t} node with id "${f}" not exists`);const m=g.findView(r);return m?(this[h]=m,this.updateTerminalMagnet(t),!0):!1}updateTerminalMagnet(t){const e=`${t}Magnet`,r=this.getTerminalView(t);if(r){let a=r.getMagnetFromEdgeTerminal(this.cell[t]);a===r.container&&(a=null),this[e]=a}else this[e]=null}getLabelPositionAngle(t){const e=this.cell.getLabelAt(t);return e&&e.position&&typeof e.position=="object"&&e.position.angle||0}getLabelPositionArgs(t){const e=this.cell.getLabelAt(t);if(e&&e.position&&typeof e.position=="object")return e.position.options}getDefaultLabelPositionArgs(){const t=this.cell.getDefaultLabel();if(t&&t.position&&typeof t.position=="object")return t.position.options}mergeLabelPositionArgs(t,e){return t===null?null:t===void 0?e===null?null:e:xi({},e,t)}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const t=this.cache.pathCache;return ps(t,"data")||(t.data=this.path.serialize()),t.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const t=this.cache.pathCache;return ps(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const t=this.cache.pathCache;return ps(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}getPointAtLength(t){return this.path==null?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(t){return this.path==null?null:(He(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(t){return this.path==null?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(t){return this.path==null?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(t){return this.path==null?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(t){return this.path==null?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(t){return this.path==null?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(t,e,r,a){const f={distance:0};let h=0,g;typeof r=="number"?(h=r,g=a):g=r,g!=null&&(f.options=g);const m=g&&g.absoluteOffset,b=!(g&&g.absoluteDistance),w=g&&g.absoluteDistance&&g.reverseDistance,S=this.path,C={segmentSubdivisions:this.getConnectionSubdivisions()},A=new St(t,e),B=S.closestPointT(A,C),j=this.getConnectionLength()||0;let H=S.lengthAtT(B,C);b&&(H=j>0?H/j:0),w&&(H=-1*(j-H)||1),f.distance=H;let nt;m||(nt=S.tangentAtT(B));let ct;if(nt)ct=nt.pointOffset(A);else{const Y=S.pointAtT(B),Pt=A.diff(Y);ct={x:Pt.x,y:Pt.y}}return f.offset=ct,f.angle=h,f}normalizeLabelPosition(t){return typeof t=="number"?{distance:t}:t}getLabelTransformationMatrix(t){const e=this.normalizeLabelPosition(t),r=e.options||{},a=e.angle||0,f=e.distance,h=f>0&&f<=1;let g=0;const m={x:0,y:0},b=e.offset;b&&(typeof b=="number"?g=b:(b.x!=null&&(m.x=b.x),b.y!=null&&(m.y=b.y)));const w=m.x!==0||m.y!==0||g===0,S=r.keepGradient,C=r.ensureLegibility,A=this.path,B={segmentSubdivisions:this.getConnectionSubdivisions()},j=h?f*this.getConnectionLength():f,H=A.tangentAtLength(j,B);let nt,ct=a;if(H){if(w)nt=H.start,nt.translate(m);else{const Y=H.clone();Y.rotate(-90,H.start),Y.setLength(g),nt=Y.end}S&&(ct=H.angle()+a,C&&(ct=Ni.normalize((ct+90)%180-90)))}else nt=A.start,w&&nt.translate(m);return Ti().translate(nt.x,nt.y).rotate(ct)}getVertexIndex(t,e){const a=this.cell.getVertices(),f=this.getClosestPointLength(new St(t,e));let h=0;if(f!=null)for(const g=a.length;h<g;h+=1){const m=a[h],b=this.getClosestPointLength(m);if(b!=null&&f<b)break}return h}getEventArgs(t,e,r){const a=this,f=a.cell,h=f;return e==null||r==null?{e:t,view:a,edge:f,cell:h}:{e:t,x:e,y:r,view:a,edge:f,cell:h}}notifyUnhandledMouseDown(t,e,r){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:r,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(t,e,r){super.onMouseDown(t,e,r),this.notify("edge:mousedown",this.getEventArgs(t,e,r))}notifyMouseMove(t,e,r){super.onMouseMove(t,e,r),this.notify("edge:mousemove",this.getEventArgs(t,e,r))}notifyMouseUp(t,e,r){super.onMouseUp(t,e,r),this.notify("edge:mouseup",this.getEventArgs(t,e,r))}onClick(t,e,r){super.onClick(t,e,r),this.notify("edge:click",this.getEventArgs(t,e,r))}onDblClick(t,e,r){super.onDblClick(t,e,r),this.notify("edge:dblclick",this.getEventArgs(t,e,r))}onContextMenu(t,e,r){super.onContextMenu(t,e,r),this.notify("edge:contextmenu",this.getEventArgs(t,e,r))}onMouseDown(t,e,r){this.notifyMouseDown(t,e,r),this.startEdgeDragging(t,e,r)}onMouseMove(t,e,r){const a=this.getEventData(t);switch(a.action){case"drag-label":{this.dragLabel(t,e,r);break}case"drag-arrowhead":{this.dragArrowhead(t,e,r);break}case"drag-edge":{this.dragEdge(t,e,r);break}default:break}return this.notifyMouseMove(t,e,r),a}onMouseUp(t,e,r){const a=this.getEventData(t);switch(a.action){case"drag-label":{this.stopLabelDragging(t,e,r);break}case"drag-arrowhead":{this.stopArrowheadDragging(t,e,r);break}case"drag-edge":{this.stopEdgeDragging(t,e,r);break}default:break}return this.notifyMouseUp(t,e,r),this.checkMouseleave(t),a}onMouseOver(t){super.onMouseOver(t),this.notify("edge:mouseover",this.getEventArgs(t))}onMouseOut(t){super.onMouseOut(t),this.notify("edge:mouseout",this.getEventArgs(t))}onMouseEnter(t){super.onMouseEnter(t),this.notify("edge:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("edge:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,r,a){super.onMouseWheel(t,e,r,a),this.notify("edge:mousewheel",Object.assign({delta:a},this.getEventArgs(t,e,r)))}onCustomEvent(t,e,r,a){if(et(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if(e==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,r,a)))}this.notifyMouseDown(t,r,a)}else this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,r,a))),super.onCustomEvent(t,e,r,a)}onLabelMouseDown(t,e,r){this.notifyMouseDown(t,e,r),this.startLabelDragging(t,e,r),this.getEventData(t).stopPropagation&&t.stopPropagation()}startEdgeDragging(t,e,r){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(t,e,r);return}this.setEventData(t,{x:e,y:r,moving:!1,action:"drag-edge"})}dragEdge(t,e,r){const a=this.getEventData(t);a.moving||(a.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:r,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-a.x,r-a.y,{ui:!0}),this.setEventData(t,{x:e,y:r}),this.notify("edge:moving",{e:t,x:e,y:r,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(t,e,r){const a=this.getEventData(t);a.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:r,view:this,cell:this.cell,edge:this.cell})),a.moving=!1}prepareArrowheadDragging(t,e){const r=this.getTerminalMagnet(t),a={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:e.isNewEdge===!0,terminalType:t,initialMagnet:r,initialTerminal:ua(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(a),a}createValidateConnectionArgs(t){const e=[];e[4]=t,e[5]=this;let r,a=0,f=0;t==="source"?(a=2,r="target"):(f=2,r="source");const h=this.cell[r],g=h.cell;if(g){let m;const b=e[a]=this.graph.findViewByCell(g);b&&(m=b.getMagnetFromEdgeTerminal(h),m===b.container&&(m=void 0)),e[a+1]=m}return(m,b)=>(e[f]=m,e[f+1]=m.container===b?void 0:b,e)}beforeArrowheadDragging(t){t.zIndex=this.cell.zIndex,this.cell.toFront();const e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}afterArrowheadDragging(t){t.zIndex!=null&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null);const e=this.container;e.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}validateConnection(t,e,r,a,f,h,g){const m=this.graph.options.connecting,b=m.allowLoop,w=m.allowNode,S=m.allowEdge,C=m.allowPort,A=m.allowMulti,B=m.validateConnection,j=h?h.cell:null,H=f==="target"?r:t,nt=f==="target"?a:e;let ct=!0;const Y=Pt=>{const Xt=f==="source"?g?g.port:null:j?j.getSourcePortId():null,pe=f==="target"?g?g.port:null:j?j.getTargetPortId():null;return bn(Pt,this.graph,{edge:j,edgeView:h,sourceView:t,targetView:r,sourcePort:Xt,targetPort:pe,sourceMagnet:e,targetMagnet:a,sourceCell:t?t.cell:null,targetCell:r?r.cell:null,type:f})};if(b!=null&&(typeof b=="boolean"?!b&&t===r&&(ct=!1):ct=Y(b)),ct&&C!=null&&(typeof C=="boolean"?!C&&nt&&(ct=!1):ct=Y(C)),ct&&S!=null&&(typeof S=="boolean"?!S&&Ga.isEdgeView(H)&&(ct=!1):ct=Y(S)),ct&&w!=null&&nt==null&&(typeof w=="boolean"?!w&&ma.isNodeView(H)&&(ct=!1):ct=Y(w)),ct&&A!=null&&h){const Pt=h.cell,Xt=f==="source"?g:Pt.getSource(),pe=f==="target"?g:Pt.getTarget(),qe=g?this.graph.getCellById(g.cell):null;if(Xt&&pe&&Xt.cell&&pe.cell&&qe)if(typeof A=="function")ct=Y(A);else{const xn=this.graph.model.getConnectedEdges(qe,{outgoing:f==="source",incoming:f==="target"});xn.length&&(A==="withPort"?xn.some(jn=>{const wn=jn.getSource(),Un=jn.getTarget();return wn&&Un&&wn.cell===Xt.cell&&Un.cell===pe.cell&&wn.port!=null&&wn.port===Xt.port&&Un.port!=null&&Un.port===pe.port})&&(ct=!1):A||xn.some(jn=>{const wn=jn.getSource(),Un=jn.getTarget();return wn&&Un&&wn.cell===Xt.cell&&Un.cell===pe.cell})&&(ct=!1))}}return ct&&B!=null&&(ct=Y(B)),ct}allowConnectToBlank(t){const e=this.graph,a=e.options.connecting.allowBlank;if(typeof a!="function")return!!a;const f=e.findViewByCell(t),h=t.getSourceCell(),g=t.getTargetCell(),m=e.findViewByCell(h),b=e.findViewByCell(g);return bn(a,e,{edge:t,edgeView:f,sourceCell:h,targetCell:g,sourceView:m,targetView:b,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:f.sourceMagnet,targetMagnet:f.targetMagnet})}validateEdge(t,e,r){const a=this.graph;if(!this.allowConnectToBlank(t)){const h=t.getSourceCellId(),g=t.getTargetCellId();if(!(h&&g))return!1}const f=a.options.connecting.validateEdge;return f?bn(f,a,{edge:t,type:e,previous:r}):!0}arrowheadDragging(t,e,r,a){a.x=e,a.y=r,a.currentTarget!==t&&(a.currentMagnet&&a.currentView&&a.currentView.unhighlight(a.currentMagnet,{type:"magnetAdsorbed"}),a.currentView=this.graph.findViewByElem(t),a.currentView?(a.currentMagnet=a.currentView.findMagnet(t),a.currentMagnet&&this.validateConnection(...a.getValidateConnectionArgs(a.currentView,a.currentMagnet),a.currentView.getEdgeTerminal(a.currentMagnet,e,r,this.cell,a.terminalType))?a.currentView.highlight(a.currentMagnet,{type:"magnetAdsorbed"}):a.currentMagnet=null):a.currentMagnet=null),a.currentTarget=t,this.cell.prop(a.terminalType,{x:e,y:r},Object.assign(Object.assign({},a.options),{ui:!0}))}arrowheadDragged(t,e,r){const a=t.currentView,f=t.currentMagnet;if(!f||!a)return;a.unhighlight(f,{type:"magnetAdsorbed"});const h=t.terminalType,g=a.getEdgeTerminal(f,e,r,this.cell,h);this.cell.setTerminal(h,g,{ui:!0})}snapArrowhead(t,e,r){const a=this.graph,{snap:f,allowEdge:h}=a.options.connecting,g=typeof f=="object"&&f.radius||50,m=a.renderer.findViewsInArea({x:t-g,y:e-g,width:2*g,height:2*g},{nodeOnly:!0});if(h){const Y=a.renderer.findEdgeViewsFromPoint({x:t,y:e},g).filter(Pt=>Pt!==this);m.push(...Y)}const b=r.closestView||null,w=r.closestMagnet||null;r.closestView=null,r.closestMagnet=null;let S,C=Number.MAX_SAFE_INTEGER;const A=new St(t,e);m.forEach(Y=>{if(Y.container.getAttribute("magnet")!=="false"){if(Y.isNodeView())S=Y.cell.getBBox().getCenter().distance(A);else if(Y.isEdgeView()){const Pt=Y.getClosestPoint(A);Pt?S=Pt.distance(A):S=Number.MAX_SAFE_INTEGER}S<g&&S<C&&(w===Y.container||this.validateConnection(...r.getValidateConnectionArgs(Y,null),Y.getEdgeTerminal(Y.container,t,e,this.cell,r.terminalType)))&&(C=S,r.closestView=Y,r.closestMagnet=Y.container)}Y.container.querySelectorAll("[magnet]").forEach(Pt=>{if(Pt.getAttribute("magnet")!=="false"){const Xt=Y.getBBoxOfElement(Pt);S=A.distance(Xt.getCenter()),S<g&&S<C&&(w===Pt||this.validateConnection(...r.getValidateConnectionArgs(Y,Pt),Y.getEdgeTerminal(Pt,t,e,this.cell,r.terminalType)))&&(C=S,r.closestView=Y,r.closestMagnet=Pt)}})});let B;const j=r.terminalType,H=r.closestView,nt=r.closestMagnet,ct=w!==nt;if(b&&ct&&b.unhighlight(w,{type:"magnetAdsorbed"}),H){if(!ct)return;H.highlight(nt,{type:"magnetAdsorbed"}),B=H.getEdgeTerminal(nt,t,e,this.cell,j)}else B={x:t,y:e};this.cell.setTerminal(j,B,{},Object.assign(Object.assign({},r.options),{ui:!0}))}snapArrowheadEnd(t){const e=t.closestView,r=t.closestMagnet;e&&r&&(e.unhighlight(r,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(r)),t.closestView=null,t.closestMagnet=null}finishEmbedding(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}fallbackConnection(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0});break}}notifyConnectionEvent(t,e){const r=t.terminalType,a=t.initialTerminal,f=this.cell[r];if(f&&!_i.equalTerminals(a,f)){const g=this.graph,m=a,b=m.cell?g.getCellById(m.cell):null,w=m.port,S=b?g.findViewByCell(b):null,C=b||t.isNewEdge?null:St.create(a).toJSON(),A=f,B=A.cell?g.getCellById(A.cell):null,j=A.port,H=B?g.findViewByCell(B):null,nt=B?null:St.create(f).toJSON();this.notify("edge:connected",{e,previousCell:b,previousPort:w,previousView:S,previousPoint:C,currentCell:B,currentView:H,currentPort:j,currentPoint:nt,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:r,isNew:t.isNewEdge})}}highlightAvailableMagnets(t){const e=this.graph,r=e.model.getCells();t.marked={};for(let a=0,f=r.length;a<f;a+=1){const h=e.findViewByCell(r[a]);if(!h||h.cell.id===this.cell.id)continue;const g=Array.prototype.slice.call(h.container.querySelectorAll("[magnet]"));h.container.getAttribute("magnet")!=="false"&&g.push(h.container);const m=g.filter(b=>this.validateConnection(...t.getValidateConnectionArgs(h,b),h.getEdgeTerminal(b,t.x,t.y,this.cell,t.terminalType)));if(m.length>0){for(let b=0,w=m.length;b<w;b+=1)h.highlight(m[b],{type:"magnetAvailable"});h.highlight(null,{type:"nodeAvailable"}),t.marked[h.cell.id]=m}}}unhighlightAvailableMagnets(t){const e=t.marked||{};Object.keys(e).forEach(r=>{const a=this.graph.findViewByCell(r);a&&(e[r].forEach(h=>{a.unhighlight(h,{type:"magnetAvailable"})}),a.unhighlight(null,{type:"nodeAvailable"}))}),t.marked=null}startArrowheadDragging(t,e,r){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(t,e,r);return}const f=t.target.getAttribute("data-terminal"),h=this.prepareArrowheadDragging(f,{x:e,y:r});this.setEventData(t,h)}dragArrowhead(t,e,r){const a=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,r,a):this.arrowheadDragging(this.getEventTarget(t),e,r,a)}stopArrowheadDragging(t,e,r){const a=this.graph,f=this.getEventData(t);a.options.connecting.snap?this.snapArrowheadEnd(f):this.arrowheadDragged(f,e,r),this.validateEdge(this.cell,f.terminalType,f.initialTerminal)?(this.finishEmbedding(f),this.notifyConnectionEvent(f,t)):this.fallbackConnection(f),this.afterArrowheadDragging(f)}startLabelDragging(t,e,r){if(this.can("edgeLabelMovable")){const a=t.currentTarget,f=parseInt(a.getAttribute("data-index"),10),h=this.getLabelPositionAngle(f),g=this.getLabelPositionArgs(f),m=this.getDefaultLabelPositionArgs(),b=this.mergeLabelPositionArgs(g,m);this.setEventData(t,{index:f,positionAngle:h,positionArgs:b,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}dragLabel(t,e,r){const a=this.getEventData(t),f=this.cell.getLabelAt(a.index),h=xi({},f,{position:this.getLabelPosition(e,r,a.positionAngle,a.positionArgs)});this.cell.setLabelAt(a.index,h)}stopLabelDragging(t,e,r){}}(function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag],a=e;return(r==null||r===u.toStringTag)&&typeof a.isNodeView=="function"&&typeof a.isEdgeView=="function"&&typeof a.confirmUpdate=="function"&&typeof a.update=="function"&&typeof a.getConnection=="function"}u.isEdgeView=t})(Ga||(Ga={})),Ga.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),Ga.registry.register("edge",Ga,!0);var Zb=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class $s extends Ki{get options(){return this.graph.options}constructor(t){super(),this.graph=t;const{selectors:e,fragment:r}=Ri.parseJSONMarkup($s.markup);this.background=e.background,this.grid=e.grid,this.svg=e.svg,this.defs=e.defs,this.viewport=e.viewport,this.primer=e.primer,this.stage=e.stage,this.decorator=e.decorator,this.overlay=e.overlay,this.container=this.options.container,this.restore=$s.snapshoot(this.container),tr(this.container,this.prefixClassName("graph")),Ft(this.container,r),this.delegateEvents()}delegateEvents(){const t=this.constructor;return super.delegateEvents(t.events),this}guard(t,e){return t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e)?!0:t.data&&t.data.guarded!==void 0?t.data.guarded:!(e&&e.cell&&jr.isCell(e.cell)||this.svg===t.target||this.container===t.target||this.svg.contains(t.target))}findView(t){return this.graph.findViewByElem(t)}onDblClick(t){this.options.preventDefaultDblClick&&t.preventDefault();const e=this.normalizeEvent(t),r=this.findView(e.target);if(this.guard(e,r))return;const a=this.graph.snapToGrid(e.clientX,e.clientY);r?r.onDblClick(e,a.x,a.y):this.graph.trigger("blank:dblclick",{e,x:a.x,y:a.y})}onClick(t){if(this.getMouseMovedCount(t)<=this.options.clickThreshold){const e=this.normalizeEvent(t),r=this.findView(e.target);if(this.guard(e,r))return;const a=this.graph.snapToGrid(e.clientX,e.clientY);r?r.onClick(e,a.x,a.y):this.graph.trigger("blank:click",{e,x:a.x,y:a.y})}}isPreventDefaultContextMenu(t){let e=this.options.preventDefaultContextMenu;return typeof e=="function"&&(e=bn(e,this.graph,{view:t})),e}onContextMenu(t){const e=this.normalizeEvent(t),r=this.findView(e.target);if(this.isPreventDefaultContextMenu(r)&&t.preventDefault(),this.guard(e,r))return;const a=this.graph.snapToGrid(e.clientX,e.clientY);r?r.onContextMenu(e,a.x,a.y):this.graph.trigger("blank:contextmenu",{e,x:a.x,y:a.y})}delegateDragEvents(t,e){t.data==null&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0,startPosition:{x:t.clientX,y:t.clientY}});const r=this.constructor;this.delegateDocumentEvents(r.documentEvents,t.data),this.undelegateEvents()}getMouseMovedCount(t){return this.getEventData(t).mouseMovedCount||0}onMouseDown(t){const e=this.normalizeEvent(t),r=this.findView(e.target);if(this.guard(e,r))return;this.options.preventDefaultMouseDown&&t.preventDefault();const a=this.graph.snapToGrid(e.clientX,e.clientY);r?r.onMouseDown(e,a.x,a.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(e.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e,x:a.x,y:a.y})),this.delegateDragEvents(e,r)}onMouseMove(t){const e=this.getEventData(t),r=e.startPosition;if(r&&r.x===t.clientX&&r.y===t.clientY||(e.mouseMovedCount==null&&(e.mouseMovedCount=0),e.mouseMovedCount+=1,e.mouseMovedCount<=this.options.moveThreshold))return;const f=this.normalizeEvent(t),h=this.graph.snapToGrid(f.clientX,f.clientY),g=e.currentView;g?g.onMouseMove(f,h.x,h.y):this.graph.trigger("blank:mousemove",{e:f,x:h.x,y:h.y}),this.setEventData(f,e)}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),r=this.graph.snapToGrid(e.clientX,e.clientY),f=this.getEventData(t).currentView;if(f?f.onMouseUp(e,r.x,r.y):this.graph.trigger("blank:mouseup",{e,x:r.x,y:r.y}),!t.isPropagationStopped()){const h=new Da(t,{type:"click",data:t.data});this.onClick(h)}t.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(t){const e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r))if(r)r.onMouseOver(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseover",{e})}}onMouseOut(t){const e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r))if(r)r.onMouseOut(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseout",{e})}}onMouseEnter(t){const e=this.normalizeEvent(t),r=this.findView(e.target);if(this.guard(e,r))return;const a=this.graph.findViewByElem(e.relatedTarget);if(r){if(a===r)return;r.onMouseEnter(e)}else{if(a)return;this.graph.trigger("graph:mouseenter",{e})}}onMouseLeave(t){const e=this.normalizeEvent(t),r=this.findView(e.target);if(this.guard(e,r))return;const a=this.graph.findViewByElem(e.relatedTarget);if(r){if(a===r)return;r.onMouseLeave(e)}else{if(a)return;this.graph.trigger("graph:mouseleave",{e})}}onMouseWheel(t){const e=this.normalizeEvent(t),r=this.findView(e.target);if(this.guard(e,r))return;const a=e.originalEvent,f=this.graph.snapToGrid(a.clientX,a.clientY),h=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail));r?r.onMouseWheel(e,f.x,f.y,h):this.graph.trigger("blank:mousewheel",{e,delta:h,x:f.x,y:f.y})}onCustomEvent(t){const e=t.currentTarget,r=e.getAttribute("event")||e.getAttribute("data-event");if(r){const a=this.findView(e);if(a){const f=this.normalizeEvent(t);if(this.guard(f,a))return;const h=this.graph.snapToGrid(f.clientX,f.clientY);a.onCustomEvent(f,r,h.x,h.y)}}}handleMagnetEvent(t,e){const r=t.currentTarget,a=r.getAttribute("magnet");if(a&&a.toLowerCase()!=="false"){const f=this.findView(r);if(f){const h=this.normalizeEvent(t);if(this.guard(h,f))return;const g=this.graph.snapToGrid(h.clientX,h.clientY);bn(e,this.graph,f,h,r,g.x,g.y)}}}onMagnetMouseDown(t){this.handleMagnetEvent(t,(e,r,a,f,h)=>{e.onMagnetMouseDown(r,a,f,h)})}onMagnetDblClick(t){this.handleMagnetEvent(t,(e,r,a,f,h)=>{e.onMagnetDblClick(r,a,f,h)})}onMagnetContextMenu(t){const e=this.findView(t.target);this.isPreventDefaultContextMenu(e)&&t.preventDefault(),this.handleMagnetEvent(t,(r,a,f,h,g)=>{r.onMagnetContextMenu(a,f,h,g)})}onLabelMouseDown(t){const e=t.currentTarget,r=this.findView(e);if(r){const a=this.normalizeEvent(t);if(this.guard(a,r))return;const f=this.graph.snapToGrid(a.clientX,a.clientY);r.onLabelMouseDown(a,f.x,f.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}Zb([Ki.dispose()],$s.prototype,"dispose",null),function(u){const t=`${Yo.prefixCls}-graph`;u.markup=[{ns:gn.xhtml,tagName:"div",selector:"background",className:`${t}-background`},{ns:gn.xhtml,tagName:"div",selector:"grid",className:`${t}-grid`},{ns:gn.svg,tagName:"svg",selector:"svg",className:`${t}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":gn.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${t}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${t}-svg-primer`},{tagName:"g",selector:"stage",className:`${t}-svg-stage`},{tagName:"g",selector:"decorator",className:`${t}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${t}-svg-overlay`}]}]}];function e(r){const a=r.cloneNode();return r.childNodes.forEach(f=>a.appendChild(f)),()=>{for(Rt(r);r.attributes.length>0;)r.removeAttribute(r.attributes[0].name);for(let f=0,h=a.attributes.length;f<h;f+=1){const g=a.attributes[f];r.setAttribute(g.name,g.value)}a.childNodes.forEach(f=>r.appendChild(f))}}u.snapshoot=e}($s||($s={})),function(u){const t=Yo.prefixCls;u.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${t}-cell`]:"onMouseEnter",[`mouseleave  .${t}-cell`]:"onMouseLeave",[`mouseenter  .${t}-cell-tools`]:"onMouseEnter",[`mouseleave  .${t}-cell-tools`]:"onMouseLeave",[`mousedown   .${t}-cell [event]`]:"onCustomEvent",[`touchstart  .${t}-cell [event]`]:"onCustomEvent",[`mousedown   .${t}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${t}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${t}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${t}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${t}-cell image`]:"onImageDragStart",[`mousedown   .${t}-edge .${t}-edge-label`]:"onLabelMouseDown",[`touchstart  .${t}-edge .${t}-edge-label`]:"onLabelMouseDown"},u.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}($s||($s={}));const $b=`.x6-graph {
  position: relative;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;class Jo extends Qe{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(t){super(),this.graph=t,this.init()}init(){}}var Hb=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class np extends Jo{init(){Yo.autoInsertCSS&&em("core",$b)}dispose(){nm("core")}}Hb([np.dispose()],np.prototype,"dispose",null);var E0=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e},Zd;(function(u){function t(e){const{grid:r,panning:a,mousewheel:f,embedding:h}=e,g=E0(e,["grid","panning","mousewheel","embedding"]),m=e.container;if(m!=null)g.width==null&&(g.width=m.clientWidth),g.height==null&&(g.height=m.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const b=xi({},u.defaults,g),w={size:10,visible:!1};return typeof r=="number"?b.grid={size:r,visible:!1}:typeof r=="boolean"?b.grid=Object.assign(Object.assign({},w),{visible:r}):b.grid=Object.assign(Object.assign({},w),r),["panning","mousewheel","embedding"].forEach(C=>{const A=e[C];typeof A=="boolean"?b[C].enabled=A:b[C]=Object.assign(Object.assign({},b[C]),A)}),b}u.get=t})(Zd||(Zd={})),function(u){u.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Yo.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Yo.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection({type:t,sourceView:e,targetView:r}){return(t==="target"?r:e)!=null},createEdge(){return new gc}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(Zd||(Zd={}));var w0=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f},rp=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class Tv extends Jo{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())}getGridSize(){return this.grid.size}setGridSize(t){this.grid.size=Math.max(t,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()}update(t={}){const e=this.grid.size;if(e<=1||!this.grid.visible)return this.clear();const r=this.graph.matrix(),a=this.getInstance(),f=Array.isArray(t)?t:[t];this.patterns.forEach((m,b)=>{const w=`pattern_${b}`,S=r.a||1,C=r.d||1,{update:A,markup:B}=m,j=rp(m,["update","markup"]),H=Object.assign(Object.assign(Object.assign({},j),f[b]),{sx:S,sy:C,ox:r.e||0,oy:r.f||0,width:e*S,height:e*C});a.has(w)||a.add(w,Sr.create("pattern",{id:w,patternUnits:"userSpaceOnUse"},Sr.createVectors(B)).node);const nt=a.get(w);typeof A=="function"&&A(nt.childNodes[0],H);let ct=H.ox%H.width;ct<0&&(ct+=H.width);let Y=H.oy%H.height;Y<0&&(Y+=H.height),Ye(nt,{x:ct,y:Y,width:H.width,height:H.height})});const h=new XMLSerializer().serializeToString(a.root),g=`url(data:image/svg+xml;base64,${btoa(h)})`;this.elem.style.backgroundImage=g}getInstance(){return this.instance||(this.instance=new vu),this.instance}resolveGrid(t){if(!t)return[];const e=t.type;if(e==null)return[Object.assign(Object.assign({},vu.presets.dot),t.args)];const r=vu.registry.get(e);if(r){let a=t.args||[];return Array.isArray(a)||(a=[a]),Array.isArray(r)?r.map((f,h)=>Object.assign(Object.assign({},f),a[h])):[Object.assign(Object.assign({},r),a[0])]}return vu.registry.onNotFound(e)}dispose(){this.stopListening(),this.clear()}}w0([Jo.dispose()],Tv.prototype,"dispose",null);class S0 extends Jo{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),Ti(this.viewportMatrix)}setMatrix(t){const e=Ti(t),r=af(e);this.viewport.setAttribute("transform",r),this.viewportMatrix=e,this.viewportTransformString=r}resize(t,e){let r=t===void 0?this.options.width:t,a=e===void 0?this.options.height:e;this.options.width=r,this.options.height=a,typeof r=="number"&&(r=Math.round(r)),typeof a=="number"&&(a=Math.round(a)),this.container.style.width=r==null?"":`${r}px`,this.container.style.height=a==null?"":`${a}px`;const f=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},f)),this}getComputedSize(){let t=this.options.width,e=this.options.height;return Pe(t)||(t=this.container.clientWidth),Pe(e)||(e=this.container.clientHeight),{width:t,height:e}}getScale(){return jp(this.getMatrix())}scale(t,e=t,r=0,a=0){if(t=this.clampScale(t),e=this.clampScale(e),r||a){const h=this.getTranslation(),g=h.tx-r*(t-1),m=h.ty-a*(e-1);(g!==h.tx||m!==h.ty)&&this.translate(g,m)}const f=this.getMatrix();return f.a=t,f.d=e,this.setMatrix(f),this.graph.trigger("scale",{sx:t,sy:e,ox:r,oy:a}),this}clampScale(t){const e=this.graph.options.scaling;return Nt(t,e.min||.01,e.max||16)}getZoom(){return this.getScale().sx}zoom(t,e){e=e||{};let r=t,a=t;const f=this.getScale(),h=this.getComputedSize();let g=h.width/2,m=h.height/2;if(e.absolute||(r+=f.sx,a+=f.sy),e.scaleGrid&&(r=Math.round(r/e.scaleGrid)*e.scaleGrid,a=Math.round(a/e.scaleGrid)*e.scaleGrid),e.maxScale&&(r=Math.min(e.maxScale,r),a=Math.min(e.maxScale,a)),e.minScale&&(r=Math.max(e.minScale,r),a=Math.max(e.minScale,a)),e.center&&(g=e.center.x,m=e.center.y),r=this.clampScale(r),a=this.clampScale(a),g||m){const b=this.getTranslation(),w=g-(g-b.tx)*(r/f.sx),S=m-(m-b.ty)*(a/f.sy);(w!==b.tx||S!==b.ty)&&this.translate(w,S)}return this.scale(r,a),this}getRotation(){return Up(this.getMatrix())}rotate(t,e,r){if(e==null||r==null){const f=pi.getBBox(this.stage);e=f.width/2,r=f.height/2}const a=this.getMatrix().translate(e,r).rotate(t).translate(-e,-r);return this.setMatrix(a),this}getTranslation(){return Vp(this.getMatrix())}translate(t,e){const r=this.getMatrix();r.e=t||0,r.f=e||0,this.setMatrix(r);const a=this.getTranslation();return this.options.x=a.tx,this.options.y=a.ty,this.graph.trigger("translate",Object.assign({},a)),this}setOrigin(t,e){return this.translate(t||0,e||0)}fitToContent(t,e,r,a){if(typeof t=="object"){const Y=t;t=Y.gridWidth||1,e=Y.gridHeight||1,r=Y.padding||0,a=Y}else t=t||1,e=e||1,r=r||0,a==null&&(a={});const f=Ee(r),h=a.border||0,g=a.contentArea?pn.create(a.contentArea):this.getContentArea(a);h>0&&g.inflate(h);const m=this.getScale(),b=this.getTranslation(),w=m.sx,S=m.sy;g.x*=w,g.y*=S,g.width*=w,g.height*=S;let C=Math.max(Math.ceil((g.width+g.x)/t),1)*t,A=Math.max(Math.ceil((g.height+g.y)/e),1)*e,B=0,j=0;(a.allowNewOrigin==="negative"&&g.x<0||a.allowNewOrigin==="positive"&&g.x>=0||a.allowNewOrigin==="any")&&(B=Math.ceil(-g.x/t)*t,B+=f.left,C+=B),(a.allowNewOrigin==="negative"&&g.y<0||a.allowNewOrigin==="positive"&&g.y>=0||a.allowNewOrigin==="any")&&(j=Math.ceil(-g.y/e)*e,j+=f.top,A+=j),C+=f.right,A+=f.bottom,C=Math.max(C,a.minWidth||0),A=Math.max(A,a.minHeight||0),C=Math.min(C,a.maxWidth||Number.MAX_SAFE_INTEGER),A=Math.min(A,a.maxHeight||Number.MAX_SAFE_INTEGER);const H=this.getComputedSize(),nt=C!==H.width||A!==H.height;return(B!==b.tx||j!==b.ty)&&this.translate(B,j),nt&&this.resize(C,A),new pn(-B/w,-j/S,C/w,A/S)}scaleContentToFit(t={}){this.scaleContentToFitImpl(t)}scaleContentToFitImpl(t={},e=!0){let r,a;if(t.contentArea){const nt=t.contentArea;r=this.graph.localToGraph(nt),a=St.create(nt)}else r=this.getContentBBox(t),a=this.graph.graphToLocal(r);if(!r.width||!r.height)return;const f=Ee(t.padding),h=t.minScale||0,g=t.maxScale||Number.MAX_SAFE_INTEGER,m=t.minScaleX||h,b=t.maxScaleX||g,w=t.minScaleY||h,S=t.maxScaleY||g;let C;if(t.viewportArea)C=t.viewportArea;else{const nt=this.getComputedSize(),ct=this.getTranslation();C={x:ct.tx,y:ct.ty,width:nt.width,height:nt.height}}C=pn.create(C).moveAndExpand({x:f.left,y:f.top,width:-f.left-f.right,height:-f.top-f.bottom});const A=this.getScale();let B=C.width/r.width*A.sx,j=C.height/r.height*A.sy;t.preserveAspectRatio!==!1&&(B=j=Math.min(B,j));const H=t.scaleGrid;if(H&&(B=H*Math.floor(B/H),j=H*Math.floor(j/H)),B=Nt(B,m,b),j=Nt(j,w,S),this.scale(B,j),e){const nt=this.options,ct=C.x-a.x*B-nt.x,Y=C.y-a.y*j-nt.y;this.translate(ct,Y)}}getContentArea(t={}){return t.useCellGeometry!==!1?this.model.getAllCellsBBox()||new pn:pi.getBBox(this.stage)}getContentBBox(t={}){return this.graph.localToGraph(this.getContentArea(t))}getGraphArea(){const t=pn.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)}zoomToRect(t,e={}){const r=pn.create(t),a=this.graph;e.contentArea=r,e.viewportArea==null&&(e.viewportArea={x:a.options.x,y:a.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);const f=r.getCenter();return this.centerPoint(f.x,f.y),this}zoomToFit(t={}){return this.zoomToRect(this.getContentArea(t),t)}centerPoint(t,e){const r=this.getComputedSize(),a=this.getScale(),f=this.getTranslation(),h=r.width/2,g=r.height/2;t=typeof t=="number"?t:h,e=typeof e=="number"?e:g,t=h-t*a.sx,e=g-e*a.sy,(f.tx!==t||f.ty!==e)&&this.translate(t,e)}centerContent(t){const r=this.graph.getContentArea(t).getCenter();this.centerPoint(r.x,r.y)}centerCell(t){return this.positionCell(t,"center")}positionPoint(t,e,r){const a=this.getComputedSize();e=ie(e,Math.max(0,a.width)),e<0&&(e=a.width+e),r=ie(r,Math.max(0,a.height)),r<0&&(r=a.height+r);const f=this.getTranslation(),h=this.getScale(),g=e-t.x*h.sx,m=r-t.y*h.sy;(f.tx!==g||f.ty!==m)&&this.translate(g,m)}positionRect(t,e){const r=pn.create(t);switch(e){case"center":return this.positionPoint(r.getCenter(),"50%","50%");case"top":return this.positionPoint(r.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%");case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(r.getTopLeft(),0,0);default:return this}}positionCell(t,e){const r=t.getBBox();return this.positionRect(r,e)}positionContent(t,e){const r=this.graph.getContentArea(e);return this.positionRect(r,t)}}var Wb=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class Av extends Jo{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(t={}){let e=t.size||"auto auto",r=t.position||"center";const a=this.graph.transform.getScale(),f=this.graph.translate();if(typeof r=="object"){const h=f.tx+a.sx*(r.x||0),g=f.ty+a.sy*(r.y||0);r=`${h}px ${g}px`}typeof e=="object"&&(e=pn.fromSize(e).scale(a.sx,a.sy),e=`${e.width}px ${e.height}px`),this.elem.style.backgroundSize=e,this.elem.style.backgroundPosition=r}drawBackgroundImage(t,e={}){if(!(t instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const r=this.optionsCache;if(r&&r.image!==e.image)return;let a;const f=e.opacity,h=e.size;let g=e.repeat||"no-repeat";const m=Nd.registry.get(g);if(typeof m=="function"){const w=e.quality||1;t.width*=w,t.height*=w;const S=m(t,e);if(!(S instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");a=S.toDataURL("image/png"),e.repeat&&g!==e.repeat?g=e.repeat:g="repeat",typeof h=="object"?(h.width*=S.width/t.width,h.height*=S.height/t.height):h===void 0&&(e.size={width:S.width/w,height:S.height/w})}else a=t.src,h===void 0&&(e.size={width:t.width,height:t.height});r!=null&&typeof e.size=="object"&&e.image===r.image&&e.repeat===r.repeat&&e.quality===r.quality&&(r.size=ua(e.size));const b=this.elem.style;b.backgroundImage=`url(${a})`,b.backgroundRepeat=g,b.opacity=f==null||f>=1?"":`${f}`,this.updateBackgroundImage(e)}updateBackgroundColor(t){this.elem.style.backgroundColor=t||""}updateBackgroundOptions(t){this.graph.options.background=t}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(t){const e=t||{};if(this.updateBackgroundOptions(t),this.updateBackgroundColor(e.color),e.image){this.optionsCache=ua(e);const r=document.createElement("img");r.onload=()=>this.drawBackgroundImage(r,t),r.setAttribute("crossorigin","anonymous"),r.src=e.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}Wb([Jo.dispose()],Av.prototype,"dispose",null);var Xb=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class _0 extends Jo{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.startListening(),this.updateClassName()}startListening(){const t=this.widgetOptions.eventTypes;t&&(t.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),Ns.on(this.graph.container,"mousedown",this.onRightMouseDown)),t.includes("mouseWheel")&&(this.mousewheelHandle=new Mg(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const t=this.widgetOptions.eventTypes;t&&(t.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&Ns.off(this.graph.container,"mousedown",this.onRightMouseDown),t.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e:t}){const e=this.graph.getPlugin("selection"),r=e&&e.allowRubberband(t,!0);(this.allowPanning(t,!0)||this.allowPanning(t)&&!r)&&this.startPanning(t)}allowPanning(t,e){return this.pannable&&cl.isMatch(t,this.widgetOptions.modifiers,e)}startPanning(t){const e=this.view.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.panning=!0,this.updateClassName(),Ns.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),Ns.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(t){const e=this.view.normalizeEvent(t),r=e.clientX-this.clientX,a=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY,this.graph.translateBy(r,a)}stopPanning(t){this.panning=!1,this.updateClassName(),Ns.off(document.body,".panning"),Ns.off(window,".panning")}updateClassName(){const t=this.view.container,e=this.view.prefixClassName("graph-panning"),r=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(tr(t,e),ei(t,r)):(ei(t,e),tr(t,r)):(ei(t,e),ei(t,r))}onRightMouseDown(t){t.button===2&&this.allowPanning(t,!0)&&this.startPanning(t)}allowMouseWheel(t){return this.pannable&&!t.ctrlKey}onMouseWheel(t,e,r){t.ctrlKey||this.graph.translateBy(-e,-r)}autoPanning(t,e){const a=this.graph.getGraphArea();let f=0,h=0;t<=a.left+10&&(f=-10),e<=a.top+10&&(h=-10),t>=a.right-10&&(f=10),e>=a.bottom-10&&(h=10),(f!==0||h!==0)&&this.graph.translateBy(-f,-h)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}Xb([Jo.dispose()],_0.prototype,"dispose",null);var Ov=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class $d extends Jo{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new Mg(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return this.widgetOptions.enabled!==!0}enable(t){(this.disabled||t)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(t){const e=this.widgetOptions.guard;return(e==null||e.call(t))&&cl.isMatch(t,this.widgetOptions.modifiers)}onMouseWheel(t){const e=this.widgetOptions.guard;if((e==null||e.call(t))&&cl.isMatch(t,this.widgetOptions.modifiers)){const r=this.widgetOptions.factor||1.2;this.currentScale==null&&(this.startPos={x:t.clientX,y:t.clientY},this.currentScale=this.graph.transform.getScale().sx),t.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*r*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/r)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const f=this.currentScale;let h=this.graph.transform.clampScale(f*this.cumulatedFactor);const g=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,m=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if(h=Nt(h,g,m),h!==f)if(this.widgetOptions.zoomAtMousePosition){const w=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(h,{absolute:!0,center:w.clone()})}else this.graph.zoom(h,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}Ov([Qe.dispose()],$d.prototype,"dispose",null);var C0=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class Ef extends Jo{init(){this.resetRenderArea=rn(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const t=this.graph.getGraphArea();this.graph.renderer.setRenderArea(t)}}dispose(){this.stopListening()}}C0([Jo.dispose()],Ef.prototype,"dispose",null);class Yb{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(t){if(t.priority&wu.PRIOR)t.cb();else{const e=this.findInsertionIndex(t);e>=0&&this.queue.splice(e,0,t)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const t=this.getCurrentTime();let e;for(;(e=this.queue.shift())&&(e.cb(),!(this.getCurrentTime()-t>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){this.isFlushPending=!1,this.isFlushing=!0;let t;for(;t=this.queue.shift();)try{t.cb()}catch(e){console.log(e)}this.isFlushing=!1}findInsertionIndex(t){let e=0,r=this.queue.length,a=r-1;const f=t.priority;for(;e<=a;){const h=(a-e>>1)+e;f<=this.queue[h].priority?e=h+1:(r=h,a=h-1)}return r}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return typeof performance=="object"&&typeof performance.now=="function"?performance.now():Date.now()-this.initialTime}}var wu;(function(u){u[u.RenderEdge=2]="RenderEdge",u[u.RenderNode=4]="RenderNode",u[u.Update=8]="Update",u[u.PRIOR=1048576]="PRIOR"})(wu||(wu={}));var Kb=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class vo extends Qe{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(t){super(),this.views={},this.willRemoveViews={},this.queue=new Yb,this.graph=t,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:t}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews(),this.renderViews(this.model.getCells(),t)}onCellAdded({cell:t,options:e}){this.renderViews([t],e)}onCellRemoved({cell:t}){this.removeViews([t])}onCellZIndexChanged({cell:t,options:e}){const r=this.views[t.id];r&&this.requestViewUpdate(r.view,vo.FLAG_INSERT,e,wu.Update,!0)}onCellVisibleChanged({cell:t,current:e}){this.toggleVisible(t,!!e)}requestViewUpdate(t,e,r={},a=wu.Update,f=!0){const h=t.cell.id,g=this.views[h];if(!g)return;g.flag=e,g.options=r;const m=t.hasAction(e,["translate","resize","rotate"]);t.isNodeView()&&m&&(a=wu.PRIOR,f=!1),this.queue.queueJob({id:h,priority:a,cb:()=>{this.renderViewInArea(t,e,r)}}),this.getEffectedEdges(t).forEach(w=>{this.requestViewUpdate(w.view,w.flag,r,a,!1)}),f&&this.flush()}setRenderArea(t){this.renderArea=t,this.flushWaittingViews()}isViewMounted(t){if(t==null)return!1;const e=this.views[t.cell.id];return e?e.state===vo.ViewState.MOUNTED:!1}renderViews(t,e={}){t.sort((r,a)=>r.isNode()&&a.isEdge()?-1:0),t.forEach(r=>{const a=r.id,f=this.views;let h=0,g=f[a];if(g)h=vo.FLAG_INSERT;else{const m=this.createCellView(r);m&&(m.graph=this.graph,h=vo.FLAG_INSERT|m.getBootstrapFlag(),g={view:m,flag:h,options:e,state:vo.ViewState.CREATED},this.views[a]=g)}g&&this.requestViewUpdate(g.view,h,e,this.getRenderPriority(g.view),!1)}),this.flush()}renderViewInArea(t,e,r={}){const a=t.cell,f=a.id,h=this.views[f];if(!h)return;let g=0;this.isUpdateable(t)?(g=this.updateView(t,e,r),h.flag=g):h.state===vo.ViewState.MOUNTED?(g=this.updateView(t,e,r),h.flag=g):h.state=vo.ViewState.WAITTING,g&&a.isEdge()&&!(g&t.getFlag(["source","target"]))&&this.queue.queueJob({id:f,priority:wu.RenderEdge,cb:()=>{this.updateView(t,e,r)}})}removeViews(t){t.forEach(e=>{const r=e.id,a=this.views[r];a&&(this.willRemoveViews[r]=a,delete this.views[r],this.queue.queueJob({id:r,priority:this.getRenderPriority(a.view),cb:()=>{this.removeView(a.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaittingViews(){Object.values(this.views).forEach(t=>{if(t&&t.state===vo.ViewState.WAITTING){const{view:e,flag:r,options:a}=t;this.requestViewUpdate(e,r,a,this.getRenderPriority(e),!1)}}),this.flush()}updateView(t,e,r={}){if(t==null)return 0;if(Bo.isCellView(t)){if(e&vo.FLAG_REMOVE)return this.removeView(t.cell),0;e&vo.FLAG_INSERT&&(this.insertView(t),e^=vo.FLAG_INSERT)}return e?t.confirmUpdate(e,r):0}insertView(t){const e=this.views[t.cell.id];if(e){const r=t.cell.getZIndex(),a=this.addZPivot(r);this.container.insertBefore(t.container,a),t.cell.isVisible()||this.toggleVisible(t.cell,!1),e.state=vo.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:t})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(t=>{t&&this.removeView(t.view)}),this.views={},this.willRemoveViews={}}removeView(t){const e=t.cell,r=this.willRemoveViews[e.id];r&&t&&(r.view.remove(),delete this.willRemoveViews[e.id],this.graph.trigger("view:unmounted",{view:t}))}toggleVisible(t,e){const r=this.model.getConnectedEdges(t);for(let f=0,h=r.length;f<h;f+=1){const g=r[f];if(e){const m=g.getSourceCell(),b=g.getTargetCell();if(m&&!m.isVisible()||b&&!b.isVisible())continue;this.toggleVisible(g,!0)}else this.toggleVisible(g,!1)}const a=this.views[t.id];a&&nf(a.view.container,{display:e?"unset":"none"})}addZPivot(t=0){this.zPivots==null&&(this.zPivots={});const e=this.zPivots;let r=e[t];if(r)return r;r=e[t]=document.createComment(`z-index:${t+1}`);let a=-1/0;for(const h in e){const g=+h;g<t&&g>a&&(a=g,t-1)}const f=this.container;if(a!==-1/0){const h=e[a];f.insertBefore(r,h.nextSibling)}else f.insertBefore(r,f.firstChild);return r}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(t=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}createCellView(t){const e={graph:this.graph},r=this.graph.options.createCellView;if(r){const f=bn(r,this.graph,t);if(f)return new f(t,e);if(f===null)return null}const a=t.view;if(a!=null&&typeof a=="string"){const f=Bo.registry.get(a);return f?new f(t,e):Bo.registry.onNotFound(a)}return t.isNode()?new ma(t,e):t.isEdge()?new Ga(t,e):null}getEffectedEdges(t){const e=[],r=t.cell,a=this.model.getConnectedEdges(r);for(let f=0,h=a.length;f<h;f+=1){const g=a[f],m=this.views[g.id];if(!m)continue;const b=m.view;if(!this.isViewMounted(b))continue;const w=["update"];g.getTargetCell()===r&&w.push("target"),g.getSourceCell()===r&&w.push("source"),e.push({id:g.id,view:b,flag:b.getFlag(w)})}return e}isUpdateable(t){if(t.isNodeView()){if(!this.renderArea)return!0;const e=t.cell;return this.renderArea.isIntersectWithRect(e.getBBox())}if(t.isEdgeView()){const e=t.cell,r=e.getSourceCell(),a=e.getTargetCell();if(r){const f=this.views[r.id];if(f&&!this.isViewMounted(f.view))return!1}if(a){const f=this.views[a.id];if(f&&!this.isViewMounted(f.view))return!1}}return!0}getRenderPriority(t){return t.cell.isNode()?wu.RenderNode:wu.RenderEdge}dispose(){this.stopListening()}}Kb([Qe.dispose()],vo.prototype,"dispose",null),function(u){u.FLAG_INSERT=1<<30,u.FLAG_REMOVE=1<<29,u.FLAG_RENDER=(1<<26)-1}(vo||(vo={})),function(u){let t;(function(e){e[e.CREATED=0]="CREATED",e[e.MOUNTED=1]="MOUNTED",e[e.WAITTING=2]="WAITTING"})(t=u.ViewState||(u.ViewState={}))}(vo||(vo={}));var Ph=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class Mv extends Jo{constructor(){super(...arguments),this.schedule=new vo(this.graph)}requestViewUpdate(t,e,r={}){this.schedule.requestViewUpdate(t,e,r)}isViewMounted(t){return this.schedule.isViewMounted(t)}setRenderArea(t){this.schedule.setRenderArea(t)}findViewByElem(t){if(t==null)return null;const e=this.options.container,r=typeof t=="string"?e.querySelector(t):t instanceof Element?t:t[0];if(r){const a=this.graph.view.findAttr("data-cell-id",r);if(a){const f=this.schedule.views;if(f[a])return f[a].view}}return null}findViewByCell(t){if(t==null)return null;const e=jr.isCell(t)?t.id:t,r=this.schedule.views;return r[e]?r[e].view:null}findViewsFromPoint(t){const e={x:t.x,y:t.y};return this.model.getCells().map(r=>this.findViewByCell(r)).filter(r=>r!=null?pi.getBBox(r.container,{target:this.view.stage}).containsPoint(e):!1)}findEdgeViewsFromPoint(t,e=5){return this.model.getEdges().map(r=>this.findViewByCell(r)).filter(r=>{if(r!=null){const a=r.getClosestPoint(t);if(a)return a.distance(t)<=e}return!1})}findViewsInArea(t,e={}){const r=pn.create(t);return this.model.getCells().map(a=>this.findViewByCell(a)).filter(a=>{if(a){if(e.nodeOnly&&!a.isNodeView())return!1;const f=pi.getBBox(a.container,{target:this.view.stage});return f.width===0?f.inflate(1,0):f.height===0&&f.inflate(0,1),e.strict?r.containsRect(f):r.isIntersectWithRect(f)}return!1})}dispose(){this.schedule.dispose()}}Ph([Jo.dispose()],Mv.prototype,"dispose",null);var T0=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class A0 extends Jo{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(t){return this.svg.getElementById(t)!=null}filter(t){let e=t.id;const r=t.name;if(e||(e=`filter-${r}-${this.cid}-${ge(JSON.stringify(t))}`),!this.isDefined(e)){const a=yh.registry.get(r);if(a==null)return yh.registry.onNotFound(r);const f=a(t.args||{}),h=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},t.attrs),{id:e});Sr.create(Ri.sanitize(f),h).appendTo(this.defs)}return e}gradient(t){let e=t.id;const r=t.type;if(e||(e=`gradient-${r}-${this.cid}-${ge(JSON.stringify(t))}`),!this.isDefined(e)){const f=t.stops.map(m=>{const b=m.opacity!=null&&Number.isFinite(m.opacity)?m.opacity:1;return`<stop offset="${m.offset}" stop-color="${m.color}" stop-opacity="${b}"/>`}),h=`<${r}>${f.join("")}</${r}>`,g=Object.assign({id:e},t.attrs);Sr.create(h,g).appendTo(this.defs)}return e}marker(t){const{id:e,refX:r,refY:a,markerUnits:f,markerOrient:h,tagName:g,children:m}=t,b=T0(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let w=e;if(w||(w=`marker-${this.cid}-${ge(JSON.stringify(t))}`),!this.isDefined(w)){g!=="path"&&delete b.d;const S=Sr.create("marker",{refX:r,refY:a,id:w,overflow:"visible",orient:h!=null?h:"auto",markerUnits:f||"userSpaceOnUse"},m?m.map(C=>{var{tagName:A}=C,B=T0(C,["tagName"]);return Sr.create(`${A}`||"path",ln(Object.assign(Object.assign({},b),B)))}):[Sr.create(g||"path",ln(b))]);this.defs.appendChild(S.node)}return w}remove(t){const e=this.svg.getElementById(t);e&&e.parentNode&&e.parentNode.removeChild(e)}}class Iv extends Jo{getClientMatrix(){return Ti(this.view.stage.getScreenCTM())}getClientOffset(){const t=this.view.svg.getBoundingClientRect();return new St(t.left,t.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(t,e){return(typeof t=="number"?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(t,e){const r=St.create(t,e);return pi.transformPoint(r,this.graph.matrix())}localToClientPoint(t,e){const r=St.create(t,e);return pi.transformPoint(r,this.getClientMatrix())}localToPagePoint(t,e){return(typeof t=="number"?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())}localToGraphRect(t,e,r,a){const f=pn.create(t,e,r,a);return pi.transformRectangle(f,this.graph.matrix())}localToClientRect(t,e,r,a){const f=pn.create(t,e,r,a);return pi.transformRectangle(f,this.getClientMatrix())}localToPageRect(t,e,r,a){return(typeof t=="number"?this.localToGraphRect(t,e,r,a):this.localToGraphRect(t)).translate(this.getPageOffset())}graphToLocalPoint(t,e){const r=St.create(t,e);return pi.transformPoint(r,this.graph.matrix().inverse())}clientToLocalPoint(t,e){const r=St.create(t,e);return pi.transformPoint(r,this.getClientMatrix().inverse())}clientToGraphPoint(t,e){const r=St.create(t,e);return pi.transformPoint(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(t,e){const a=St.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(a)}graphToLocalRect(t,e,r,a){const f=pn.create(t,e,r,a);return pi.transformRectangle(f,this.graph.matrix().inverse())}clientToLocalRect(t,e,r,a){const f=pn.create(t,e,r,a);return pi.transformRectangle(f,this.getClientMatrix().inverse())}clientToGraphRect(t,e,r,a){const f=pn.create(t,e,r,a);return pi.transformRectangle(f,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(t,e,r,a){const f=pn.create(t,e,r,a),h=this.getPageOffset();return f.x-=h.x,f.y-=h.y,this.graphToLocalRect(f)}}var fx=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class ip extends Jo{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:t,magnet:e,options:r={}}){const a=this.resolveHighlighter(r);if(!a)return;const f=this.getHighlighterId(e,a);if(!this.highlights[f]){const h=a.highlighter;h.highlight(t,e,Object.assign({},a.args)),this.highlights[f]={cellView:t,magnet:e,highlighter:h,args:a.args}}}onCellUnhighlight({magnet:t,options:e={}}){const r=this.resolveHighlighter(e);if(!r)return;const a=this.getHighlighterId(t,r);this.unhighlight(a)}resolveHighlighter(t){const e=this.options;let r=t.highlighter;if(r==null){const g=t.type;r=g&&e.highlighting[g]||e.highlighting.default}if(r==null)return null;const a=typeof r=="string"?{name:r}:r,f=a.name,h=yu.registry.get(f);return h==null?yu.registry.onNotFound(f):(yu.check(f,h),{name:f,highlighter:h,args:a.args||{}})}getHighlighterId(t,e){return Ui(t),e.name+t.id+JSON.stringify(e.args)}unhighlight(t){const e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])}dispose(){Object.keys(this.highlights).forEach(t=>this.unhighlight(t)),this.stopListening()}}fx([ip.dispose()],ip.prototype,"dispose",null);var hx=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class O0 extends Jo{getScroller(){const t=this.graph.getPlugin("scroller");return t&&t.options.enabled?t:null}getContainer(){const t=this.getScroller();return t?t.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const t=this.options.autoResize;if(t)return typeof t=="boolean"?this.getContainer():t}init(){if(this.options.autoResize){const e=this.getSensorTarget();e&&Od.bind(e,()=>{const r=e.offsetWidth,a=e.offsetHeight;this.resize(r,a)})}}resize(t,e){const r=this.getScroller();r?r.resize(t,e):this.graph.transform.resize(t,e)}dispose(){Od.clear(this.graph.container)}}hx([Jo.dispose()],O0.prototype,"dispose",null);var op=function(u,t,e,r){var a=arguments.length,f=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,t,e,r);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(f=(a<3?h(f):a>3?h(t,e,f):h(t,e))||f);return a>3&&f&&Object.defineProperty(t,e,f),f};class Hs extends cs{get container(){return this.options.container}get[Symbol.toStringTag](){return Hs.toStringTag}constructor(t){super(),this.installedPlugins=new Set,this.options=Zd.get(t),this.css=new np(this),this.view=new $s(this),this.defs=new A0(this),this.coord=new Iv(this),this.transform=new S0(this),this.highlight=new ip(this),this.grid=new Tv(this),this.background=new Av(this),this.options.model?this.model=this.options.model:(this.model=new _o,this.model.graph=this),this.renderer=new Mv(this),this.panning=new _0(this),this.mousewheel=new $d(this),this.virtualRender=new Ef(this),this.size=new O0(this)}isNode(t){return t.isNode()}isEdge(t){return t.isEdge()}resetCells(t,e={}){return this.model.resetCells(t,e),this}clearCells(t={}){return this.model.clear(t),this}toJSON(t={}){return this.model.toJSON(t)}parseJSON(t){return this.model.parseJSON(t)}fromJSON(t,e={}){return this.model.fromJSON(t,e),this}getCellById(t){return this.model.getCell(t)}addNode(t,e={}){return this.model.addNode(t,e)}addNodes(t,e={}){return this.addCell(t.map(r=>po.isNode(r)?r:this.createNode(r)),e)}createNode(t){return this.model.createNode(t)}removeNode(t,e={}){return this.model.removeCell(t,e)}addEdge(t,e={}){return this.model.addEdge(t,e)}addEdges(t,e={}){return this.addCell(t.map(r=>_i.isEdge(r)?r:this.createEdge(r)),e)}removeEdge(t,e={}){return this.model.removeCell(t,e)}createEdge(t){return this.model.createEdge(t)}addCell(t,e={}){return this.model.addCell(t,e),this}removeCell(t,e={}){return this.model.removeCell(t,e)}removeCells(t,e={}){return this.model.removeCells(t,e)}removeConnectedEdges(t,e={}){return this.model.removeConnectedEdges(t,e)}disconnectConnectedEdges(t,e={}){return this.model.disconnectConnectedEdges(t,e),this}hasCell(t){return this.model.has(t)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(t){return this.model.getOutgoingEdges(t)}getIncomingEdges(t){return this.model.getIncomingEdges(t)}getConnectedEdges(t,e={}){return this.model.getConnectedEdges(t,e)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(t){return this.model.isRoot(t)}isLeafNode(t){return this.model.isLeaf(t)}getNeighbors(t,e={}){return this.model.getNeighbors(t,e)}isNeighbor(t,e,r={}){return this.model.isNeighbor(t,e,r)}getSuccessors(t,e={}){return this.model.getSuccessors(t,e)}isSuccessor(t,e,r={}){return this.model.isSuccessor(t,e,r)}getPredecessors(t,e={}){return this.model.getPredecessors(t,e)}isPredecessor(t,e,r={}){return this.model.isPredecessor(t,e,r)}getCommonAncestor(...t){return this.model.getCommonAncestor(...t)}getSubGraph(t,e={}){return this.model.getSubGraph(t,e)}cloneSubGraph(t,e={}){return this.model.cloneSubGraph(t,e)}cloneCells(t){return this.model.cloneCells(t)}getNodesFromPoint(t,e){return this.model.getNodesFromPoint(t,e)}getNodesInArea(t,e,r,a,f){return this.model.getNodesInArea(t,e,r,a,f)}getNodesUnderNode(t,e={}){return this.model.getNodesUnderNode(t,e)}searchCell(t,e,r={}){return this.model.search(t,e,r),this}getShortestPath(t,e,r={}){return this.model.getShortestPath(t,e,r)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(t,e={}){return this.model.getCellsBBox(t,e)}startBatch(t,e={}){this.model.startBatch(t,e)}stopBatch(t,e={}){this.model.stopBatch(t,e)}batchUpdate(t,e,r){const a=typeof t=="string"?t:"update",f=typeof t=="string"?e:t,h=typeof e=="function"?r:e;this.startBatch(a,h);const g=f();return this.stopBatch(a,h),g}updateCellId(t,e){return this.model.updateCellId(t,e)}findView(t){return jr.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}findViews(t){return pn.isRectangleLike(t)?this.findViewsInArea(t):St.isPointLike(t)?this.findViewsFromPoint(t):[]}findViewByCell(t){return this.renderer.findViewByCell(t)}findViewByElem(t){return this.renderer.findViewByElem(t)}findViewsFromPoint(t,e){const r=typeof t=="number"?{x:t,y:e}:t;return this.renderer.findViewsFromPoint(r)}findViewsInArea(t,e,r,a,f){const h=typeof t=="number"?{x:t,y:e,width:r,height:a}:t,g=typeof t=="number"?f:e;return this.renderer.findViewsInArea(h,g)}matrix(t){return typeof t=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(t),this)}resize(t,e){const r=this.getPlugin("scroller");return r?r.resize(t,e):this.transform.resize(t,e),this}scale(t,e=t,r=0,a=0){return typeof t=="undefined"?this.transform.getScale():(this.transform.scale(t,e,r,a),this)}zoom(t,e){const r=this.getPlugin("scroller");if(r){if(typeof t=="undefined")return r.zoom();r.zoom(t,e)}else{if(typeof t=="undefined")return this.transform.getZoom();this.transform.zoom(t,e)}return this}zoomTo(t,e={}){const r=this.getPlugin("scroller");return r?r.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})),this}zoomToRect(t,e={}){const r=this.getPlugin("scroller");return r?r.zoomToRect(t,e):this.transform.zoomToRect(t,e),this}zoomToFit(t={}){const e=this.getPlugin("scroller");return e?e.zoomToFit(t):this.transform.zoomToFit(t),this}rotate(t,e,r){return typeof t=="undefined"?this.transform.getRotation():(this.transform.rotate(t,e,r),this)}translate(t,e){return typeof t=="undefined"?this.transform.getTranslation():(this.transform.translate(t,e),this)}translateBy(t,e){const r=this.translate(),a=r.tx+t,f=r.ty+e;return this.translate(a,f)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(t={}){return this.transform.getContentArea(t)}getContentBBox(t={}){return this.transform.getContentBBox(t)}fitToContent(t,e,r,a){return this.transform.fitToContent(t,e,r,a)}scaleContentToFit(t={}){return this.transform.scaleContentToFit(t),this}center(t){return this.centerPoint(t)}centerPoint(t,e,r){const a=this.getPlugin("scroller");return a?a.centerPoint(t,e,r):this.transform.centerPoint(t,e),this}centerContent(t){const e=this.getPlugin("scroller");return e?e.centerContent(t):this.transform.centerContent(t),this}centerCell(t,e){const r=this.getPlugin("scroller");return r?r.centerCell(t,e):this.transform.centerCell(t),this}positionPoint(t,e,r,a={}){const f=this.getPlugin("scroller");return f?f.positionPoint(t,e,r,a):this.transform.positionPoint(t,e,r),this}positionRect(t,e,r){const a=this.getPlugin("scroller");return a?a.positionRect(t,e,r):this.transform.positionRect(t,e),this}positionCell(t,e,r){const a=this.getPlugin("scroller");return a?a.positionCell(t,e,r):this.transform.positionCell(t,e),this}positionContent(t,e){const r=this.getPlugin("scroller");return r?r.positionContent(t,e):this.transform.positionContent(t,e),this}snapToGrid(t,e){return this.coord.snapToGrid(t,e)}pageToLocal(t,e,r,a){return pn.isRectangleLike(t)?this.coord.pageToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof a=="number"?this.coord.pageToLocalRect(t,e,r,a):this.coord.pageToLocalPoint(t,e)}localToPage(t,e,r,a){return pn.isRectangleLike(t)?this.coord.localToPageRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof a=="number"?this.coord.localToPageRect(t,e,r,a):this.coord.localToPagePoint(t,e)}clientToLocal(t,e,r,a){return pn.isRectangleLike(t)?this.coord.clientToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof a=="number"?this.coord.clientToLocalRect(t,e,r,a):this.coord.clientToLocalPoint(t,e)}localToClient(t,e,r,a){return pn.isRectangleLike(t)?this.coord.localToClientRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof a=="number"?this.coord.localToClientRect(t,e,r,a):this.coord.localToClientPoint(t,e)}localToGraph(t,e,r,a){return pn.isRectangleLike(t)?this.coord.localToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof a=="number"?this.coord.localToGraphRect(t,e,r,a):this.coord.localToGraphPoint(t,e)}graphToLocal(t,e,r,a){return pn.isRectangleLike(t)?this.coord.graphToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof a=="number"?this.coord.graphToLocalRect(t,e,r,a):this.coord.graphToLocalPoint(t,e)}clientToGraph(t,e,r,a){return pn.isRectangleLike(t)?this.coord.clientToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof a=="number"?this.coord.clientToGraphRect(t,e,r,a):this.coord.clientToGraphPoint(t,e)}defineFilter(t){return this.defs.filter(t)}defineGradient(t){return this.defs.gradient(t)}defineMarker(t){return this.defs.marker(t)}getGridSize(){return this.grid.getGridSize()}setGridSize(t){return this.grid.setGridSize(t),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(t){return this.grid.draw(t),this}updateBackground(){return this.background.update(),this}drawBackground(t,e){const r=this.getPlugin("scroller");return r!=null&&(this.options.background==null||!e)?r.drawBackground(t,e):this.background.draw(t),this}clearBackground(t){const e=this.getPlugin("scroller");return e!=null&&(this.options.background==null||!t)?e.clearBackground(t):this.background.clear(),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(t){return t==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const t=this.getPlugin("scroller");return t?t.isPannable():this.panning.pannable}enablePanning(){const t=this.getPlugin("scroller");return t?t.enablePanning():this.panning.enablePanning(),this}disablePanning(){const t=this.getPlugin("scroller");return t?t.disablePanning():this.panning.disablePanning(),this}togglePanning(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}use(t,...e){return this.installedPlugins.has(t)||(this.installedPlugins.add(t),t.init(this,...e)),this}getPlugin(t){return Array.from(this.installedPlugins).find(e=>e.name===t)}getPlugins(t){return Array.from(this.installedPlugins).filter(e=>t.includes(e.name))}enablePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const r=this.getPlugins(e);return r==null||r.forEach(a=>{var f;(f=a==null?void 0:a.enable)===null||f===void 0||f.call(a)}),this}disablePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const r=this.getPlugins(e);return r==null||r.forEach(a=>{var f;(f=a==null?void 0:a.disable)===null||f===void 0||f.call(a)}),this}isPluginEnabled(t){var e;const r=this.getPlugin(t);return(e=r==null?void 0:r.isEnabled)===null||e===void 0?void 0:e.call(r)}disposePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const r=this.getPlugins(e);return r==null||r.forEach(a=>{a.dispose()}),this}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(t=>{t.dispose()})}}op([cs.dispose()],Hs.prototype,"dispose",null),function(u){u.View=$s,u.Renderer=Mv,u.MouseWheel=$d,u.DefsManager=A0,u.GridManager=Tv,u.CoordManager=Iv,u.TransformManager=S0,u.HighlightManager=ip,u.BackgroundManager=Av}(Hs||(Hs={})),function(u){u.toStringTag=`X6.${u.name}`;function t(e){if(e==null)return!1;if(e instanceof u)return!0;const r=e[Symbol.toStringTag];return r==null||r===u.toStringTag}u.isGraph=t}(Hs||(Hs={})),function(u){function t(e,r){const a=e instanceof HTMLElement?new u({container:e}):new u(e);return r!=null&&a.fromJSON(r),a}u.render=t}(Hs||(Hs={})),function(u){u.registerNode=po.registry.register,u.registerEdge=_i.registry.register,u.registerView=Bo.registry.register,u.registerAttr=Ic.registry.register,u.registerGrid=vu.registry.register,u.registerFilter=yh.registry.register,u.registerNodeTool=vf.registry.register,u.registerEdgeTool=Sh.registry.register,u.registerBackground=Nd.registry.register,u.registerHighlighter=yu.registry.register,u.registerPortLayout=df.registry.register,u.registerPortLabelLayout=wh.registry.register,u.registerMarker=hl.registry.register,u.registerRouter=qo.registry.register,u.registerConnector=ml.registry.register,u.registerAnchor=Ko.registry.register,u.registerEdgeAnchor=mf.registry.register,u.registerConnectionPoint=Th.registry.register}(Hs||(Hs={})),function(u){u.unregisterNode=po.registry.unregister,u.unregisterEdge=_i.registry.unregister,u.unregisterView=Bo.registry.unregister,u.unregisterAttr=Ic.registry.unregister,u.unregisterGrid=vu.registry.unregister,u.unregisterFilter=yh.registry.unregister,u.unregisterNodeTool=vf.registry.unregister,u.unregisterEdgeTool=Sh.registry.unregister,u.unregisterBackground=Nd.registry.unregister,u.unregisterHighlighter=yu.registry.unregister,u.unregisterPortLayout=df.registry.unregister,u.unregisterPortLabelLayout=wh.registry.unregister,u.unregisterMarker=hl.registry.unregister,u.unregisterRouter=qo.registry.unregister,u.unregisterConnector=ml.registry.unregister,u.unregisterAnchor=Ko.registry.unregister,u.unregisterEdgeAnchor=mf.registry.unregister,u.unregisterConnectionPoint=Th.registry.unregister}(Hs||(Hs={}));var dx=function(u,t){var e={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(u);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(e[r[a]]=u[r[a]]);return e};class Nh extends po{}(function(u){class t extends ma{init(){super.init(),this.cell.on("change:*",({key:r})=>{const a=u.shapeMaps[this.cell.shape];if(a){const{effect:f}=a;(!f||f.includes(r))&&this.renderHTMLComponent()}})}confirmUpdate(r){const a=super.confirmUpdate(r);return this.handleAction(a,t.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const r=this.selectors&&this.selectors.foContent;if(r){Rt(r);const a=u.shapeMaps[this.cell.shape];if(!a)return;let{html:f}=a;typeof f=="function"&&(f=f(this.cell)),f&&(typeof f=="string"?r.innerHTML=f:Ft(r,f))}}}u.View=t,function(e){e.action="html",e.config({bootstrap:[e.action],actions:{html:e.action}}),ma.registry.register("html-view",e,!0)}(t=u.View||(u.View={}))})(Nh||(Nh={})),function(u){u.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Ri.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),po.registry.register("html",u,!0)}(Nh||(Nh={})),function(u){u.shapeMaps={};function t(e){const{shape:r,html:a,effect:f,inherit:h}=e,g=dx(e,["shape","html","effect","inherit"]);if(!r)throw new Error("should specify shape in config");u.shapeMaps[r]={html:a,effect:f},Hs.registerNode(r,Object.assign({inherit:h||"html"},g),!0)}u.register=t}(Nh||(Nh={}))},36914:function(At,yt,O){"use strict";O.d(yt,{T6:function(){return ht},VD:function(){return bt},WE:function(){return K},Yt:function(){return Ut},lC:function(){return rt},py:function(){return Zt},rW:function(){return ft},s:function(){return ot},ve:function(){return Tt},vq:function(){return Z}});var V=O(42825);function ft(ut,Bt,Gt){return{r:(0,V.sh)(ut,255)*255,g:(0,V.sh)(Bt,255)*255,b:(0,V.sh)(Gt,255)*255}}function rt(ut,Bt,Gt){ut=(0,V.sh)(ut,255),Bt=(0,V.sh)(Bt,255),Gt=(0,V.sh)(Gt,255);var fe=Math.max(ut,Bt,Gt),ue=Math.min(ut,Bt,Gt),xe=0,Qe=0,Pn=(fe+ue)/2;if(fe===ue)Qe=0,xe=0;else{var yn=fe-ue;switch(Qe=Pn>.5?yn/(2-fe-ue):yn/(fe+ue),fe){case ut:xe=(Bt-Gt)/yn+(Bt<Gt?6:0);break;case Bt:xe=(Gt-ut)/yn+2;break;case Gt:xe=(ut-Bt)/yn+4;break;default:break}xe/=6}return{h:xe,s:Qe,l:Pn}}function wt(ut,Bt,Gt){return Gt<0&&(Gt+=1),Gt>1&&(Gt-=1),Gt<1/6?ut+(Bt-ut)*(6*Gt):Gt<1/2?Bt:Gt<2/3?ut+(Bt-ut)*(2/3-Gt)*6:ut}function Tt(ut,Bt,Gt){var fe,ue,xe;if(ut=(0,V.sh)(ut,360),Bt=(0,V.sh)(Bt,100),Gt=(0,V.sh)(Gt,100),Bt===0)ue=Gt,xe=Gt,fe=Gt;else{var Qe=Gt<.5?Gt*(1+Bt):Gt+Bt-Gt*Bt,Pn=2*Gt-Qe;fe=wt(Pn,Qe,ut+1/3),ue=wt(Pn,Qe,ut),xe=wt(Pn,Qe,ut-1/3)}return{r:fe*255,g:ue*255,b:xe*255}}function Zt(ut,Bt,Gt){ut=(0,V.sh)(ut,255),Bt=(0,V.sh)(Bt,255),Gt=(0,V.sh)(Gt,255);var fe=Math.max(ut,Bt,Gt),ue=Math.min(ut,Bt,Gt),xe=0,Qe=fe,Pn=fe-ue,yn=fe===0?0:Pn/fe;if(fe===ue)xe=0;else{switch(fe){case ut:xe=(Bt-Gt)/Pn+(Bt<Gt?6:0);break;case Bt:xe=(Gt-ut)/Pn+2;break;case Gt:xe=(ut-Bt)/Pn+4;break;default:break}xe/=6}return{h:xe,s:yn,v:Qe}}function K(ut,Bt,Gt){ut=(0,V.sh)(ut,360)*6,Bt=(0,V.sh)(Bt,100),Gt=(0,V.sh)(Gt,100);var fe=Math.floor(ut),ue=ut-fe,xe=Gt*(1-Bt),Qe=Gt*(1-ue*Bt),Pn=Gt*(1-(1-ue)*Bt),yn=fe%6,Ht=[Gt,Qe,xe,xe,Pn,Gt][yn],Yn=[Pn,Gt,Gt,Qe,xe,xe][yn],Hn=[xe,xe,Pn,Gt,Gt,Qe][yn];return{r:Ht*255,g:Yn*255,b:Hn*255}}function Z(ut,Bt,Gt,fe){var ue=[(0,V.FZ)(Math.round(ut).toString(16)),(0,V.FZ)(Math.round(Bt).toString(16)),(0,V.FZ)(Math.round(Gt).toString(16))];return fe&&ue[0].startsWith(ue[0].charAt(1))&&ue[1].startsWith(ue[1].charAt(1))&&ue[2].startsWith(ue[2].charAt(1))?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0):ue.join("")}function ot(ut,Bt,Gt,fe,ue){var xe=[(0,V.FZ)(Math.round(ut).toString(16)),(0,V.FZ)(Math.round(Bt).toString(16)),(0,V.FZ)(Math.round(Gt).toString(16)),(0,V.FZ)($t(fe))];return ue&&xe[0].startsWith(xe[0].charAt(1))&&xe[1].startsWith(xe[1].charAt(1))&&xe[2].startsWith(xe[2].charAt(1))&&xe[3].startsWith(xe[3].charAt(1))?xe[0].charAt(0)+xe[1].charAt(0)+xe[2].charAt(0)+xe[3].charAt(0):xe.join("")}function gt(ut,Bt,Gt,fe){var ue=[pad2($t(fe)),pad2(Math.round(ut).toString(16)),pad2(Math.round(Bt).toString(16)),pad2(Math.round(Gt).toString(16))];return ue.join("")}function $t(ut){return Math.round(parseFloat(ut)*255).toString(16)}function ht(ut){return bt(ut)/255}function bt(ut){return parseInt(ut,16)}function Ut(ut){return{r:ut>>16,g:(ut&65280)>>8,b:ut&255}}},71859:function(At,yt,O){"use strict";O.d(yt,{R:function(){return V}});var V={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},31105:function(At,yt,O){"use strict";O.d(yt,{uA:function(){return wt}});var V=O(36914),ft=O(71859),rt=O(42825);function wt(bt){var Ut={r:0,g:0,b:0},ut=1,Bt=null,Gt=null,fe=null,ue=!1,xe=!1;return typeof bt=="string"&&(bt=$t(bt)),typeof bt=="object"&&(ht(bt.r)&&ht(bt.g)&&ht(bt.b)?(Ut=(0,V.rW)(bt.r,bt.g,bt.b),ue=!0,xe=String(bt.r).substr(-1)==="%"?"prgb":"rgb"):ht(bt.h)&&ht(bt.s)&&ht(bt.v)?(Bt=(0,rt.JX)(bt.s),Gt=(0,rt.JX)(bt.v),Ut=(0,V.WE)(bt.h,Bt,Gt),ue=!0,xe="hsv"):ht(bt.h)&&ht(bt.s)&&ht(bt.l)&&(Bt=(0,rt.JX)(bt.s),fe=(0,rt.JX)(bt.l),Ut=(0,V.ve)(bt.h,Bt,fe),ue=!0,xe="hsl"),Object.prototype.hasOwnProperty.call(bt,"a")&&(ut=bt.a)),ut=(0,rt.Yq)(ut),{ok:ue,format:bt.format||xe,r:Math.min(255,Math.max(Ut.r,0)),g:Math.min(255,Math.max(Ut.g,0)),b:Math.min(255,Math.max(Ut.b,0)),a:ut}}var Tt="[-\\+]?\\d+%?",Zt="[-\\+]?\\d*\\.\\d+%?",K="(?:".concat(Zt,")|(?:").concat(Tt,")"),Z="[\\s|\\(]+(".concat(K,")[,|\\s]+(").concat(K,")[,|\\s]+(").concat(K,")\\s*\\)?"),ot="[\\s|\\(]+(".concat(K,")[,|\\s]+(").concat(K,")[,|\\s]+(").concat(K,")[,|\\s]+(").concat(K,")\\s*\\)?"),gt={CSS_UNIT:new RegExp(K),rgb:new RegExp("rgb"+Z),rgba:new RegExp("rgba"+ot),hsl:new RegExp("hsl"+Z),hsla:new RegExp("hsla"+ot),hsv:new RegExp("hsv"+Z),hsva:new RegExp("hsva"+ot),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function $t(bt){if(bt=bt.trim().toLowerCase(),bt.length===0)return!1;var Ut=!1;if(ft.R[bt])bt=ft.R[bt],Ut=!0;else if(bt==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ut=gt.rgb.exec(bt);return ut?{r:ut[1],g:ut[2],b:ut[3]}:(ut=gt.rgba.exec(bt),ut?{r:ut[1],g:ut[2],b:ut[3],a:ut[4]}:(ut=gt.hsl.exec(bt),ut?{h:ut[1],s:ut[2],l:ut[3]}:(ut=gt.hsla.exec(bt),ut?{h:ut[1],s:ut[2],l:ut[3],a:ut[4]}:(ut=gt.hsv.exec(bt),ut?{h:ut[1],s:ut[2],v:ut[3]}:(ut=gt.hsva.exec(bt),ut?{h:ut[1],s:ut[2],v:ut[3],a:ut[4]}:(ut=gt.hex8.exec(bt),ut?{r:(0,V.VD)(ut[1]),g:(0,V.VD)(ut[2]),b:(0,V.VD)(ut[3]),a:(0,V.T6)(ut[4]),format:Ut?"name":"hex8"}:(ut=gt.hex6.exec(bt),ut?{r:(0,V.VD)(ut[1]),g:(0,V.VD)(ut[2]),b:(0,V.VD)(ut[3]),format:Ut?"name":"hex"}:(ut=gt.hex4.exec(bt),ut?{r:(0,V.VD)(ut[1]+ut[1]),g:(0,V.VD)(ut[2]+ut[2]),b:(0,V.VD)(ut[3]+ut[3]),a:(0,V.T6)(ut[4]+ut[4]),format:Ut?"name":"hex8"}:(ut=gt.hex3.exec(bt),ut?{r:(0,V.VD)(ut[1]+ut[1]),g:(0,V.VD)(ut[2]+ut[2]),b:(0,V.VD)(ut[3]+ut[3]),format:Ut?"name":"hex"}:!1)))))))))}function ht(bt){return Boolean(gt.CSS_UNIT.exec(String(bt)))}},99590:function(At,yt,O){"use strict";O.d(yt,{C:function(){return Tt}});var V=O(36914),ft=O(71859),rt=O(31105),wt=O(42825),Tt=function(){function K(Z,ot){Z===void 0&&(Z=""),ot===void 0&&(ot={});var gt;if(Z instanceof K)return Z;typeof Z=="number"&&(Z=(0,V.Yt)(Z)),this.originalInput=Z;var $t=(0,rt.uA)(Z);this.originalInput=Z,this.r=$t.r,this.g=$t.g,this.b=$t.b,this.a=$t.a,this.roundA=Math.round(100*this.a)/100,this.format=(gt=ot.format)!==null&&gt!==void 0?gt:$t.format,this.gradientType=ot.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=$t.ok}return K.prototype.isDark=function(){return this.getBrightness()<128},K.prototype.isLight=function(){return!this.isDark()},K.prototype.getBrightness=function(){var Z=this.toRgb();return(Z.r*299+Z.g*587+Z.b*114)/1e3},K.prototype.getLuminance=function(){var Z=this.toRgb(),ot,gt,$t,ht=Z.r/255,bt=Z.g/255,Ut=Z.b/255;return ht<=.03928?ot=ht/12.92:ot=Math.pow((ht+.055)/1.055,2.4),bt<=.03928?gt=bt/12.92:gt=Math.pow((bt+.055)/1.055,2.4),Ut<=.03928?$t=Ut/12.92:$t=Math.pow((Ut+.055)/1.055,2.4),.2126*ot+.7152*gt+.0722*$t},K.prototype.getAlpha=function(){return this.a},K.prototype.setAlpha=function(Z){return this.a=(0,wt.Yq)(Z),this.roundA=Math.round(100*this.a)/100,this},K.prototype.isMonochrome=function(){var Z=this.toHsl().s;return Z===0},K.prototype.toHsv=function(){var Z=(0,V.py)(this.r,this.g,this.b);return{h:Z.h*360,s:Z.s,v:Z.v,a:this.a}},K.prototype.toHsvString=function(){var Z=(0,V.py)(this.r,this.g,this.b),ot=Math.round(Z.h*360),gt=Math.round(Z.s*100),$t=Math.round(Z.v*100);return this.a===1?"hsv(".concat(ot,", ").concat(gt,"%, ").concat($t,"%)"):"hsva(".concat(ot,", ").concat(gt,"%, ").concat($t,"%, ").concat(this.roundA,")")},K.prototype.toHsl=function(){var Z=(0,V.lC)(this.r,this.g,this.b);return{h:Z.h*360,s:Z.s,l:Z.l,a:this.a}},K.prototype.toHslString=function(){var Z=(0,V.lC)(this.r,this.g,this.b),ot=Math.round(Z.h*360),gt=Math.round(Z.s*100),$t=Math.round(Z.l*100);return this.a===1?"hsl(".concat(ot,", ").concat(gt,"%, ").concat($t,"%)"):"hsla(".concat(ot,", ").concat(gt,"%, ").concat($t,"%, ").concat(this.roundA,")")},K.prototype.toHex=function(Z){return Z===void 0&&(Z=!1),(0,V.vq)(this.r,this.g,this.b,Z)},K.prototype.toHexString=function(Z){return Z===void 0&&(Z=!1),"#"+this.toHex(Z)},K.prototype.toHex8=function(Z){return Z===void 0&&(Z=!1),(0,V.s)(this.r,this.g,this.b,this.a,Z)},K.prototype.toHex8String=function(Z){return Z===void 0&&(Z=!1),"#"+this.toHex8(Z)},K.prototype.toHexShortString=function(Z){return Z===void 0&&(Z=!1),this.a===1?this.toHexString(Z):this.toHex8String(Z)},K.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},K.prototype.toRgbString=function(){var Z=Math.round(this.r),ot=Math.round(this.g),gt=Math.round(this.b);return this.a===1?"rgb(".concat(Z,", ").concat(ot,", ").concat(gt,")"):"rgba(".concat(Z,", ").concat(ot,", ").concat(gt,", ").concat(this.roundA,")")},K.prototype.toPercentageRgb=function(){var Z=function(ot){return"".concat(Math.round((0,wt.sh)(ot,255)*100),"%")};return{r:Z(this.r),g:Z(this.g),b:Z(this.b),a:this.a}},K.prototype.toPercentageRgbString=function(){var Z=function(ot){return Math.round((0,wt.sh)(ot,255)*100)};return this.a===1?"rgb(".concat(Z(this.r),"%, ").concat(Z(this.g),"%, ").concat(Z(this.b),"%)"):"rgba(".concat(Z(this.r),"%, ").concat(Z(this.g),"%, ").concat(Z(this.b),"%, ").concat(this.roundA,")")},K.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var Z="#"+(0,V.vq)(this.r,this.g,this.b,!1),ot=0,gt=Object.entries(ft.R);ot<gt.length;ot++){var $t=gt[ot],ht=$t[0],bt=$t[1];if(Z===bt)return ht}return!1},K.prototype.toString=function(Z){var ot=Boolean(Z);Z=Z!=null?Z:this.format;var gt=!1,$t=this.a<1&&this.a>=0,ht=!ot&&$t&&(Z.startsWith("hex")||Z==="name");return ht?Z==="name"&&this.a===0?this.toName():this.toRgbString():(Z==="rgb"&&(gt=this.toRgbString()),Z==="prgb"&&(gt=this.toPercentageRgbString()),(Z==="hex"||Z==="hex6")&&(gt=this.toHexString()),Z==="hex3"&&(gt=this.toHexString(!0)),Z==="hex4"&&(gt=this.toHex8String(!0)),Z==="hex8"&&(gt=this.toHex8String()),Z==="name"&&(gt=this.toName()),Z==="hsl"&&(gt=this.toHslString()),Z==="hsv"&&(gt=this.toHsvString()),gt||this.toHexString())},K.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},K.prototype.clone=function(){return new K(this.toString())},K.prototype.lighten=function(Z){Z===void 0&&(Z=10);var ot=this.toHsl();return ot.l+=Z/100,ot.l=(0,wt.V2)(ot.l),new K(ot)},K.prototype.brighten=function(Z){Z===void 0&&(Z=10);var ot=this.toRgb();return ot.r=Math.max(0,Math.min(255,ot.r-Math.round(255*-(Z/100)))),ot.g=Math.max(0,Math.min(255,ot.g-Math.round(255*-(Z/100)))),ot.b=Math.max(0,Math.min(255,ot.b-Math.round(255*-(Z/100)))),new K(ot)},K.prototype.darken=function(Z){Z===void 0&&(Z=10);var ot=this.toHsl();return ot.l-=Z/100,ot.l=(0,wt.V2)(ot.l),new K(ot)},K.prototype.tint=function(Z){return Z===void 0&&(Z=10),this.mix("white",Z)},K.prototype.shade=function(Z){return Z===void 0&&(Z=10),this.mix("black",Z)},K.prototype.desaturate=function(Z){Z===void 0&&(Z=10);var ot=this.toHsl();return ot.s-=Z/100,ot.s=(0,wt.V2)(ot.s),new K(ot)},K.prototype.saturate=function(Z){Z===void 0&&(Z=10);var ot=this.toHsl();return ot.s+=Z/100,ot.s=(0,wt.V2)(ot.s),new K(ot)},K.prototype.greyscale=function(){return this.desaturate(100)},K.prototype.spin=function(Z){var ot=this.toHsl(),gt=(ot.h+Z)%360;return ot.h=gt<0?360+gt:gt,new K(ot)},K.prototype.mix=function(Z,ot){ot===void 0&&(ot=50);var gt=this.toRgb(),$t=new K(Z).toRgb(),ht=ot/100,bt={r:($t.r-gt.r)*ht+gt.r,g:($t.g-gt.g)*ht+gt.g,b:($t.b-gt.b)*ht+gt.b,a:($t.a-gt.a)*ht+gt.a};return new K(bt)},K.prototype.analogous=function(Z,ot){Z===void 0&&(Z=6),ot===void 0&&(ot=30);var gt=this.toHsl(),$t=360/ot,ht=[this];for(gt.h=(gt.h-($t*Z>>1)+720)%360;--Z;)gt.h=(gt.h+$t)%360,ht.push(new K(gt));return ht},K.prototype.complement=function(){var Z=this.toHsl();return Z.h=(Z.h+180)%360,new K(Z)},K.prototype.monochromatic=function(Z){Z===void 0&&(Z=6);for(var ot=this.toHsv(),gt=ot.h,$t=ot.s,ht=ot.v,bt=[],Ut=1/Z;Z--;)bt.push(new K({h:gt,s:$t,v:ht})),ht=(ht+Ut)%1;return bt},K.prototype.splitcomplement=function(){var Z=this.toHsl(),ot=Z.h;return[this,new K({h:(ot+72)%360,s:Z.s,l:Z.l}),new K({h:(ot+216)%360,s:Z.s,l:Z.l})]},K.prototype.onBackground=function(Z){var ot=this.toRgb(),gt=new K(Z).toRgb(),$t=ot.a+gt.a*(1-ot.a);return new K({r:(ot.r*ot.a+gt.r*gt.a*(1-ot.a))/$t,g:(ot.g*ot.a+gt.g*gt.a*(1-ot.a))/$t,b:(ot.b*ot.a+gt.b*gt.a*(1-ot.a))/$t,a:$t})},K.prototype.triad=function(){return this.polyad(3)},K.prototype.tetrad=function(){return this.polyad(4)},K.prototype.polyad=function(Z){for(var ot=this.toHsl(),gt=ot.h,$t=[this],ht=360/Z,bt=1;bt<Z;bt++)$t.push(new K({h:(gt+bt*ht)%360,s:ot.s,l:ot.l}));return $t},K.prototype.equals=function(Z){return this.toRgbString()===new K(Z).toRgbString()},K}();function Zt(K,Z){return K===void 0&&(K=""),Z===void 0&&(Z={}),new Tt(K,Z)}},42825:function(At,yt,O){"use strict";O.d(yt,{FZ:function(){return K},JX:function(){return Zt},V2:function(){return ft},Yq:function(){return Tt},sh:function(){return V}});function V(Z,ot){rt(Z)&&(Z="100%");var gt=wt(Z);return Z=ot===360?Z:Math.min(ot,Math.max(0,parseFloat(Z))),gt&&(Z=parseInt(String(Z*ot),10)/100),Math.abs(Z-ot)<1e-6?1:(ot===360?Z=(Z<0?Z%ot+ot:Z%ot)/parseFloat(String(ot)):Z=Z%ot/parseFloat(String(ot)),Z)}function ft(Z){return Math.min(1,Math.max(0,Z))}function rt(Z){return typeof Z=="string"&&Z.indexOf(".")!==-1&&parseFloat(Z)===1}function wt(Z){return typeof Z=="string"&&Z.indexOf("%")!==-1}function Tt(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function Zt(Z){return Z<=1?"".concat(Number(Z)*100,"%"):Z}function K(Z){return Z.length===1?"0"+Z:String(Z)}},76166:function(At,yt,O){"use strict";O.d(yt,{E_:function(){return wt},oR:function(){return ft}});var V=O(93236);const ft="anticon",rt=(Zt,K)=>K||(Zt?`ant-${Zt}`:"ant"),wt=V.createContext({getPrefixCls:rt,iconPrefixCls:ft}),{Consumer:Tt}=wt},56458:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return ht}});var V=O(84875),ft=O.n(V),rt=O(93236),wt=O(76166),Tt=O(10071),Zt=O(52970),K=O(4541);const Z=bt=>{const{componentCls:Ut,sizePaddingEdgeHorizontal:ut,colorSplit:Bt,lineWidth:Gt}=bt;return{[Ut]:Object.assign(Object.assign({},(0,K.Wf)(bt)),{borderBlockStart:`${Gt}px solid ${Bt}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${bt.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${Gt}px solid ${Bt}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${bt.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${Ut}-with-text`]:{display:"flex",alignItems:"center",margin:`${bt.dividerHorizontalWithTextGutterMargin}px 0`,color:bt.colorTextHeading,fontWeight:500,fontSize:bt.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${Bt}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${Gt}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${Ut}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${Ut}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${Ut}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:Bt,borderStyle:"dashed",borderWidth:`${Gt}px 0 0`},[`&-horizontal${Ut}-with-text${Ut}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${Ut}-dashed`]:{borderInlineStart:Gt,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${Ut}-with-text`]:{color:bt.colorText,fontWeight:"normal",fontSize:bt.fontSize},[`&-horizontal${Ut}-with-text-left${Ut}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${Ut}-inner-text`]:{paddingInlineStart:ut}},[`&-horizontal${Ut}-with-text-right${Ut}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${Ut}-inner-text`]:{paddingInlineEnd:ut}}})}};var ot=(0,Tt.Z)("Divider",bt=>{const Ut=(0,Zt.TS)(bt,{dividerVerticalGutterMargin:bt.marginXS,dividerHorizontalWithTextGutterMargin:bt.margin,dividerHorizontalGutterMargin:bt.marginLG});return[Z(Ut)]},{sizePaddingEdgeHorizontal:0}),gt=function(bt,Ut){var ut={};for(var Bt in bt)Object.prototype.hasOwnProperty.call(bt,Bt)&&Ut.indexOf(Bt)<0&&(ut[Bt]=bt[Bt]);if(bt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Gt=0,Bt=Object.getOwnPropertySymbols(bt);Gt<Bt.length;Gt++)Ut.indexOf(Bt[Gt])<0&&Object.prototype.propertyIsEnumerable.call(bt,Bt[Gt])&&(ut[Bt[Gt]]=bt[Bt[Gt]]);return ut},ht=bt=>{const{getPrefixCls:Ut,direction:ut}=rt.useContext(wt.E_),{prefixCls:Bt,type:Gt="horizontal",orientation:fe="center",orientationMargin:ue,className:xe,rootClassName:Qe,children:Pn,dashed:yn,plain:Ht}=bt,Yn=gt(bt,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain"]),Hn=Ut("divider",Bt),[_r,rn]=ot(Hn),lr=fe.length>0?`-${fe}`:fe,bn=!!Pn,Je=fe==="left"&&ue!=null,kt=fe==="right"&&ue!=null,vt=ft()(Hn,rn,`${Hn}-${Gt}`,{[`${Hn}-with-text`]:bn,[`${Hn}-with-text${lr}`]:bn,[`${Hn}-dashed`]:!!yn,[`${Hn}-plain`]:!!Ht,[`${Hn}-rtl`]:ut==="rtl",[`${Hn}-no-default-orientation-margin-left`]:Je,[`${Hn}-no-default-orientation-margin-right`]:kt},xe,Qe),Qt=Object.assign(Object.assign({},Je&&{marginLeft:ue}),kt&&{marginRight:ue});return _r(rt.createElement("div",Object.assign({className:vt},Yn,{role:"separator"}),Pn&&Gt!=="vertical"&&rt.createElement("span",{className:`${Hn}-inner-text`,style:Qt},Pn)))}},16262:function(At,yt,O){"use strict";O.d(yt,{ZP:function(){return ha}});var V=O(52529),ft=O(96268),rt=O(185),wt=O(19103),Tt=O.t(wt,2),Zt=(0,rt.Z)({},Tt),K=Zt.version,Z=Zt.render,ot=Zt.unmountComponentAtNode,gt;try{var $t=Number((K||"").split(".")[0]);$t>=18&&(gt=Zt.createRoot)}catch(z){}function ht(z){var P=Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;P&&(0,ft.Z)(P)==="object"&&(P.usingClientEntryPoint=z)}var bt="__rc_react_root__";function Ut(z,P){ht(!0);var I=P[bt]||gt(P);ht(!1),I.render(z),P[bt]=I}function ut(z,P){Z(z,P)}function Bt(z,P){}function Gt(z,P){if(gt){Ut(z,P);return}ut(z,P)}function fe(z){return ue.apply(this,arguments)}function ue(){return ue=_asyncToGenerator(_regeneratorRuntime().mark(function z(P){return _regeneratorRuntime().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",Promise.resolve().then(function(){var F;(F=P[bt])===null||F===void 0||F.unmount(),delete P[bt]}));case 1:case"end":return G.stop()}},z)})),ue.apply(this,arguments)}function xe(z){ot(z)}function Qe(z){}function Pn(z){return yn.apply(this,arguments)}function yn(){return yn=_asyncToGenerator(_regeneratorRuntime().mark(function z(P){return _regeneratorRuntime().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(gt===void 0){G.next=2;break}return G.abrupt("return",fe(P));case 2:xe(P);case 3:case"end":return G.stop()}},z)})),yn.apply(this,arguments)}var Ht=O(93236),Yn=O(72613),Hn=O(60666),_r=O(72564),rn=O(75188),lr=O(45389),bn=O(27915),Je=O(92449),kt=O(92720),vt=O(79682),Qt=O(46196),jt=O(75510),Dt=O(2557),on="RC_FORM_INTERNAL_HOOKS",Oe=function(){(0,Dt.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Jn=Ht.createContext({getFieldValue:Oe,getFieldsValue:Oe,getFieldError:Oe,getFieldWarning:Oe,getFieldsError:Oe,isFieldsTouched:Oe,isFieldTouched:Oe,isFieldValidating:Oe,isFieldsValidating:Oe,resetFields:Oe,setFields:Oe,setFieldValue:Oe,setFieldsValue:Oe,validateFields:Oe,submit:Oe,getInternalHooks:function(){return Oe(),{dispatch:Oe,initEntityValue:Oe,registerField:Oe,useSubscribe:Oe,setInitialValues:Oe,destroyForm:Oe,setCallbacks:Oe,registerWatch:Oe,getFields:Oe,setValidateMessages:Oe,setPreserve:Oe,getInitialValue:Oe}}}),Cn=Jn,Tn=Ht.createContext(null),zn=Tn;function Rn(z){return z==null?[]:Array.isArray(z)?z:[z]}function si(z){return z&&!!z._init}var Kr=O(63287),qr=O(8850),Fi=O(14224);function to(){return to=Object.assign?Object.assign.bind():function(z){for(var P=1;P<arguments.length;P++){var I=arguments[P];for(var G in I)Object.prototype.hasOwnProperty.call(I,G)&&(z[G]=I[G])}return z},to.apply(this,arguments)}function Ks(z,P){z.prototype=Object.create(P.prototype),z.prototype.constructor=z,Oi(z,P)}function ps(z){return ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(I){return I.__proto__||Object.getPrototypeOf(I)},ps(z)}function Oi(z,P){return Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,F){return G.__proto__=F,G},Oi(z,P)}function Ls(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}function jo(z,P,I){return Ls()?jo=Reflect.construct.bind():jo=function(F,st,at){var Mt=[null];Mt.push.apply(Mt,st);var It=Function.bind.apply(F,Mt),Wt=new It;return at&&Oi(Wt,at.prototype),Wt},jo.apply(null,arguments)}function ba(z){return Function.toString.call(z).indexOf("[native code]")!==-1}function ks(z){var P=typeof Map=="function"?new Map:void 0;return ks=function(G){if(G===null||!ba(G))return G;if(typeof G!="function")throw new TypeError("Super expression must either be null or a function");if(typeof P!="undefined"){if(P.has(G))return P.get(G);P.set(G,F)}function F(){return jo(G,arguments,ps(this).constructor)}return F.prototype=Object.create(G.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),Oi(F,G)},ks(z)}var Q=/%[sdj%]/g,kc=function(){};function Bi(z){if(!z||!z.length)return null;var P={};return z.forEach(function(I){var G=I.field;P[G]=P[G]||[],P[G].push(I)}),P}function yo(z){for(var P=arguments.length,I=new Array(P>1?P-1:0),G=1;G<P;G++)I[G-1]=arguments[G];var F=0,st=I.length;if(typeof z=="function")return z.apply(null,I);if(typeof z=="string"){var at=z.replace(Q,function(Mt){if(Mt==="%%")return"%";if(F>=st)return Mt;switch(Mt){case"%s":return String(I[F++]);case"%d":return Number(I[F++]);case"%j":try{return JSON.stringify(I[F++])}catch(It){return"[Circular]"}break;default:return Mt}});return at}return z}function Fc(z){return z==="string"||z==="url"||z==="hex"||z==="email"||z==="date"||z==="pattern"}function ii(z,P){return!!(z==null||P==="array"&&Array.isArray(z)&&!z.length||Fc(P)&&typeof z=="string"&&!z)}function Bc(z,P,I){var G=[],F=0,st=z.length;function at(Mt){G.push.apply(G,Mt||[]),F++,F===st&&I(G)}z.forEach(function(Mt){P(Mt,at)})}function vs(z,P,I){var G=0,F=z.length;function st(at){if(at&&at.length){I(at);return}var Mt=G;G=G+1,Mt<F?P(z[Mt],st):I([])}st([])}function za(z){var P=[];return Object.keys(z).forEach(function(I){P.push.apply(P,z[I]||[])}),P}var ja=function(z){Ks(P,z);function P(I,G){var F;return F=z.call(this,"Async Validation Error")||this,F.errors=I,F.fields=G,F}return P}(ks(Error));function Tu(z,P,I,G,F){if(P.first){var st=new Promise(function(Se,Mn){var hn=function(Te){return G(Te),Te.length?Mn(new ja(Te,Bi(Te))):Se(F)},ze=za(z);vs(ze,I,hn)});return st.catch(function(Se){return Se}),st}var at=P.firstFields===!0?Object.keys(z):P.firstFields||[],Mt=Object.keys(z),It=Mt.length,Wt=0,re=[],he=new Promise(function(Se,Mn){var hn=function(Ue){if(re.push.apply(re,Ue),Wt++,Wt===It)return G(re),re.length?Mn(new ja(re,Bi(re))):Se(F)};Mt.length||(G(re),Se(F)),Mt.forEach(function(ze){var Ue=z[ze];at.indexOf(ze)!==-1?vs(Ue,I,hn):Bc(Ue,I,hn)})});return he.catch(function(Se){return Se}),he}function Hi(z){return!!(z&&z.message!==void 0)}function ai(z,P){for(var I=z,G=0;G<P.length;G++){if(I==null)return I;I=I[P[G]]}return I}function xa(z,P){return function(I){var G;return z.fullFields?G=ai(P,z.fullFields):G=P[I.field||z.fullField],Hi(I)?(I.field=I.field||z.fullField,I.fieldValue=G,I):{message:typeof I=="function"?I():I,fieldValue:G,field:I.field||z.fullField}}}function Fs(z,P){if(P){for(var I in P)if(P.hasOwnProperty(I)){var G=P[I];typeof G=="object"&&typeof z[I]=="object"?z[I]=to({},z[I],G):z[I]=G}}return z}var Ea=function(P,I,G,F,st,at){P.required&&(!G.hasOwnProperty(P.field)||ii(I,at||P.type))&&F.push(yo(st.messages.required,P.fullField))},Gc=function(P,I,G,F,st){(/^\s+$/.test(I)||I==="")&&F.push(yo(st.messages.whitespace,P.fullField))},qs,vc=function(){if(qs)return qs;var z="[a-fA-F\\d:]",P=function(sn){return sn&&sn.includeBoundaries?"(?:(?<=\\s|^)(?="+z+")|(?<="+z+")(?=\\s|$))":""},I="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",G="[a-fA-F\\d]{1,4}",F=(`
(?:
(?:`+G+":){7}(?:"+G+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+G+":){6}(?:"+I+"|:"+G+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+G+":){5}(?::"+I+"|(?::"+G+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+G+":){4}(?:(?::"+G+"){0,1}:"+I+"|(?::"+G+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+G+":){3}(?:(?::"+G+"){0,2}:"+I+"|(?::"+G+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+G+":){2}(?:(?::"+G+"){0,3}:"+I+"|(?::"+G+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+G+":){1}(?:(?::"+G+"){0,4}:"+I+"|(?::"+G+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+G+"){0,5}:"+I+"|(?::"+G+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),st=new RegExp("(?:^"+I+"$)|(?:^"+F+"$)"),at=new RegExp("^"+I+"$"),Mt=new RegExp("^"+F+"$"),It=function(sn){return sn&&sn.exact?st:new RegExp("(?:"+P(sn)+I+P(sn)+")|(?:"+P(sn)+F+P(sn)+")","g")};It.v4=function(We){return We&&We.exact?at:new RegExp(""+P(We)+I+P(We),"g")},It.v6=function(We){return We&&We.exact?Mt:new RegExp(""+P(We)+F+P(We),"g")};var Wt="(?:(?:[a-z]+:)?//)",re="(?:\\S+(?::\\S*)?@)?",he=It.v4().source,Se=It.v6().source,Mn="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",hn="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",ze="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",Ue="(?::\\d{2,5})?",Te='(?:[/?#][^\\s"]*)?',fn="(?:"+Wt+"|www\\.)"+re+"(?:localhost|"+he+"|"+Se+"|"+Mn+hn+ze+")"+Ue+Te;return qs=new RegExp("(?:^"+fn+"$)","i"),qs},Qo={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},To={integer:function(P){return To.number(P)&&parseInt(P,10)===P},float:function(P){return To.number(P)&&!To.integer(P)},array:function(P){return Array.isArray(P)},regexp:function(P){if(P instanceof RegExp)return!0;try{return!!new RegExp(P)}catch(I){return!1}},date:function(P){return typeof P.getTime=="function"&&typeof P.getMonth=="function"&&typeof P.getYear=="function"&&!isNaN(P.getTime())},number:function(P){return isNaN(P)?!1:typeof P=="number"},object:function(P){return typeof P=="object"&&!To.array(P)},method:function(P){return typeof P=="function"},email:function(P){return typeof P=="string"&&P.length<=320&&!!P.match(Qo.email)},url:function(P){return typeof P=="string"&&P.length<=2048&&!!P.match(vc())},hex:function(P){return typeof P=="string"&&!!P.match(Qo.hex)}},eo=function(P,I,G,F,st){if(P.required&&I===void 0){Ea(P,I,G,F,st);return}var at=["integer","float","array","regexp","object","method","email","number","date","url","hex"],Mt=P.type;at.indexOf(Mt)>-1?To[Mt](I)||F.push(yo(st.messages.types[Mt],P.fullField,P.type)):Mt&&typeof I!==P.type&&F.push(yo(st.messages.types[Mt],P.fullField,P.type))},Uo=function(P,I,G,F,st){var at=typeof P.len=="number",Mt=typeof P.min=="number",It=typeof P.max=="number",Wt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,re=I,he=null,Se=typeof I=="number",Mn=typeof I=="string",hn=Array.isArray(I);if(Se?he="number":Mn?he="string":hn&&(he="array"),!he)return!1;hn&&(re=I.length),Mn&&(re=I.replace(Wt,"_").length),at?re!==P.len&&F.push(yo(st.messages[he].len,P.fullField,P.len)):Mt&&!It&&re<P.min?F.push(yo(st.messages[he].min,P.fullField,P.min)):It&&!Mt&&re>P.max?F.push(yo(st.messages[he].max,P.fullField,P.max)):Mt&&It&&(re<P.min||re>P.max)&&F.push(yo(st.messages[he].range,P.fullField,P.min,P.max))},ao="enum",ci=function(P,I,G,F,st){P[ao]=Array.isArray(P[ao])?P[ao]:[],P[ao].indexOf(I)===-1&&F.push(yo(st.messages[ao],P.fullField,P[ao].join(", ")))},ms=function(P,I,G,F,st){if(P.pattern){if(P.pattern instanceof RegExp)P.pattern.lastIndex=0,P.pattern.test(I)||F.push(yo(st.messages.pattern.mismatch,P.fullField,I,P.pattern));else if(typeof P.pattern=="string"){var at=new RegExp(P.pattern);at.test(I)||F.push(yo(st.messages.pattern.mismatch,P.fullField,I,P.pattern))}}},Or={required:Ea,whitespace:Gc,type:eo,range:Uo,enum:ci,pattern:ms},Vo=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I,"string")&&!P.required)return G();Or.required(P,I,F,at,st,"string"),ii(I,"string")||(Or.type(P,I,F,at,st),Or.range(P,I,F,at,st),Or.pattern(P,I,F,at,st),P.whitespace===!0&&Or.whitespace(P,I,F,at,st))}G(at)},wa=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I)&&!P.required)return G();Or.required(P,I,F,at,st),I!==void 0&&Or.type(P,I,F,at,st)}G(at)},ys=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(I===""&&(I=void 0),ii(I)&&!P.required)return G();Or.required(P,I,F,at,st),I!==void 0&&(Or.type(P,I,F,at,st),Or.range(P,I,F,at,st))}G(at)},Bs=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I)&&!P.required)return G();Or.required(P,I,F,at,st),I!==void 0&&Or.type(P,I,F,at,st)}G(at)},Ua=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I)&&!P.required)return G();Or.required(P,I,F,at,st),ii(I)||Or.type(P,I,F,at,st)}G(at)},bo=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I)&&!P.required)return G();Or.required(P,I,F,at,st),I!==void 0&&(Or.type(P,I,F,at,st),Or.range(P,I,F,at,st))}G(at)},Vr=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I)&&!P.required)return G();Or.required(P,I,F,at,st),I!==void 0&&(Or.type(P,I,F,at,st),Or.range(P,I,F,at,st))}G(at)},bs=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(I==null&&!P.required)return G();Or.required(P,I,F,at,st,"array"),I!=null&&(Or.type(P,I,F,at,st),Or.range(P,I,F,at,st))}G(at)},Jr=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I)&&!P.required)return G();Or.required(P,I,F,at,st),I!==void 0&&Or.type(P,I,F,at,st)}G(at)},zc="enum",jc=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I)&&!P.required)return G();Or.required(P,I,F,at,st),I!==void 0&&Or[zc](P,I,F,at,st)}G(at)},Js=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I,"string")&&!P.required)return G();Or.required(P,I,F,at,st),ii(I,"string")||Or.pattern(P,I,F,at,st)}G(at)},no=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I,"date")&&!P.required)return G();if(Or.required(P,I,F,at,st),!ii(I,"date")){var It;I instanceof Date?It=I:It=new Date(I),Or.type(P,It,F,at,st),It&&Or.range(P,It.getTime(),F,at,st)}}G(at)},Zo=function(P,I,G,F,st){var at=[],Mt=Array.isArray(I)?"array":typeof I;Or.required(P,I,F,at,st,Mt),G(at)},Qs=function(P,I,G,F,st){var at=P.type,Mt=[],It=P.required||!P.required&&F.hasOwnProperty(P.field);if(It){if(ii(I,at)&&!P.required)return G();Or.required(P,I,F,Mt,st,at),ii(I,at)||Or.type(P,I,F,Mt,st)}G(Mt)},xs=function(P,I,G,F,st){var at=[],Mt=P.required||!P.required&&F.hasOwnProperty(P.field);if(Mt){if(ii(I)&&!P.required)return G();Or.required(P,I,F,at,st)}G(at)},Es={string:Vo,method:wa,number:ys,boolean:Bs,regexp:Ua,integer:bo,float:Vr,array:bs,object:Jr,enum:jc,pattern:Js,date:no,url:Qs,hex:Qs,email:Qs,required:Zo,any:xs};function Sa(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var P=JSON.parse(JSON.stringify(this));return P.clone=this.clone,P}}}var _a=Sa(),ts=function(){function z(I){this.rules=null,this._messages=_a,this.define(I)}var P=z.prototype;return P.define=function(G){var F=this;if(!G)throw new Error("Cannot configure a schema with no rules");if(typeof G!="object"||Array.isArray(G))throw new Error("Rules must be an object");this.rules={},Object.keys(G).forEach(function(st){var at=G[st];F.rules[st]=Array.isArray(at)?at:[at]})},P.messages=function(G){return G&&(this._messages=Fs(Sa(),G)),this._messages},P.validate=function(G,F,st){var at=this;F===void 0&&(F={}),st===void 0&&(st=function(){});var Mt=G,It=F,Wt=st;if(typeof It=="function"&&(Wt=It,It={}),!this.rules||Object.keys(this.rules).length===0)return Wt&&Wt(null,Mt),Promise.resolve(Mt);function re(ze){var Ue=[],Te={};function fn(sn){if(Array.isArray(sn)){var Fn;Ue=(Fn=Ue).concat.apply(Fn,sn)}else Ue.push(sn)}for(var We=0;We<ze.length;We++)fn(ze[We]);Ue.length?(Te=Bi(Ue),Wt(Ue,Te)):Wt(null,Mt)}if(It.messages){var he=this.messages();he===_a&&(he=Sa()),Fs(he,It.messages),It.messages=he}else It.messages=this.messages();var Se={},Mn=It.keys||Object.keys(this.rules);Mn.forEach(function(ze){var Ue=at.rules[ze],Te=Mt[ze];Ue.forEach(function(fn){var We=fn;typeof We.transform=="function"&&(Mt===G&&(Mt=to({},Mt)),Te=Mt[ze]=We.transform(Te)),typeof We=="function"?We={validator:We}:We=to({},We),We.validator=at.getValidationMethod(We),We.validator&&(We.field=ze,We.fullField=We.fullField||ze,We.type=at.getType(We),Se[ze]=Se[ze]||[],Se[ze].push({rule:We,value:Te,source:Mt,field:ze}))})});var hn={};return Tu(Se,It,function(ze,Ue){var Te=ze.rule,fn=(Te.type==="object"||Te.type==="array")&&(typeof Te.fields=="object"||typeof Te.defaultField=="object");fn=fn&&(Te.required||!Te.required&&ze.value),Te.field=ze.field;function We(an,In){return to({},In,{fullField:Te.fullField+"."+an,fullFields:Te.fullFields?[].concat(Te.fullFields,[an]):[an]})}function sn(an){an===void 0&&(an=[]);var In=Array.isArray(an)?an:[an];!It.suppressWarning&&In.length&&z.warning("async-validator:",In),In.length&&Te.message!==void 0&&(In=[].concat(Te.message));var sr=In.map(xa(Te,Mt));if(It.first&&sr.length)return hn[Te.field]=1,Ue(sr);if(!fn)Ue(sr);else{if(Te.required&&!ze.value)return Te.message!==void 0?sr=[].concat(Te.message).map(xa(Te,Mt)):It.error&&(sr=[It.error(Te,yo(It.messages.required,Te.field))]),Ue(sr);var dr={};Te.defaultField&&Object.keys(ze.value).map(function(rr){dr[rr]=Te.defaultField}),dr=to({},dr,ze.rule.fields);var Bn={};Object.keys(dr).forEach(function(rr){var yr=dr[rr],Rr=Array.isArray(yr)?yr:[yr];Bn[rr]=Rr.map(We.bind(null,rr))});var Ar=new z(Bn);Ar.messages(It.messages),ze.rule.options&&(ze.rule.options.messages=It.messages,ze.rule.options.error=It.error),Ar.validate(ze.value,ze.rule.options||It,function(rr){var yr=[];sr&&sr.length&&yr.push.apply(yr,sr),rr&&rr.length&&yr.push.apply(yr,rr),Ue(yr.length?yr:null)})}}var Fn;if(Te.asyncValidator)Fn=Te.asyncValidator(Te,ze.value,sn,ze.source,It);else if(Te.validator){try{Fn=Te.validator(Te,ze.value,sn,ze.source,It)}catch(an){console.error==null||console.error(an),It.suppressValidatorError||setTimeout(function(){throw an},0),sn(an.message)}Fn===!0?sn():Fn===!1?sn(typeof Te.message=="function"?Te.message(Te.fullField||Te.field):Te.message||(Te.fullField||Te.field)+" fails"):Fn instanceof Array?sn(Fn):Fn instanceof Error&&sn(Fn.message)}Fn&&Fn.then&&Fn.then(function(){return sn()},function(an){return sn(an)})},function(ze){re(ze)},Mt)},P.getType=function(G){if(G.type===void 0&&G.pattern instanceof RegExp&&(G.type="pattern"),typeof G.validator!="function"&&G.type&&!Es.hasOwnProperty(G.type))throw new Error(yo("Unknown rule type %s",G.type));return G.type||"string"},P.getValidationMethod=function(G){if(typeof G.validator=="function")return G.validator;var F=Object.keys(G),st=F.indexOf("message");return st!==-1&&F.splice(st,1),F.length===1&&F[0]==="required"?Es.required:Es[this.getType(G)]||void 0},z}();ts.register=function(P,I){if(typeof I!="function")throw new Error("Cannot register a validator by type, validator is not a function");Es[P]=I},ts.warning=kc,ts.messages=_a,ts.validators=Es;var Ao="'${name}' is not a valid ${type}",Ca={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Ao,method:Ao,array:Ao,object:Ao,number:Ao,date:Ao,boolean:Ao,integer:Ao,float:Ao,regexp:Ao,email:Ao,url:Ao,hex:Ao},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function No(z,P){for(var I=z,G=0;G<P.length;G+=1){if(I==null)return;I=I[P[G]]}return I}var mc=O(90665),Gs=O(74706),Mi=O(6665),yc=O(2079);function oa(z){return(0,mc.Z)(z)||(0,Gs.Z)(z)||(0,Mi.Z)(z)||(0,yc.Z)()}function Ro(z,P,I,G){if(!P.length)return I;var F=oa(P),st=F[0],at=F.slice(1),Mt;return!z&&typeof st=="number"?Mt=[]:Array.isArray(z)?Mt=(0,V.Z)(z):Mt=(0,rt.Z)({},z),G&&I===void 0&&at.length===1?delete Mt[st][at[0]]:Mt[st]=Ro(Mt[st],at,I,G),Mt}function es(z,P,I){var G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return P.length&&G&&I===void 0&&!No(z,P.slice(0,-1))?z:Ro(z,P,I,G)}function Ta(z){return Array.isArray(z)?Xr(z):(0,ft.Z)(z)==="object"&&z!==null?Va(z):z}function Va(z){if(Object.getPrototypeOf(z)===Object.prototype){var P={};for(var I in z)P[I]=Ta(z[I]);return P}return z}function Xr(z){return z.map(function(P){return Ta(P)})}var sa=Ta;function yi(z){return Rn(z)}function Ke(z,P){var I={};return P.forEach(function(G){var F=No(z,G);I=es(I,G,F)}),I}function Ir(z,P){return z&&z.some(function(I){return co(I,P)})}function bi(z){return(0,ft.Z)(z)==="object"&&z!==null&&Object.getPrototypeOf(z)===Object.prototype}function ns(z,P){var I=Array.isArray(z)?(0,V.Z)(z):(0,rt.Z)({},z);return P&&Object.keys(P).forEach(function(G){var F=I[G],st=P[G],at=bi(F)&&bi(st);I[G]=at?ns(F,st||{}):sa(st)}),I}function Ii(z){for(var P=arguments.length,I=new Array(P>1?P-1:0),G=1;G<P;G++)I[G-1]=arguments[G];return I.reduce(function(F,st){return ns(F,st)},z)}function co(z,P){return!z||!P||z.length!==P.length?!1:z.every(function(I,G){return P[G]===I})}function ro(z,P){if(z===P)return!0;if(!z&&P||z&&!P||!z||!P||(0,ft.Z)(z)!=="object"||(0,ft.Z)(P)!=="object")return!1;var I=Object.keys(z),G=Object.keys(P),F=new Set([].concat(I,G));return(0,V.Z)(F).every(function(st){var at=z[st],Mt=P[st];return typeof at=="function"&&typeof Mt=="function"?!0:at===Mt})}function ta(z){var P=arguments.length<=1?void 0:arguments[1];return P&&P.target&&(0,ft.Z)(P.target)==="object"&&z in P.target?P.target[z]:P}function zs(z,P,I){var G=z.length;if(P<0||P>=G||I<0||I>=G)return z;var F=z[P],st=P-I;return st>0?[].concat((0,V.Z)(z.slice(0,I)),[F],(0,V.Z)(z.slice(I,P)),(0,V.Z)(z.slice(P+1,G))):st<0?[].concat((0,V.Z)(z.slice(0,P)),(0,V.Z)(z.slice(P+1,I+1)),[F],(0,V.Z)(z.slice(I+1,G))):z}var Za=ts;function bc(z,P){return z.replace(/\$\{\w+\}/g,function(I){var G=I.slice(2,-1);return P[G]})}var ws="CODE_LOGIC_ERROR";function rs(z,P,I,G,F){return Wi.apply(this,arguments)}function Wi(){return Wi=(0,qr.Z)((0,Kr.Z)().mark(function z(P,I,G,F,st){var at,Mt,It,Wt,re,he,Se,Mn,hn;return(0,Kr.Z)().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return at=(0,rt.Z)({},G),delete at.ruleIndex,Za.warning=function(){},at.validator&&(Mt=at.validator,at.validator=function(){try{return Mt.apply(void 0,arguments)}catch(Te){return console.error(Te),Promise.reject(ws)}}),It=null,at&&at.type==="array"&&at.defaultField&&(It=at.defaultField,delete at.defaultField),Wt=new Za((0,lr.Z)({},P,[at])),re=Ii({},Ca,F.validateMessages),Wt.messages(re),he=[],Ue.prev=10,Ue.next=13,Promise.resolve(Wt.validate((0,lr.Z)({},P,I),(0,rt.Z)({},F)));case 13:Ue.next=18;break;case 15:Ue.prev=15,Ue.t0=Ue.catch(10),Ue.t0.errors&&(he=Ue.t0.errors.map(function(Te,fn){var We=Te.message,sn=We===ws?re.default:We;return Ht.isValidElement(sn)?Ht.cloneElement(sn,{key:"error_".concat(fn)}):sn}));case 18:if(!(!he.length&&It)){Ue.next=23;break}return Ue.next=21,Promise.all(I.map(function(Te,fn){return rs("".concat(P,".").concat(fn),Te,It,F,st)}));case 21:return Se=Ue.sent,Ue.abrupt("return",Se.reduce(function(Te,fn){return[].concat((0,V.Z)(Te),(0,V.Z)(fn))},[]));case 23:return Mn=(0,rt.Z)((0,rt.Z)({},G),{},{name:P,enum:(G.enum||[]).join(", ")},st),hn=he.map(function(Te){return typeof Te=="string"?bc(Te,Mn):Te}),Ue.abrupt("return",hn);case 26:case"end":return Ue.stop()}},z,null,[[10,15]])})),Wi.apply(this,arguments)}function Xi(z,P,I,G,F,st){var at=z.join("."),Mt=I.map(function(re,he){var Se=re.validator,Mn=(0,rt.Z)((0,rt.Z)({},re),{},{ruleIndex:he});return Se&&(Mn.validator=function(hn,ze,Ue){var Te=!1,fn=function(){for(var Fn=arguments.length,an=new Array(Fn),In=0;In<Fn;In++)an[In]=arguments[In];Promise.resolve().then(function(){(0,Dt.ZP)(!Te,"Your validator function has already return a promise. `callback` will be ignored."),Te||Ue.apply(void 0,an)})},We=Se(hn,ze,fn);Te=We&&typeof We.then=="function"&&typeof We.catch=="function",(0,Dt.ZP)(Te,"`callback` is deprecated. Please return a promise instead."),Te&&We.then(function(){Ue()}).catch(function(sn){Ue(sn||" ")})}),Mn}).sort(function(re,he){var Se=re.warningOnly,Mn=re.ruleIndex,hn=he.warningOnly,ze=he.ruleIndex;return!!Se==!!hn?Mn-ze:Se?1:-1}),It;if(F===!0)It=new Promise(function(){var re=(0,qr.Z)((0,Kr.Z)().mark(function he(Se,Mn){var hn,ze,Ue;return(0,Kr.Z)().wrap(function(fn){for(;;)switch(fn.prev=fn.next){case 0:hn=0;case 1:if(!(hn<Mt.length)){fn.next=12;break}return ze=Mt[hn],fn.next=5,rs(at,P,ze,G,st);case 5:if(Ue=fn.sent,!Ue.length){fn.next=9;break}return Mn([{errors:Ue,rule:ze}]),fn.abrupt("return");case 9:hn+=1,fn.next=1;break;case 12:Se([]);case 13:case"end":return fn.stop()}},he)}));return function(he,Se){return re.apply(this,arguments)}}());else{var Wt=Mt.map(function(re){return rs(at,P,re,G,st).then(function(he){return{errors:he,rule:re}})});It=(F?uo(Wt):Ss(Wt)).then(function(re){return Promise.reject(re)})}return It.catch(function(re){return re}),It}function Ss(z){return Do.apply(this,arguments)}function Do(){return Do=(0,qr.Z)((0,Kr.Z)().mark(function z(P){return(0,Kr.Z)().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",Promise.all(P).then(function(F){var st,at=(st=[]).concat.apply(st,(0,V.Z)(F));return at}));case 1:case"end":return G.stop()}},z)})),Do.apply(this,arguments)}function uo(z){return $a.apply(this,arguments)}function $a(){return $a=(0,qr.Z)((0,Kr.Z)().mark(function z(P){var I;return(0,Kr.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return I=0,F.abrupt("return",new Promise(function(st){P.forEach(function(at){at.then(function(Mt){Mt.errors.length&&st([Mt]),I+=1,I===P.length&&st([])})})}));case 2:case"end":return F.stop()}},z)})),$a.apply(this,arguments)}var Ha=["name"],$o=[];function Au(z,P,I,G,F,st){return typeof z=="function"?z(P,I,"source"in st?{source:st.source}:{}):G!==F}var Wa=function(z){(0,vt.Z)(I,z);var P=(0,Qt.Z)(I);function I(G){var F;if((0,bn.Z)(this,I),F=P.call(this,G),F.state={resetCount:0},F.cancelRegisterFunc=null,F.mounted=!1,F.touched=!1,F.dirty=!1,F.validatePromise=void 0,F.prevValidating=void 0,F.errors=$o,F.warnings=$o,F.cancelRegister=function(){var It=F.props,Wt=It.preserve,re=It.isListField,he=It.name;F.cancelRegisterFunc&&F.cancelRegisterFunc(re,Wt,yi(he)),F.cancelRegisterFunc=null},F.getNamePath=function(){var It=F.props,Wt=It.name,re=It.fieldContext,he=re.prefixName,Se=he===void 0?[]:he;return Wt!==void 0?[].concat((0,V.Z)(Se),(0,V.Z)(Wt)):[]},F.getRules=function(){var It=F.props,Wt=It.rules,re=Wt===void 0?[]:Wt,he=It.fieldContext;return re.map(function(Se){return typeof Se=="function"?Se(he):Se})},F.refresh=function(){F.mounted&&F.setState(function(It){var Wt=It.resetCount;return{resetCount:Wt+1}})},F.triggerMetaEvent=function(It){var Wt=F.props.onMetaChange;Wt==null||Wt((0,rt.Z)((0,rt.Z)({},F.getMeta()),{},{destroy:It}))},F.onStoreChange=function(It,Wt,re){var he=F.props,Se=he.shouldUpdate,Mn=he.dependencies,hn=Mn===void 0?[]:Mn,ze=he.onReset,Ue=re.store,Te=F.getNamePath(),fn=F.getValue(It),We=F.getValue(Ue),sn=Wt&&Ir(Wt,Te);switch(re.type==="valueUpdate"&&re.source==="external"&&fn!==We&&(F.touched=!0,F.dirty=!0,F.validatePromise=null,F.errors=$o,F.warnings=$o,F.triggerMetaEvent()),re.type){case"reset":if(!Wt||sn){F.touched=!1,F.dirty=!1,F.validatePromise=void 0,F.errors=$o,F.warnings=$o,F.triggerMetaEvent(),ze==null||ze(),F.refresh();return}break;case"remove":{if(Se){F.reRender();return}break}case"setField":{if(sn){var Fn=re.data;"touched"in Fn&&(F.touched=Fn.touched),"validating"in Fn&&!("originRCField"in Fn)&&(F.validatePromise=Fn.validating?Promise.resolve([]):null),"errors"in Fn&&(F.errors=Fn.errors||$o),"warnings"in Fn&&(F.warnings=Fn.warnings||$o),F.dirty=!0,F.triggerMetaEvent(),F.reRender();return}if(Se&&!Te.length&&Au(Se,It,Ue,fn,We,re)){F.reRender();return}break}case"dependenciesUpdate":{var an=hn.map(yi);if(an.some(function(In){return Ir(re.relatedFields,In)})){F.reRender();return}break}default:if(sn||(!hn.length||Te.length||Se)&&Au(Se,It,Ue,fn,We,re)){F.reRender();return}break}Se===!0&&F.reRender()},F.validateRules=function(It){var Wt=F.getNamePath(),re=F.getValue(),he=Promise.resolve().then(function(){if(!F.mounted)return[];var Se=F.props,Mn=Se.validateFirst,hn=Mn===void 0?!1:Mn,ze=Se.messageVariables,Ue=It||{},Te=Ue.triggerName,fn=F.getRules();Te&&(fn=fn.filter(function(sn){return sn}).filter(function(sn){var Fn=sn.validateTrigger;if(!Fn)return!0;var an=Rn(Fn);return an.includes(Te)}));var We=Xi(Wt,re,fn,It,hn,ze);return We.catch(function(sn){return sn}).then(function(){var sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$o;if(F.validatePromise===he){var Fn;F.validatePromise=null;var an=[],In=[];(Fn=sn.forEach)===null||Fn===void 0||Fn.call(sn,function(sr){var dr=sr.rule.warningOnly,Bn=sr.errors,Ar=Bn===void 0?$o:Bn;dr?In.push.apply(In,(0,V.Z)(Ar)):an.push.apply(an,(0,V.Z)(Ar))}),F.errors=an,F.warnings=In,F.triggerMetaEvent(),F.reRender()}}),We});return F.validatePromise=he,F.dirty=!0,F.errors=$o,F.warnings=$o,F.triggerMetaEvent(),F.reRender(),he},F.isFieldValidating=function(){return!!F.validatePromise},F.isFieldTouched=function(){return F.touched},F.isFieldDirty=function(){if(F.dirty||F.props.initialValue!==void 0)return!0;var It=F.props.fieldContext,Wt=It.getInternalHooks(on),re=Wt.getInitialValue;return re(F.getNamePath())!==void 0},F.getErrors=function(){return F.errors},F.getWarnings=function(){return F.warnings},F.isListField=function(){return F.props.isListField},F.isList=function(){return F.props.isList},F.isPreserve=function(){return F.props.preserve},F.getMeta=function(){F.prevValidating=F.isFieldValidating();var It={touched:F.isFieldTouched(),validating:F.prevValidating,errors:F.errors,warnings:F.warnings,name:F.getNamePath(),validated:F.validatePromise===null};return It},F.getOnlyChild=function(It){if(typeof It=="function"){var Wt=F.getMeta();return(0,rt.Z)((0,rt.Z)({},F.getOnlyChild(It(F.getControlled(),Wt,F.props.fieldContext))),{},{isFunction:!0})}var re=(0,jt.Z)(It);return re.length!==1||!Ht.isValidElement(re[0])?{child:re,isFunction:!1}:{child:re[0],isFunction:!1}},F.getValue=function(It){var Wt=F.props.fieldContext.getFieldsValue,re=F.getNamePath();return No(It||Wt(!0),re)},F.getControlled=function(){var It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Wt=F.props,re=Wt.trigger,he=Wt.validateTrigger,Se=Wt.getValueFromEvent,Mn=Wt.normalize,hn=Wt.valuePropName,ze=Wt.getValueProps,Ue=Wt.fieldContext,Te=he!==void 0?he:Ue.validateTrigger,fn=F.getNamePath(),We=Ue.getInternalHooks,sn=Ue.getFieldsValue,Fn=We(on),an=Fn.dispatch,In=F.getValue(),sr=ze||function(rr){return(0,lr.Z)({},hn,rr)},dr=It[re],Bn=(0,rt.Z)((0,rt.Z)({},It),sr(In));Bn[re]=function(){F.touched=!0,F.dirty=!0,F.triggerMetaEvent();for(var rr,yr=arguments.length,Rr=new Array(yr),Pi=0;Pi<yr;Pi++)Rr[Pi]=arguments[Pi];Se?rr=Se.apply(void 0,Rr):rr=ta.apply(void 0,[hn].concat(Rr)),Mn&&(rr=Mn(rr,In,sn(!0))),an({type:"updateValue",namePath:fn,value:rr}),dr&&dr.apply(void 0,Rr)};var Ar=Rn(Te||[]);return Ar.forEach(function(rr){var yr=Bn[rr];Bn[rr]=function(){yr&&yr.apply(void 0,arguments);var Rr=F.props.rules;Rr&&Rr.length&&an({type:"validateField",namePath:fn,triggerName:rr})}}),Bn},G.fieldContext){var st=G.fieldContext.getInternalHooks,at=st(on),Mt=at.initEntityValue;Mt((0,kt.Z)(F))}return F}return(0,Je.Z)(I,[{key:"componentDidMount",value:function(){var F=this.props,st=F.shouldUpdate,at=F.fieldContext;if(this.mounted=!0,at){var Mt=at.getInternalHooks,It=Mt(on),Wt=It.registerField;this.cancelRegisterFunc=Wt(this)}st===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var F=this.state.resetCount,st=this.props.children,at=this.getOnlyChild(st),Mt=at.child,It=at.isFunction,Wt;return It?Wt=Mt:Ht.isValidElement(Mt)?Wt=Ht.cloneElement(Mt,this.getControlled(Mt.props)):((0,Dt.ZP)(!Mt,"`children` of Field is not validate ReactElement."),Wt=Mt),Ht.createElement(Ht.Fragment,{key:F},Wt)}}]),I}(Ht.Component);Wa.contextType=Cn,Wa.defaultProps={trigger:"onChange",valuePropName:"value"};function xi(z){var P=z.name,I=(0,rn.Z)(z,Ha),G=Ht.useContext(Cn),F=Ht.useContext(zn),st=P!==void 0?yi(P):void 0,at="keep";return I.isListField||(at="_".concat((st||[]).join("_"))),Ht.createElement(Wa,(0,_r.Z)({key:at,name:st,isListField:!!F},I,{fieldContext:G}))}var Uc=xi,Vc=function(P){var I=P.name,G=P.initialValue,F=P.children,st=P.rules,at=P.validateTrigger,Mt=P.isListField,It=Ht.useContext(Cn),Wt=Ht.useContext(zn),re=Ht.useRef({keys:[],id:0}),he=re.current,Se=Ht.useMemo(function(){var Ue=yi(It.prefixName)||[];return[].concat((0,V.Z)(Ue),(0,V.Z)(yi(I)))},[It.prefixName,I]),Mn=Ht.useMemo(function(){return(0,rt.Z)((0,rt.Z)({},It),{},{prefixName:Se})},[It,Se]),hn=Ht.useMemo(function(){return{getKey:function(Te){var fn=Se.length,We=Te[fn];return[he.keys[We],Te.slice(fn+1)]}}},[Se]);if(typeof F!="function")return(0,Dt.ZP)(!1,"Form.List only accepts function as children."),null;var ze=function(Te,fn,We){var sn=We.source;return sn==="internal"?!1:Te!==fn};return Ht.createElement(zn.Provider,{value:hn},Ht.createElement(Cn.Provider,{value:Mn},Ht.createElement(Uc,{name:[],shouldUpdate:ze,rules:st,validateTrigger:at,initialValue:G,isList:!0,isListField:Mt!=null?Mt:!!Wt},function(Ue,Te){var fn=Ue.value,We=fn===void 0?[]:fn,sn=Ue.onChange,Fn=It.getFieldValue,an=function(){var Bn=Fn(Se||[]);return Bn||[]},In={add:function(Bn,Ar){var rr=an();Ar>=0&&Ar<=rr.length?(he.keys=[].concat((0,V.Z)(he.keys.slice(0,Ar)),[he.id],(0,V.Z)(he.keys.slice(Ar))),sn([].concat((0,V.Z)(rr.slice(0,Ar)),[Bn],(0,V.Z)(rr.slice(Ar))))):(he.keys=[].concat((0,V.Z)(he.keys),[he.id]),sn([].concat((0,V.Z)(rr),[Bn]))),he.id+=1},remove:function(Bn){var Ar=an(),rr=new Set(Array.isArray(Bn)?Bn:[Bn]);rr.size<=0||(he.keys=he.keys.filter(function(yr,Rr){return!rr.has(Rr)}),sn(Ar.filter(function(yr,Rr){return!rr.has(Rr)})))},move:function(Bn,Ar){if(Bn!==Ar){var rr=an();Bn<0||Bn>=rr.length||Ar<0||Ar>=rr.length||(he.keys=zs(he.keys,Bn,Ar),sn(zs(rr,Bn,Ar)))}}},sr=We||[];return Array.isArray(sr)||(sr=[]),F(sr.map(function(dr,Bn){var Ar=he.keys[Bn];return Ar===void 0&&(he.keys[Bn]=he.id,Ar=he.keys[Bn],he.id+=1),{name:Bn,key:Ar,isListField:!0}}),In,Te)})))},Ou=Vc,is=O(66441);function Zc(z){var P=!1,I=z.length,G=[];return z.length?new Promise(function(F,st){z.forEach(function(at,Mt){at.catch(function(It){return P=!0,It}).then(function(It){I-=1,G[Mt]=It,!(I>0)&&(P&&st(G),F(G))})})}):Promise.resolve([])}var Mu="__@field_split__";function os(z){return z.map(function(P){return"".concat((0,ft.Z)(P),":").concat(P)}).join(Mu)}var lo=function(){function z(){(0,bn.Z)(this,z),this.kvs=new Map}return(0,Je.Z)(z,[{key:"set",value:function(I,G){this.kvs.set(os(I),G)}},{key:"get",value:function(I){return this.kvs.get(os(I))}},{key:"update",value:function(I,G){var F=this.get(I),st=G(F);st?this.set(I,st):this.delete(I)}},{key:"delete",value:function(I){this.kvs.delete(os(I))}},{key:"map",value:function(I){return(0,V.Z)(this.kvs.entries()).map(function(G){var F=(0,is.Z)(G,2),st=F[0],at=F[1],Mt=st.split(Mu);return I({key:Mt.map(function(It){var Wt=It.match(/^([^:]*):(.*)$/),re=(0,is.Z)(Wt,3),he=re[1],Se=re[2];return he==="number"?Number(Se):Se}),value:at})})}},{key:"toJSON",value:function(){var I={};return this.map(function(G){var F=G.key,st=G.value;return I[F.join(".")]=st,null}),I}}]),z}(),Xa=lo,Ya=["name"],Iu=(0,Je.Z)(function z(P){var I=this;(0,bn.Z)(this,z),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:I.getFieldValue,getFieldsValue:I.getFieldsValue,getFieldError:I.getFieldError,getFieldWarning:I.getFieldWarning,getFieldsError:I.getFieldsError,isFieldsTouched:I.isFieldsTouched,isFieldTouched:I.isFieldTouched,isFieldValidating:I.isFieldValidating,isFieldsValidating:I.isFieldsValidating,resetFields:I.resetFields,setFields:I.setFields,setFieldValue:I.setFieldValue,setFieldsValue:I.setFieldsValue,validateFields:I.validateFields,submit:I.submit,_init:!0,getInternalHooks:I.getInternalHooks}},this.getInternalHooks=function(G){return G===on?(I.formHooked=!0,{dispatch:I.dispatch,initEntityValue:I.initEntityValue,registerField:I.registerField,useSubscribe:I.useSubscribe,setInitialValues:I.setInitialValues,destroyForm:I.destroyForm,setCallbacks:I.setCallbacks,setValidateMessages:I.setValidateMessages,getFields:I.getFields,setPreserve:I.setPreserve,getInitialValue:I.getInitialValue,registerWatch:I.registerWatch}):((0,Dt.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(G){I.subscribable=G},this.prevWithoutPreserves=null,this.setInitialValues=function(G,F){if(I.initialValues=G||{},F){var st,at=Ii({},G,I.store);(st=I.prevWithoutPreserves)===null||st===void 0||st.map(function(Mt){var It=Mt.key;at=es(at,It,No(G,It))}),I.prevWithoutPreserves=null,I.updateStore(at)}},this.destroyForm=function(){var G=new Xa;I.getFieldEntities(!0).forEach(function(F){I.isMergedPreserve(F.isPreserve())||G.set(F.getNamePath(),!0)}),I.prevWithoutPreserves=G},this.getInitialValue=function(G){var F=No(I.initialValues,G);return G.length?sa(F):F},this.setCallbacks=function(G){I.callbacks=G},this.setValidateMessages=function(G){I.validateMessages=G},this.setPreserve=function(G){I.preserve=G},this.watchList=[],this.registerWatch=function(G){return I.watchList.push(G),function(){I.watchList=I.watchList.filter(function(F){return F!==G})}},this.notifyWatch=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(I.watchList.length){var F=I.getFieldsValue(),st=I.getFieldsValue(!0);I.watchList.forEach(function(at){at(F,st,G)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(G){I.store=G},this.getFieldEntities=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return G?I.fieldEntities.filter(function(F){return F.getNamePath().length}):I.fieldEntities},this.getFieldsMap=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,F=new Xa;return I.getFieldEntities(G).forEach(function(st){var at=st.getNamePath();F.set(at,st)}),F},this.getFieldEntitiesForNamePathList=function(G){if(!G)return I.getFieldEntities(!0);var F=I.getFieldsMap(!0);return G.map(function(st){var at=yi(st);return F.get(at)||{INVALIDATE_NAME_PATH:yi(st)}})},this.getFieldsValue=function(G,F){if(I.warningUnhooked(),G===!0&&!F)return I.store;var st=I.getFieldEntitiesForNamePathList(Array.isArray(G)?G:null),at=[];return st.forEach(function(Mt){var It,Wt="INVALIDATE_NAME_PATH"in Mt?Mt.INVALIDATE_NAME_PATH:Mt.getNamePath();if(!(!G&&(!((It=Mt.isListField)===null||It===void 0)&&It.call(Mt))))if(!F)at.push(Wt);else{var re="getMeta"in Mt?Mt.getMeta():null;F(re)&&at.push(Wt)}}),Ke(I.store,at.map(yi))},this.getFieldValue=function(G){I.warningUnhooked();var F=yi(G);return No(I.store,F)},this.getFieldsError=function(G){I.warningUnhooked();var F=I.getFieldEntitiesForNamePathList(G);return F.map(function(st,at){return st&&!("INVALIDATE_NAME_PATH"in st)?{name:st.getNamePath(),errors:st.getErrors(),warnings:st.getWarnings()}:{name:yi(G[at]),errors:[],warnings:[]}})},this.getFieldError=function(G){I.warningUnhooked();var F=yi(G),st=I.getFieldsError([F])[0];return st.errors},this.getFieldWarning=function(G){I.warningUnhooked();var F=yi(G),st=I.getFieldsError([F])[0];return st.warnings},this.isFieldsTouched=function(){I.warningUnhooked();for(var G=arguments.length,F=new Array(G),st=0;st<G;st++)F[st]=arguments[st];var at=F[0],Mt=F[1],It,Wt=!1;F.length===0?It=null:F.length===1?Array.isArray(at)?(It=at.map(yi),Wt=!1):(It=null,Wt=at):(It=at.map(yi),Wt=Mt);var re=I.getFieldEntities(!0),he=function(Ue){return Ue.isFieldTouched()};if(!It)return Wt?re.every(he):re.some(he);var Se=new Xa;It.forEach(function(ze){Se.set(ze,[])}),re.forEach(function(ze){var Ue=ze.getNamePath();It.forEach(function(Te){Te.every(function(fn,We){return Ue[We]===fn})&&Se.update(Te,function(fn){return[].concat((0,V.Z)(fn),[ze])})})});var Mn=function(Ue){return Ue.some(he)},hn=Se.map(function(ze){var Ue=ze.value;return Ue});return Wt?hn.every(Mn):hn.some(Mn)},this.isFieldTouched=function(G){return I.warningUnhooked(),I.isFieldsTouched([G])},this.isFieldsValidating=function(G){I.warningUnhooked();var F=I.getFieldEntities();if(!G)return F.some(function(at){return at.isFieldValidating()});var st=G.map(yi);return F.some(function(at){var Mt=at.getNamePath();return Ir(st,Mt)&&at.isFieldValidating()})},this.isFieldValidating=function(G){return I.warningUnhooked(),I.isFieldsValidating([G])},this.resetWithFieldInitialValue=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=new Xa,st=I.getFieldEntities(!0);st.forEach(function(It){var Wt=It.props.initialValue,re=It.getNamePath();if(Wt!==void 0){var he=F.get(re)||new Set;he.add({entity:It,value:Wt}),F.set(re,he)}});var at=function(Wt){Wt.forEach(function(re){var he=re.props.initialValue;if(he!==void 0){var Se=re.getNamePath(),Mn=I.getInitialValue(Se);if(Mn!==void 0)(0,Dt.ZP)(!1,"Form already set 'initialValues' with path '".concat(Se.join("."),"'. Field can not overwrite it."));else{var hn=F.get(Se);if(hn&&hn.size>1)(0,Dt.ZP)(!1,"Multiple Field with path '".concat(Se.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(hn){var ze=I.getFieldValue(Se);(!G.skipExist||ze===void 0)&&I.updateStore(es(I.store,Se,(0,V.Z)(hn)[0].value))}}}})},Mt;G.entities?Mt=G.entities:G.namePathList?(Mt=[],G.namePathList.forEach(function(It){var Wt=F.get(It);if(Wt){var re;(re=Mt).push.apply(re,(0,V.Z)((0,V.Z)(Wt).map(function(he){return he.entity})))}})):Mt=st,at(Mt)},this.resetFields=function(G){I.warningUnhooked();var F=I.store;if(!G){I.updateStore(Ii({},I.initialValues)),I.resetWithFieldInitialValue(),I.notifyObservers(F,null,{type:"reset"}),I.notifyWatch();return}var st=G.map(yi);st.forEach(function(at){var Mt=I.getInitialValue(at);I.updateStore(es(I.store,at,Mt))}),I.resetWithFieldInitialValue({namePathList:st}),I.notifyObservers(F,st,{type:"reset"}),I.notifyWatch(st)},this.setFields=function(G){I.warningUnhooked();var F=I.store,st=[];G.forEach(function(at){var Mt=at.name,It=(0,rn.Z)(at,Ya),Wt=yi(Mt);st.push(Wt),"value"in It&&I.updateStore(es(I.store,Wt,It.value)),I.notifyObservers(F,[Wt],{type:"setField",data:at})}),I.notifyWatch(st)},this.getFields=function(){var G=I.getFieldEntities(!0),F=G.map(function(st){var at=st.getNamePath(),Mt=st.getMeta(),It=(0,rt.Z)((0,rt.Z)({},Mt),{},{name:at,value:I.getFieldValue(at)});return Object.defineProperty(It,"originRCField",{value:!0}),It});return F},this.initEntityValue=function(G){var F=G.props.initialValue;if(F!==void 0){var st=G.getNamePath(),at=No(I.store,st);at===void 0&&I.updateStore(es(I.store,st,F))}},this.isMergedPreserve=function(G){var F=G!==void 0?G:I.preserve;return F!=null?F:!0},this.registerField=function(G){I.fieldEntities.push(G);var F=G.getNamePath();if(I.notifyWatch([F]),G.props.initialValue!==void 0){var st=I.store;I.resetWithFieldInitialValue({entities:[G],skipExist:!0}),I.notifyObservers(st,[G.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(at,Mt){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(I.fieldEntities=I.fieldEntities.filter(function(he){return he!==G}),!I.isMergedPreserve(Mt)&&(!at||It.length>1)){var Wt=at?void 0:I.getInitialValue(F);if(F.length&&I.getFieldValue(F)!==Wt&&I.fieldEntities.every(function(he){return!co(he.getNamePath(),F)})){var re=I.store;I.updateStore(es(re,F,Wt,!0)),I.notifyObservers(re,[F],{type:"remove"}),I.triggerDependenciesUpdate(re,F)}}I.notifyWatch([F])}},this.dispatch=function(G){switch(G.type){case"updateValue":{var F=G.namePath,st=G.value;I.updateValue(F,st);break}case"validateField":{var at=G.namePath,Mt=G.triggerName;I.validateFields([at],{triggerName:Mt});break}default:}},this.notifyObservers=function(G,F,st){if(I.subscribable){var at=(0,rt.Z)((0,rt.Z)({},st),{},{store:I.getFieldsValue(!0)});I.getFieldEntities().forEach(function(Mt){var It=Mt.onStoreChange;It(G,F,at)})}else I.forceRootUpdate()},this.triggerDependenciesUpdate=function(G,F){var st=I.getDependencyChildrenFields(F);return st.length&&I.validateFields(st),I.notifyObservers(G,st,{type:"dependenciesUpdate",relatedFields:[F].concat((0,V.Z)(st))}),st},this.updateValue=function(G,F){var st=yi(G),at=I.store;I.updateStore(es(I.store,st,F)),I.notifyObservers(at,[st],{type:"valueUpdate",source:"internal"}),I.notifyWatch([st]);var Mt=I.triggerDependenciesUpdate(at,st),It=I.callbacks.onValuesChange;if(It){var Wt=Ke(I.store,[st]);It(Wt,I.getFieldsValue())}I.triggerOnFieldsChange([st].concat((0,V.Z)(Mt)))},this.setFieldsValue=function(G){I.warningUnhooked();var F=I.store;if(G){var st=Ii(I.store,G);I.updateStore(st)}I.notifyObservers(F,null,{type:"valueUpdate",source:"external"}),I.notifyWatch()},this.setFieldValue=function(G,F){I.setFields([{name:G,value:F}])},this.getDependencyChildrenFields=function(G){var F=new Set,st=[],at=new Xa;I.getFieldEntities().forEach(function(It){var Wt=It.props.dependencies;(Wt||[]).forEach(function(re){var he=yi(re);at.update(he,function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return Se.add(It),Se})})});var Mt=function It(Wt){var re=at.get(Wt)||new Set;re.forEach(function(he){if(!F.has(he)){F.add(he);var Se=he.getNamePath();he.isFieldDirty()&&Se.length&&(st.push(Se),It(Se))}})};return Mt(G),st},this.triggerOnFieldsChange=function(G,F){var st=I.callbacks.onFieldsChange;if(st){var at=I.getFields();if(F){var Mt=new Xa;F.forEach(function(Wt){var re=Wt.name,he=Wt.errors;Mt.set(re,he)}),at.forEach(function(Wt){Wt.errors=Mt.get(Wt.name)||Wt.errors})}var It=at.filter(function(Wt){var re=Wt.name;return Ir(G,re)});st(It,at)}},this.validateFields=function(G,F){I.warningUnhooked();var st=!!G,at=st?G.map(yi):[],Mt=[];I.getFieldEntities(!0).forEach(function(re){if(st||at.push(re.getNamePath()),F!=null&&F.recursive&&st){var he=re.getNamePath();he.every(function(hn,ze){return G[ze]===hn||G[ze]===void 0})&&at.push(he)}if(!(!re.props.rules||!re.props.rules.length)){var Se=re.getNamePath();if(!st||Ir(at,Se)){var Mn=re.validateRules((0,rt.Z)({validateMessages:(0,rt.Z)((0,rt.Z)({},Ca),I.validateMessages)},F));Mt.push(Mn.then(function(){return{name:Se,errors:[],warnings:[]}}).catch(function(hn){var ze,Ue=[],Te=[];return(ze=hn.forEach)===null||ze===void 0||ze.call(hn,function(fn){var We=fn.rule.warningOnly,sn=fn.errors;We?Te.push.apply(Te,(0,V.Z)(sn)):Ue.push.apply(Ue,(0,V.Z)(sn))}),Ue.length?Promise.reject({name:Se,errors:Ue,warnings:Te}):{name:Se,errors:Ue,warnings:Te}}))}}});var It=Zc(Mt);I.lastValidatePromise=It,It.catch(function(re){return re}).then(function(re){var he=re.map(function(Se){var Mn=Se.name;return Mn});I.notifyObservers(I.store,he,{type:"validateFinish"}),I.triggerOnFieldsChange(he,re)});var Wt=It.then(function(){return I.lastValidatePromise===It?Promise.resolve(I.getFieldsValue(at)):Promise.reject([])}).catch(function(re){var he=re.filter(function(Se){return Se&&Se.errors.length});return Promise.reject({values:I.getFieldsValue(at),errorFields:he,outOfDate:I.lastValidatePromise!==It})});return Wt.catch(function(re){return re}),I.triggerOnFieldsChange(at),Wt},this.submit=function(){I.warningUnhooked(),I.validateFields().then(function(G){var F=I.callbacks.onFinish;if(F)try{F(G)}catch(st){console.error(st)}}).catch(function(G){var F=I.callbacks.onFinishFailed;F&&F(G)})},this.forceRootUpdate=P});function Aa(z){var P=Ht.useRef(),I=Ht.useState({}),G=(0,is.Z)(I,2),F=G[1];if(!P.current)if(z)P.current=z;else{var st=function(){F({})},at=new Iu(st);P.current=at.getForm()}return[P.current]}var Ka=Aa,$c=Ht.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Hc=function(P){var I=P.validateMessages,G=P.onFormChange,F=P.onFormFinish,st=P.children,at=Ht.useContext($c),Mt=Ht.useRef({});return Ht.createElement($c.Provider,{value:(0,rt.Z)((0,rt.Z)({},at),{},{validateMessages:(0,rt.Z)((0,rt.Z)({},at.validateMessages),I),triggerFormChange:function(Wt,re){G&&G(Wt,{changedFields:re,forms:Mt.current}),at.triggerFormChange(Wt,re)},triggerFormFinish:function(Wt,re){F&&F(Wt,{values:re,forms:Mt.current}),at.triggerFormFinish(Wt,re)},registerForm:function(Wt,re){Wt&&(Mt.current=(0,rt.Z)((0,rt.Z)({},Mt.current),{},(0,lr.Z)({},Wt,re))),at.registerForm(Wt,re)},unregisterForm:function(Wt){var re=(0,rt.Z)({},Mt.current);delete re[Wt],Mt.current=re,at.unregisterForm(Wt)}})},st)},Pu=$c,Ct=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Jt=function(P,I){var G=P.name,F=P.initialValues,st=P.fields,at=P.form,Mt=P.preserve,It=P.children,Wt=P.component,re=Wt===void 0?"form":Wt,he=P.validateMessages,Se=P.validateTrigger,Mn=Se===void 0?"onChange":Se,hn=P.onValuesChange,ze=P.onFieldsChange,Ue=P.onFinish,Te=P.onFinishFailed,fn=(0,rn.Z)(P,Ct),We=Ht.useContext(Pu),sn=Ka(at),Fn=(0,is.Z)(sn,1),an=Fn[0],In=an.getInternalHooks(on),sr=In.useSubscribe,dr=In.setInitialValues,Bn=In.setCallbacks,Ar=In.setValidateMessages,rr=In.setPreserve,yr=In.destroyForm;Ht.useImperativeHandle(I,function(){return an}),Ht.useEffect(function(){return We.registerForm(G,an),function(){We.unregisterForm(G)}},[We,an,G]),Ar((0,rt.Z)((0,rt.Z)({},We.validateMessages),he)),Bn({onValuesChange:hn,onFieldsChange:function(Ms){if(We.triggerFormChange(G,Ms),ze){for(var ic=arguments.length,jl=new Array(ic>1?ic-1:0),Uu=1;Uu<ic;Uu++)jl[Uu-1]=arguments[Uu];ze.apply(void 0,[Ms].concat(jl))}},onFinish:function(Ms){We.triggerFormFinish(G,Ms),Ue&&Ue(Ms)},onFinishFailed:Te}),rr(Mt);var Rr=Ht.useRef(null);dr(F,!Rr.current),Rr.current||(Rr.current=!0),Ht.useEffect(function(){return yr},[]);var Pi,Mo=typeof It=="function";if(Mo){var Ma=an.getFieldsValue(!0);Pi=It(Ma,an)}else Pi=It;sr(!Mo);var Bl=Ht.useRef();Ht.useEffect(function(){ro(Bl.current||[],st||[])||an.setFields(st||[]),Bl.current=st},[st,an]);var Ff=Ht.useMemo(function(){return(0,rt.Z)((0,rt.Z)({},an),{},{validateTrigger:Mn})},[an,Mn]),Gl=Ht.createElement(Cn.Provider,{value:Ff},Pi);return re===!1?Gl:Ht.createElement(re,(0,_r.Z)({},fn,{onSubmit:function(Ms){Ms.preventDefault(),Ms.stopPropagation(),an.submit()},onReset:function(Ms){var ic;Ms.preventDefault(),an.resetFields(),(ic=fn.onReset)===null||ic===void 0||ic.call(fn,Ms)}}),Gl)},ne=Jt;function me(z){try{return JSON.stringify(z)}catch(P){return Math.random()}}var Me=function(){};function An(){for(var z=arguments.length,P=new Array(z),I=0;I<z;I++)P[I]=arguments[I];var G=P[0],F=G===void 0?[]:G,st=P[1],at=st===void 0?{}:st,Mt=si(at)?{form:at}:at,It=Mt.form,Wt=(0,Ht.useState)(),re=(0,is.Z)(Wt,2),he=re[0],Se=re[1],Mn=(0,Ht.useMemo)(function(){return me(he)},[he]),hn=(0,Ht.useRef)(Mn);hn.current=Mn;var ze=(0,Ht.useContext)(Cn),Ue=It||ze,Te=Ue&&Ue._init,fn=yi(F),We=(0,Ht.useRef)(fn);return We.current=fn,Me(fn),(0,Ht.useEffect)(function(){if(Te){var sn=Ue.getFieldsValue,Fn=Ue.getInternalHooks,an=Fn(on),In=an.registerWatch,sr=In(function(Bn,Ar){var rr=No(Mt.preserve?Ar:Bn,We.current),yr=me(rr);hn.current!==yr&&(hn.current=yr,Se(rr))}),dr=No(Mt.preserve?sn(!0):sn(),We.current);return Se(dr),sr}},[Te]),he}var On=An,Nn=Ht.forwardRef(ne),$n=Nn;$n.FormProvider=Hc,$n.Field=Uc,$n.List=Ou,$n.useForm=Ka,$n.useWatch=On;var er=null,Cr=O(48466),mr={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},br={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},Qr=br,or={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Zr={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Qr),timePickerLocale:Object.assign({},or)},ui=Zr;const Dr="${label} is not a valid ${type}";var Ci={locale:"en",Pagination:mr,DatePicker:Zr,TimePicker:or,Calendar:ui,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Dr,method:Dr,array:Dr,object:Dr,number:Dr,date:Dr,boolean:Dr,integer:Dr,float:Dr,regexp:Dr,email:Dr,url:Dr,hex:Dr},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"}};let ti=Object.assign({},Ci.Modal);function Tr(z){z?ti=Object.assign(Object.assign({},ti),z):ti=Object.assign({},Ci.Modal)}function Cs(){return ti}var $r=(0,Ht.createContext)(void 0);const fo="internalMark";var aa=z=>{const{locale:P={},children:I,_ANT_MARK__:G}=z;Ht.useEffect(()=>(Tr(P&&P.Modal),()=>{Tr()}),[P]);const F=Ht.useMemo(()=>Object.assign(Object.assign({},P),{exist:!0}),[P]);return Ht.createElement($r.Provider,{value:F},I)},Hr=O(41834),ca=O(15431),ho=O(76166),xo=O(81548),ss=O(99590),js=O(57917),ea=O(26869);const na=`-ant-${Date.now()}-${Math.random()}`;function as(z,P){const I={},G=(at,Mt)=>{let It=at.clone();return It=(Mt==null?void 0:Mt(It))||It,It.toRgbString()},F=(at,Mt)=>{const It=new ss.C(at),Wt=(0,xo.R_)(It.toRgbString());I[`${Mt}-color`]=G(It),I[`${Mt}-color-disabled`]=Wt[1],I[`${Mt}-color-hover`]=Wt[4],I[`${Mt}-color-active`]=Wt[6],I[`${Mt}-color-outline`]=It.clone().setAlpha(.2).toRgbString(),I[`${Mt}-color-deprecated-bg`]=Wt[0],I[`${Mt}-color-deprecated-border`]=Wt[2]};if(P.primaryColor){F(P.primaryColor,"primary");const at=new ss.C(P.primaryColor),Mt=(0,xo.R_)(at.toRgbString());Mt.forEach((Wt,re)=>{I[`primary-${re+1}`]=Wt}),I["primary-color-deprecated-l-35"]=G(at,Wt=>Wt.lighten(35)),I["primary-color-deprecated-l-20"]=G(at,Wt=>Wt.lighten(20)),I["primary-color-deprecated-t-20"]=G(at,Wt=>Wt.tint(20)),I["primary-color-deprecated-t-50"]=G(at,Wt=>Wt.tint(50)),I["primary-color-deprecated-f-12"]=G(at,Wt=>Wt.setAlpha(Wt.getAlpha()*.12));const It=new ss.C(Mt[0]);I["primary-color-active-deprecated-f-30"]=G(It,Wt=>Wt.setAlpha(Wt.getAlpha()*.3)),I["primary-color-active-deprecated-d-02"]=G(It,Wt=>Wt.darken(2))}return P.successColor&&F(P.successColor,"success"),P.warningColor&&F(P.warningColor,"warning"),P.errorColor&&F(P.errorColor,"error"),P.infoColor&&F(P.infoColor,"info"),`
  :root {
    ${Object.keys(I).map(at=>`--${z}-${at}: ${I[at]};`).join(`
`)}
  }
  `.trim()}function qa(z,P){const I=as(z,P);(0,js.Z)()&&(0,ea.hq)(I,`${na}-dynamic-theme`)}const wi=Ht.createContext(!1),Ja=z=>{let{children:P,disabled:I}=z;const G=Ht.useContext(wi);return Ht.createElement(wi.Provider,{value:I!=null?I:G},P)};var Nu=wi;const Ru=Ht.createContext(void 0),Wc=z=>{let{children:P,size:I}=z;const G=Ht.useContext(Ru);return Ht.createElement(Ru.Provider,{value:I||G},P)};var Qa=Ru;function yl(){const z=(0,Ht.useContext)(Nu),P=(0,Ht.useContext)(Qa);return{componentDisabled:z,componentSize:P}}var Bh=yl,xc=O(93117);function Du(z,P){const I=z||{},G=I.inherit===!1||!P?Hr.u_:P;return(0,Cr.Z)(()=>{if(!z)return P;const st=Object.assign({},G.components);return Object.keys(z.components||{}).forEach(at=>{st[at]=Object.assign(Object.assign({},st[at]),z.components[at])}),Object.assign(Object.assign(Object.assign({},G),I),{token:Object.assign(Object.assign({},G.token),I.token),components:st})},[I,G],(st,at)=>st.some((Mt,It)=>{const Wt=at[It];return!(0,xc.Z)(Mt,Wt,!0)}))}var Lu=O(4541),ua=(z,P)=>{const[I,G]=(0,Hr.dQ)();return(0,Yn.xy)({theme:I,token:G,hashId:"",path:["ant-design-icons",z],nonce:()=>P==null?void 0:P.nonce},()=>[{[`.${z}`]:Object.assign(Object.assign({},(0,Lu.Ro)()),{[`.${z} .${z}-icon`]:{display:"block"}})}])},vi=function(z,P){var I={};for(var G in z)Object.prototype.hasOwnProperty.call(z,G)&&P.indexOf(G)<0&&(I[G]=z[G]);if(z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,G=Object.getOwnPropertySymbols(z);F<G.length;F++)P.indexOf(G[F])<0&&Object.prototype.propertyIsEnumerable.call(z,G[F])&&(I[G[F]]=z[G[F]]);return I};let bl=!1;const Sf=null,_f=null,xl=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"],El="ant";let Xc,wl;function Yc(){return Xc||El}function Sl(){return wl||ho.oR}const ku=z=>{let{prefixCls:P,iconPrefixCls:I,theme:G}=z;P!==void 0&&(Xc=P),I!==void 0&&(wl=I),G&&qa(Yc(),G)},Fu=()=>({getPrefixCls:(z,P)=>P||(z?`${Yc()}-${z}`:Yc()),getIconPrefixCls:Sl,getRootPrefixCls:()=>Xc||Yc()}),Kc=z=>{const{children:P,csp:I,autoInsertSpaceInButton:G,form:F,locale:st,componentSize:at,direction:Mt,space:It,virtual:Wt,dropdownMatchSelectWidth:re,legacyLocale:he,parentContext:Se,iconPrefixCls:Mn,theme:hn,componentDisabled:ze}=z,Ue=Ht.useCallback((yr,Rr)=>{const{prefixCls:Pi}=z;if(Rr)return Rr;const Mo=Pi||Se.getPrefixCls("");return yr?`${Mo}-${yr}`:Mo},[Se.getPrefixCls,z.prefixCls]),Te=Mn||Se.iconPrefixCls||ho.oR,fn=Te!==Se.iconPrefixCls,We=I||Se.csp,sn=ua(Te,We),Fn=Du(hn,Se.theme),an={csp:We,autoInsertSpaceInButton:G,locale:st||he,direction:Mt,space:It,virtual:Wt,dropdownMatchSelectWidth:re,getPrefixCls:Ue,iconPrefixCls:Te,theme:Fn},In=Object.assign({},Se);Object.keys(an).forEach(yr=>{an[yr]!==void 0&&(In[yr]=an[yr])}),xl.forEach(yr=>{const Rr=z[yr];Rr&&(In[yr]=Rr)});const sr=(0,Cr.Z)(()=>In,In,(yr,Rr)=>{const Pi=Object.keys(yr),Mo=Object.keys(Rr);return Pi.length!==Mo.length||Pi.some(Ma=>yr[Ma]!==Rr[Ma])}),dr=Ht.useMemo(()=>({prefixCls:Te,csp:We}),[Te,We]);let Bn=fn?sn(P):P;const Ar=Ht.useMemo(()=>{var yr,Rr,Pi;return Ii({},((yr=Ci.Form)===null||yr===void 0?void 0:yr.defaultValidateMessages)||{},((Pi=(Rr=sr.locale)===null||Rr===void 0?void 0:Rr.Form)===null||Pi===void 0?void 0:Pi.defaultValidateMessages)||{},(F==null?void 0:F.validateMessages)||{})},[sr,F==null?void 0:F.validateMessages]);Object.keys(Ar).length>0&&(Bn=Ht.createElement(Hc,{validateMessages:Ar},P)),st&&(Bn=Ht.createElement(aa,{locale:st,_ANT_MARK__:fo},Bn)),(Te||We)&&(Bn=Ht.createElement(Hn.Z.Provider,{value:dr},Bn)),at&&(Bn=Ht.createElement(Wc,{size:at},Bn));const rr=Ht.useMemo(()=>{const yr=Fn||{},{algorithm:Rr,token:Pi}=yr,Mo=vi(yr,["algorithm","token"]),Ma=Rr&&(!Array.isArray(Rr)||Rr.length>0)?(0,Yn.jG)(Rr):void 0;return Object.assign(Object.assign({},Mo),{theme:Ma,token:Object.assign(Object.assign({},ca.Z),Pi)})},[Fn]);return hn&&(Bn=Ht.createElement(Hr.Mj.Provider,{value:rr},Bn)),ze!==void 0&&(Bn=Ht.createElement(Ja,{disabled:ze},Bn)),Ht.createElement(ho.E_.Provider,{value:sr},Bn)},Oa=z=>{const P=Ht.useContext(ho.E_),I=Ht.useContext($r);return Ht.createElement(Kc,Object.assign({parentContext:P,legacyLocale:I},z))};Oa.ConfigContext=ho.E_,Oa.SizeContext=Qa,Oa.config=ku,Oa.useConfig=Bh,Object.defineProperty(Oa,"SizeContext",{get:()=>Qa});var Cf=Oa,Bu={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},_l=Bu,qc=O(86711),Gh=function(P,I){return Ht.createElement(qc.Z,(0,rt.Z)((0,rt.Z)({},P),{},{ref:I,icon:_l}))},Cl=Ht.forwardRef(Gh),zh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},Tl=zh,Gu=function(P,I){return Ht.createElement(qc.Z,(0,rt.Z)((0,rt.Z)({},P),{},{ref:I,icon:Tl}))},Us=Ht.forwardRef(Gu),Al={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},Ec=Al,cs=function(P,I){return Ht.createElement(qc.Z,(0,rt.Z)((0,rt.Z)({},P),{},{ref:I,icon:Ec}))},jh=Ht.forwardRef(cs),Ol={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},Kd=Ol,Jc=function(P,I){return Ht.createElement(qc.Z,(0,rt.Z)((0,rt.Z)({},P),{},{ref:I,icon:Kd}))},la=Ht.forwardRef(Jc),Uh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},wc=Uh,Vh=function(P,I){return Ht.createElement(qc.Z,(0,rt.Z)((0,rt.Z)({},P),{},{ref:I,icon:wc}))},Tf=Ht.forwardRef(Vh),Af=O(95065),Zh=O(84875),tc=O.n(Zh),ec=O(95415),nc=Ht.forwardRef(function(z,P){var I=z.prefixCls,G=z.style,F=z.className,st=z.duration,at=st===void 0?4.5:st,Mt=z.eventKey,It=z.content,Wt=z.closable,re=z.closeIcon,he=re===void 0?"x":re,Se=z.props,Mn=z.onClick,hn=z.onNoticeClose,ze=z.times,Ue=Ht.useState(!1),Te=(0,is.Z)(Ue,2),fn=Te[0],We=Te[1],sn=function(){hn(Mt)},Fn=function(sr){(sr.key==="Enter"||sr.code==="Enter"||sr.keyCode===ec.Z.ENTER)&&sn()};Ht.useEffect(function(){if(!fn&&at>0){var In=setTimeout(function(){sn()},at*1e3);return function(){clearTimeout(In)}}},[at,fn,ze]);var an="".concat(I,"-notice");return Ht.createElement("div",(0,_r.Z)({},Se,{ref:P,className:tc()(an,F,(0,lr.Z)({},"".concat(an,"-closable"),Wt)),style:G,onMouseEnter:function(){We(!0)},onMouseLeave:function(){We(!1)},onClick:Mn}),Ht.createElement("div",{className:"".concat(an,"-content")},It),Wt&&Ht.createElement("a",{tabIndex:0,className:"".concat(an,"-close"),onKeyDown:Fn,onClick:function(sr){sr.preventDefault(),sr.stopPropagation(),sn()}},he))}),Qc=nc,Ts=Ht.forwardRef(function(z,P){var I=z.prefixCls,G=I===void 0?"rc-notification":I,F=z.container,st=z.motion,at=z.maxCount,Mt=z.className,It=z.style,Wt=z.onAllRemoved,re=Ht.useState([]),he=(0,is.Z)(re,2),Se=he[0],Mn=he[1],hn=function(In){var sr,dr=Se.find(function(Bn){return Bn.key===In});dr==null||(sr=dr.onClose)===null||sr===void 0||sr.call(dr),Mn(function(Bn){return Bn.filter(function(Ar){return Ar.key!==In})})};Ht.useImperativeHandle(P,function(){return{open:function(In){Mn(function(sr){var dr=(0,V.Z)(sr),Bn=dr.findIndex(function(yr){return yr.key===In.key}),Ar=(0,rt.Z)({},In);if(Bn>=0){var rr;Ar.times=(((rr=sr[Bn])===null||rr===void 0?void 0:rr.times)||0)+1,dr[Bn]=Ar}else Ar.times=0,dr.push(Ar);return at>0&&dr.length>at&&(dr=dr.slice(-at)),dr})},close:function(In){hn(In)},destroy:function(){Mn([])}}});var ze=Ht.useState({}),Ue=(0,is.Z)(ze,2),Te=Ue[0],fn=Ue[1];Ht.useEffect(function(){var an={};Se.forEach(function(In){var sr=In.placement,dr=sr===void 0?"topRight":sr;dr&&(an[dr]=an[dr]||[],an[dr].push(In))}),Object.keys(Te).forEach(function(In){an[In]=an[In]||[]}),fn(an)},[Se]);var We=function(In){fn(function(sr){var dr=(0,rt.Z)({},sr),Bn=dr[In]||[];return Bn.length||delete dr[In],dr})},sn=Ht.useRef(!1);if(Ht.useEffect(function(){Object.keys(Te).length>0?sn.current=!0:sn.current&&(Wt==null||Wt(),sn.current=!1)},[Te]),!F)return null;var Fn=Object.keys(Te);return(0,wt.createPortal)(Ht.createElement(Ht.Fragment,null,Fn.map(function(an){var In=Te[an],sr=In.map(function(Bn){return{config:Bn,key:Bn.key}}),dr=typeof st=="function"?st(an):st;return Ht.createElement(Af.V4,(0,_r.Z)({key:an,className:tc()(G,"".concat(G,"-").concat(an),Mt==null?void 0:Mt(an)),style:It==null?void 0:It(an),keys:sr,motionAppear:!0},dr,{onAllRemoved:function(){We(an)}}),function(Bn,Ar){var rr=Bn.config,yr=Bn.className,Rr=Bn.style,Pi=rr.key,Mo=rr.times,Ma=rr.className,Bl=rr.style;return Ht.createElement(Qc,(0,_r.Z)({},rr,{ref:Ar,prefixCls:G,className:tc()(yr,Ma),style:(0,rt.Z)((0,rt.Z)({},Rr),Bl),times:Mo,key:Pi,eventKey:Pi,onNoticeClose:hn}))})})),F)}),rc=Ts,Ml=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],Of=function(){return document.body},zu=0;function Il(){for(var z={},P=arguments.length,I=new Array(P),G=0;G<P;G++)I[G]=arguments[G];return I.forEach(function(F){F&&Object.keys(F).forEach(function(st){var at=F[st];at!==void 0&&(z[st]=at)})}),z}function tu(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=z.getContainer,I=P===void 0?Of:P,G=z.motion,F=z.prefixCls,st=z.maxCount,at=z.className,Mt=z.style,It=z.onAllRemoved,Wt=(0,rn.Z)(z,Ml),re=Ht.useState(),he=(0,is.Z)(re,2),Se=he[0],Mn=he[1],hn=Ht.useRef(),ze=Ht.createElement(rc,{container:Se,ref:hn,prefixCls:F,motion:G,maxCount:st,className:at,style:Mt,onAllRemoved:It}),Ue=Ht.useState([]),Te=(0,is.Z)(Ue,2),fn=Te[0],We=Te[1],sn=Ht.useMemo(function(){return{open:function(an){var In=Il(Wt,an);(In.key===null||In.key===void 0)&&(In.key="rc-notification-".concat(zu),zu+=1),We(function(sr){return[].concat((0,V.Z)(sr),[{type:"open",config:In}])})},close:function(an){We(function(In){return[].concat((0,V.Z)(In),[{type:"close",key:an}])})},destroy:function(){We(function(an){return[].concat((0,V.Z)(an),[{type:"destroy"}])})}}},[]);return Ht.useEffect(function(){Mn(I())}),Ht.useEffect(function(){hn.current&&fn.length&&(fn.forEach(function(Fn){switch(Fn.type){case"open":hn.current.open(Fn.config);break;case"close":hn.current.close(Fn.key);break;case"destroy":hn.current.destroy();break}}),We([]))},[fn]),[sn,ze]}var Mf=O(10071),If=O(52970);const eu=z=>{const{componentCls:P,iconCls:I,boxShadow:G,colorText:F,colorBgElevated:st,colorSuccess:at,colorError:Mt,colorWarning:It,colorInfo:Wt,fontSizeLG:re,motionEaseInOutCirc:he,motionDurationSlow:Se,marginXS:Mn,paddingXS:hn,borderRadiusLG:ze,zIndexPopup:Ue,messageNoticeContentPadding:Te}=z,fn=`${P}-notice`,We=new Yn.E4("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:hn,transform:"translateY(0)",opacity:1}}),sn=new Yn.E4("MessageMoveOut",{"0%":{maxHeight:z.height,padding:hn,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),Fn={padding:hn,textAlign:"center",[`${P}-custom-content > ${I}`]:{verticalAlign:"text-bottom",marginInlineEnd:Mn,fontSize:re},[`${fn}-content`]:{display:"inline-block",padding:Te,background:st,borderRadius:ze,boxShadow:G,pointerEvents:"all"},[`${P}-success > ${I}`]:{color:at},[`${P}-error > ${I}`]:{color:Mt},[`${P}-warning > ${I}`]:{color:It},[`${P}-info > ${I},
      ${P}-loading > ${I}`]:{color:Wt}};return[{[P]:Object.assign(Object.assign({},(0,Lu.Wf)(z)),{color:F,position:"fixed",top:Mn,width:"100%",pointerEvents:"none",zIndex:Ue,[`${P}-move-up`]:{animationFillMode:"forwards"},[`
        ${P}-move-up-appear,
        ${P}-move-up-enter
      `]:{animationName:We,animationDuration:Se,animationPlayState:"paused",animationTimingFunction:he},[`
        ${P}-move-up-appear${P}-move-up-appear-active,
        ${P}-move-up-enter${P}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${P}-move-up-leave`]:{animationName:sn,animationDuration:Se,animationPlayState:"paused",animationTimingFunction:he},[`${P}-move-up-leave${P}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[P]:{[fn]:Object.assign({},Fn)}},{[`${P}-notice-pure-panel`]:Object.assign(Object.assign({},Fn),{padding:0,textAlign:"start"})}]};var Gi=(0,Mf.Z)("Message",z=>{const P=(0,If.TS)(z,{messageNoticeContentPadding:`${(z.controlHeightLG-z.fontSize*z.lineHeight)/2}px ${z.paddingSM}px`});return[eu(P)]},z=>({height:150,zIndexPopup:z.zIndexPopupBase+10})),fa=function(z,P){var I={};for(var G in z)Object.prototype.hasOwnProperty.call(z,G)&&P.indexOf(G)<0&&(I[G]=z[G]);if(z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,G=Object.getOwnPropertySymbols(z);F<G.length;F++)P.indexOf(G[F])<0&&Object.prototype.propertyIsEnumerable.call(z,G[F])&&(I[G[F]]=z[G[F]]);return I};const Pl={info:Ht.createElement(Tf,null),success:Ht.createElement(la,null),error:Ht.createElement(jh,null),warning:Ht.createElement(Us,null),loading:Ht.createElement(Cl,null)};function Oo(z){let{prefixCls:P,type:I,icon:G,children:F}=z;return Ht.createElement("div",{className:tc()(`${P}-custom-content`,`${P}-${I}`)},G||Pl[I],Ht.createElement("span",null,F))}function $h(z){const{prefixCls:P,className:I,type:G,icon:F,content:st}=z,at=fa(z,["prefixCls","className","type","icon","content"]),{getPrefixCls:Mt}=Ht.useContext(ho.E_),It=P||Mt("message"),[,Wt]=Gi(It);return Ht.createElement(Qc,Object.assign({},at,{prefixCls:It,className:tc()(I,Wt,`${It}-notice-pure-panel`),eventKey:"pure",duration:null,content:Ht.createElement(Oo,{prefixCls:It,type:G,icon:F},st)}))}var Nl=O(57233);function Hh(z,P){return{motionName:P!=null?P:`${z}-move-up`}}function nu(z){let P;const I=new Promise(F=>{P=z(()=>{F(!0)})}),G=()=>{P==null||P()};return G.then=(F,st)=>I.then(F,st),G.promise=I,G}var Wh=function(z,P){var I={};for(var G in z)Object.prototype.hasOwnProperty.call(z,G)&&P.indexOf(G)<0&&(I[G]=z[G]);if(z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,G=Object.getOwnPropertySymbols(z);F<G.length;F++)P.indexOf(G[F])<0&&Object.prototype.propertyIsEnumerable.call(z,G[F])&&(I[G[F]]=z[G[F]]);return I};const Pf=8,ju=3,Xh=Ht.forwardRef((z,P)=>{const{top:I,prefixCls:G,getContainer:F,maxCount:st,duration:at=ju,rtl:Mt,transitionName:It,onAllRemoved:Wt}=z,{getPrefixCls:re,getPopupContainer:he}=Ht.useContext(ho.E_),Se=G||re("message"),[,Mn]=Gi(Se),hn=()=>({left:"50%",transform:"translateX(-50%)",top:I!=null?I:Pf}),ze=()=>tc()(Mn,Mt?`${Se}-rtl`:""),Ue=()=>Hh(Se,It),Te=Ht.createElement("span",{className:`${Se}-close-x`},Ht.createElement(Nl.Z,{className:`${Se}-close-icon`})),[fn,We]=tu({prefixCls:Se,style:hn,className:ze,motion:Ue,closable:!1,closeIcon:Te,duration:at,getContainer:()=>(F==null?void 0:F())||(he==null?void 0:he())||document.body,maxCount:st,onAllRemoved:Wt});return Ht.useImperativeHandle(P,()=>Object.assign(Object.assign({},fn),{prefixCls:Se,hashId:Mn})),We});let Nf=0;function Rl(z){const P=Ht.useRef(null);return[Ht.useMemo(()=>{const G=It=>{var Wt;(Wt=P.current)===null||Wt===void 0||Wt.close(It)},F=It=>{if(!P.current){const Fn=()=>{};return Fn.then=()=>{},Fn}const{open:Wt,prefixCls:re,hashId:he}=P.current,Se=`${re}-notice`,{content:Mn,icon:hn,type:ze,key:Ue,className:Te,onClose:fn}=It,We=Wh(It,["content","icon","type","key","className","onClose"]);let sn=Ue;return sn==null&&(Nf+=1,sn=`antd-message-${Nf}`),nu(Fn=>(Wt(Object.assign(Object.assign({},We),{key:sn,content:Ht.createElement(Oo,{prefixCls:re,type:ze,icon:hn},Mn),placement:"top",className:tc()(ze&&`${Se}-${ze}`,he,Te),onClose:()=>{fn==null||fn(),Fn()}})),()=>{G(sn)}))},at={open:F,destroy:It=>{var Wt;It!==void 0?G(It):(Wt=P.current)===null||Wt===void 0||Wt.destroy()}};return["info","success","warning","error","loading"].forEach(It=>{const Wt=(re,he,Se)=>{let Mn;re&&typeof re=="object"&&"content"in re?Mn=re:Mn={content:re};let hn,ze;typeof he=="function"?ze=he:(hn=he,ze=Se);const Ue=Object.assign(Object.assign({onClose:ze,duration:hn},Mn),{type:It});return F(Ue)};at[It]=Wt}),at},[]),Ht.createElement(Xh,Object.assign({key:"message-holder"},z,{ref:P}))]}function Rf(z){return Rl(z)}let us=null,ra=z=>z(),ru=[],As={};function Sc(){const{prefixCls:z,getContainer:P,duration:I,rtl:G,maxCount:F,top:st}=As,at=z!=null?z:Fu().getPrefixCls("message"),Mt=(P==null?void 0:P())||document.body;return{prefixCls:at,container:Mt,duration:I,rtl:G,maxCount:F,top:st}}const Dl=Ht.forwardRef((z,P)=>{const I=()=>{const{prefixCls:he,container:Se,maxCount:Mn,duration:hn,rtl:ze,top:Ue}=Sc();return{prefixCls:he,getContainer:()=>Se,maxCount:Mn,duration:hn,rtl:ze,top:Ue}},[G,F]=Ht.useState(I),[st,at]=Rl(G),Mt=Fu(),It=Mt.getRootPrefixCls(),Wt=Mt.getIconPrefixCls(),re=()=>{F(I)};return Ht.useEffect(re,[]),Ht.useImperativeHandle(P,()=>{const he=Object.assign({},st);return Object.keys(he).forEach(Se=>{he[Se]=function(){return re(),st[Se].apply(st,arguments)}}),{instance:he,sync:re}}),Ht.createElement(Cf,{prefixCls:It,iconPrefixCls:Wt},at)});function iu(){if(!us){const z=document.createDocumentFragment(),P={fragment:z};us=P,ra(()=>{Gt(Ht.createElement(Dl,{ref:I=>{const{instance:G,sync:F}=I||{};Promise.resolve().then(()=>{!P.instance&&G&&(P.instance=G,P.sync=F,iu())})}}),z)});return}us.instance&&(ru.forEach(z=>{const{type:P,skipped:I}=z;if(!I)switch(P){case"open":{ra(()=>{const G=us.instance.open(Object.assign(Object.assign({},As),z.config));G==null||G.then(z.resolve),z.setCloseFn(G)});break}case"destroy":ra(()=>{us==null||us.instance.destroy(z.key)});break;default:ra(()=>{var G;const F=(G=us.instance)[P].apply(G,(0,V.Z)(z.args));F==null||F.then(z.resolve),z.setCloseFn(F)})}}),ru=[])}function Df(z){As=Object.assign(Object.assign({},As),z),ra(()=>{var P;(P=us==null?void 0:us.sync)===null||P===void 0||P.call(us)})}function Lf(z){const P=nu(I=>{let G;const F={type:"open",config:z,resolve:I,setCloseFn:st=>{G=st}};return ru.push(F),()=>{G?ra(()=>{G()}):F.skipped=!0}});return iu(),P}function Ll(z,P){const I=nu(G=>{let F;const st={type:z,args:P,resolve:G,setCloseFn:at=>{F=at}};return ru.push(st),()=>{F?ra(()=>{F()}):st.skipped=!0}});return iu(),I}function kl(z){ru.push({type:"destroy",key:z}),iu()}const kf=["success","info","warning","error","loading"],Fl={open:Lf,destroy:kl,config:Df,useMessage:Rf,_InternalPanelDoNotUseOrYouWillBeFired:$h};kf.forEach(z=>{Fl[z]=function(){for(var P=arguments.length,I=new Array(P),G=0;G<P;G++)I[G]=arguments[G];return Ll(z,I)}});const Os=()=>{};let Kh=null,qd=null;var ha=Fl},4541:function(At,yt,O){"use strict";O.d(yt,{Lx:function(){return Tt},Ro:function(){return rt},Wf:function(){return ft},du:function(){return Zt}});const V={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},ft=ot=>({boxSizing:"border-box",margin:0,padding:0,color:ot.colorText,fontSize:ot.fontSize,lineHeight:ot.lineHeight,listStyle:"none",fontFamily:ot.fontFamily}),rt=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),wt=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),Tt=ot=>({a:{color:ot.colorLink,textDecoration:ot.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${ot.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:ot.colorLinkHover},"&:active":{color:ot.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:ot.linkHoverDecoration,outline:0},"&:focus":{textDecoration:ot.linkFocusDecoration,outline:0},"&[disabled]":{color:ot.colorTextDisabled,cursor:"not-allowed"}}}),Zt=(ot,gt)=>{const{fontFamily:$t,fontSize:ht}=ot,bt=`[class^="${gt}"], [class*=" ${gt}"]`;return{[bt]:{fontFamily:$t,fontSize:ht,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[bt]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},K=ot=>({outline:`${ot.lineWidthFocus}px solid ${ot.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),Z=ot=>({"&:focus-visible":Object.assign({},K(ot))})},41834:function(At,yt,O){"use strict";O.d(yt,{Mj:function(){return bn},u_:function(){return lr},dQ:function(){return Je}});var V=O(72613),ft=O(93236),rt="5.4.7",wt=rt,Tt=O(81548),K=kt=>{const{controlHeight:vt}=kt;return{controlHeightSM:vt*.75,controlHeightXS:vt*.5,controlHeightLG:vt*1.25}};function Z(kt){const{sizeUnit:vt,sizeStep:Qt}=kt;return{sizeXXL:vt*(Qt+8),sizeXL:vt*(Qt+4),sizeLG:vt*(Qt+2),sizeMD:vt*(Qt+1),sizeMS:vt*Qt,size:vt*Qt,sizeSM:vt*(Qt-1),sizeXS:vt*(Qt-2),sizeXXS:vt*(Qt-3)}}var ot=O(15431),gt=O(99590);function $t(kt,vt){let{generateColorPalettes:Qt,generateNeutralColorPalettes:jt}=vt;const{colorSuccess:Dt,colorWarning:on,colorError:Oe,colorInfo:Jn,colorPrimary:Cn,colorBgBase:Tn,colorTextBase:zn}=kt,Rn=Qt(Cn),si=Qt(Dt),Kr=Qt(on),qr=Qt(Oe),Fi=Qt(Jn),to=jt(Tn,zn);return Object.assign(Object.assign({},to),{colorPrimaryBg:Rn[1],colorPrimaryBgHover:Rn[2],colorPrimaryBorder:Rn[3],colorPrimaryBorderHover:Rn[4],colorPrimaryHover:Rn[5],colorPrimary:Rn[6],colorPrimaryActive:Rn[7],colorPrimaryTextHover:Rn[8],colorPrimaryText:Rn[9],colorPrimaryTextActive:Rn[10],colorSuccessBg:si[1],colorSuccessBgHover:si[2],colorSuccessBorder:si[3],colorSuccessBorderHover:si[4],colorSuccessHover:si[4],colorSuccess:si[6],colorSuccessActive:si[7],colorSuccessTextHover:si[8],colorSuccessText:si[9],colorSuccessTextActive:si[10],colorErrorBg:qr[1],colorErrorBgHover:qr[2],colorErrorBorder:qr[3],colorErrorBorderHover:qr[4],colorErrorHover:qr[5],colorError:qr[6],colorErrorActive:qr[7],colorErrorTextHover:qr[8],colorErrorText:qr[9],colorErrorTextActive:qr[10],colorWarningBg:Kr[1],colorWarningBgHover:Kr[2],colorWarningBorder:Kr[3],colorWarningBorderHover:Kr[4],colorWarningHover:Kr[4],colorWarning:Kr[6],colorWarningActive:Kr[7],colorWarningTextHover:Kr[8],colorWarningText:Kr[9],colorWarningTextActive:Kr[10],colorInfoBg:Fi[1],colorInfoBgHover:Fi[2],colorInfoBorder:Fi[3],colorInfoBorderHover:Fi[4],colorInfoHover:Fi[4],colorInfo:Fi[6],colorInfoActive:Fi[7],colorInfoTextHover:Fi[8],colorInfoText:Fi[9],colorInfoTextActive:Fi[10],colorBgMask:new gt.C("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}var bt=kt=>{let vt=kt,Qt=kt,jt=kt,Dt=kt;return kt<6&&kt>=5?vt=kt+1:kt<16&&kt>=6?vt=kt+2:kt>=16&&(vt=16),kt<7&&kt>=5?Qt=4:kt<8&&kt>=7?Qt=5:kt<14&&kt>=8?Qt=6:kt<16&&kt>=14?Qt=7:kt>=16&&(Qt=8),kt<6&&kt>=2?jt=1:kt>=6&&(jt=2),kt>4&&kt<8?Dt=4:kt>=8&&(Dt=6),{borderRadius:kt>16?16:kt,borderRadiusXS:jt,borderRadiusSM:Qt,borderRadiusLG:vt,borderRadiusOuter:Dt}};function Ut(kt){const{motionUnit:vt,motionBase:Qt,borderRadius:jt,lineWidth:Dt}=kt;return Object.assign({motionDurationFast:`${(Qt+vt).toFixed(1)}s`,motionDurationMid:`${(Qt+vt*2).toFixed(1)}s`,motionDurationSlow:`${(Qt+vt*3).toFixed(1)}s`,lineWidthBold:Dt+1},bt(jt))}const ut=(kt,vt)=>new gt.C(kt).setAlpha(vt).toRgbString(),Bt=(kt,vt)=>new gt.C(kt).darken(vt).toHexString(),Gt=kt=>{const vt=(0,Tt.R_)(kt);return{1:vt[0],2:vt[1],3:vt[2],4:vt[3],5:vt[4],6:vt[5],7:vt[6],8:vt[4],9:vt[5],10:vt[6]}},fe=(kt,vt)=>{const Qt=kt||"#fff",jt=vt||"#000";return{colorBgBase:Qt,colorTextBase:jt,colorText:ut(jt,.88),colorTextSecondary:ut(jt,.65),colorTextTertiary:ut(jt,.45),colorTextQuaternary:ut(jt,.25),colorFill:ut(jt,.15),colorFillSecondary:ut(jt,.06),colorFillTertiary:ut(jt,.04),colorFillQuaternary:ut(jt,.02),colorBgLayout:Bt(Qt,4),colorBgContainer:Bt(Qt,0),colorBgElevated:Bt(Qt,0),colorBgSpotlight:ut(jt,.85),colorBorder:Bt(Qt,15),colorBorderSecondary:Bt(Qt,6)}};function ue(kt){const vt=new Array(10).fill(null).map((Qt,jt)=>{const Dt=jt-1,on=kt*Math.pow(2.71828,Dt/5),Oe=jt>1?Math.floor(on):Math.ceil(on);return Math.floor(Oe/2)*2});return vt[1]=kt,vt.map(Qt=>{const jt=Qt+8;return{size:Qt,lineHeight:jt/Qt}})}var Qe=kt=>{const vt=ue(kt),Qt=vt.map(Dt=>Dt.size),jt=vt.map(Dt=>Dt.lineHeight);return{fontSizeSM:Qt[0],fontSize:Qt[1],fontSizeLG:Qt[2],fontSizeXL:Qt[3],fontSizeHeading1:Qt[6],fontSizeHeading2:Qt[5],fontSizeHeading3:Qt[4],fontSizeHeading4:Qt[3],fontSizeHeading5:Qt[2],lineHeight:jt[1],lineHeightLG:jt[2],lineHeightSM:jt[0],lineHeightHeading1:jt[6],lineHeightHeading2:jt[5],lineHeightHeading3:jt[4],lineHeightHeading4:jt[3],lineHeightHeading5:jt[2]}};function Pn(kt){const vt=Object.keys(ot.M).map(Qt=>{const jt=(0,Tt.R_)(kt[Qt]);return new Array(10).fill(1).reduce((Dt,on,Oe)=>(Dt[`${Qt}-${Oe+1}`]=jt[Oe],Dt[`${Qt}${Oe+1}`]=jt[Oe],Dt),{})}).reduce((Qt,jt)=>(Qt=Object.assign(Object.assign({},Qt),jt),Qt),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},kt),vt),$t(kt,{generateColorPalettes:Gt,generateNeutralColorPalettes:fe})),Qe(kt.fontSize)),Z(kt)),K(kt)),Ut(kt))}function yn(kt){return kt>=0&&kt<=255}function Ht(kt,vt){const{r:Qt,g:jt,b:Dt,a:on}=new gt.C(kt).toRgb();if(on<1)return kt;const{r:Oe,g:Jn,b:Cn}=new gt.C(vt).toRgb();for(let Tn=.01;Tn<=1;Tn+=.01){const zn=Math.round((Qt-Oe*(1-Tn))/Tn),Rn=Math.round((jt-Jn*(1-Tn))/Tn),si=Math.round((Dt-Cn*(1-Tn))/Tn);if(yn(zn)&&yn(Rn)&&yn(si))return new gt.C({r:zn,g:Rn,b:si,a:Math.round(Tn*100)/100}).toRgbString()}return new gt.C({r:Qt,g:jt,b:Dt,a:1}).toRgbString()}var Yn=Ht,Hn=function(kt,vt){var Qt={};for(var jt in kt)Object.prototype.hasOwnProperty.call(kt,jt)&&vt.indexOf(jt)<0&&(Qt[jt]=kt[jt]);if(kt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Dt=0,jt=Object.getOwnPropertySymbols(kt);Dt<jt.length;Dt++)vt.indexOf(jt[Dt])<0&&Object.prototype.propertyIsEnumerable.call(kt,jt[Dt])&&(Qt[jt[Dt]]=kt[jt[Dt]]);return Qt};function _r(kt){const{override:vt}=kt,Qt=Hn(kt,["override"]),jt=Object.assign({},vt);Object.keys(ot.Z).forEach(si=>{delete jt[si]});const Dt=Object.assign(Object.assign({},Qt),jt),on=480,Oe=576,Jn=768,Cn=992,Tn=1200,zn=1600;return Object.assign(Object.assign(Object.assign({},Dt),{colorLink:Dt.colorInfoText,colorLinkHover:Dt.colorInfoHover,colorLinkActive:Dt.colorInfoActive,colorFillContent:Dt.colorFillSecondary,colorFillContentHover:Dt.colorFill,colorFillAlter:Dt.colorFillQuaternary,colorBgContainerDisabled:Dt.colorFillTertiary,colorBorderBg:Dt.colorBgContainer,colorSplit:Yn(Dt.colorBorderSecondary,Dt.colorBgContainer),colorTextPlaceholder:Dt.colorTextQuaternary,colorTextDisabled:Dt.colorTextQuaternary,colorTextHeading:Dt.colorText,colorTextLabel:Dt.colorTextSecondary,colorTextDescription:Dt.colorTextTertiary,colorTextLightSolid:Dt.colorWhite,colorHighlight:Dt.colorError,colorBgTextHover:Dt.colorFillSecondary,colorBgTextActive:Dt.colorFill,colorIcon:Dt.colorTextTertiary,colorIconHover:Dt.colorText,colorErrorOutline:Yn(Dt.colorErrorBg,Dt.colorBgContainer),colorWarningOutline:Yn(Dt.colorWarningBg,Dt.colorBgContainer),fontSizeIcon:Dt.fontSizeSM,lineWidthFocus:Dt.lineWidth*4,lineWidth:Dt.lineWidth,controlOutlineWidth:Dt.lineWidth*2,controlInteractiveSize:Dt.controlHeight/2,controlItemBgHover:Dt.colorFillTertiary,controlItemBgActive:Dt.colorPrimaryBg,controlItemBgActiveHover:Dt.colorPrimaryBgHover,controlItemBgActiveDisabled:Dt.colorFill,controlTmpOutline:Dt.colorFillQuaternary,controlOutline:Yn(Dt.colorPrimaryBg,Dt.colorBgContainer),lineType:Dt.lineType,borderRadius:Dt.borderRadius,borderRadiusXS:Dt.borderRadiusXS,borderRadiusSM:Dt.borderRadiusSM,borderRadiusLG:Dt.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:Dt.sizeXXS,paddingXS:Dt.sizeXS,paddingSM:Dt.sizeSM,padding:Dt.size,paddingMD:Dt.sizeMD,paddingLG:Dt.sizeLG,paddingXL:Dt.sizeXL,paddingContentHorizontalLG:Dt.sizeLG,paddingContentVerticalLG:Dt.sizeMS,paddingContentHorizontal:Dt.sizeMS,paddingContentVertical:Dt.sizeSM,paddingContentHorizontalSM:Dt.size,paddingContentVerticalSM:Dt.sizeXS,marginXXS:Dt.sizeXXS,marginXS:Dt.sizeXS,marginSM:Dt.sizeSM,margin:Dt.size,marginMD:Dt.sizeMD,marginLG:Dt.sizeLG,marginXL:Dt.sizeXL,marginXXL:Dt.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:on,screenXSMin:on,screenXSMax:Oe-1,screenSM:Oe,screenSMMin:Oe,screenSMMax:Jn-1,screenMD:Jn,screenMDMin:Jn,screenMDMax:Cn-1,screenLG:Cn,screenLGMin:Cn,screenLGMax:Tn-1,screenXL:Tn,screenXLMin:Tn,screenXLMax:zn-1,screenXXL:zn,screenXXLMin:zn,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new gt.C("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new gt.C("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new gt.C("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),jt)}const rn=(0,V.jG)(Pn),lr={token:ot.Z,hashed:!0},bn=ft.createContext(lr);function Je(){const{token:kt,hashed:vt,theme:Qt,components:jt}=ft.useContext(bn),Dt=`${wt}-${vt||""}`,on=Qt||rn,[Oe,Jn]=(0,V.fp)(on,[ot.Z,kt],{salt:Dt,override:Object.assign({override:kt},jt),formatToken:_r});return[on,Oe,vt?Jn:""]}},15431:function(At,yt,O){"use strict";O.d(yt,{M:function(){return V}});const V={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},ft=Object.assign(Object.assign({},V),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1});yt.Z=ft},10071:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return K}});var V=O(72613),ft=O(93236),rt=O(76166),wt=O(4541),Tt=O(41834),Zt=O(52970);function K(Z,ot,gt,$t){return ht=>{const[bt,Ut,ut]=(0,Tt.dQ)(),{getPrefixCls:Bt,iconPrefixCls:Gt,csp:fe}=(0,ft.useContext)(rt.E_),ue=Bt(),xe={theme:bt,token:Ut,hashId:ut,nonce:()=>fe==null?void 0:fe.nonce};return(0,V.xy)(Object.assign(Object.assign({},xe),{path:["Shared",ue]}),()=>[{"&":(0,wt.Lx)(Ut)}]),[(0,V.xy)(Object.assign(Object.assign({},xe),{path:[Z,ht,Gt]}),()=>{const{token:Qe,flush:Pn}=(0,Zt.ZP)(Ut),yn=typeof gt=="function"?gt(Qe):gt,Ht=Object.assign(Object.assign({},yn),Ut[Z]),Yn=`.${ht}`,Hn=(0,Zt.TS)(Qe,{componentCls:Yn,prefixCls:ht,iconCls:`.${Gt}`,antCls:`.${ue}`},Ht),_r=ot(Hn,{hashId:ut,prefixCls:ht,rootPrefixCls:ue,iconPrefixCls:Gt,overrideComponentToken:Ut[Z]});return Pn(Z,Ht),[($t==null?void 0:$t.resetStyle)===!1?null:(0,wt.du)(Ut,ht),_r]}),ut]}}},52970:function(At,yt,O){"use strict";O.d(yt,{TS:function(){return rt},ZP:function(){return K}});const V=typeof CSSINJS_STATISTIC!="undefined";let ft=!0;function rt(){for(var Z=arguments.length,ot=new Array(Z),gt=0;gt<Z;gt++)ot[gt]=arguments[gt];if(!V)return Object.assign.apply(Object,[{}].concat(ot));ft=!1;const $t={};return ot.forEach(ht=>{Object.keys(ht).forEach(Ut=>{Object.defineProperty($t,Ut,{configurable:!0,enumerable:!0,get:()=>ht[Ut]})})}),ft=!0,$t}const wt={},Tt={};function Zt(){}function K(Z){let ot,gt=Z,$t=Zt;return V&&(ot=new Set,gt=new Proxy(Z,{get(ht,bt){return ft&&ot.add(bt),ht[bt]}}),$t=(ht,bt)=>{wt[ht]={global:Array.from(ot),component:bt}}),{token:gt,keys:ot,flush:$t}}},74396:function(At,yt,O){var V=O(29165),ft=V.Symbol;At.exports=ft},80732:function(At,yt,O){var V=O(74396),ft=O(31239),rt=O(57058),wt="[object Null]",Tt="[object Undefined]",Zt=V?V.toStringTag:void 0;function K(Z){return Z==null?Z===void 0?Tt:wt:Zt&&Zt in Object(Z)?ft(Z):rt(Z)}At.exports=K},22882:function(At,yt,O){var V=O(80732),ft=O(17216),rt=O(55073),wt="[object Arguments]",Tt="[object Array]",Zt="[object Boolean]",K="[object Date]",Z="[object Error]",ot="[object Function]",gt="[object Map]",$t="[object Number]",ht="[object Object]",bt="[object RegExp]",Ut="[object Set]",ut="[object String]",Bt="[object WeakMap]",Gt="[object ArrayBuffer]",fe="[object DataView]",ue="[object Float32Array]",xe="[object Float64Array]",Qe="[object Int8Array]",Pn="[object Int16Array]",yn="[object Int32Array]",Ht="[object Uint8Array]",Yn="[object Uint8ClampedArray]",Hn="[object Uint16Array]",_r="[object Uint32Array]",rn={};rn[ue]=rn[xe]=rn[Qe]=rn[Pn]=rn[yn]=rn[Ht]=rn[Yn]=rn[Hn]=rn[_r]=!0,rn[wt]=rn[Tt]=rn[Gt]=rn[Zt]=rn[fe]=rn[K]=rn[Z]=rn[ot]=rn[gt]=rn[$t]=rn[ht]=rn[bt]=rn[Ut]=rn[ut]=rn[Bt]=!1;function lr(bn){return rt(bn)&&ft(bn.length)&&!!rn[V(bn)]}At.exports=lr},58792:function(At){function yt(O){return function(V){return O(V)}}At.exports=yt},96476:function(At,yt,O){var V=typeof O.g=="object"&&O.g&&O.g.Object===Object&&O.g;At.exports=V},11389:function(At,yt,O){var V=O(75542),ft=V(Object.getPrototypeOf,Object);At.exports=ft},31239:function(At,yt,O){var V=O(74396),ft=Object.prototype,rt=ft.hasOwnProperty,wt=ft.toString,Tt=V?V.toStringTag:void 0;function Zt(K){var Z=rt.call(K,Tt),ot=K[Tt];try{K[Tt]=void 0;var gt=!0}catch(ht){}var $t=wt.call(K);return gt&&(Z?K[Tt]=ot:delete K[Tt]),$t}At.exports=Zt},8478:function(At,yt,O){At=O.nmd(At);var V=O(96476),ft=yt&&!yt.nodeType&&yt,rt=ft&&!0&&At&&!At.nodeType&&At,wt=rt&&rt.exports===ft,Tt=wt&&V.process,Zt=function(){try{var K=rt&&rt.require&&rt.require("util").types;return K||Tt&&Tt.binding&&Tt.binding("util")}catch(Z){}}();At.exports=Zt},57058:function(At){var yt=Object.prototype,O=yt.toString;function V(ft){return O.call(ft)}At.exports=V},75542:function(At){function yt(O,V){return function(ft){return O(V(ft))}}At.exports=yt},29165:function(At,yt,O){var V=O(96476),ft=typeof self=="object"&&self&&self.Object===Object&&self,rt=V||ft||Function("return this")();At.exports=rt},24669:function(At){var yt=Array.isArray;At.exports=yt},17216:function(At){var yt=9007199254740991;function O(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=yt}At.exports=O},59933:function(At,yt,O){var V=O(80732),ft=O(55073),rt="[object Number]";function wt(Tt){return typeof Tt=="number"||ft(Tt)&&V(Tt)==rt}At.exports=wt},55073:function(At){function yt(O){return O!=null&&typeof O=="object"}At.exports=yt},69143:function(At,yt,O){var V=O(80732),ft=O(11389),rt=O(55073),wt="[object Object]",Tt=Function.prototype,Zt=Object.prototype,K=Tt.toString,Z=Zt.hasOwnProperty,ot=K.call(Object);function gt($t){if(!rt($t)||V($t)!=wt)return!1;var ht=ft($t);if(ht===null)return!0;var bt=Z.call(ht,"constructor")&&ht.constructor;return typeof bt=="function"&&bt instanceof bt&&K.call(bt)==ot}At.exports=gt},73806:function(At,yt,O){var V=O(22882),ft=O(58792),rt=O(8478),wt=rt&&rt.isTypedArray,Tt=wt?ft(wt):V;At.exports=Tt},40224:function(At){(function(yt,O){At.exports=O()})(this,function(){"use strict";var yt=function(N){return N instanceof Uint8Array||N instanceof Uint16Array||N instanceof Uint32Array||N instanceof Int8Array||N instanceof Int16Array||N instanceof Int32Array||N instanceof Float32Array||N instanceof Float64Array||N instanceof Uint8ClampedArray},O=function(N,X){for(var lt=Object.keys(X),ee=0;ee<lt.length;++ee)N[lt[ee]]=X[lt[ee]];return N},V=`
`;function ft(N){return typeof atob!="undefined"?atob(N):"base64:"+N}function rt(N){var X=new Error("(regl) "+N);throw console.error(X),X}function wt(N,X){N||rt(X)}function Tt(N){return N?": "+N:""}function Zt(N,X,lt){N in X||rt("unknown parameter ("+N+")"+Tt(lt)+". possible values: "+Object.keys(X).join())}function K(N,X){yt(N)||rt("invalid parameter type"+Tt(X)+". must be a typed array")}function Z(N,X){switch(X){case"number":return typeof N=="number";case"object":return typeof N=="object";case"string":return typeof N=="string";case"boolean":return typeof N=="boolean";case"function":return typeof N=="function";case"undefined":return typeof N=="undefined";case"symbol":return typeof N=="symbol"}}function ot(N,X,lt){Z(N,X)||rt("invalid parameter type"+Tt(lt)+". expected "+X+", got "+typeof N)}function gt(N,X){N>=0&&(N|0)===N||rt("invalid parameter type, ("+N+")"+Tt(X)+". must be a nonnegative integer")}function $t(N,X,lt){X.indexOf(N)<0&&rt("invalid value"+Tt(lt)+". must be one of: "+X)}var ht=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function bt(N){Object.keys(N).forEach(function(X){ht.indexOf(X)<0&&rt('invalid regl constructor argument "'+X+'". must be one of '+ht)})}function Ut(N,X){for(N=N+"";N.length<X;)N=" "+N;return N}function ut(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function Bt(N,X){this.number=N,this.line=X,this.errors=[]}function Gt(N,X,lt){this.file=N,this.line=X,this.message=lt}function fe(){var N=new Error,X=(N.stack||N).toString(),lt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(X);if(lt)return lt[1];var ee=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(X);return ee?ee[1]:"unknown"}function ue(){var N=new Error,X=(N.stack||N).toString(),lt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(X);if(lt)return lt[1];var ee=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(X);return ee?ee[1]:"unknown"}function xe(N,X){var lt=N.split(`
`),ee=1,ge=0,Kt={unknown:new ut,0:new ut};Kt.unknown.name=Kt[0].name=X||fe(),Kt.unknown.lines.push(new Bt(0,""));for(var oe=0;oe<lt.length;++oe){var _e=lt[oe],Ie=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(_e);if(Ie)switch(Ie[1]){case"line":var Be=/(\d+)(\s+\d+)?/.exec(Ie[2]);Be&&(ee=Be[1]|0,Be[2]&&(ge=Be[2]|0,ge in Kt||(Kt[ge]=new ut)));break;case"define":var Pe=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Ie[2]);Pe&&(Kt[ge].name=Pe[1]?ft(Pe[2]):Pe[2]);break}Kt[ge].lines.push(new Bt(ee++,_e))}return Object.keys(Kt).forEach(function(Ve){var $e=Kt[Ve];$e.lines.forEach(function(ve){$e.index[ve.number]=ve})}),Kt}function Qe(N){var X=[];return N.split(`
`).forEach(function(lt){if(!(lt.length<5)){var ee=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(lt);ee?X.push(new Gt(ee[1]|0,ee[2]|0,ee[3].trim())):lt.length>0&&X.push(new Gt("unknown",0,lt))}}),X}function Pn(N,X){X.forEach(function(lt){var ee=N[lt.file];if(ee){var ge=ee.index[lt.line];if(ge){ge.errors.push(lt),ee.hasErrors=!0;return}}N.unknown.hasErrors=!0,N.unknown.lines[0].errors.push(lt)})}function yn(N,X,lt,ee,ge){if(!N.getShaderParameter(X,N.COMPILE_STATUS)){var Kt=N.getShaderInfoLog(X),oe=ee===N.FRAGMENT_SHADER?"fragment":"vertex";bn(lt,"string",oe+" shader source must be a string",ge);var _e=xe(lt,ge),Ie=Qe(Kt);Pn(_e,Ie),Object.keys(_e).forEach(function(Be){var Pe=_e[Be];if(!Pe.hasErrors)return;var Ve=[""],$e=[""];function ve(Ze,Nt){Ve.push(Ze),$e.push(Nt||"")}ve("file number "+Be+": "+Pe.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Pe.lines.forEach(function(Ze){if(Ze.errors.length>0){ve(Ut(Ze.number,4)+"|  ","background-color:yellow; font-weight:bold"),ve(Ze.line+V,"color:red; background-color:yellow; font-weight:bold");var Nt=0;Ze.errors.forEach(function(se){var ke=se.message,He=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ke);if(He){var ie=He[1];switch(ke=He[2],ie){case"assign":ie="=";break}Nt=Math.max(Ze.line.indexOf(ie,Nt),0)}else Nt=0;ve(Ut("| ",6)),ve(Ut("^^^",Nt+3)+V,"font-weight:bold"),ve(Ut("| ",6)),ve(ke+V,"font-weight:bold")}),ve(Ut("| ",6)+V)}else ve(Ut(Ze.number,4)+"|  "),ve(Ze.line+V,"color:red")}),typeof document!="undefined"&&!window.chrome?($e[0]=Ve.join("%c"),console.log.apply(console,$e)):console.log(Ve.join(""))}),wt.raise("Error compiling "+oe+" shader, "+_e[0].name)}}function Ht(N,X,lt,ee,ge){if(!N.getProgramParameter(X,N.LINK_STATUS)){var Kt=N.getProgramInfoLog(X),oe=xe(lt,ge),_e=xe(ee,ge),Ie='Error linking program with vertex shader, "'+_e[0].name+'", and fragment shader "'+oe[0].name+'"';typeof document!="undefined"?console.log("%c"+Ie+V+"%c"+Kt,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ie+V+Kt),wt.raise(Ie)}}function Yn(N){N._commandRef=fe()}function Hn(N,X,lt,ee){Yn(N);function ge(Ie){return Ie?ee.id(Ie):0}N._fragId=ge(N.static.frag),N._vertId=ge(N.static.vert);function Kt(Ie,Be){Object.keys(Be).forEach(function(Pe){Ie[ee.id(Pe)]=!0})}var oe=N._uniformSet={};Kt(oe,X.static),Kt(oe,X.dynamic);var _e=N._attributeSet={};Kt(_e,lt.static),Kt(_e,lt.dynamic),N._hasCount="count"in N.static||"count"in N.dynamic||"elements"in N.static||"elements"in N.dynamic}function _r(N,X){var lt=ue();rt(N+" in command "+(X||fe())+(lt==="unknown"?"":" called from "+lt))}function rn(N,X,lt){N||_r(X,lt||fe())}function lr(N,X,lt,ee){N in X||_r("unknown parameter ("+N+")"+Tt(lt)+". possible values: "+Object.keys(X).join(),ee||fe())}function bn(N,X,lt,ee){Z(N,X)||_r("invalid parameter type"+Tt(lt)+". expected "+X+", got "+typeof N,ee||fe())}function Je(N){N()}function kt(N,X,lt){N.texture?$t(N.texture._texture.internalformat,X,"unsupported texture format for attachment"):$t(N.renderbuffer._renderbuffer.format,lt,"unsupported renderbuffer format for attachment")}var vt=33071,Qt=9728,jt=9984,Dt=9985,on=9986,Oe=9987,Jn=5120,Cn=5121,Tn=5122,zn=5123,Rn=5124,si=5125,Kr=5126,qr=32819,Fi=32820,to=33635,Ks=34042,ps=36193,Oi={};Oi[Jn]=Oi[Cn]=1,Oi[Tn]=Oi[zn]=Oi[ps]=Oi[to]=Oi[qr]=Oi[Fi]=2,Oi[Rn]=Oi[si]=Oi[Kr]=Oi[Ks]=4;function Ls(N,X){return N===Fi||N===qr||N===to?2:N===Ks?4:Oi[N]*X}function jo(N){return!(N&N-1)&&!!N}function ba(N,X,lt){var ee,ge=X.width,Kt=X.height,oe=X.channels;wt(ge>0&&ge<=lt.maxTextureSize&&Kt>0&&Kt<=lt.maxTextureSize,"invalid texture shape"),(N.wrapS!==vt||N.wrapT!==vt)&&wt(jo(ge)&&jo(Kt),"incompatible wrap mode for texture, both width and height must be power of 2"),X.mipmask===1?ge!==1&&Kt!==1&&wt(N.minFilter!==jt&&N.minFilter!==on&&N.minFilter!==Dt&&N.minFilter!==Oe,"min filter requires mipmap"):(wt(jo(ge)&&jo(Kt),"texture must be a square power of 2 to support mipmapping"),wt(X.mipmask===(ge<<1)-1,"missing or incomplete mipmap data")),X.type===Kr&&(lt.extensions.indexOf("oes_texture_float_linear")<0&&wt(N.minFilter===Qt&&N.magFilter===Qt,"filter not supported, must enable oes_texture_float_linear"),wt(!N.genMipmaps,"mipmap generation not supported with float textures"));var _e=X.images;for(ee=0;ee<16;++ee)if(_e[ee]){var Ie=ge>>ee,Be=Kt>>ee;wt(X.mipmask&1<<ee,"missing mipmap data");var Pe=_e[ee];if(wt(Pe.width===Ie&&Pe.height===Be,"invalid shape for mip images"),wt(Pe.format===X.format&&Pe.internalformat===X.internalformat&&Pe.type===X.type,"incompatible type for mip image"),!Pe.compressed)if(Pe.data){var Ve=Math.ceil(Ls(Pe.type,oe)*Ie/Pe.unpackAlignment)*Pe.unpackAlignment;wt(Pe.data.byteLength===Ve*Be,"invalid data for image, buffer size is inconsistent with image format")}else Pe.element||Pe.copy}else N.genMipmaps||wt((X.mipmask&1<<ee)===0,"extra mipmap data");X.compressed&&wt(!N.genMipmaps,"mipmap generation for compressed images not supported")}function ks(N,X,lt,ee){var ge=N.width,Kt=N.height,oe=N.channels;wt(ge>0&&ge<=ee.maxTextureSize&&Kt>0&&Kt<=ee.maxTextureSize,"invalid texture shape"),wt(ge===Kt,"cube map must be square"),wt(X.wrapS===vt&&X.wrapT===vt,"wrap mode not supported by cube map");for(var _e=0;_e<lt.length;++_e){var Ie=lt[_e];wt(Ie.width===ge&&Ie.height===Kt,"inconsistent cube map face shape"),X.genMipmaps&&(wt(!Ie.compressed,"can not generate mipmap for compressed textures"),wt(Ie.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Be=Ie.images,Pe=0;Pe<16;++Pe){var Ve=Be[Pe];if(Ve){var $e=ge>>Pe,ve=Kt>>Pe;wt(Ie.mipmask&1<<Pe,"missing mipmap data"),wt(Ve.width===$e&&Ve.height===ve,"invalid shape for mip images"),wt(Ve.format===N.format&&Ve.internalformat===N.internalformat&&Ve.type===N.type,"incompatible type for mip image"),Ve.compressed||(Ve.data?wt(Ve.data.byteLength===$e*ve*Math.max(Ls(Ve.type,oe),Ve.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ve.element||Ve.copy)}}}}var Q=O(wt,{optional:Je,raise:rt,commandRaise:_r,command:rn,parameter:Zt,commandParameter:lr,constructor:bt,type:ot,commandType:bn,isTypedArray:K,nni:gt,oneOf:$t,shaderError:yn,linkError:Ht,callSite:ue,saveCommandRef:Yn,saveDrawInfo:Hn,framebufferFormat:kt,guessCommand:fe,texture2D:ba,textureCube:ks}),kc=0,Bi=0,yo=5,Fc=6;function ii(N,X){this.id=kc++,this.type=N,this.data=X}function Bc(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function vs(N){if(N.length===0)return[];var X=N.charAt(0),lt=N.charAt(N.length-1);if(N.length>1&&X===lt&&(X==='"'||X==="'"))return['"'+Bc(N.substr(1,N.length-2))+'"'];var ee=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(N);if(ee)return vs(N.substr(0,ee.index)).concat(vs(ee[1])).concat(vs(N.substr(ee.index+ee[0].length)));var ge=N.split(".");if(ge.length===1)return['"'+Bc(N)+'"'];for(var Kt=[],oe=0;oe<ge.length;++oe)Kt=Kt.concat(vs(ge[oe]));return Kt}function za(N){return"["+vs(N).join("][")+"]"}function ja(N,X){return new ii(N,za(X+""))}function Tu(N){return typeof N=="function"&&!N._reglType||N instanceof ii}function Hi(N,X){if(typeof N=="function")return new ii(Bi,N);if(typeof N=="number"||typeof N=="boolean")return new ii(yo,N);if(Array.isArray(N))return new ii(Fc,N.map((lt,ee)=>Hi(lt,X+"["+ee+"]")));if(N instanceof ii)return N;Q(!1,"invalid option type in uniform "+X)}var ai={DynamicVariable:ii,define:ja,isDynamic:Tu,unbox:Hi,accessor:za},xa={next:typeof requestAnimationFrame=="function"?function(N){return requestAnimationFrame(N)}:function(N){return setTimeout(N,16)},cancel:typeof cancelAnimationFrame=="function"?function(N){return cancelAnimationFrame(N)}:clearTimeout},Fs=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ea(){var N={"":0},X=[""];return{id:function(lt){var ee=N[lt];return ee||(ee=N[lt]=X.length,X.push(lt),ee)},str:function(lt){return X[lt]}}}function Gc(N,X,lt){var ee=document.createElement("canvas");O(ee.style,{border:0,margin:0,padding:0,top:0,left:0}),N.appendChild(ee),N===document.body&&(ee.style.position="absolute",O(N.style,{margin:0,padding:0}));function ge(){var _e=window.innerWidth,Ie=window.innerHeight;if(N!==document.body){var Be=N.getBoundingClientRect();_e=Be.right-Be.left,Ie=Be.bottom-Be.top}ee.width=lt*_e,ee.height=lt*Ie,O(ee.style,{width:_e+"px",height:Ie+"px"})}var Kt;N!==document.body&&typeof ResizeObserver=="function"?(Kt=new ResizeObserver(function(){setTimeout(ge)}),Kt.observe(N)):window.addEventListener("resize",ge,!1);function oe(){Kt?Kt.disconnect():window.removeEventListener("resize",ge),N.removeChild(ee)}return ge(),{canvas:ee,onDestroy:oe}}function qs(N,X){function lt(ee){try{return N.getContext(ee,X)}catch(ge){return null}}return lt("webgl")||lt("experimental-webgl")||lt("webgl-experimental")}function vc(N){return typeof N.nodeName=="string"&&typeof N.appendChild=="function"&&typeof N.getBoundingClientRect=="function"}function Qo(N){return typeof N.drawArrays=="function"||typeof N.drawElements=="function"}function To(N){return typeof N=="string"?N.split():(Q(Array.isArray(N),"invalid extension array"),N)}function eo(N){return typeof N=="string"?(Q(typeof document!="undefined","not supported outside of DOM"),document.querySelector(N)):N}function Uo(N){var X=N||{},lt,ee,ge,Kt,oe={},_e=[],Ie=[],Be=typeof window=="undefined"?1:window.devicePixelRatio,Pe=!1,Ve=function(Ze){Ze&&Q.raise(Ze)},$e=function(){};if(typeof X=="string"?(Q(typeof document!="undefined","selector queries only supported in DOM enviroments"),lt=document.querySelector(X),Q(lt,"invalid query string for element")):typeof X=="object"?vc(X)?lt=X:Qo(X)?(Kt=X,ge=Kt.canvas):(Q.constructor(X),"gl"in X?Kt=X.gl:"canvas"in X?ge=eo(X.canvas):"container"in X&&(ee=eo(X.container)),"attributes"in X&&(oe=X.attributes,Q.type(oe,"object","invalid context attributes")),"extensions"in X&&(_e=To(X.extensions)),"optionalExtensions"in X&&(Ie=To(X.optionalExtensions)),"onDone"in X&&(Q.type(X.onDone,"function","invalid or missing onDone callback"),Ve=X.onDone),"profile"in X&&(Pe=!!X.profile),"pixelRatio"in X&&(Be=+X.pixelRatio,Q(Be>0,"invalid pixel ratio"))):Q.raise("invalid arguments to regl"),lt&&(lt.nodeName.toLowerCase()==="canvas"?ge=lt:ee=lt),!Kt){if(!ge){Q(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var ve=Gc(ee||document.body,Ve,Be);if(!ve)return null;ge=ve.canvas,$e=ve.onDestroy}oe.premultipliedAlpha===void 0&&(oe.premultipliedAlpha=!0),Kt=qs(ge,oe)}return Kt?{gl:Kt,canvas:ge,container:ee,extensions:_e,optionalExtensions:Ie,pixelRatio:Be,profile:Pe,onDone:Ve,onDestroy:$e}:($e(),Ve("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ao(N,X){var lt={};function ee(oe){Q.type(oe,"string","extension name must be string");var _e=oe.toLowerCase(),Ie;try{Ie=lt[_e]=N.getExtension(_e)}catch(Be){}return!!Ie}for(var ge=0;ge<X.extensions.length;++ge){var Kt=X.extensions[ge];if(!ee(Kt))return X.onDestroy(),X.onDone('"'+Kt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return X.optionalExtensions.forEach(ee),{extensions:lt,restore:function(){Object.keys(lt).forEach(function(oe){if(lt[oe]&&!ee(oe))throw new Error("(regl): error restoring extension "+oe)})}}}function ci(N,X){for(var lt=Array(N),ee=0;ee<N;++ee)lt[ee]=X(ee);return lt}var ms=5120,Or=5121,Vo=5122,wa=5123,ys=5124,Bs=5125,Ua=5126;function bo(N){for(var X=16;X<=1<<28;X*=16)if(N<=X)return X;return 0}function Vr(N){var X,lt;return X=(N>65535)<<4,N>>>=X,lt=(N>255)<<3,N>>>=lt,X|=lt,lt=(N>15)<<2,N>>>=lt,X|=lt,lt=(N>3)<<1,N>>>=lt,X|=lt,X|N>>1}function bs(){var N=ci(8,function(){return[]});function X(Kt){var oe=bo(Kt),_e=N[Vr(oe)>>2];return _e.length>0?_e.pop():new ArrayBuffer(oe)}function lt(Kt){N[Vr(Kt.byteLength)>>2].push(Kt)}function ee(Kt,oe){var _e=null;switch(Kt){case ms:_e=new Int8Array(X(oe),0,oe);break;case Or:_e=new Uint8Array(X(oe),0,oe);break;case Vo:_e=new Int16Array(X(2*oe),0,oe);break;case wa:_e=new Uint16Array(X(2*oe),0,oe);break;case ys:_e=new Int32Array(X(4*oe),0,oe);break;case Bs:_e=new Uint32Array(X(4*oe),0,oe);break;case Ua:_e=new Float32Array(X(4*oe),0,oe);break;default:return null}return _e.length!==oe?_e.subarray(0,oe):_e}function ge(Kt){lt(Kt.buffer)}return{alloc:X,free:lt,allocType:ee,freeType:ge}}var Jr=bs();Jr.zero=bs();var zc=3408,jc=3410,Js=3411,no=3412,Zo=3413,Qs=3414,xs=3415,Es=33901,Sa=33902,_a=3379,ts=3386,Ao=34921,Ca=36347,No=36348,mc=35661,Gs=35660,Mi=34930,yc=36349,oa=34076,Ro=34024,es=7936,Ta=7937,Va=7938,Xr=35724,sa=34047,yi=36063,Ke=34852,Ir=3553,bi=34067,ns=34069,Ii=33984,co=6408,ro=5126,ta=5121,zs=36160,Za=36053,bc=36064,ws=16384,rs=function(N,X){var lt=1;X.ext_texture_filter_anisotropic&&(lt=N.getParameter(sa));var ee=1,ge=1;X.webgl_draw_buffers&&(ee=N.getParameter(Ke),ge=N.getParameter(yi));var Kt=!!X.oes_texture_float;if(Kt){var oe=N.createTexture();N.bindTexture(Ir,oe),N.texImage2D(Ir,0,co,1,1,0,co,ro,null);var _e=N.createFramebuffer();if(N.bindFramebuffer(zs,_e),N.framebufferTexture2D(zs,bc,Ir,oe,0),N.bindTexture(Ir,null),N.checkFramebufferStatus(zs)!==Za)Kt=!1;else{N.viewport(0,0,1,1),N.clearColor(1,0,0,1),N.clear(ws);var Ie=Jr.allocType(ro,4);N.readPixels(0,0,1,1,co,ro,Ie),N.getError()?Kt=!1:(N.deleteFramebuffer(_e),N.deleteTexture(oe),Kt=Ie[0]===1),Jr.freeType(Ie)}}var Be=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Pe=!0;if(!Be){var Ve=N.createTexture(),$e=Jr.allocType(ta,36);N.activeTexture(Ii),N.bindTexture(bi,Ve),N.texImage2D(ns,0,co,3,3,0,co,ta,$e),Jr.freeType($e),N.bindTexture(bi,null),N.deleteTexture(Ve),Pe=!N.getError()}return{colorBits:[N.getParameter(jc),N.getParameter(Js),N.getParameter(no),N.getParameter(Zo)],depthBits:N.getParameter(Qs),stencilBits:N.getParameter(xs),subpixelBits:N.getParameter(zc),extensions:Object.keys(X).filter(function(ve){return!!X[ve]}),maxAnisotropic:lt,maxDrawbuffers:ee,maxColorAttachments:ge,pointSizeDims:N.getParameter(Es),lineWidthDims:N.getParameter(Sa),maxViewportDims:N.getParameter(ts),maxCombinedTextureUnits:N.getParameter(mc),maxCubeMapSize:N.getParameter(oa),maxRenderbufferSize:N.getParameter(Ro),maxTextureUnits:N.getParameter(Mi),maxTextureSize:N.getParameter(_a),maxAttributes:N.getParameter(Ao),maxVertexUniforms:N.getParameter(Ca),maxVertexTextureUnits:N.getParameter(Gs),maxVaryingVectors:N.getParameter(No),maxFragmentUniforms:N.getParameter(yc),glsl:N.getParameter(Xr),renderer:N.getParameter(Ta),vendor:N.getParameter(es),version:N.getParameter(Va),readFloat:Kt,npotTextureCube:Pe}};function Wi(N){return!!N&&typeof N=="object"&&Array.isArray(N.shape)&&Array.isArray(N.stride)&&typeof N.offset=="number"&&N.shape.length===N.stride.length&&(Array.isArray(N.data)||yt(N.data))}var Xi=function(N){return Object.keys(N).map(function(X){return N[X]})},Ss={shape:Au,flatten:$o};function Do(N,X,lt){for(var ee=0;ee<X;++ee)lt[ee]=N[ee]}function uo(N,X,lt,ee){for(var ge=0,Kt=0;Kt<X;++Kt)for(var oe=N[Kt],_e=0;_e<lt;++_e)ee[ge++]=oe[_e]}function $a(N,X,lt,ee,ge,Kt){for(var oe=Kt,_e=0;_e<X;++_e)for(var Ie=N[_e],Be=0;Be<lt;++Be)for(var Pe=Ie[Be],Ve=0;Ve<ee;++Ve)ge[oe++]=Pe[Ve]}function Ha(N,X,lt,ee,ge){for(var Kt=1,oe=lt+1;oe<X.length;++oe)Kt*=X[oe];var _e=X[lt];if(X.length-lt===4){var Ie=X[lt+1],Be=X[lt+2],Pe=X[lt+3];for(oe=0;oe<_e;++oe)$a(N[oe],Ie,Be,Pe,ee,ge),ge+=Kt}else for(oe=0;oe<_e;++oe)Ha(N[oe],X,lt+1,ee,ge),ge+=Kt}function $o(N,X,lt,ee){var ge=1;if(X.length)for(var Kt=0;Kt<X.length;++Kt)ge*=X[Kt];else ge=0;var oe=ee||Jr.allocType(lt,ge);switch(X.length){case 0:break;case 1:Do(N,X[0],oe);break;case 2:uo(N,X[0],X[1],oe);break;case 3:$a(N,X[0],X[1],X[2],oe,0);break;default:Ha(N,X,0,oe,0)}return oe}function Au(N){for(var X=[],lt=N;lt.length;lt=lt[0])X.push(lt.length);return X}var Wa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},xi=5120,Uc=5122,Vc=5124,Ou=5121,is=5123,Zc=5125,Mu=5126,os=5126,lo={int8:xi,int16:Uc,int32:Vc,uint8:Ou,uint16:is,uint32:Zc,float:Mu,float32:os},Xa=35048,Ya=35040,Iu={dynamic:Xa,stream:Ya,static:35044},Aa=Ss.flatten,Ka=Ss.shape,$c=35044,Hc=35040,Pu=5121,Ct=5126,Jt=[];Jt[5120]=1,Jt[5122]=2,Jt[5124]=4,Jt[5121]=1,Jt[5123]=2,Jt[5125]=4,Jt[5126]=4;function ne(N){return Wa[Object.prototype.toString.call(N)]|0}function me(N,X){for(var lt=0;lt<X.length;++lt)N[lt]=X[lt]}function Me(N,X,lt,ee,ge,Kt,oe){for(var _e=0,Ie=0;Ie<lt;++Ie)for(var Be=0;Be<ee;++Be)N[_e++]=X[ge*Ie+Kt*Be+oe]}function An(N,X,lt,ee){var ge=0,Kt={};function oe(Nt){this.id=ge++,this.buffer=N.createBuffer(),this.type=Nt,this.usage=$c,this.byteLength=0,this.dimension=1,this.dtype=Pu,this.persistentData=null,lt.profile&&(this.stats={size:0})}oe.prototype.bind=function(){N.bindBuffer(this.type,this.buffer)},oe.prototype.destroy=function(){$e(this)};var _e=[];function Ie(Nt,se){var ke=_e.pop();return ke||(ke=new oe(Nt)),ke.bind(),Ve(ke,se,Hc,0,1,!1),ke}function Be(Nt){_e.push(Nt)}function Pe(Nt,se,ke){Nt.byteLength=se.byteLength,N.bufferData(Nt.type,se,ke)}function Ve(Nt,se,ke,He,ie,cn){var Ee;if(Nt.usage=ke,Array.isArray(se)){if(Nt.dtype=He||Ct,se.length>0){var Ge;if(Array.isArray(se[0])){Ee=Ka(se);for(var Ce=1,je=1;je<Ee.length;++je)Ce*=Ee[je];Nt.dimension=Ce,Ge=Aa(se,Ee,Nt.dtype),Pe(Nt,Ge,ke),cn?Nt.persistentData=Ge:Jr.freeType(Ge)}else if(typeof se[0]=="number"){Nt.dimension=ie;var Ln=Jr.allocType(Nt.dtype,se.length);me(Ln,se),Pe(Nt,Ln,ke),cn?Nt.persistentData=Ln:Jr.freeType(Ln)}else yt(se[0])?(Nt.dimension=se[0].length,Nt.dtype=He||ne(se[0])||Ct,Ge=Aa(se,[se.length,se[0].length],Nt.dtype),Pe(Nt,Ge,ke),cn?Nt.persistentData=Ge:Jr.freeType(Ge)):Q.raise("invalid buffer data")}}else if(yt(se))Nt.dtype=He||ne(se),Nt.dimension=ie,Pe(Nt,se,ke),cn&&(Nt.persistentData=new Uint8Array(new Uint8Array(se.buffer)));else if(Wi(se)){Ee=se.shape;var Wn=se.stride,Xe=se.offset,Fe=0,we=0,Zn=0,cr=0;Ee.length===1?(Fe=Ee[0],we=1,Zn=Wn[0],cr=0):Ee.length===2?(Fe=Ee[0],we=Ee[1],Zn=Wn[0],cr=Wn[1]):Q.raise("invalid shape"),Nt.dtype=He||ne(se.data)||Ct,Nt.dimension=we;var dn=Jr.allocType(Nt.dtype,Fe*we);Me(dn,se.data,Fe,we,Zn,cr,Xe),Pe(Nt,dn,ke),cn?Nt.persistentData=dn:Jr.freeType(dn)}else se instanceof ArrayBuffer?(Nt.dtype=Pu,Nt.dimension=ie,Pe(Nt,se,ke),cn&&(Nt.persistentData=new Uint8Array(new Uint8Array(se)))):Q.raise("invalid buffer data")}function $e(Nt){X.bufferCount--,ee(Nt);var se=Nt.buffer;Q(se,"buffer must not be deleted already"),N.deleteBuffer(se),Nt.buffer=null,delete Kt[Nt.id]}function ve(Nt,se,ke,He){X.bufferCount++;var ie=new oe(se);Kt[ie.id]=ie;function cn(Ce){var je=$c,Ln=null,Wn=0,Xe=0,Fe=1;return Array.isArray(Ce)||yt(Ce)||Wi(Ce)||Ce instanceof ArrayBuffer?Ln=Ce:typeof Ce=="number"?Wn=Ce|0:Ce&&(Q.type(Ce,"object","buffer arguments must be an object, a number or an array"),"data"in Ce&&(Q(Ln===null||Array.isArray(Ln)||yt(Ln)||Wi(Ln),"invalid data for buffer"),Ln=Ce.data),"usage"in Ce&&(Q.parameter(Ce.usage,Iu,"invalid buffer usage"),je=Iu[Ce.usage]),"type"in Ce&&(Q.parameter(Ce.type,lo,"invalid buffer type"),Xe=lo[Ce.type]),"dimension"in Ce&&(Q.type(Ce.dimension,"number","invalid dimension"),Fe=Ce.dimension|0),"length"in Ce&&(Q.nni(Wn,"buffer length must be a nonnegative integer"),Wn=Ce.length|0)),ie.bind(),Ln?Ve(ie,Ln,je,Xe,Fe,He):(Wn&&N.bufferData(ie.type,Wn,je),ie.dtype=Xe||Pu,ie.usage=je,ie.dimension=Fe,ie.byteLength=Wn),lt.profile&&(ie.stats.size=ie.byteLength*Jt[ie.dtype]),cn}function Ee(Ce,je){Q(je+Ce.byteLength<=ie.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ce.byteLength+" starting from offset "+je+" to a buffer of size "+ie.byteLength),N.bufferSubData(ie.type,je,Ce)}function Ge(Ce,je){var Ln=(je||0)|0,Wn;if(ie.bind(),yt(Ce)||Ce instanceof ArrayBuffer)Ee(Ce,Ln);else if(Array.isArray(Ce)){if(Ce.length>0)if(typeof Ce[0]=="number"){var Xe=Jr.allocType(ie.dtype,Ce.length);me(Xe,Ce),Ee(Xe,Ln),Jr.freeType(Xe)}else if(Array.isArray(Ce[0])||yt(Ce[0])){Wn=Ka(Ce);var Fe=Aa(Ce,Wn,ie.dtype);Ee(Fe,Ln),Jr.freeType(Fe)}else Q.raise("invalid buffer data")}else if(Wi(Ce)){Wn=Ce.shape;var we=Ce.stride,Zn=0,cr=0,dn=0,Qn=0;Wn.length===1?(Zn=Wn[0],cr=1,dn=we[0],Qn=0):Wn.length===2?(Zn=Wn[0],cr=Wn[1],dn=we[0],Qn=we[1]):Q.raise("invalid shape");var Vn=Array.isArray(Ce.data)?ie.dtype:ne(Ce.data),gr=Jr.allocType(Vn,Zn*cr);Me(gr,Ce.data,Zn,cr,dn,Qn,Ce.offset),Ee(gr,Ln),Jr.freeType(gr)}else Q.raise("invalid data for buffer subdata");return cn}return ke||cn(Nt),cn._reglType="buffer",cn._buffer=ie,cn.subdata=Ge,lt.profile&&(cn.stats=ie.stats),cn.destroy=function(){$e(ie)},cn}function Ze(){Xi(Kt).forEach(function(Nt){Nt.buffer=N.createBuffer(),N.bindBuffer(Nt.type,Nt.buffer),N.bufferData(Nt.type,Nt.persistentData||Nt.byteLength,Nt.usage)})}return lt.profile&&(X.getTotalBufferSize=function(){var Nt=0;return Object.keys(Kt).forEach(function(se){Nt+=Kt[se].stats.size}),Nt}),{create:ve,createStream:Ie,destroyStream:Be,clear:function(){Xi(Kt).forEach($e),_e.forEach($e)},getBuffer:function(Nt){return Nt&&Nt._buffer instanceof oe?Nt._buffer:null},restore:Ze,_initBuffer:Ve}}var On=0,Nn=0,$n=1,er=1,Cr=4,mr=4,br={points:On,point:Nn,lines:$n,line:er,triangles:Cr,triangle:mr,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Qr=0,hi=1,or=4,Ei=5120,Zr=5121,ui=5122,Dr=5123,_s=5124,Ci=5125,ti=34963,Tr=35040,Cs=35044;function io(N,X,lt,ee){var ge={},Kt=0,oe={uint8:Zr,uint16:Dr};X.oes_element_index_uint&&(oe.uint32=Ci);function _e(Ze){this.id=Kt++,ge[this.id]=this,this.buffer=Ze,this.primType=or,this.vertCount=0,this.type=0}_e.prototype.bind=function(){this.buffer.bind()};var Ie=[];function Be(Ze){var Nt=Ie.pop();return Nt||(Nt=new _e(lt.create(null,ti,!0,!1)._buffer)),Ve(Nt,Ze,Tr,-1,-1,0,0),Nt}function Pe(Ze){Ie.push(Ze)}function Ve(Ze,Nt,se,ke,He,ie,cn){Ze.buffer.bind();var Ee;if(Nt){var Ge=cn;!cn&&(!yt(Nt)||Wi(Nt)&&!yt(Nt.data))&&(Ge=X.oes_element_index_uint?Ci:Dr),lt._initBuffer(Ze.buffer,Nt,se,Ge,3)}else N.bufferData(ti,ie,se),Ze.buffer.dtype=Ee||Zr,Ze.buffer.usage=se,Ze.buffer.dimension=3,Ze.buffer.byteLength=ie;if(Ee=cn,!cn){switch(Ze.buffer.dtype){case Zr:case Ei:Ee=Zr;break;case Dr:case ui:Ee=Dr;break;case Ci:case _s:Ee=Ci;break;default:Q.raise("unsupported type for element array")}Ze.buffer.dtype=Ee}Ze.type=Ee,Q(Ee!==Ci||!!X.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ce=He;Ce<0&&(Ce=Ze.buffer.byteLength,Ee===Dr?Ce>>=1:Ee===Ci&&(Ce>>=2)),Ze.vertCount=Ce;var je=ke;if(ke<0){je=or;var Ln=Ze.buffer.dimension;Ln===1&&(je=Qr),Ln===2&&(je=hi),Ln===3&&(je=or)}Ze.primType=je}function $e(Ze){ee.elementsCount--,Q(Ze.buffer!==null,"must not double destroy elements"),delete ge[Ze.id],Ze.buffer.destroy(),Ze.buffer=null}function ve(Ze,Nt){var se=lt.create(null,ti,!0),ke=new _e(se._buffer);ee.elementsCount++;function He(ie){if(!ie)se(),ke.primType=or,ke.vertCount=0,ke.type=Zr;else if(typeof ie=="number")se(ie),ke.primType=or,ke.vertCount=ie|0,ke.type=Zr;else{var cn=null,Ee=Cs,Ge=-1,Ce=-1,je=0,Ln=0;Array.isArray(ie)||yt(ie)||Wi(ie)?cn=ie:(Q.type(ie,"object","invalid arguments for elements"),"data"in ie&&(cn=ie.data,Q(Array.isArray(cn)||yt(cn)||Wi(cn),"invalid data for element buffer")),"usage"in ie&&(Q.parameter(ie.usage,Iu,"invalid element buffer usage"),Ee=Iu[ie.usage]),"primitive"in ie&&(Q.parameter(ie.primitive,br,"invalid element buffer primitive"),Ge=br[ie.primitive]),"count"in ie&&(Q(typeof ie.count=="number"&&ie.count>=0,"invalid vertex count for elements"),Ce=ie.count|0),"type"in ie&&(Q.parameter(ie.type,oe,"invalid buffer type"),Ln=oe[ie.type]),"length"in ie?je=ie.length|0:(je=Ce,Ln===Dr||Ln===ui?je*=2:(Ln===Ci||Ln===_s)&&(je*=4))),Ve(ke,cn,Ee,Ge,Ce,je,Ln)}return He}return He(Ze),He._reglType="elements",He._elements=ke,He.subdata=function(ie,cn){return se.subdata(ie,cn),He},He.destroy=function(){$e(ke)},He}return{create:ve,createStream:Be,destroyStream:Pe,getElements:function(Ze){return typeof Ze=="function"&&Ze._elements instanceof _e?Ze._elements:null},clear:function(){Xi(ge).forEach($e)}}}var $r=new Float32Array(1),fo=new Uint32Array($r.buffer),Ho=5123;function aa(N){for(var X=Jr.allocType(Ho,N.length),lt=0;lt<N.length;++lt)if(isNaN(N[lt]))X[lt]=65535;else if(N[lt]===1/0)X[lt]=31744;else if(N[lt]===-1/0)X[lt]=64512;else{$r[0]=N[lt];var ee=fo[0],ge=ee>>>31<<15,Kt=(ee<<1>>>24)-127,oe=ee>>13&(1<<10)-1;if(Kt<-24)X[lt]=ge;else if(Kt<-14){var _e=-14-Kt;X[lt]=ge+(oe+(1<<10)>>_e)}else Kt>15?X[lt]=ge+31744:X[lt]=ge+(Kt+15<<10)+oe}return X}function Hr(N){return Array.isArray(N)||yt(N)}var ca=function(N){return!(N&N-1)&&!!N},ho=34467,xo=3553,ss=34067,js=34069,ea=6408,na=6406,as=6407,qa=6409,wi=6410,Ja=32854,Nu=32855,Ru=36194,Wc=32819,Qa=32820,yl=33635,Bh=34042,xc=6402,Du=34041,Lu=35904,wf=35906,ua=36193,vi=33776,bl=33777,Sf=33778,_f=33779,xl=35986,El=35987,Xc=34798,wl=35840,Yc=35841,Sl=35842,ku=35843,Fu=36196,Kc=5121,Oa=5123,Cf=5125,Bu=5126,_l=10242,qc=10243,Gh=10497,Cl=33071,zh=33648,Tl=10240,Gu=10241,Us=9728,Al=9729,Ec=9984,cs=9985,jh=9986,Ol=9987,Kd=33170,Jc=4352,la=4353,Uh=4354,wc=34046,Vh=3317,Tf=37440,Af=37441,Zh=37443,tc=37444,ec=33984,nc=[Ec,jh,cs,Ol],Qc=[0,qa,wi,as,ea],Ts={};Ts[qa]=Ts[na]=Ts[xc]=1,Ts[Du]=Ts[wi]=2,Ts[as]=Ts[Lu]=3,Ts[ea]=Ts[wf]=4;function rc(N){return"[object "+N+"]"}var Ml=rc("HTMLCanvasElement"),Of=rc("OffscreenCanvas"),zu=rc("CanvasRenderingContext2D"),Il=rc("ImageBitmap"),tu=rc("HTMLImageElement"),Mf=rc("HTMLVideoElement"),If=Object.keys(Wa).concat([Ml,Of,zu,Il,tu,Mf]),eu=[];eu[Kc]=1,eu[Bu]=4,eu[ua]=2,eu[Oa]=2,eu[Cf]=4;var Gi=[];Gi[Ja]=2,Gi[Nu]=2,Gi[Ru]=2,Gi[Du]=4,Gi[vi]=.5,Gi[bl]=.5,Gi[Sf]=1,Gi[_f]=1,Gi[xl]=.5,Gi[El]=1,Gi[Xc]=1,Gi[wl]=.5,Gi[Yc]=.25,Gi[Sl]=.5,Gi[ku]=.25,Gi[Fu]=.5;function fa(N){return Array.isArray(N)&&(N.length===0||typeof N[0]=="number")}function Pl(N){if(!Array.isArray(N))return!1;var X=N.length;return!(X===0||!Hr(N[0]))}function Oo(N){return Object.prototype.toString.call(N)}function $h(N){return Oo(N)===Ml}function Nl(N){return Oo(N)===Of}function Hh(N){return Oo(N)===zu}function nu(N){return Oo(N)===Il}function Wh(N){return Oo(N)===tu}function Pf(N){return Oo(N)===Mf}function ju(N){if(!N)return!1;var X=Oo(N);return If.indexOf(X)>=0?!0:fa(N)||Pl(N)||Wi(N)}function Xh(N){return Wa[Object.prototype.toString.call(N)]|0}function Nf(N,X){var lt=X.length;switch(N.type){case Kc:case Oa:case Cf:case Bu:var ee=Jr.allocType(N.type,lt);ee.set(X),N.data=ee;break;case ua:N.data=aa(X);break;default:Q.raise("unsupported texture type, must specify a typed array")}}function Rl(N,X){return Jr.allocType(N.type===ua?Bu:N.type,X)}function Rf(N,X){N.type===ua?(N.data=aa(X),Jr.freeType(X)):N.data=X}function us(N,X,lt,ee,ge,Kt){for(var oe=N.width,_e=N.height,Ie=N.channels,Be=oe*_e*Ie,Pe=Rl(N,Be),Ve=0,$e=0;$e<_e;++$e)for(var ve=0;ve<oe;++ve)for(var Ze=0;Ze<Ie;++Ze)Pe[Ve++]=X[lt*ve+ee*$e+ge*Ze+Kt];Rf(N,Pe)}function ra(N,X,lt,ee,ge,Kt){var oe;if(typeof Gi[N]!="undefined"?oe=Gi[N]:oe=Ts[N]*eu[X],Kt&&(oe*=6),ge){for(var _e=0,Ie=lt;Ie>=1;)_e+=oe*Ie*Ie,Ie/=2;return _e}else return oe*lt*ee}function ru(N,X,lt,ee,ge,Kt,oe){var _e={"don't care":Jc,"dont care":Jc,nice:Uh,fast:la},Ie={repeat:Gh,clamp:Cl,mirror:zh},Be={nearest:Us,linear:Al},Pe=O({mipmap:Ol,"nearest mipmap nearest":Ec,"linear mipmap nearest":cs,"nearest mipmap linear":jh,"linear mipmap linear":Ol},Be),Ve={none:0,browser:tc},$e={uint8:Kc,rgba4:Wc,rgb565:yl,"rgb5 a1":Qa},ve={alpha:na,luminance:qa,"luminance alpha":wi,rgb:as,rgba:ea,rgba4:Ja,"rgb5 a1":Nu,rgb565:Ru},Ze={};X.ext_srgb&&(ve.srgb=Lu,ve.srgba=wf),X.oes_texture_float&&($e.float32=$e.float=Bu),X.oes_texture_half_float&&($e.float16=$e["half float"]=ua),X.webgl_depth_texture&&(O(ve,{depth:xc,"depth stencil":Du}),O($e,{uint16:Oa,uint32:Cf,"depth stencil":Bh})),X.webgl_compressed_texture_s3tc&&O(Ze,{"rgb s3tc dxt1":vi,"rgba s3tc dxt1":bl,"rgba s3tc dxt3":Sf,"rgba s3tc dxt5":_f}),X.webgl_compressed_texture_atc&&O(Ze,{"rgb atc":xl,"rgba atc explicit alpha":El,"rgba atc interpolated alpha":Xc}),X.webgl_compressed_texture_pvrtc&&O(Ze,{"rgb pvrtc 4bppv1":wl,"rgb pvrtc 2bppv1":Yc,"rgba pvrtc 4bppv1":Sl,"rgba pvrtc 2bppv1":ku}),X.webgl_compressed_texture_etc1&&(Ze["rgb etc1"]=Fu);var Nt=Array.prototype.slice.call(N.getParameter(ho));Object.keys(Ze).forEach(function(it){var te=Ze[it];Nt.indexOf(te)>=0&&(ve[it]=te)});var se=Object.keys(ve);lt.textureFormats=se;var ke=[];Object.keys(ve).forEach(function(it){var te=ve[it];ke[te]=it});var He=[];Object.keys($e).forEach(function(it){var te=$e[it];He[te]=it});var ie=[];Object.keys(Be).forEach(function(it){var te=Be[it];ie[te]=it});var cn=[];Object.keys(Pe).forEach(function(it){var te=Pe[it];cn[te]=it});var Ee=[];Object.keys(Ie).forEach(function(it){var te=Ie[it];Ee[te]=it});var Ge=se.reduce(function(it,te){var Yt=ve[te];return Yt===qa||Yt===na||Yt===qa||Yt===wi||Yt===xc||Yt===Du||X.ext_srgb&&(Yt===Lu||Yt===wf)?it[Yt]=Yt:Yt===Nu||te.indexOf("rgba")>=0?it[Yt]=ea:it[Yt]=as,it},{});function Ce(){this.internalformat=ea,this.format=ea,this.type=Kc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=tc,this.width=0,this.height=0,this.channels=0}function je(it,te){it.internalformat=te.internalformat,it.format=te.format,it.type=te.type,it.compressed=te.compressed,it.premultiplyAlpha=te.premultiplyAlpha,it.flipY=te.flipY,it.unpackAlignment=te.unpackAlignment,it.colorSpace=te.colorSpace,it.width=te.width,it.height=te.height,it.channels=te.channels}function Ln(it,te){if(!(typeof te!="object"||!te)){if("premultiplyAlpha"in te&&(Q.type(te.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),it.premultiplyAlpha=te.premultiplyAlpha),"flipY"in te&&(Q.type(te.flipY,"boolean","invalid texture flip"),it.flipY=te.flipY),"alignment"in te&&(Q.oneOf(te.alignment,[1,2,4,8],"invalid texture unpack alignment"),it.unpackAlignment=te.alignment),"colorSpace"in te&&(Q.parameter(te.colorSpace,Ve,"invalid colorSpace"),it.colorSpace=Ve[te.colorSpace]),"type"in te){var Yt=te.type;Q(X.oes_texture_float||!(Yt==="float"||Yt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Q(X.oes_texture_half_float||!(Yt==="half float"||Yt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Q(X.webgl_depth_texture||!(Yt==="uint16"||Yt==="uint32"||Yt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Q.parameter(Yt,$e,"invalid texture type"),it.type=$e[Yt]}var un=it.width,wr=it.height,et=it.channels,$=!1;"shape"in te?(Q(Array.isArray(te.shape)&&te.shape.length>=2,"shape must be an array"),un=te.shape[0],wr=te.shape[1],te.shape.length===3&&(et=te.shape[2],Q(et>0&&et<=4,"invalid number of channels"),$=!0),Q(un>=0&&un<=lt.maxTextureSize,"invalid width"),Q(wr>=0&&wr<=lt.maxTextureSize,"invalid height")):("radius"in te&&(un=wr=te.radius,Q(un>=0&&un<=lt.maxTextureSize,"invalid radius")),"width"in te&&(un=te.width,Q(un>=0&&un<=lt.maxTextureSize,"invalid width")),"height"in te&&(wr=te.height,Q(wr>=0&&wr<=lt.maxTextureSize,"invalid height")),"channels"in te&&(et=te.channels,Q(et>0&&et<=4,"invalid number of channels"),$=!0)),it.width=un|0,it.height=wr|0,it.channels=et|0;var pt=!1;if("format"in te){var Rt=te.format;Q(X.webgl_depth_texture||!(Rt==="depth"||Rt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Q.parameter(Rt,ve,"invalid texture format");var Ft=it.internalformat=ve[Rt];it.format=Ge[Ft],Rt in $e&&("type"in te||(it.type=$e[Rt])),Rt in Ze&&(it.compressed=!0),pt=!0}!$&&pt?it.channels=Ts[it.format]:$&&!pt?it.channels!==Qc[it.format]&&(it.format=it.internalformat=Qc[it.channels]):pt&&$&&Q(it.channels===Ts[it.format],"number of channels inconsistent with specified format")}}function Wn(it){N.pixelStorei(Tf,it.flipY),N.pixelStorei(Af,it.premultiplyAlpha),N.pixelStorei(Zh,it.colorSpace),N.pixelStorei(Vh,it.unpackAlignment)}function Xe(){Ce.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Fe(it,te){var Yt=null;if(ju(te)?Yt=te:te&&(Q.type(te,"object","invalid pixel data type"),Ln(it,te),"x"in te&&(it.xOffset=te.x|0),"y"in te&&(it.yOffset=te.y|0),ju(te.data)&&(Yt=te.data)),Q(!it.compressed||Yt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),te.copy){Q(!Yt,"can not specify copy and data field for the same texture");var un=ge.viewportWidth,wr=ge.viewportHeight;it.width=it.width||un-it.xOffset,it.height=it.height||wr-it.yOffset,it.needsCopy=!0,Q(it.xOffset>=0&&it.xOffset<un&&it.yOffset>=0&&it.yOffset<wr&&it.width>0&&it.width<=un&&it.height>0&&it.height<=wr,"copy texture read out of bounds")}else if(!Yt)it.width=it.width||1,it.height=it.height||1,it.channels=it.channels||4;else if(yt(Yt))it.channels=it.channels||4,it.data=Yt,!("type"in te)&&it.type===Kc&&(it.type=Xh(Yt));else if(fa(Yt))it.channels=it.channels||4,Nf(it,Yt),it.alignment=1,it.needsFree=!0;else if(Wi(Yt)){var et=Yt.data;!Array.isArray(et)&&it.type===Kc&&(it.type=Xh(et));var $=Yt.shape,pt=Yt.stride,Rt,Ft,_t,mt,Ot,tt;$.length===3?(_t=$[2],tt=pt[2]):(Q($.length===2,"invalid ndarray pixel data, must be 2 or 3D"),_t=1,tt=1),Rt=$[0],Ft=$[1],mt=pt[0],Ot=pt[1],it.alignment=1,it.width=Rt,it.height=Ft,it.channels=_t,it.format=it.internalformat=Qc[_t],it.needsFree=!0,us(it,et,mt,Ot,tt,Yt.offset)}else if($h(Yt)||Nl(Yt)||Hh(Yt))$h(Yt)||Nl(Yt)?it.element=Yt:it.element=Yt.canvas,it.width=it.element.width,it.height=it.element.height,it.channels=4;else if(nu(Yt))it.element=Yt,it.width=Yt.width,it.height=Yt.height,it.channels=4;else if(Wh(Yt))it.element=Yt,it.width=Yt.naturalWidth,it.height=Yt.naturalHeight,it.channels=4;else if(Pf(Yt))it.element=Yt,it.width=Yt.videoWidth,it.height=Yt.videoHeight,it.channels=4;else if(Pl(Yt)){var dt=it.width||Yt[0].length,q=it.height||Yt.length,Lt=it.channels;Hr(Yt[0][0])?Lt=Lt||Yt[0][0].length:Lt=Lt||1;for(var Vt=Ss.shape(Yt),de=1,ye=0;ye<Vt.length;++ye)de*=Vt[ye];var ae=Rl(it,de);Ss.flatten(Yt,Vt,"",ae),Rf(it,ae),it.alignment=1,it.width=dt,it.height=q,it.channels=Lt,it.format=it.internalformat=Qc[Lt],it.needsFree=!0}it.type===Bu?Q(lt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):it.type===ua&&Q(lt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function we(it,te,Yt){var un=it.element,wr=it.data,et=it.internalformat,$=it.format,pt=it.type,Rt=it.width,Ft=it.height;Wn(it),un?N.texImage2D(te,Yt,$,$,pt,un):it.compressed?N.compressedTexImage2D(te,Yt,et,Rt,Ft,0,wr):it.needsCopy?(ee(),N.copyTexImage2D(te,Yt,$,it.xOffset,it.yOffset,Rt,Ft,0)):N.texImage2D(te,Yt,$,Rt,Ft,0,$,pt,wr||null)}function Zn(it,te,Yt,un,wr){var et=it.element,$=it.data,pt=it.internalformat,Rt=it.format,Ft=it.type,_t=it.width,mt=it.height;Wn(it),et?N.texSubImage2D(te,wr,Yt,un,Rt,Ft,et):it.compressed?N.compressedTexSubImage2D(te,wr,Yt,un,pt,_t,mt,$):it.needsCopy?(ee(),N.copyTexSubImage2D(te,wr,Yt,un,it.xOffset,it.yOffset,_t,mt)):N.texSubImage2D(te,wr,Yt,un,_t,mt,Rt,Ft,$)}var cr=[];function dn(){return cr.pop()||new Xe}function Qn(it){it.needsFree&&Jr.freeType(it.data),Xe.call(it),cr.push(it)}function Vn(){Ce.call(this),this.genMipmaps=!1,this.mipmapHint=Jc,this.mipmask=0,this.images=Array(16)}function gr(it,te,Yt){var un=it.images[0]=dn();it.mipmask=1,un.width=it.width=te,un.height=it.height=Yt,un.channels=it.channels=4}function Lr(it,te){var Yt=null;if(ju(te))Yt=it.images[0]=dn(),je(Yt,it),Fe(Yt,te),it.mipmask=1;else if(Ln(it,te),Array.isArray(te.mipmap))for(var un=te.mipmap,wr=0;wr<un.length;++wr)Yt=it.images[wr]=dn(),je(Yt,it),Yt.width>>=wr,Yt.height>>=wr,Fe(Yt,un[wr]),it.mipmask|=1<<wr;else Yt=it.images[0]=dn(),je(Yt,it),Fe(Yt,te),it.mipmask=1;je(it,it.images[0]),it.compressed&&(it.internalformat===vi||it.internalformat===bl||it.internalformat===Sf||it.internalformat===_f)&&Q(it.width%4===0&&it.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function zi(it,te){for(var Yt=it.images,un=0;un<Yt.length;++un){if(!Yt[un])return;we(Yt[un],te,un)}}var mi=[];function ar(){var it=mi.pop()||new Vn;Ce.call(it),it.mipmask=0;for(var te=0;te<16;++te)it.images[te]=null;return it}function ji(it){for(var te=it.images,Yt=0;Yt<te.length;++Yt)te[Yt]&&Qn(te[Yt]),te[Yt]=null;mi.push(it)}function Wr(){this.minFilter=Us,this.magFilter=Us,this.wrapS=Cl,this.wrapT=Cl,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Jc}function li(it,te){if("min"in te){var Yt=te.min;Q.parameter(Yt,Pe),it.minFilter=Pe[Yt],nc.indexOf(it.minFilter)>=0&&!("faces"in te)&&(it.genMipmaps=!0)}if("mag"in te){var un=te.mag;Q.parameter(un,Be),it.magFilter=Be[un]}var wr=it.wrapS,et=it.wrapT;if("wrap"in te){var $=te.wrap;typeof $=="string"?(Q.parameter($,Ie),wr=et=Ie[$]):Array.isArray($)&&(Q.parameter($[0],Ie),Q.parameter($[1],Ie),wr=Ie[$[0]],et=Ie[$[1]])}else{if("wrapS"in te){var pt=te.wrapS;Q.parameter(pt,Ie),wr=Ie[pt]}if("wrapT"in te){var Rt=te.wrapT;Q.parameter(Rt,Ie),et=Ie[Rt]}}if(it.wrapS=wr,it.wrapT=et,"anisotropic"in te){var Ft=te.anisotropic;Q(typeof Ft=="number"&&Ft>=1&&Ft<=lt.maxAnisotropic,"aniso samples must be between 1 and "),it.anisotropic=te.anisotropic}if("mipmap"in te){var _t=!1;switch(typeof te.mipmap){case"string":Q.parameter(te.mipmap,_e,"invalid mipmap hint"),it.mipmapHint=_e[te.mipmap],it.genMipmaps=!0,_t=!0;break;case"boolean":_t=it.genMipmaps=te.mipmap;break;case"object":Q(Array.isArray(te.mipmap),"invalid mipmap type"),it.genMipmaps=!1,_t=!0;break;default:Q.raise("invalid mipmap type")}_t&&!("min"in te)&&(it.minFilter=Ec)}}function di(it,te){N.texParameteri(te,Gu,it.minFilter),N.texParameteri(te,Tl,it.magFilter),N.texParameteri(te,_l,it.wrapS),N.texParameteri(te,qc,it.wrapT),X.ext_texture_filter_anisotropic&&N.texParameteri(te,wc,it.anisotropic),it.genMipmaps&&(N.hint(Kd,it.mipmapHint),N.generateMipmap(te))}var tr=0,ei={},oo=lt.maxTextureUnits,Si=Array(oo).map(function(){return null});function ur(it){Ce.call(this),this.mipmask=0,this.internalformat=ea,this.id=tr++,this.refCount=1,this.target=it,this.texture=N.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wr,oe.profile&&(this.stats={size:0})}function Ui(it){N.activeTexture(ec),N.bindTexture(it.target,it.texture)}function xr(){var it=Si[0];it?N.bindTexture(it.target,it.texture):N.bindTexture(xo,null)}function gn(it){var te=it.texture;Q(te,"must not double destroy texture");var Yt=it.unit,un=it.target;Yt>=0&&(N.activeTexture(ec+Yt),N.bindTexture(un,null),Si[Yt]=null),N.deleteTexture(te),it.texture=null,it.params=null,it.pixels=null,it.refCount=0,delete ei[it.id],Kt.textureCount--}O(ur.prototype,{bind:function(){var it=this;it.bindCount+=1;var te=it.unit;if(te<0){for(var Yt=0;Yt<oo;++Yt){var un=Si[Yt];if(un){if(un.bindCount>0)continue;un.unit=-1}Si[Yt]=it,te=Yt;break}te>=oo&&Q.raise("insufficient number of texture units"),oe.profile&&Kt.maxTextureUnits<te+1&&(Kt.maxTextureUnits=te+1),it.unit=te,N.activeTexture(ec+te),N.bindTexture(it.target,it.texture)}return te},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&gn(this)}});function Er(it,te){var Yt=new ur(xo);ei[Yt.id]=Yt,Kt.textureCount++;function un($,pt){var Rt=Yt.texInfo;Wr.call(Rt);var Ft=ar();return typeof $=="number"?typeof pt=="number"?gr(Ft,$|0,pt|0):gr(Ft,$|0,$|0):$?(Q.type($,"object","invalid arguments to regl.texture"),li(Rt,$),Lr(Ft,$)):gr(Ft,1,1),Rt.genMipmaps&&(Ft.mipmask=(Ft.width<<1)-1),Yt.mipmask=Ft.mipmask,je(Yt,Ft),Q.texture2D(Rt,Ft,lt),Yt.internalformat=Ft.internalformat,un.width=Ft.width,un.height=Ft.height,Ui(Yt),zi(Ft,xo),di(Rt,xo),xr(),ji(Ft),oe.profile&&(Yt.stats.size=ra(Yt.internalformat,Yt.type,Ft.width,Ft.height,Rt.genMipmaps,!1)),un.format=ke[Yt.internalformat],un.type=He[Yt.type],un.mag=ie[Rt.magFilter],un.min=cn[Rt.minFilter],un.wrapS=Ee[Rt.wrapS],un.wrapT=Ee[Rt.wrapT],un}function wr($,pt,Rt,Ft){Q(!!$,"must specify image data");var _t=pt|0,mt=Rt|0,Ot=Ft|0,tt=dn();return je(tt,Yt),tt.width=0,tt.height=0,Fe(tt,$),tt.width=tt.width||(Yt.width>>Ot)-_t,tt.height=tt.height||(Yt.height>>Ot)-mt,Q(Yt.type===tt.type&&Yt.format===tt.format&&Yt.internalformat===tt.internalformat,"incompatible format for texture.subimage"),Q(_t>=0&&mt>=0&&_t+tt.width<=Yt.width&&mt+tt.height<=Yt.height,"texture.subimage write out of bounds"),Q(Yt.mipmask&1<<Ot,"missing mipmap data"),Q(tt.data||tt.element||tt.needsCopy,"missing image data"),Ui(Yt),Zn(tt,xo,_t,mt,Ot),xr(),Qn(tt),un}function et($,pt){var Rt=$|0,Ft=pt|0||Rt;if(Rt===Yt.width&&Ft===Yt.height)return un;un.width=Yt.width=Rt,un.height=Yt.height=Ft,Ui(Yt);for(var _t=0;Yt.mipmask>>_t;++_t){var mt=Rt>>_t,Ot=Ft>>_t;if(!mt||!Ot)break;N.texImage2D(xo,_t,Yt.format,mt,Ot,0,Yt.format,Yt.type,null)}return xr(),oe.profile&&(Yt.stats.size=ra(Yt.internalformat,Yt.type,Rt,Ft,!1,!1)),un}return un(it,te),un.subimage=wr,un.resize=et,un._reglType="texture2d",un._texture=Yt,oe.profile&&(un.stats=Yt.stats),un.destroy=function(){Yt.decRef()},un}function Pr(it,te,Yt,un,wr,et){var $=new ur(ss);ei[$.id]=$,Kt.cubeCount++;var pt=new Array(6);function Rt(mt,Ot,tt,dt,q,Lt){var Vt,de=$.texInfo;for(Wr.call(de),Vt=0;Vt<6;++Vt)pt[Vt]=ar();if(typeof mt=="number"||!mt){var ye=mt|0||1;for(Vt=0;Vt<6;++Vt)gr(pt[Vt],ye,ye)}else if(typeof mt=="object")if(Ot)Lr(pt[0],mt),Lr(pt[1],Ot),Lr(pt[2],tt),Lr(pt[3],dt),Lr(pt[4],q),Lr(pt[5],Lt);else if(li(de,mt),Ln($,mt),"faces"in mt){var ae=mt.faces;for(Q(Array.isArray(ae)&&ae.length===6,"cube faces must be a length 6 array"),Vt=0;Vt<6;++Vt)Q(typeof ae[Vt]=="object"&&!!ae[Vt],"invalid input for cube map face"),je(pt[Vt],$),Lr(pt[Vt],ae[Vt])}else for(Vt=0;Vt<6;++Vt)Lr(pt[Vt],mt);else Q.raise("invalid arguments to cube map");for(je($,pt[0]),lt.npotTextureCube||Q(ca($.width)&&ca($.height),"your browser does not support non power or two texture dimensions"),de.genMipmaps?$.mipmask=(pt[0].width<<1)-1:$.mipmask=pt[0].mipmask,Q.textureCube($,de,pt,lt),$.internalformat=pt[0].internalformat,Rt.width=pt[0].width,Rt.height=pt[0].height,Ui($),Vt=0;Vt<6;++Vt)zi(pt[Vt],js+Vt);for(di(de,ss),xr(),oe.profile&&($.stats.size=ra($.internalformat,$.type,Rt.width,Rt.height,de.genMipmaps,!0)),Rt.format=ke[$.internalformat],Rt.type=He[$.type],Rt.mag=ie[de.magFilter],Rt.min=cn[de.minFilter],Rt.wrapS=Ee[de.wrapS],Rt.wrapT=Ee[de.wrapT],Vt=0;Vt<6;++Vt)ji(pt[Vt]);return Rt}function Ft(mt,Ot,tt,dt,q){Q(!!Ot,"must specify image data"),Q(typeof mt=="number"&&mt===(mt|0)&&mt>=0&&mt<6,"invalid face");var Lt=tt|0,Vt=dt|0,de=q|0,ye=dn();return je(ye,$),ye.width=0,ye.height=0,Fe(ye,Ot),ye.width=ye.width||($.width>>de)-Lt,ye.height=ye.height||($.height>>de)-Vt,Q($.type===ye.type&&$.format===ye.format&&$.internalformat===ye.internalformat,"incompatible format for texture.subimage"),Q(Lt>=0&&Vt>=0&&Lt+ye.width<=$.width&&Vt+ye.height<=$.height,"texture.subimage write out of bounds"),Q($.mipmask&1<<de,"missing mipmap data"),Q(ye.data||ye.element||ye.needsCopy,"missing image data"),Ui($),Zn(ye,js+mt,Lt,Vt,de),xr(),Qn(ye),Rt}function _t(mt){var Ot=mt|0;if(Ot!==$.width){Rt.width=$.width=Ot,Rt.height=$.height=Ot,Ui($);for(var tt=0;tt<6;++tt)for(var dt=0;$.mipmask>>dt;++dt)N.texImage2D(js+tt,dt,$.format,Ot>>dt,Ot>>dt,0,$.format,$.type,null);return xr(),oe.profile&&($.stats.size=ra($.internalformat,$.type,Rt.width,Rt.height,!1,!0)),Rt}}return Rt(it,te,Yt,un,wr,et),Rt.subimage=Ft,Rt.resize=_t,Rt._reglType="textureCube",Rt._texture=$,oe.profile&&(Rt.stats=$.stats),Rt.destroy=function(){$.decRef()},Rt}function gi(){for(var it=0;it<oo;++it)N.activeTexture(ec+it),N.bindTexture(xo,null),Si[it]=null;Xi(ei).forEach(gn),Kt.cubeCount=0,Kt.textureCount=0}oe.profile&&(Kt.getTotalTextureSize=function(){var it=0;return Object.keys(ei).forEach(function(te){it+=ei[te].stats.size}),it});function wo(){for(var it=0;it<oo;++it){var te=Si[it];te&&(te.bindCount=0,te.unit=-1,Si[it]=null)}Xi(ei).forEach(function(Yt){Yt.texture=N.createTexture(),N.bindTexture(Yt.target,Yt.texture);for(var un=0;un<32;++un)if(Yt.mipmask&1<<un)if(Yt.target===xo)N.texImage2D(xo,un,Yt.internalformat,Yt.width>>un,Yt.height>>un,0,Yt.internalformat,Yt.type,null);else for(var wr=0;wr<6;++wr)N.texImage2D(js+wr,un,Yt.internalformat,Yt.width>>un,Yt.height>>un,0,Yt.internalformat,Yt.type,null);di(Yt.texInfo,Yt.target)})}function Vs(){for(var it=0;it<oo;++it){var te=Si[it];te&&(te.bindCount=0,te.unit=-1,Si[it]=null),N.activeTexture(ec+it),N.bindTexture(xo,null),N.bindTexture(ss,null)}}return{create2D:Er,createCube:Pr,clear:gi,getTexture:function(it){return null},restore:wo,refresh:Vs}}var As=36161,Sc=32854,Dl=32855,iu=36194,Df=33189,Lf=36168,Ll=34041,kl=35907,kf=34836,Yh=34842,Fl=34843,Os=[];Os[Sc]=2,Os[Dl]=2,Os[iu]=2,Os[Df]=2,Os[Lf]=1,Os[Ll]=4,Os[kl]=4,Os[kf]=16,Os[Yh]=8,Os[Fl]=6;function Kh(N,X,lt){return Os[N]*X*lt}var qd=function(N,X,lt,ee,ge){var Kt={rgba4:Sc,rgb565:iu,"rgb5 a1":Dl,depth:Df,stencil:Lf,"depth stencil":Ll};X.ext_srgb&&(Kt.srgba=kl),X.ext_color_buffer_half_float&&(Kt.rgba16f=Yh,Kt.rgb16f=Fl),X.webgl_color_buffer_float&&(Kt.rgba32f=kf);var oe=[];Object.keys(Kt).forEach(function(ve){var Ze=Kt[ve];oe[Ze]=ve});var _e=0,Ie={};function Be(ve){this.id=_e++,this.refCount=1,this.renderbuffer=ve,this.format=Sc,this.width=0,this.height=0,ge.profile&&(this.stats={size:0})}Be.prototype.decRef=function(){--this.refCount<=0&&Pe(this)};function Pe(ve){var Ze=ve.renderbuffer;Q(Ze,"must not double destroy renderbuffer"),N.bindRenderbuffer(As,null),N.deleteRenderbuffer(Ze),ve.renderbuffer=null,ve.refCount=0,delete Ie[ve.id],ee.renderbufferCount--}function Ve(ve,Ze){var Nt=new Be(N.createRenderbuffer());Ie[Nt.id]=Nt,ee.renderbufferCount++;function se(He,ie){var cn=0,Ee=0,Ge=Sc;if(typeof He=="object"&&He){var Ce=He;if("shape"in Ce){var je=Ce.shape;Q(Array.isArray(je)&&je.length>=2,"invalid renderbuffer shape"),cn=je[0]|0,Ee=je[1]|0}else"radius"in Ce&&(cn=Ee=Ce.radius|0),"width"in Ce&&(cn=Ce.width|0),"height"in Ce&&(Ee=Ce.height|0);"format"in Ce&&(Q.parameter(Ce.format,Kt,"invalid renderbuffer format"),Ge=Kt[Ce.format])}else typeof He=="number"?(cn=He|0,typeof ie=="number"?Ee=ie|0:Ee=cn):He?Q.raise("invalid arguments to renderbuffer constructor"):cn=Ee=1;if(Q(cn>0&&Ee>0&&cn<=lt.maxRenderbufferSize&&Ee<=lt.maxRenderbufferSize,"invalid renderbuffer size"),!(cn===Nt.width&&Ee===Nt.height&&Ge===Nt.format))return se.width=Nt.width=cn,se.height=Nt.height=Ee,Nt.format=Ge,N.bindRenderbuffer(As,Nt.renderbuffer),N.renderbufferStorage(As,Ge,cn,Ee),Q(N.getError()===0,"invalid render buffer format"),ge.profile&&(Nt.stats.size=Kh(Nt.format,Nt.width,Nt.height)),se.format=oe[Nt.format],se}function ke(He,ie){var cn=He|0,Ee=ie|0||cn;return cn===Nt.width&&Ee===Nt.height||(Q(cn>0&&Ee>0&&cn<=lt.maxRenderbufferSize&&Ee<=lt.maxRenderbufferSize,"invalid renderbuffer size"),se.width=Nt.width=cn,se.height=Nt.height=Ee,N.bindRenderbuffer(As,Nt.renderbuffer),N.renderbufferStorage(As,Nt.format,cn,Ee),Q(N.getError()===0,"invalid render buffer format"),ge.profile&&(Nt.stats.size=Kh(Nt.format,Nt.width,Nt.height))),se}return se(ve,Ze),se.resize=ke,se._reglType="renderbuffer",se._renderbuffer=Nt,ge.profile&&(se.stats=Nt.stats),se.destroy=function(){Nt.decRef()},se}ge.profile&&(ee.getTotalRenderbufferSize=function(){var ve=0;return Object.keys(Ie).forEach(function(Ze){ve+=Ie[Ze].stats.size}),ve});function $e(){Xi(Ie).forEach(function(ve){ve.renderbuffer=N.createRenderbuffer(),N.bindRenderbuffer(As,ve.renderbuffer),N.renderbufferStorage(As,ve.format,ve.width,ve.height)}),N.bindRenderbuffer(As,null)}return{create:Ve,clear:function(){Xi(Ie).forEach(Pe)},restore:$e}},ha=36160,z=36161,P=3553,I=34069,G=36064,F=36096,st=36128,at=33306,Mt=36053,It=36054,Wt=36055,re=36057,he=36061,Se=36193,Mn=5121,hn=5126,ze=6407,Ue=6408,Te=6402,fn=[ze,Ue],We=[];We[Ue]=4,We[ze]=3;var sn=[];sn[Mn]=1,sn[hn]=4,sn[Se]=2;var Fn=32854,an=32855,In=36194,sr=33189,dr=36168,Bn=34041,Ar=35907,rr=34836,yr=34842,Rr=34843,Pi=[Fn,an,In,Ar,yr,Rr,rr],Mo={};Mo[Mt]="complete",Mo[It]="incomplete attachment",Mo[re]="incomplete dimensions",Mo[Wt]="incomplete, missing attachment",Mo[he]="unsupported";function Ma(N,X,lt,ee,ge,Kt){var oe={cur:null,next:null,dirty:!1,setFBO:null},_e=["rgba"],Ie=["rgba4","rgb565","rgb5 a1"];X.ext_srgb&&Ie.push("srgba"),X.ext_color_buffer_half_float&&Ie.push("rgba16f","rgb16f"),X.webgl_color_buffer_float&&Ie.push("rgba32f");var Be=["uint8"];X.oes_texture_half_float&&Be.push("half float","float16"),X.oes_texture_float&&Be.push("float","float32");function Pe(Xe,Fe,we){this.target=Xe,this.texture=Fe,this.renderbuffer=we;var Zn=0,cr=0;Fe?(Zn=Fe.width,cr=Fe.height):we&&(Zn=we.width,cr=we.height),this.width=Zn,this.height=cr}function Ve(Xe){Xe&&(Xe.texture&&Xe.texture._texture.decRef(),Xe.renderbuffer&&Xe.renderbuffer._renderbuffer.decRef())}function $e(Xe,Fe,we){if(Xe)if(Xe.texture){var Zn=Xe.texture._texture,cr=Math.max(1,Zn.width),dn=Math.max(1,Zn.height);Q(cr===Fe&&dn===we,"inconsistent width/height for supplied texture"),Zn.refCount+=1}else{var Qn=Xe.renderbuffer._renderbuffer;Q(Qn.width===Fe&&Qn.height===we,"inconsistent width/height for renderbuffer"),Qn.refCount+=1}}function ve(Xe,Fe){Fe&&(Fe.texture?N.framebufferTexture2D(ha,Xe,Fe.target,Fe.texture._texture.texture,0):N.framebufferRenderbuffer(ha,Xe,z,Fe.renderbuffer._renderbuffer.renderbuffer))}function Ze(Xe){var Fe=P,we=null,Zn=null,cr=Xe;typeof Xe=="object"&&(cr=Xe.data,"target"in Xe&&(Fe=Xe.target|0)),Q.type(cr,"function","invalid attachment data");var dn=cr._reglType;return dn==="texture2d"?(we=cr,Q(Fe===P)):dn==="textureCube"?(we=cr,Q(Fe>=I&&Fe<I+6,"invalid cube map target")):dn==="renderbuffer"?(Zn=cr,Fe=z):Q.raise("invalid regl object for attachment"),new Pe(Fe,we,Zn)}function Nt(Xe,Fe,we,Zn,cr){if(we){var dn=ee.create2D({width:Xe,height:Fe,format:Zn,type:cr});return dn._texture.refCount=0,new Pe(P,dn,null)}else{var Qn=ge.create({width:Xe,height:Fe,format:Zn});return Qn._renderbuffer.refCount=0,new Pe(z,null,Qn)}}function se(Xe){return Xe&&(Xe.texture||Xe.renderbuffer)}function ke(Xe,Fe,we){Xe&&(Xe.texture?Xe.texture.resize(Fe,we):Xe.renderbuffer&&Xe.renderbuffer.resize(Fe,we),Xe.width=Fe,Xe.height=we)}var He=0,ie={};function cn(){this.id=He++,ie[this.id]=this,this.framebuffer=N.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ee(Xe){Xe.colorAttachments.forEach(Ve),Ve(Xe.depthAttachment),Ve(Xe.stencilAttachment),Ve(Xe.depthStencilAttachment)}function Ge(Xe){var Fe=Xe.framebuffer;Q(Fe,"must not double destroy framebuffer"),N.deleteFramebuffer(Fe),Xe.framebuffer=null,Kt.framebufferCount--,delete ie[Xe.id]}function Ce(Xe){var Fe;N.bindFramebuffer(ha,Xe.framebuffer);var we=Xe.colorAttachments;for(Fe=0;Fe<we.length;++Fe)ve(G+Fe,we[Fe]);for(Fe=we.length;Fe<lt.maxColorAttachments;++Fe)N.framebufferTexture2D(ha,G+Fe,P,null,0);N.framebufferTexture2D(ha,at,P,null,0),N.framebufferTexture2D(ha,F,P,null,0),N.framebufferTexture2D(ha,st,P,null,0),ve(F,Xe.depthAttachment),ve(st,Xe.stencilAttachment),ve(at,Xe.depthStencilAttachment);var Zn=N.checkFramebufferStatus(ha);!N.isContextLost()&&Zn!==Mt&&Q.raise("framebuffer configuration not supported, status = "+Mo[Zn]),N.bindFramebuffer(ha,oe.next?oe.next.framebuffer:null),oe.cur=oe.next,N.getError()}function je(Xe,Fe){var we=new cn;Kt.framebufferCount++;function Zn(dn,Qn){var Vn;Q(oe.next!==we,"can not update framebuffer which is currently in use");var gr=0,Lr=0,zi=!0,mi=!0,ar=null,ji=!0,Wr="rgba",li="uint8",di=1,tr=null,ei=null,oo=null,Si=!1;if(typeof dn=="number")gr=dn|0,Lr=Qn|0||gr;else if(!dn)gr=Lr=1;else{Q.type(dn,"object","invalid arguments for framebuffer");var ur=dn;if("shape"in ur){var Ui=ur.shape;Q(Array.isArray(Ui)&&Ui.length>=2,"invalid shape for framebuffer"),gr=Ui[0],Lr=Ui[1]}else"radius"in ur&&(gr=Lr=ur.radius),"width"in ur&&(gr=ur.width),"height"in ur&&(Lr=ur.height);("color"in ur||"colors"in ur)&&(ar=ur.color||ur.colors,Array.isArray(ar)&&Q(ar.length===1||X.webgl_draw_buffers,"multiple render targets not supported")),ar||("colorCount"in ur&&(di=ur.colorCount|0,Q(di>0,"invalid color buffer count")),"colorTexture"in ur&&(ji=!!ur.colorTexture,Wr="rgba4"),"colorType"in ur&&(li=ur.colorType,ji?(Q(X.oes_texture_float||!(li==="float"||li==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Q(X.oes_texture_half_float||!(li==="half float"||li==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):li==="half float"||li==="float16"?(Q(X.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Wr="rgba16f"):(li==="float"||li==="float32")&&(Q(X.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Wr="rgba32f"),Q.oneOf(li,Be,"invalid color type")),"colorFormat"in ur&&(Wr=ur.colorFormat,_e.indexOf(Wr)>=0?ji=!0:Ie.indexOf(Wr)>=0?ji=!1:ji?Q.oneOf(ur.colorFormat,_e,"invalid color format for texture"):Q.oneOf(ur.colorFormat,Ie,"invalid color format for renderbuffer"))),("depthTexture"in ur||"depthStencilTexture"in ur)&&(Si=!!(ur.depthTexture||ur.depthStencilTexture),Q(!Si||X.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in ur&&(typeof ur.depth=="boolean"?zi=ur.depth:(tr=ur.depth,mi=!1)),"stencil"in ur&&(typeof ur.stencil=="boolean"?mi=ur.stencil:(ei=ur.stencil,zi=!1)),"depthStencil"in ur&&(typeof ur.depthStencil=="boolean"?zi=mi=ur.depthStencil:(oo=ur.depthStencil,zi=!1,mi=!1))}var xr=null,gn=null,Er=null,Pr=null;if(Array.isArray(ar))xr=ar.map(Ze);else if(ar)xr=[Ze(ar)];else for(xr=new Array(di),Vn=0;Vn<di;++Vn)xr[Vn]=Nt(gr,Lr,ji,Wr,li);Q(X.webgl_draw_buffers||xr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Q(xr.length<=lt.maxColorAttachments,"too many color attachments, not supported"),gr=gr||xr[0].width,Lr=Lr||xr[0].height,tr?gn=Ze(tr):zi&&!mi&&(gn=Nt(gr,Lr,Si,"depth","uint32")),ei?Er=Ze(ei):mi&&!zi&&(Er=Nt(gr,Lr,!1,"stencil","uint8")),oo?Pr=Ze(oo):!tr&&!ei&&mi&&zi&&(Pr=Nt(gr,Lr,Si,"depth stencil","depth stencil")),Q(!!tr+!!ei+!!oo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var gi=null;for(Vn=0;Vn<xr.length;++Vn)if($e(xr[Vn],gr,Lr),Q(!xr[Vn]||xr[Vn].texture&&fn.indexOf(xr[Vn].texture._texture.format)>=0||xr[Vn].renderbuffer&&Pi.indexOf(xr[Vn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Vn+" is invalid"),xr[Vn]&&xr[Vn].texture){var wo=We[xr[Vn].texture._texture.format]*sn[xr[Vn].texture._texture.type];gi===null?gi=wo:Q(gi===wo,"all color attachments much have the same number of bits per pixel.")}return $e(gn,gr,Lr),Q(!gn||gn.texture&&gn.texture._texture.format===Te||gn.renderbuffer&&gn.renderbuffer._renderbuffer.format===sr,"invalid depth attachment for framebuffer object"),$e(Er,gr,Lr),Q(!Er||Er.renderbuffer&&Er.renderbuffer._renderbuffer.format===dr,"invalid stencil attachment for framebuffer object"),$e(Pr,gr,Lr),Q(!Pr||Pr.texture&&Pr.texture._texture.format===Bn||Pr.renderbuffer&&Pr.renderbuffer._renderbuffer.format===Bn,"invalid depth-stencil attachment for framebuffer object"),Ee(we),we.width=gr,we.height=Lr,we.colorAttachments=xr,we.depthAttachment=gn,we.stencilAttachment=Er,we.depthStencilAttachment=Pr,Zn.color=xr.map(se),Zn.depth=se(gn),Zn.stencil=se(Er),Zn.depthStencil=se(Pr),Zn.width=we.width,Zn.height=we.height,Ce(we),Zn}function cr(dn,Qn){Q(oe.next!==we,"can not resize a framebuffer which is currently in use");var Vn=Math.max(dn|0,1),gr=Math.max(Qn|0||Vn,1);if(Vn===we.width&&gr===we.height)return Zn;for(var Lr=we.colorAttachments,zi=0;zi<Lr.length;++zi)ke(Lr[zi],Vn,gr);return ke(we.depthAttachment,Vn,gr),ke(we.stencilAttachment,Vn,gr),ke(we.depthStencilAttachment,Vn,gr),we.width=Zn.width=Vn,we.height=Zn.height=gr,Ce(we),Zn}return Zn(Xe,Fe),O(Zn,{resize:cr,_reglType:"framebuffer",_framebuffer:we,destroy:function(){Ge(we),Ee(we)},use:function(dn){oe.setFBO({framebuffer:Zn},dn)}})}function Ln(Xe){var Fe=Array(6);function we(cr){var dn;Q(Fe.indexOf(oe.next)<0,"can not update framebuffer which is currently in use");var Qn={color:null},Vn=0,gr=null,Lr="rgba",zi="uint8",mi=1;if(typeof cr=="number")Vn=cr|0;else if(!cr)Vn=1;else{Q.type(cr,"object","invalid arguments for framebuffer");var ar=cr;if("shape"in ar){var ji=ar.shape;Q(Array.isArray(ji)&&ji.length>=2,"invalid shape for framebuffer"),Q(ji[0]===ji[1],"cube framebuffer must be square"),Vn=ji[0]}else"radius"in ar&&(Vn=ar.radius|0),"width"in ar?(Vn=ar.width|0,"height"in ar&&Q(ar.height===Vn,"must be square")):"height"in ar&&(Vn=ar.height|0);("color"in ar||"colors"in ar)&&(gr=ar.color||ar.colors,Array.isArray(gr)&&Q(gr.length===1||X.webgl_draw_buffers,"multiple render targets not supported")),gr||("colorCount"in ar&&(mi=ar.colorCount|0,Q(mi>0,"invalid color buffer count")),"colorType"in ar&&(Q.oneOf(ar.colorType,Be,"invalid color type"),zi=ar.colorType),"colorFormat"in ar&&(Lr=ar.colorFormat,Q.oneOf(ar.colorFormat,_e,"invalid color format for texture"))),"depth"in ar&&(Qn.depth=ar.depth),"stencil"in ar&&(Qn.stencil=ar.stencil),"depthStencil"in ar&&(Qn.depthStencil=ar.depthStencil)}var Wr;if(gr)if(Array.isArray(gr))for(Wr=[],dn=0;dn<gr.length;++dn)Wr[dn]=gr[dn];else Wr=[gr];else{Wr=Array(mi);var li={radius:Vn,format:Lr,type:zi};for(dn=0;dn<mi;++dn)Wr[dn]=ee.createCube(li)}for(Qn.color=Array(Wr.length),dn=0;dn<Wr.length;++dn){var di=Wr[dn];Q(typeof di=="function"&&di._reglType==="textureCube","invalid cube map"),Vn=Vn||di.width,Q(di.width===Vn&&di.height===Vn,"invalid cube map shape"),Qn.color[dn]={target:I,data:Wr[dn]}}for(dn=0;dn<6;++dn){for(var tr=0;tr<Wr.length;++tr)Qn.color[tr].target=I+dn;dn>0&&(Qn.depth=Fe[0].depth,Qn.stencil=Fe[0].stencil,Qn.depthStencil=Fe[0].depthStencil),Fe[dn]?Fe[dn](Qn):Fe[dn]=je(Qn)}return O(we,{width:Vn,height:Vn,color:Wr})}function Zn(cr){var dn,Qn=cr|0;if(Q(Qn>0&&Qn<=lt.maxCubeMapSize,"invalid radius for cube fbo"),Qn===we.width)return we;var Vn=we.color;for(dn=0;dn<Vn.length;++dn)Vn[dn].resize(Qn);for(dn=0;dn<6;++dn)Fe[dn].resize(Qn);return we.width=we.height=Qn,we}return we(Xe),O(we,{faces:Fe,resize:Zn,_reglType:"framebufferCube",destroy:function(){Fe.forEach(function(cr){cr.destroy()})}})}function Wn(){oe.cur=null,oe.next=null,oe.dirty=!0,Xi(ie).forEach(function(Xe){Xe.framebuffer=N.createFramebuffer(),Ce(Xe)})}return O(oe,{getFramebuffer:function(Xe){if(typeof Xe=="function"&&Xe._reglType==="framebuffer"){var Fe=Xe._framebuffer;if(Fe instanceof cn)return Fe}return null},create:je,createCube:Ln,clear:function(){Xi(ie).forEach(Ge)},restore:Wn})}var Bl=5126,Ff=34962;function Gl(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Bl,this.offset=0,this.stride=0,this.divisor=0}function zl(N,X,lt,ee,ge){for(var Kt=lt.maxAttributes,oe=new Array(Kt),_e=0;_e<Kt;++_e)oe[_e]=new Gl;var Ie=0,Be={},Pe={Record:Gl,scope:{},state:oe,currentVAO:null,targetVAO:null,restore:$e()?ie:function(){},createVAO:cn,getVAO:Ze,destroyBuffer:Ve,setVAO:$e()?Nt:se,clear:$e()?ke:function(){}};function Ve(Ee){for(var Ge=0;Ge<oe.length;++Ge){var Ce=oe[Ge];Ce.buffer===Ee&&(N.disableVertexAttribArray(Ge),Ce.buffer=null)}}function $e(){return X.oes_vertex_array_object}function ve(){return X.angle_instanced_arrays}function Ze(Ee){return typeof Ee=="function"&&Ee._vao?Ee._vao:null}function Nt(Ee){if(Ee!==Pe.currentVAO){var Ge=$e();Ee?Ge.bindVertexArrayOES(Ee.vao):Ge.bindVertexArrayOES(null),Pe.currentVAO=Ee}}function se(Ee){if(Ee!==Pe.currentVAO){if(Ee)Ee.bindAttrs();else for(var Ge=ve(),Ce=0;Ce<oe.length;++Ce){var je=oe[Ce];je.buffer?(N.enableVertexAttribArray(Ce),N.vertexAttribPointer(Ce,je.size,je.type,je.normalized,je.stride,je.offfset),Ge&&je.divisor&&Ge.vertexAttribDivisorANGLE(Ce,je.divisor)):(N.disableVertexAttribArray(Ce),N.vertexAttrib4f(Ce,je.x,je.y,je.z,je.w))}Pe.currentVAO=Ee}}function ke(){Xi(Be).forEach(function(Ee){Ee.destroy()})}function He(){this.id=++Ie,this.attributes=[];var Ee=$e();Ee?this.vao=Ee.createVertexArrayOES():this.vao=null,Be[this.id]=this,this.buffers=[]}He.prototype.bindAttrs=function(){for(var Ee=ve(),Ge=this.attributes,Ce=0;Ce<Ge.length;++Ce){var je=Ge[Ce];je.buffer?(N.enableVertexAttribArray(Ce),N.bindBuffer(Ff,je.buffer.buffer),N.vertexAttribPointer(Ce,je.size,je.type,je.normalized,je.stride,je.offset),Ee&&je.divisor&&Ee.vertexAttribDivisorANGLE(Ce,je.divisor)):(N.disableVertexAttribArray(Ce),N.vertexAttrib4f(Ce,je.x,je.y,je.z,je.w))}for(var Ln=Ge.length;Ln<Kt;++Ln)N.disableVertexAttribArray(Ln)},He.prototype.refresh=function(){var Ee=$e();Ee&&(Ee.bindVertexArrayOES(this.vao),this.bindAttrs(),Pe.currentVAO=this)},He.prototype.destroy=function(){if(this.vao){var Ee=$e();this===Pe.currentVAO&&(Pe.currentVAO=null,Ee.bindVertexArrayOES(null)),Ee.deleteVertexArrayOES(this.vao),this.vao=null}Be[this.id]&&(delete Be[this.id],ee.vaoCount-=1)};function ie(){var Ee=$e();Ee&&Xi(Be).forEach(function(Ge){Ge.refresh()})}function cn(Ee){var Ge=new He;ee.vaoCount+=1;function Ce(je){Q(Array.isArray(je),"arguments to vertex array constructor must be an array"),Q(je.length<Kt,"too many attributes"),Q(je.length>0,"must specify at least one attribute");var Ln={},Wn=Ge.attributes;Wn.length=je.length;for(var Xe=0;Xe<je.length;++Xe){var Fe=je[Xe],we=Wn[Xe]=new Gl,Zn=Fe.data||Fe;if(Array.isArray(Zn)||yt(Zn)||Wi(Zn)){var cr;Ge.buffers[Xe]&&(cr=Ge.buffers[Xe],yt(Zn)&&cr._buffer.byteLength>=Zn.byteLength?cr.subdata(Zn):(cr.destroy(),Ge.buffers[Xe]=null)),Ge.buffers[Xe]||(cr=Ge.buffers[Xe]=ge.create(Fe,Ff,!1,!0)),we.buffer=ge.getBuffer(cr),we.size=we.buffer.dimension|0,we.normalized=!1,we.type=we.buffer.dtype,we.offset=0,we.stride=0,we.divisor=0,we.state=1,Ln[Xe]=1}else ge.getBuffer(Fe)?(we.buffer=ge.getBuffer(Fe),we.size=we.buffer.dimension|0,we.normalized=!1,we.type=we.buffer.dtype,we.offset=0,we.stride=0,we.divisor=0,we.state=1):ge.getBuffer(Fe.buffer)?(we.buffer=ge.getBuffer(Fe.buffer),we.size=(+Fe.size||we.buffer.dimension)|0,we.normalized=!!Fe.normalized||!1,"type"in Fe?(Q.parameter(Fe.type,lo,"invalid buffer type"),we.type=lo[Fe.type]):we.type=we.buffer.dtype,we.offset=(Fe.offset||0)|0,we.stride=(Fe.stride||0)|0,we.divisor=(Fe.divisor||0)|0,we.state=1,Q(we.size>=1&&we.size<=4,"size must be between 1 and 4"),Q(we.offset>=0,"invalid offset"),Q(we.stride>=0&&we.stride<=255,"stride must be between 0 and 255"),Q(we.divisor>=0,"divisor must be positive"),Q(!we.divisor||!!X.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Fe?(Q(Xe>0,"first attribute must not be a constant"),we.x=+Fe.x||0,we.y=+Fe.y||0,we.z=+Fe.z||0,we.w=+Fe.w||0,we.state=2):Q(!1,"invalid attribute spec for location "+Xe)}for(var dn=0;dn<Ge.buffers.length;++dn)!Ln[dn]&&Ge.buffers[dn]&&(Ge.buffers[dn].destroy(),Ge.buffers[dn]=null);return Ge.refresh(),Ce}return Ce.destroy=function(){for(var je=0;je<Ge.buffers.length;++je)Ge.buffers[je]&&Ge.buffers[je].destroy();Ge.buffers.length=0,Ge.destroy()},Ce._vao=Ge,Ce._reglType="vao",Ce(Ee)}return Pe}var Ms=35632,ic=35633,jl=35718,Uu=35721;function fp(N,X,lt,ee){var ge={},Kt={};function oe(Nt,se,ke,He){this.name=Nt,this.id=se,this.location=ke,this.info=He}function _e(Nt,se){for(var ke=0;ke<Nt.length;++ke)if(Nt[ke].id===se.id){Nt[ke].location=se.location;return}Nt.push(se)}function Ie(Nt,se,ke){var He=Nt===Ms?ge:Kt,ie=He[se];if(!ie){var cn=X.str(se);ie=N.createShader(Nt),N.shaderSource(ie,cn),N.compileShader(ie),Q.shaderError(N,ie,cn,Nt,ke),He[se]=ie}return ie}var Be={},Pe=[],Ve=0;function $e(Nt,se){this.id=Ve++,this.fragId=Nt,this.vertId=se,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ee.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ve(Nt,se,ke){var He,ie,cn=Ie(Ms,Nt.fragId),Ee=Ie(ic,Nt.vertId),Ge=Nt.program=N.createProgram();if(N.attachShader(Ge,cn),N.attachShader(Ge,Ee),ke)for(He=0;He<ke.length;++He){var Ce=ke[He];N.bindAttribLocation(Ge,Ce[0],Ce[1])}N.linkProgram(Ge),Q.linkError(N,Ge,X.str(Nt.fragId),X.str(Nt.vertId),se);var je=N.getProgramParameter(Ge,jl);ee.profile&&(Nt.stats.uniformsCount=je);var Ln=Nt.uniforms;for(He=0;He<je;++He)if(ie=N.getActiveUniform(Ge,He),ie)if(ie.size>1)for(var Wn=0;Wn<ie.size;++Wn){var Xe=ie.name.replace("[0]","["+Wn+"]");_e(Ln,new oe(Xe,X.id(Xe),N.getUniformLocation(Ge,Xe),ie))}else _e(Ln,new oe(ie.name,X.id(ie.name),N.getUniformLocation(Ge,ie.name),ie));var Fe=N.getProgramParameter(Ge,Uu);ee.profile&&(Nt.stats.attributesCount=Fe);var we=Nt.attributes;for(He=0;He<Fe;++He)ie=N.getActiveAttrib(Ge,He),ie&&_e(we,new oe(ie.name,X.id(ie.name),N.getAttribLocation(Ge,ie.name),ie))}ee.profile&&(lt.getMaxUniformsCount=function(){var Nt=0;return Pe.forEach(function(se){se.stats.uniformsCount>Nt&&(Nt=se.stats.uniformsCount)}),Nt},lt.getMaxAttributesCount=function(){var Nt=0;return Pe.forEach(function(se){se.stats.attributesCount>Nt&&(Nt=se.stats.attributesCount)}),Nt});function Ze(){ge={},Kt={};for(var Nt=0;Nt<Pe.length;++Nt)ve(Pe[Nt],null,Pe[Nt].attributes.map(function(se){return[se.location,se.name]}))}return{clear:function(){var Nt=N.deleteShader.bind(N);Xi(ge).forEach(Nt),ge={},Xi(Kt).forEach(Nt),Kt={},Pe.forEach(function(se){N.deleteProgram(se.program)}),Pe.length=0,Be={},lt.shaderCount=0},program:function(Nt,se,ke,He){Q.command(Nt>=0,"missing vertex shader",ke),Q.command(se>=0,"missing fragment shader",ke);var ie=Be[se];ie||(ie=Be[se]={});var cn=ie[Nt];if(cn&&(cn.refCount++,!He))return cn;var Ee=new $e(se,Nt);return lt.shaderCount++,ve(Ee,ke,He),cn||(ie[Nt]=Ee),Pe.push(Ee),O(Ee,{destroy:function(){if(Ee.refCount--,Ee.refCount<=0){N.deleteProgram(Ee.program);var Ge=Pe.indexOf(Ee);Pe.splice(Ge,1),lt.shaderCount--}ie[Ee.vertId].refCount<=0&&(N.deleteShader(Kt[Ee.vertId]),delete Kt[Ee.vertId],delete Be[Ee.fragId][Ee.vertId]),Object.keys(Be[Ee.fragId]).length||(N.deleteShader(ge[Ee.fragId]),delete ge[Ee.fragId],delete Be[Ee.fragId])}})},restore:Ze,shader:Ie,frag:-1,vert:-1}}var Jd=6408,Ul=5121,hp=3333,Vl=5126;function dp(N,X,lt,ee,ge,Kt,oe){function _e(Pe){var Ve;X.next===null?(Q(ge.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ve=Ul):(Q(X.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ve=X.next.colorAttachments[0].texture._texture.type,Kt.oes_texture_float?(Q(Ve===Ul||Ve===Vl,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ve===Vl&&Q(oe.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Q(Ve===Ul,"Reading from a framebuffer is only allowed for the type 'uint8'"));var $e=0,ve=0,Ze=ee.framebufferWidth,Nt=ee.framebufferHeight,se=null;yt(Pe)?se=Pe:Pe&&(Q.type(Pe,"object","invalid arguments to regl.read()"),$e=Pe.x|0,ve=Pe.y|0,Q($e>=0&&$e<ee.framebufferWidth,"invalid x offset for regl.read"),Q(ve>=0&&ve<ee.framebufferHeight,"invalid y offset for regl.read"),Ze=(Pe.width||ee.framebufferWidth-$e)|0,Nt=(Pe.height||ee.framebufferHeight-ve)|0,se=Pe.data||null),se&&(Ve===Ul?Q(se instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ve===Vl&&Q(se instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Q(Ze>0&&Ze+$e<=ee.framebufferWidth,"invalid width for read pixels"),Q(Nt>0&&Nt+ve<=ee.framebufferHeight,"invalid height for read pixels"),lt();var ke=Ze*Nt*4;return se||(Ve===Ul?se=new Uint8Array(ke):Ve===Vl&&(se=se||new Float32Array(ke))),Q.isTypedArray(se,"data buffer for regl.read() must be a typedarray"),Q(se.byteLength>=ke,"data buffer for regl.read() too small"),N.pixelStorei(hp,4),N.readPixels($e,ve,Ze,Nt,Jd,Ve,se),se}function Ie(Pe){var Ve;return X.setFBO({framebuffer:Pe.framebuffer},function(){Ve=_e(Pe)}),Ve}function Be(Pe){return!Pe||!("framebuffer"in Pe)?_e(Pe):Ie(Pe)}return Be}function Vu(N){return Array.prototype.slice.call(N)}function Zu(N){return Vu(N).join("")}function gp(){var N=0,X=[],lt=[];function ee(Ve){for(var $e=0;$e<lt.length;++$e)if(lt[$e]===Ve)return X[$e];var ve="g"+N++;return X.push(ve),lt.push(Ve),ve}function ge(){var Ve=[];function $e(){Ve.push.apply(Ve,Vu(arguments))}var ve=[];function Ze(){var Nt="v"+N++;return ve.push(Nt),arguments.length>0&&(Ve.push(Nt,"="),Ve.push.apply(Ve,Vu(arguments)),Ve.push(";")),Nt}return O($e,{def:Ze,toString:function(){return Zu([ve.length>0?"var "+ve.join(",")+";":"",Zu(Ve)])}})}function Kt(){var Ve=ge(),$e=ge(),ve=Ve.toString,Ze=$e.toString;function Nt(se,ke){$e(se,ke,"=",Ve.def(se,ke),";")}return O(function(){Ve.apply(Ve,Vu(arguments))},{def:Ve.def,entry:Ve,exit:$e,save:Nt,set:function(se,ke,He){Nt(se,ke),Ve(se,ke,"=",He,";")},toString:function(){return ve()+Ze()}})}function oe(){var Ve=Zu(arguments),$e=Kt(),ve=Kt(),Ze=$e.toString,Nt=ve.toString;return O($e,{then:function(){return $e.apply($e,Vu(arguments)),this},else:function(){return ve.apply(ve,Vu(arguments)),this},toString:function(){var se=Nt();return se&&(se="else{"+se+"}"),Zu(["if(",Ve,"){",Ze(),"}",se])}})}var _e=ge(),Ie={};function Be(Ve,$e){var ve=[];function Ze(){var ie="a"+ve.length;return ve.push(ie),ie}$e=$e||0;for(var Nt=0;Nt<$e;++Nt)Ze();var se=Kt(),ke=se.toString,He=Ie[Ve]=O(se,{arg:Ze,toString:function(){return Zu(["function(",ve.join(),"){",ke(),"}"])}});return He}function Pe(){var Ve=['"use strict";',_e,"return {"];Object.keys(Ie).forEach(function(Ze){Ve.push('"',Ze,'":',Ie[Ze].toString(),",")}),Ve.push("}");var $e=Zu(Ve).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ve=Function.apply(null,X.concat($e));return ve.apply(null,lt)}return{global:_e,link:ee,block:ge,proc:Be,scope:Kt,cond:oe,compile:Pe}}var ou="xyzw".split(""),su=5121,_c=1,qh=2,Jh=0,Qh=1,Bf=2,Gf=3,zf=4,td=5,Qd=6,ed="dither",nd="blend.enable",tg="blend.color",jf="blend.equation",Uf="blend.func",rd="depth.enable",pp="depth.func",eg="depth.range",ng="depth.mask",id="colorMask",rg="cull.enable",vp="cull.face",od="frontFace",ig="lineWidth",og="polygonOffset.enable",sd="polygonOffset.offset",ad="sample.alpha",sg="sample.enable",cd="sample.coverage",ag="stencil.enable",cg="stencil.mask",$u="stencil.func",Vf="stencil.opFront",Zl="stencil.opBack",ug="scissor.enable",Zf="scissor.box",da="viewport",Hu="profile",au="framebuffer",Wu="vert",Xu="frag",Cc="elements",cu="primitive",Tc="count",$f="offset",$l="instances",Yu="vao",ud="Width",ld="Height",Ku=au+ud,oc=au+ld,Hf=da+ud,qu=da+ld,lg="drawingBuffer",Hl=lg+ud,fg=lg+ld,Wl=[Uf,jf,$u,Vf,Zl,cd,da,Zf,sd],Ia=34962,fd=34963,uu=35632,mp=35633,Wo=3553,Ju=34067,Xl=2884,Wf=3042,Xf=3024,hd=2960,yp=2929,Qu=3089,Yf=32823,bp=32926,xp=32928,dd=5126,lu=35664,Kf=35665,sc=35666,tl=5124,qf=35667,Jf=35668,Qf=35669,gd=35670,Yl=35671,th=35672,Is=35673,Xo=35674,el=35675,Kl=35676,nl=35678,ac=35680,hg=4,rl=1028,fu=1029,pd=2304,Pa=2305,Ps=32775,dg=32776,ql=519,ia=7680,Jl=0,gg=1,vd=32774,Ac=513,md=36160,Ep=36064,ga={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},yd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],il={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Oc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},pg={frag:uu,vert:mp},bd={cw:pd,ccw:Pa};function Na(N){return Array.isArray(N)||yt(N)||Wi(N)}function ol(N){return N.sort(function(X,lt){return X===da?-1:lt===da?1:X<lt?-1:1})}function Eo(N,X,lt,ee){this.thisDep=N,this.contextDep=X,this.propDep=lt,this.append=ee}function Mc(N){return N&&!(N.thisDep||N.contextDep||N.propDep)}function Yi(N){return new Eo(!1,!1,!1,N)}function ls(N,X){var lt=N.type;if(lt===Jh){var ee=N.data.length;return new Eo(!0,ee>=1,ee>=2,X)}else if(lt===zf){var ge=N.data;return new Eo(ge.thisDep,ge.contextDep,ge.propDep,X)}else{if(lt===td)return new Eo(!1,!1,!1,X);if(lt===Qd){for(var Kt=!1,oe=!1,_e=!1,Ie=0;Ie<N.data.length;++Ie){var Be=N.data[Ie];if(Be.type===Qh)_e=!0;else if(Be.type===Bf)oe=!0;else if(Be.type===Gf)Kt=!0;else if(Be.type===Jh){Kt=!0;var Pe=Be.data;Pe>=1&&(oe=!0),Pe>=2&&(_e=!0)}else Be.type===zf&&(Kt=Kt||Be.data.thisDep,oe=oe||Be.data.contextDep,_e=_e||Be.data.propDep)}return new Eo(Kt,oe,_e,X)}else return new Eo(lt===Gf,lt===Bf,lt===Qh,X)}}var vg=new Eo(!1,!1,!1,function(){});function Ql(N,X,lt,ee,ge,Kt,oe,_e,Ie,Be,Pe,Ve,$e,ve,Ze){var Nt=Be.Record,se={add:32774,subtract:32778,"reverse subtract":32779};lt.ext_blend_minmax&&(se.min=Ps,se.max=dg);var ke=lt.angle_instanced_arrays,He=lt.webgl_draw_buffers,ie={dirty:!0,profile:Ze.profile},cn={},Ee=[],Ge={},Ce={};function je(et){return et.replace(".","_")}function Ln(et,$,pt){var Rt=je(et);Ee.push(et),cn[Rt]=ie[Rt]=!!pt,Ge[Rt]=$}function Wn(et,$,pt){var Rt=je(et);Ee.push(et),Array.isArray(pt)?(ie[Rt]=pt.slice(),cn[Rt]=pt.slice()):ie[Rt]=cn[Rt]=pt,Ce[Rt]=$}Ln(ed,Xf),Ln(nd,Wf),Wn(tg,"blendColor",[0,0,0,0]),Wn(jf,"blendEquationSeparate",[vd,vd]),Wn(Uf,"blendFuncSeparate",[gg,Jl,gg,Jl]),Ln(rd,yp,!0),Wn(pp,"depthFunc",Ac),Wn(eg,"depthRange",[0,1]),Wn(ng,"depthMask",!0),Wn(id,id,[!0,!0,!0,!0]),Ln(rg,Xl),Wn(vp,"cullFace",fu),Wn(od,od,Pa),Wn(ig,ig,1),Ln(og,Yf),Wn(sd,"polygonOffset",[0,0]),Ln(ad,bp),Ln(sg,xp),Wn(cd,"sampleCoverage",[1,!1]),Ln(ag,hd),Wn(cg,"stencilMask",-1),Wn($u,"stencilFunc",[ql,0,-1]),Wn(Vf,"stencilOpSeparate",[rl,ia,ia,ia]),Wn(Zl,"stencilOpSeparate",[fu,ia,ia,ia]),Ln(ug,Qu),Wn(Zf,"scissor",[0,0,N.drawingBufferWidth,N.drawingBufferHeight]),Wn(da,da,[0,0,N.drawingBufferWidth,N.drawingBufferHeight]);var Xe={gl:N,context:$e,strings:X,next:cn,current:ie,draw:Ve,elements:Kt,buffer:ge,shader:Pe,attributes:Be.state,vao:Be,uniforms:Ie,framebuffer:_e,extensions:lt,timer:ve,isBufferArgs:Na},Fe={primTypes:br,compareFuncs:il,blendFuncs:ga,blendEquations:se,stencilOps:Oc,glTypes:lo,orientationType:bd};Q.optional(function(){Xe.isArrayLike=Hr}),He&&(Fe.backBuffer=[fu],Fe.drawBuffer=ci(ee.maxDrawbuffers,function(et){return et===0?[0]:ci(et,function($){return Ep+$})}));var we=0;function Zn(){var et=gp(),$=et.link,pt=et.global;et.id=we++,et.batchId="0";var Rt=$(Xe),Ft=et.shared={props:"a0"};Object.keys(Xe).forEach(function(dt){Ft[dt]=pt.def(Rt,".",dt)}),Q.optional(function(){et.CHECK=$(Q),et.commandStr=Q.guessCommand(),et.command=$(et.commandStr),et.assert=function(dt,q,Lt){dt("if(!(",q,"))",this.CHECK,".commandRaise(",$(Lt),",",this.command,");")},Fe.invalidBlendCombinations=yd});var _t=et.next={},mt=et.current={};Object.keys(Ce).forEach(function(dt){Array.isArray(ie[dt])&&(_t[dt]=pt.def(Ft.next,".",dt),mt[dt]=pt.def(Ft.current,".",dt))});var Ot=et.constants={};Object.keys(Fe).forEach(function(dt){Ot[dt]=pt.def(JSON.stringify(Fe[dt]))}),et.invoke=function(dt,q){switch(q.type){case Jh:var Lt=["this",Ft.context,Ft.props,et.batchId];return dt.def($(q.data),".call(",Lt.slice(0,Math.max(q.data.length+1,4)),")");case Qh:return dt.def(Ft.props,q.data);case Bf:return dt.def(Ft.context,q.data);case Gf:return dt.def("this",q.data);case zf:return q.data.append(et,dt),q.data.ref;case td:return q.data.toString();case Qd:return q.data.map(function(Vt){return et.invoke(dt,Vt)})}},et.attribCache={};var tt={};return et.scopeAttrib=function(dt){var q=X.id(dt);if(q in tt)return tt[q];var Lt=Be.scope[q];Lt||(Lt=Be.scope[q]=new Nt);var Vt=tt[q]=$(Lt);return Vt},et}function cr(et){var $=et.static,pt=et.dynamic,Rt;if(Hu in $){var Ft=!!$[Hu];Rt=Yi(function(mt,Ot){return Ft}),Rt.enable=Ft}else if(Hu in pt){var _t=pt[Hu];Rt=ls(_t,function(mt,Ot){return mt.invoke(Ot,_t)})}return Rt}function dn(et,$){var pt=et.static,Rt=et.dynamic;if(au in pt){var Ft=pt[au];return Ft?(Ft=_e.getFramebuffer(Ft),Q.command(Ft,"invalid framebuffer object"),Yi(function(mt,Ot){var tt=mt.link(Ft),dt=mt.shared;Ot.set(dt.framebuffer,".next",tt);var q=dt.context;return Ot.set(q,"."+Ku,tt+".width"),Ot.set(q,"."+oc,tt+".height"),tt})):Yi(function(mt,Ot){var tt=mt.shared;Ot.set(tt.framebuffer,".next","null");var dt=tt.context;return Ot.set(dt,"."+Ku,dt+"."+Hl),Ot.set(dt,"."+oc,dt+"."+fg),"null"})}else if(au in Rt){var _t=Rt[au];return ls(_t,function(mt,Ot){var tt=mt.invoke(Ot,_t),dt=mt.shared,q=dt.framebuffer,Lt=Ot.def(q,".getFramebuffer(",tt,")");Q.optional(function(){mt.assert(Ot,"!"+tt+"||"+Lt,"invalid framebuffer object")}),Ot.set(q,".next",Lt);var Vt=dt.context;return Ot.set(Vt,"."+Ku,Lt+"?"+Lt+".width:"+Vt+"."+Hl),Ot.set(Vt,"."+oc,Lt+"?"+Lt+".height:"+Vt+"."+fg),Lt})}else return null}function Qn(et,$,pt){var Rt=et.static,Ft=et.dynamic;function _t(tt){if(tt in Rt){var dt=Rt[tt];Q.commandType(dt,"object","invalid "+tt,pt.commandStr);var q=!0,Lt=dt.x|0,Vt=dt.y|0,de,ye;return"width"in dt?(de=dt.width|0,Q.command(de>=0,"invalid "+tt,pt.commandStr)):q=!1,"height"in dt?(ye=dt.height|0,Q.command(ye>=0,"invalid "+tt,pt.commandStr)):q=!1,new Eo(!q&&$&&$.thisDep,!q&&$&&$.contextDep,!q&&$&&$.propDep,function(Ye,ir){var ln=Ye.shared.context,Gn=de;"width"in dt||(Gn=ir.def(ln,".",Ku,"-",Lt));var Xn=ye;return"height"in dt||(Xn=ir.def(ln,".",oc,"-",Vt)),[Lt,Vt,Gn,Xn]})}else if(tt in Ft){var ae=Ft[tt],Re=ls(ae,function(Ye,ir){var ln=Ye.invoke(ir,ae);Q.optional(function(){Ye.assert(ir,ln+"&&typeof "+ln+'==="object"',"invalid "+tt)});var Gn=Ye.shared.context,Xn=ir.def(ln,".x|0"),kr=ir.def(ln,".y|0"),Vi=ir.def('"width" in ',ln,"?",ln,".width|0:","(",Gn,".",Ku,"-",Xn,")"),fs=ir.def('"height" in ',ln,"?",ln,".height|0:","(",Gn,".",oc,"-",kr,")");return Q.optional(function(){Ye.assert(ir,Vi+">=0&&"+fs+">=0","invalid "+tt)}),[Xn,kr,Vi,fs]});return $&&(Re.thisDep=Re.thisDep||$.thisDep,Re.contextDep=Re.contextDep||$.contextDep,Re.propDep=Re.propDep||$.propDep),Re}else return $?new Eo($.thisDep,$.contextDep,$.propDep,function(Ye,ir){var ln=Ye.shared.context;return[0,0,ir.def(ln,".",Ku),ir.def(ln,".",oc)]}):null}var mt=_t(da);if(mt){var Ot=mt;mt=new Eo(mt.thisDep,mt.contextDep,mt.propDep,function(tt,dt){var q=Ot.append(tt,dt),Lt=tt.shared.context;return dt.set(Lt,"."+Hf,q[2]),dt.set(Lt,"."+qu,q[3]),q})}return{viewport:mt,scissor_box:_t(Zf)}}function Vn(et,$){var pt=et.static,Rt=typeof pt[Xu]=="string"&&typeof pt[Wu]=="string";if(Rt){if(Object.keys($.dynamic).length>0)return null;var Ft=$.static,_t=Object.keys(Ft);if(_t.length>0&&typeof Ft[_t[0]]=="number"){for(var mt=[],Ot=0;Ot<_t.length;++Ot)Q(typeof Ft[_t[Ot]]=="number","must specify all vertex attribute locations when using vaos"),mt.push([Ft[_t[Ot]]|0,_t[Ot]]);return mt}}return null}function gr(et,$,pt){var Rt=et.static,Ft=et.dynamic;function _t(q){if(q in Rt){var Lt=X.id(Rt[q]);Q.optional(function(){Pe.shader(pg[q],Lt,Q.guessCommand())});var Vt=Yi(function(){return Lt});return Vt.id=Lt,Vt}else if(q in Ft){var de=Ft[q];return ls(de,function(ye,ae){var Re=ye.invoke(ae,de),Ye=ae.def(ye.shared.strings,".id(",Re,")");return Q.optional(function(){ae(ye.shared.shader,".shader(",pg[q],",",Ye,",",ye.command,");")}),Ye})}return null}var mt=_t(Xu),Ot=_t(Wu),tt=null,dt;return Mc(mt)&&Mc(Ot)?(tt=Pe.program(Ot.id,mt.id,null,pt),dt=Yi(function(q,Lt){return q.link(tt)})):dt=new Eo(mt&&mt.thisDep||Ot&&Ot.thisDep,mt&&mt.contextDep||Ot&&Ot.contextDep,mt&&mt.propDep||Ot&&Ot.propDep,function(q,Lt){var Vt=q.shared.shader,de;mt?de=mt.append(q,Lt):de=Lt.def(Vt,".",Xu);var ye;Ot?ye=Ot.append(q,Lt):ye=Lt.def(Vt,".",Wu);var ae=Vt+".program("+ye+","+de;return Q.optional(function(){ae+=","+q.command}),Lt.def(ae+")")}),{frag:mt,vert:Ot,progVar:dt,program:tt}}function Lr(et,$){var pt=et.static,Rt=et.dynamic;function Ft(){if(Cc in pt){var q=pt[Cc];Na(q)?q=Kt.getElements(Kt.create(q,!0)):q&&(q=Kt.getElements(q),Q.command(q,"invalid elements",$.commandStr));var Lt=Yi(function(de,ye){if(q){var ae=de.link(q);return de.ELEMENTS=ae,ae}return de.ELEMENTS=null,null});return Lt.value=q,Lt}else if(Cc in Rt){var Vt=Rt[Cc];return ls(Vt,function(de,ye){var ae=de.shared,Re=ae.isBufferArgs,Ye=ae.elements,ir=de.invoke(ye,Vt),ln=ye.def("null"),Gn=ye.def(Re,"(",ir,")"),Xn=de.cond(Gn).then(ln,"=",Ye,".createStream(",ir,");").else(ln,"=",Ye,".getElements(",ir,");");return Q.optional(function(){de.assert(Xn.else,"!"+ir+"||"+ln,"invalid elements")}),ye.entry(Xn),ye.exit(de.cond(Gn).then(Ye,".destroyStream(",ln,");")),de.ELEMENTS=ln,ln})}return null}var _t=Ft();function mt(){if(cu in pt){var q=pt[cu];return Q.commandParameter(q,br,"invalid primitve",$.commandStr),Yi(function(Vt,de){return br[q]})}else if(cu in Rt){var Lt=Rt[cu];return ls(Lt,function(Vt,de){var ye=Vt.constants.primTypes,ae=Vt.invoke(de,Lt);return Q.optional(function(){Vt.assert(de,ae+" in "+ye,"invalid primitive, must be one of "+Object.keys(br))}),de.def(ye,"[",ae,"]")})}else if(_t)return Mc(_t)?_t.value?Yi(function(Vt,de){return de.def(Vt.ELEMENTS,".primType")}):Yi(function(){return hg}):new Eo(_t.thisDep,_t.contextDep,_t.propDep,function(Vt,de){var ye=Vt.ELEMENTS;return de.def(ye,"?",ye,".primType:",hg)});return null}function Ot(q,Lt){if(q in pt){var Vt=pt[q]|0;return Q.command(!Lt||Vt>=0,"invalid "+q,$.commandStr),Yi(function(ye,ae){return Lt&&(ye.OFFSET=Vt),Vt})}else if(q in Rt){var de=Rt[q];return ls(de,function(ye,ae){var Re=ye.invoke(ae,de);return Lt&&(ye.OFFSET=Re,Q.optional(function(){ye.assert(ae,Re+">=0","invalid "+q)})),Re})}else if(Lt&&_t)return Yi(function(ye,ae){return ye.OFFSET="0",0});return null}var tt=Ot($f,!0);function dt(){if(Tc in pt){var q=pt[Tc]|0;return Q.command(typeof q=="number"&&q>=0,"invalid vertex count",$.commandStr),Yi(function(){return q})}else if(Tc in Rt){var Lt=Rt[Tc];return ls(Lt,function(ye,ae){var Re=ye.invoke(ae,Lt);return Q.optional(function(){ye.assert(ae,"typeof "+Re+'==="number"&&'+Re+">=0&&"+Re+"===("+Re+"|0)","invalid vertex count")}),Re})}else if(_t)if(Mc(_t)){if(_t)return tt?new Eo(tt.thisDep,tt.contextDep,tt.propDep,function(ye,ae){var Re=ae.def(ye.ELEMENTS,".vertCount-",ye.OFFSET);return Q.optional(function(){ye.assert(ae,Re+">=0","invalid vertex offset/element buffer too small")}),Re}):Yi(function(ye,ae){return ae.def(ye.ELEMENTS,".vertCount")});var Vt=Yi(function(){return-1});return Q.optional(function(){Vt.MISSING=!0}),Vt}else{var de=new Eo(_t.thisDep||tt.thisDep,_t.contextDep||tt.contextDep,_t.propDep||tt.propDep,function(ye,ae){var Re=ye.ELEMENTS;return ye.OFFSET?ae.def(Re,"?",Re,".vertCount-",ye.OFFSET,":-1"):ae.def(Re,"?",Re,".vertCount:-1")});return Q.optional(function(){de.DYNAMIC=!0}),de}return null}return{elements:_t,primitive:mt(),count:dt(),instances:Ot($l,!1),offset:tt}}function zi(et,$){var pt=et.static,Rt=et.dynamic,Ft={};return Ee.forEach(function(_t){var mt=je(_t);function Ot(tt,dt){if(_t in pt){var q=tt(pt[_t]);Ft[mt]=Yi(function(){return q})}else if(_t in Rt){var Lt=Rt[_t];Ft[mt]=ls(Lt,function(Vt,de){return dt(Vt,de,Vt.invoke(de,Lt))})}}switch(_t){case rg:case nd:case ed:case ag:case rd:case ug:case og:case ad:case sg:case ng:return Ot(function(tt){return Q.commandType(tt,"boolean",_t,$.commandStr),tt},function(tt,dt,q){return Q.optional(function(){tt.assert(dt,"typeof "+q+'==="boolean"',"invalid flag "+_t,tt.commandStr)}),q});case pp:return Ot(function(tt){return Q.commandParameter(tt,il,"invalid "+_t,$.commandStr),il[tt]},function(tt,dt,q){var Lt=tt.constants.compareFuncs;return Q.optional(function(){tt.assert(dt,q+" in "+Lt,"invalid "+_t+", must be one of "+Object.keys(il))}),dt.def(Lt,"[",q,"]")});case eg:return Ot(function(tt){return Q.command(Hr(tt)&&tt.length===2&&typeof tt[0]=="number"&&typeof tt[1]=="number"&&tt[0]<=tt[1],"depth range is 2d array",$.commandStr),tt},function(tt,dt,q){Q.optional(function(){tt.assert(dt,tt.shared.isArrayLike+"("+q+")&&"+q+".length===2&&typeof "+q+'[0]==="number"&&typeof '+q+'[1]==="number"&&'+q+"[0]<="+q+"[1]","depth range must be a 2d array")});var Lt=dt.def("+",q,"[0]"),Vt=dt.def("+",q,"[1]");return[Lt,Vt]});case Uf:return Ot(function(tt){Q.commandType(tt,"object","blend.func",$.commandStr);var dt="srcRGB"in tt?tt.srcRGB:tt.src,q="srcAlpha"in tt?tt.srcAlpha:tt.src,Lt="dstRGB"in tt?tt.dstRGB:tt.dst,Vt="dstAlpha"in tt?tt.dstAlpha:tt.dst;return Q.commandParameter(dt,ga,mt+".srcRGB",$.commandStr),Q.commandParameter(q,ga,mt+".srcAlpha",$.commandStr),Q.commandParameter(Lt,ga,mt+".dstRGB",$.commandStr),Q.commandParameter(Vt,ga,mt+".dstAlpha",$.commandStr),Q.command(yd.indexOf(dt+", "+Lt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+dt+", "+Lt+")",$.commandStr),[ga[dt],ga[Lt],ga[q],ga[Vt]]},function(tt,dt,q){var Lt=tt.constants.blendFuncs;Q.optional(function(){tt.assert(dt,q+"&&typeof "+q+'==="object"',"invalid blend func, must be an object")});function Vt(ln,Gn){var Xn=dt.def('"',ln,Gn,'" in ',q,"?",q,".",ln,Gn,":",q,".",ln);return Q.optional(function(){tt.assert(dt,Xn+" in "+Lt,"invalid "+_t+"."+ln+Gn+", must be one of "+Object.keys(ga))}),Xn}var de=Vt("src","RGB"),ye=Vt("dst","RGB");Q.optional(function(){var ln=tt.constants.invalidBlendCombinations;tt.assert(dt,ln+".indexOf("+de+'+", "+'+ye+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ae=dt.def(Lt,"[",de,"]"),Re=dt.def(Lt,"[",Vt("src","Alpha"),"]"),Ye=dt.def(Lt,"[",ye,"]"),ir=dt.def(Lt,"[",Vt("dst","Alpha"),"]");return[ae,Ye,Re,ir]});case jf:return Ot(function(tt){if(typeof tt=="string")return Q.commandParameter(tt,se,"invalid "+_t,$.commandStr),[se[tt],se[tt]];if(typeof tt=="object")return Q.commandParameter(tt.rgb,se,_t+".rgb",$.commandStr),Q.commandParameter(tt.alpha,se,_t+".alpha",$.commandStr),[se[tt.rgb],se[tt.alpha]];Q.commandRaise("invalid blend.equation",$.commandStr)},function(tt,dt,q){var Lt=tt.constants.blendEquations,Vt=dt.def(),de=dt.def(),ye=tt.cond("typeof ",q,'==="string"');return Q.optional(function(){function ae(Re,Ye,ir){tt.assert(Re,ir+" in "+Lt,"invalid "+Ye+", must be one of "+Object.keys(se))}ae(ye.then,_t,q),tt.assert(ye.else,q+"&&typeof "+q+'==="object"',"invalid "+_t),ae(ye.else,_t+".rgb",q+".rgb"),ae(ye.else,_t+".alpha",q+".alpha")}),ye.then(Vt,"=",de,"=",Lt,"[",q,"];"),ye.else(Vt,"=",Lt,"[",q,".rgb];",de,"=",Lt,"[",q,".alpha];"),dt(ye),[Vt,de]});case tg:return Ot(function(tt){return Q.command(Hr(tt)&&tt.length===4,"blend.color must be a 4d array",$.commandStr),ci(4,function(dt){return+tt[dt]})},function(tt,dt,q){return Q.optional(function(){tt.assert(dt,tt.shared.isArrayLike+"("+q+")&&"+q+".length===4","blend.color must be a 4d array")}),ci(4,function(Lt){return dt.def("+",q,"[",Lt,"]")})});case cg:return Ot(function(tt){return Q.commandType(tt,"number",mt,$.commandStr),tt|0},function(tt,dt,q){return Q.optional(function(){tt.assert(dt,"typeof "+q+'==="number"',"invalid stencil.mask")}),dt.def(q,"|0")});case $u:return Ot(function(tt){Q.commandType(tt,"object",mt,$.commandStr);var dt=tt.cmp||"keep",q=tt.ref||0,Lt="mask"in tt?tt.mask:-1;return Q.commandParameter(dt,il,_t+".cmp",$.commandStr),Q.commandType(q,"number",_t+".ref",$.commandStr),Q.commandType(Lt,"number",_t+".mask",$.commandStr),[il[dt],q,Lt]},function(tt,dt,q){var Lt=tt.constants.compareFuncs;Q.optional(function(){function ae(){tt.assert(dt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ae(q+"&&typeof ",q,'==="object"'),ae('!("cmp" in ',q,")||(",q,".cmp in ",Lt,")")});var Vt=dt.def('"cmp" in ',q,"?",Lt,"[",q,".cmp]",":",ia),de=dt.def(q,".ref|0"),ye=dt.def('"mask" in ',q,"?",q,".mask|0:-1");return[Vt,de,ye]});case Vf:case Zl:return Ot(function(tt){Q.commandType(tt,"object",mt,$.commandStr);var dt=tt.fail||"keep",q=tt.zfail||"keep",Lt=tt.zpass||"keep";return Q.commandParameter(dt,Oc,_t+".fail",$.commandStr),Q.commandParameter(q,Oc,_t+".zfail",$.commandStr),Q.commandParameter(Lt,Oc,_t+".zpass",$.commandStr),[_t===Zl?fu:rl,Oc[dt],Oc[q],Oc[Lt]]},function(tt,dt,q){var Lt=tt.constants.stencilOps;Q.optional(function(){tt.assert(dt,q+"&&typeof "+q+'==="object"',"invalid "+_t)});function Vt(de){return Q.optional(function(){tt.assert(dt,'!("'+de+'" in '+q+")||("+q+"."+de+" in "+Lt+")","invalid "+_t+"."+de+", must be one of "+Object.keys(Oc))}),dt.def('"',de,'" in ',q,"?",Lt,"[",q,".",de,"]:",ia)}return[_t===Zl?fu:rl,Vt("fail"),Vt("zfail"),Vt("zpass")]});case sd:return Ot(function(tt){Q.commandType(tt,"object",mt,$.commandStr);var dt=tt.factor|0,q=tt.units|0;return Q.commandType(dt,"number",mt+".factor",$.commandStr),Q.commandType(q,"number",mt+".units",$.commandStr),[dt,q]},function(tt,dt,q){Q.optional(function(){tt.assert(dt,q+"&&typeof "+q+'==="object"',"invalid "+_t)});var Lt=dt.def(q,".factor|0"),Vt=dt.def(q,".units|0");return[Lt,Vt]});case vp:return Ot(function(tt){var dt=0;return tt==="front"?dt=rl:tt==="back"&&(dt=fu),Q.command(!!dt,mt,$.commandStr),dt},function(tt,dt,q){return Q.optional(function(){tt.assert(dt,q+'==="front"||'+q+'==="back"',"invalid cull.face")}),dt.def(q,'==="front"?',rl,":",fu)});case ig:return Ot(function(tt){return Q.command(typeof tt=="number"&&tt>=ee.lineWidthDims[0]&&tt<=ee.lineWidthDims[1],"invalid line width, must be a positive number between "+ee.lineWidthDims[0]+" and "+ee.lineWidthDims[1],$.commandStr),tt},function(tt,dt,q){return Q.optional(function(){tt.assert(dt,"typeof "+q+'==="number"&&'+q+">="+ee.lineWidthDims[0]+"&&"+q+"<="+ee.lineWidthDims[1],"invalid line width")}),q});case od:return Ot(function(tt){return Q.commandParameter(tt,bd,mt,$.commandStr),bd[tt]},function(tt,dt,q){return Q.optional(function(){tt.assert(dt,q+'==="cw"||'+q+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),dt.def(q+'==="cw"?'+pd+":"+Pa)});case id:return Ot(function(tt){return Q.command(Hr(tt)&&tt.length===4,"color.mask must be length 4 array",$.commandStr),tt.map(function(dt){return!!dt})},function(tt,dt,q){return Q.optional(function(){tt.assert(dt,tt.shared.isArrayLike+"("+q+")&&"+q+".length===4","invalid color.mask")}),ci(4,function(Lt){return"!!"+q+"["+Lt+"]"})});case cd:return Ot(function(tt){Q.command(typeof tt=="object"&&tt,mt,$.commandStr);var dt="value"in tt?tt.value:1,q=!!tt.invert;return Q.command(typeof dt=="number"&&dt>=0&&dt<=1,"sample.coverage.value must be a number between 0 and 1",$.commandStr),[dt,q]},function(tt,dt,q){Q.optional(function(){tt.assert(dt,q+"&&typeof "+q+'==="object"',"invalid sample.coverage")});var Lt=dt.def('"value" in ',q,"?+",q,".value:1"),Vt=dt.def("!!",q,".invert");return[Lt,Vt]})}}),Ft}function mi(et,$){var pt=et.static,Rt=et.dynamic,Ft={};return Object.keys(pt).forEach(function(_t){var mt=pt[_t],Ot;if(typeof mt=="number"||typeof mt=="boolean")Ot=Yi(function(){return mt});else if(typeof mt=="function"){var tt=mt._reglType;tt==="texture2d"||tt==="textureCube"?Ot=Yi(function(dt){return dt.link(mt)}):tt==="framebuffer"||tt==="framebufferCube"?(Q.command(mt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+_t+'"',$.commandStr),Ot=Yi(function(dt){return dt.link(mt.color[0])})):Q.commandRaise('invalid data for uniform "'+_t+'"',$.commandStr)}else Hr(mt)?Ot=Yi(function(dt){var q=dt.global.def("[",ci(mt.length,function(Lt){return Q.command(typeof mt[Lt]=="number"||typeof mt[Lt]=="boolean","invalid uniform "+_t,dt.commandStr),mt[Lt]}),"]");return q}):Q.commandRaise('invalid or missing data for uniform "'+_t+'"',$.commandStr);Ot.value=mt,Ft[_t]=Ot}),Object.keys(Rt).forEach(function(_t){var mt=Rt[_t];Ft[_t]=ls(mt,function(Ot,tt){return Ot.invoke(tt,mt)})}),Ft}function ar(et,$){var pt=et.static,Rt=et.dynamic,Ft={};return Object.keys(pt).forEach(function(_t){var mt=pt[_t],Ot=X.id(_t),tt=new Nt;if(Na(mt))tt.state=_c,tt.buffer=ge.getBuffer(ge.create(mt,Ia,!1,!0)),tt.type=0;else{var dt=ge.getBuffer(mt);if(dt)tt.state=_c,tt.buffer=dt,tt.type=0;else if(Q.command(typeof mt=="object"&&mt,"invalid data for attribute "+_t,$.commandStr),"constant"in mt){var q=mt.constant;tt.buffer="null",tt.state=qh,typeof q=="number"?tt.x=q:(Q.command(Hr(q)&&q.length>0&&q.length<=4,"invalid constant for attribute "+_t,$.commandStr),ou.forEach(function(Ye,ir){ir<q.length&&(tt[Ye]=q[ir])}))}else{Na(mt.buffer)?dt=ge.getBuffer(ge.create(mt.buffer,Ia,!1,!0)):dt=ge.getBuffer(mt.buffer),Q.command(!!dt,'missing buffer for attribute "'+_t+'"',$.commandStr);var Lt=mt.offset|0;Q.command(Lt>=0,'invalid offset for attribute "'+_t+'"',$.commandStr);var Vt=mt.stride|0;Q.command(Vt>=0&&Vt<256,'invalid stride for attribute "'+_t+'", must be integer betweeen [0, 255]',$.commandStr);var de=mt.size|0;Q.command(!("size"in mt)||de>0&&de<=4,'invalid size for attribute "'+_t+'", must be 1,2,3,4',$.commandStr);var ye=!!mt.normalized,ae=0;"type"in mt&&(Q.commandParameter(mt.type,lo,"invalid type for attribute "+_t,$.commandStr),ae=lo[mt.type]);var Re=mt.divisor|0;"divisor"in mt&&(Q.command(Re===0||ke,'cannot specify divisor for attribute "'+_t+'", instancing not supported',$.commandStr),Q.command(Re>=0,'invalid divisor for attribute "'+_t+'"',$.commandStr)),Q.optional(function(){var Ye=$.commandStr,ir=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(mt).forEach(function(ln){Q.command(ir.indexOf(ln)>=0,'unknown parameter "'+ln+'" for attribute pointer "'+_t+'" (valid parameters are '+ir+")",Ye)})}),tt.buffer=dt,tt.state=_c,tt.size=de,tt.normalized=ye,tt.type=ae||dt.dtype,tt.offset=Lt,tt.stride=Vt,tt.divisor=Re}}Ft[_t]=Yi(function(Ye,ir){var ln=Ye.attribCache;if(Ot in ln)return ln[Ot];var Gn={isStream:!1};return Object.keys(tt).forEach(function(Xn){Gn[Xn]=tt[Xn]}),tt.buffer&&(Gn.buffer=Ye.link(tt.buffer),Gn.type=Gn.type||Gn.buffer+".dtype"),ln[Ot]=Gn,Gn})}),Object.keys(Rt).forEach(function(_t){var mt=Rt[_t];function Ot(tt,dt){var q=tt.invoke(dt,mt),Lt=tt.shared,Vt=tt.constants,de=Lt.isBufferArgs,ye=Lt.buffer;Q.optional(function(){tt.assert(dt,q+"&&(typeof "+q+'==="object"||typeof '+q+'==="function")&&('+de+"("+q+")||"+ye+".getBuffer("+q+")||"+ye+".getBuffer("+q+".buffer)||"+de+"("+q+'.buffer)||("constant" in '+q+"&&(typeof "+q+'.constant==="number"||'+Lt.isArrayLike+"("+q+".constant))))",'invalid dynamic attribute "'+_t+'"')});var ae={isStream:dt.def(!1)},Re=new Nt;Re.state=_c,Object.keys(Re).forEach(function(Gn){ae[Gn]=dt.def(""+Re[Gn])});var Ye=ae.buffer,ir=ae.type;dt("if(",de,"(",q,")){",ae.isStream,"=true;",Ye,"=",ye,".createStream(",Ia,",",q,");",ir,"=",Ye,".dtype;","}else{",Ye,"=",ye,".getBuffer(",q,");","if(",Ye,"){",ir,"=",Ye,".dtype;",'}else if("constant" in ',q,"){",ae.state,"=",qh,";","if(typeof "+q+'.constant === "number"){',ae[ou[0]],"=",q,".constant;",ou.slice(1).map(function(Gn){return ae[Gn]}).join("="),"=0;","}else{",ou.map(function(Gn,Xn){return ae[Gn]+"="+q+".constant.length>"+Xn+"?"+q+".constant["+Xn+"]:0;"}).join(""),"}}else{","if(",de,"(",q,".buffer)){",Ye,"=",ye,".createStream(",Ia,",",q,".buffer);","}else{",Ye,"=",ye,".getBuffer(",q,".buffer);","}",ir,'="type" in ',q,"?",Vt.glTypes,"[",q,".type]:",Ye,".dtype;",ae.normalized,"=!!",q,".normalized;");function ln(Gn){dt(ae[Gn],"=",q,".",Gn,"|0;")}return ln("size"),ln("offset"),ln("stride"),ln("divisor"),dt("}}"),dt.exit("if(",ae.isStream,"){",ye,".destroyStream(",Ye,");","}"),ae}Ft[_t]=ls(mt,Ot)}),Ft}function ji(et,$){var pt=et.static,Rt=et.dynamic;if(Yu in pt){var Ft=pt[Yu];return Ft!==null&&Be.getVAO(Ft)===null&&(Ft=Be.createVAO(Ft)),Yi(function(mt){return mt.link(Be.getVAO(Ft))})}else if(Yu in Rt){var _t=Rt[Yu];return ls(_t,function(mt,Ot){var tt=mt.invoke(Ot,_t);return Ot.def(mt.shared.vao+".getVAO("+tt+")")})}return null}function Wr(et){var $=et.static,pt=et.dynamic,Rt={};return Object.keys($).forEach(function(Ft){var _t=$[Ft];Rt[Ft]=Yi(function(mt,Ot){return typeof _t=="number"||typeof _t=="boolean"?""+_t:mt.link(_t)})}),Object.keys(pt).forEach(function(Ft){var _t=pt[Ft];Rt[Ft]=ls(_t,function(mt,Ot){return mt.invoke(Ot,_t)})}),Rt}function li(et,$,pt,Rt,Ft){var _t=et.static,mt=et.dynamic;Q.optional(function(){var ln=[au,Wu,Xu,Cc,cu,$f,Tc,$l,Hu,Yu].concat(Ee);function Gn(Xn){Object.keys(Xn).forEach(function(kr){Q.command(ln.indexOf(kr)>=0,'unknown parameter "'+kr+'"',Ft.commandStr)})}Gn(_t),Gn(mt)});var Ot=Vn(et,$),tt=dn(et,Ft),dt=Qn(et,tt,Ft),q=Lr(et,Ft),Lt=zi(et,Ft),Vt=gr(et,Ft,Ot);function de(ln){var Gn=dt[ln];Gn&&(Lt[ln]=Gn)}de(da),de(je(Zf));var ye=Object.keys(Lt).length>0,ae={framebuffer:tt,draw:q,shader:Vt,state:Lt,dirty:ye,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ae.profile=cr(et,Ft),ae.uniforms=mi(pt,Ft),ae.drawVAO=ae.scopeVAO=ji(et,Ft),!ae.drawVAO&&Vt.program&&!Ot&&lt.angle_instanced_arrays){var Re=!0,Ye=Vt.program.attributes.map(function(ln){var Gn=$.static[ln];return Re=Re&&!!Gn,Gn});if(Re&&Ye.length>0){var ir=Be.getVAO(Be.createVAO(Ye));ae.drawVAO=new Eo(null,null,null,function(ln,Gn){return ln.link(ir)}),ae.useVAO=!0}}return Ot?ae.useVAO=!0:ae.attributes=ar($,Ft),ae.context=Wr(Rt,Ft),ae}function di(et,$,pt){var Rt=et.shared,Ft=Rt.context,_t=et.scope();Object.keys(pt).forEach(function(mt){$.save(Ft,"."+mt);var Ot=pt[mt],tt=Ot.append(et,$);Array.isArray(tt)?_t(Ft,".",mt,"=[",tt.join(),"];"):_t(Ft,".",mt,"=",tt,";")}),$(_t)}function tr(et,$,pt,Rt){var Ft=et.shared,_t=Ft.gl,mt=Ft.framebuffer,Ot;He&&(Ot=$.def(Ft.extensions,".webgl_draw_buffers"));var tt=et.constants,dt=tt.drawBuffer,q=tt.backBuffer,Lt;pt?Lt=pt.append(et,$):Lt=$.def(mt,".next"),Rt||$("if(",Lt,"!==",mt,".cur){"),$("if(",Lt,"){",_t,".bindFramebuffer(",md,",",Lt,".framebuffer);"),He&&$(Ot,".drawBuffersWEBGL(",dt,"[",Lt,".colorAttachments.length]);"),$("}else{",_t,".bindFramebuffer(",md,",null);"),He&&$(Ot,".drawBuffersWEBGL(",q,");"),$("}",mt,".cur=",Lt,";"),Rt||$("}")}function ei(et,$,pt){var Rt=et.shared,Ft=Rt.gl,_t=et.current,mt=et.next,Ot=Rt.current,tt=Rt.next,dt=et.cond(Ot,".dirty");Ee.forEach(function(q){var Lt=je(q);if(!(Lt in pt.state)){var Vt,de;if(Lt in mt){Vt=mt[Lt],de=_t[Lt];var ye=ci(ie[Lt].length,function(Re){return dt.def(Vt,"[",Re,"]")});dt(et.cond(ye.map(function(Re,Ye){return Re+"!=="+de+"["+Ye+"]"}).join("||")).then(Ft,".",Ce[Lt],"(",ye,");",ye.map(function(Re,Ye){return de+"["+Ye+"]="+Re}).join(";"),";"))}else{Vt=dt.def(tt,".",Lt);var ae=et.cond(Vt,"!==",Ot,".",Lt);dt(ae),Lt in Ge?ae(et.cond(Vt).then(Ft,".enable(",Ge[Lt],");").else(Ft,".disable(",Ge[Lt],");"),Ot,".",Lt,"=",Vt,";"):ae(Ft,".",Ce[Lt],"(",Vt,");",Ot,".",Lt,"=",Vt,";")}}}),Object.keys(pt.state).length===0&&dt(Ot,".dirty=false;"),$(dt)}function oo(et,$,pt,Rt){var Ft=et.shared,_t=et.current,mt=Ft.current,Ot=Ft.gl;ol(Object.keys(pt)).forEach(function(tt){var dt=pt[tt];if(!(Rt&&!Rt(dt))){var q=dt.append(et,$);if(Ge[tt]){var Lt=Ge[tt];Mc(dt)?q?$(Ot,".enable(",Lt,");"):$(Ot,".disable(",Lt,");"):$(et.cond(q).then(Ot,".enable(",Lt,");").else(Ot,".disable(",Lt,");")),$(mt,".",tt,"=",q,";")}else if(Hr(q)){var Vt=_t[tt];$(Ot,".",Ce[tt],"(",q,");",q.map(function(de,ye){return Vt+"["+ye+"]="+de}).join(";"),";")}else $(Ot,".",Ce[tt],"(",q,");",mt,".",tt,"=",q,";")}})}function Si(et,$){ke&&(et.instancing=$.def(et.shared.extensions,".angle_instanced_arrays"))}function ur(et,$,pt,Rt,Ft){var _t=et.shared,mt=et.stats,Ot=_t.current,tt=_t.timer,dt=pt.profile;function q(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Lt,Vt;function de(ln){Lt=$.def(),ln(Lt,"=",q(),";"),typeof Ft=="string"?ln(mt,".count+=",Ft,";"):ln(mt,".count++;"),ve&&(Rt?(Vt=$.def(),ln(Vt,"=",tt,".getNumPendingQueries();")):ln(tt,".beginQuery(",mt,");"))}function ye(ln){ln(mt,".cpuTime+=",q(),"-",Lt,";"),ve&&(Rt?ln(tt,".pushScopeStats(",Vt,",",tt,".getNumPendingQueries(),",mt,");"):ln(tt,".endQuery();"))}function ae(ln){var Gn=$.def(Ot,".profile");$(Ot,".profile=",ln,";"),$.exit(Ot,".profile=",Gn,";")}var Re;if(dt){if(Mc(dt)){dt.enable?(de($),ye($.exit),ae("true")):ae("false");return}Re=dt.append(et,$),ae(Re)}else Re=$.def(Ot,".profile");var Ye=et.block();de(Ye),$("if(",Re,"){",Ye,"}");var ir=et.block();ye(ir),$.exit("if(",Re,"){",ir,"}")}function Ui(et,$,pt,Rt,Ft){var _t=et.shared;function mt(tt){switch(tt){case lu:case qf:case Yl:return 2;case Kf:case Jf:case th:return 3;case sc:case Qf:case Is:return 4;default:return 1}}function Ot(tt,dt,q){var Lt=_t.gl,Vt=$.def(tt,".location"),de=$.def(_t.attributes,"[",Vt,"]"),ye=q.state,ae=q.buffer,Re=[q.x,q.y,q.z,q.w],Ye=["buffer","normalized","offset","stride"];function ir(){$("if(!",de,".buffer){",Lt,".enableVertexAttribArray(",Vt,");}");var Gn=q.type,Xn;if(q.size?Xn=$.def(q.size,"||",dt):Xn=dt,$("if(",de,".type!==",Gn,"||",de,".size!==",Xn,"||",Ye.map(function(Vi){return de+"."+Vi+"!=="+q[Vi]}).join("||"),"){",Lt,".bindBuffer(",Ia,",",ae,".buffer);",Lt,".vertexAttribPointer(",[Vt,Xn,Gn,q.normalized,q.stride,q.offset],");",de,".type=",Gn,";",de,".size=",Xn,";",Ye.map(function(Vi){return de+"."+Vi+"="+q[Vi]+";"}).join(""),"}"),ke){var kr=q.divisor;$("if(",de,".divisor!==",kr,"){",et.instancing,".vertexAttribDivisorANGLE(",[Vt,kr],");",de,".divisor=",kr,";}")}}function ln(){$("if(",de,".buffer){",Lt,".disableVertexAttribArray(",Vt,");",de,".buffer=null;","}if(",ou.map(function(Gn,Xn){return de+"."+Gn+"!=="+Re[Xn]}).join("||"),"){",Lt,".vertexAttrib4f(",Vt,",",Re,");",ou.map(function(Gn,Xn){return de+"."+Gn+"="+Re[Xn]+";"}).join(""),"}")}ye===_c?ir():ye===qh?ln():($("if(",ye,"===",_c,"){"),ir(),$("}else{"),ln(),$("}"))}Rt.forEach(function(tt){var dt=tt.name,q=pt.attributes[dt],Lt;if(q){if(!Ft(q))return;Lt=q.append(et,$)}else{if(!Ft(vg))return;var Vt=et.scopeAttrib(dt);Q.optional(function(){et.assert($,Vt+".state","missing attribute "+dt)}),Lt={},Object.keys(new Nt).forEach(function(de){Lt[de]=$.def(Vt,".",de)})}Ot(et.link(tt),mt(tt.info.type),Lt)})}function xr(et,$,pt,Rt,Ft){for(var _t=et.shared,mt=_t.gl,Ot,tt=0;tt<Rt.length;++tt){var dt=Rt[tt],q=dt.name,Lt=dt.info.type,Vt=pt.uniforms[q],de=et.link(dt),ye=de+".location",ae;if(Vt){if(!Ft(Vt))continue;if(Mc(Vt)){var Re=Vt.value;if(Q.command(Re!==null&&typeof Re!="undefined",'missing uniform "'+q+'"',et.commandStr),Lt===nl||Lt===ac){Q.command(typeof Re=="function"&&(Lt===nl&&(Re._reglType==="texture2d"||Re._reglType==="framebuffer")||Lt===ac&&(Re._reglType==="textureCube"||Re._reglType==="framebufferCube")),"invalid texture for uniform "+q,et.commandStr);var Ye=et.link(Re._texture||Re.color[0]._texture);$(mt,".uniform1i(",ye,",",Ye+".bind());"),$.exit(Ye,".unbind();")}else if(Lt===Xo||Lt===el||Lt===Kl){Q.optional(function(){Q.command(Hr(Re),"invalid matrix for uniform "+q,et.commandStr),Q.command(Lt===Xo&&Re.length===4||Lt===el&&Re.length===9||Lt===Kl&&Re.length===16,"invalid length for matrix uniform "+q,et.commandStr)});var ir=et.global.def("new Float32Array(["+Array.prototype.slice.call(Re)+"])"),ln=2;Lt===el?ln=3:Lt===Kl&&(ln=4),$(mt,".uniformMatrix",ln,"fv(",ye,",false,",ir,");")}else{switch(Lt){case dd:Q.commandType(Re,"number","uniform "+q,et.commandStr),Ot="1f";break;case lu:Q.command(Hr(Re)&&Re.length===2,"uniform "+q,et.commandStr),Ot="2f";break;case Kf:Q.command(Hr(Re)&&Re.length===3,"uniform "+q,et.commandStr),Ot="3f";break;case sc:Q.command(Hr(Re)&&Re.length===4,"uniform "+q,et.commandStr),Ot="4f";break;case gd:Q.commandType(Re,"boolean","uniform "+q,et.commandStr),Ot="1i";break;case tl:Q.commandType(Re,"number","uniform "+q,et.commandStr),Ot="1i";break;case Yl:Q.command(Hr(Re)&&Re.length===2,"uniform "+q,et.commandStr),Ot="2i";break;case qf:Q.command(Hr(Re)&&Re.length===2,"uniform "+q,et.commandStr),Ot="2i";break;case th:Q.command(Hr(Re)&&Re.length===3,"uniform "+q,et.commandStr),Ot="3i";break;case Jf:Q.command(Hr(Re)&&Re.length===3,"uniform "+q,et.commandStr),Ot="3i";break;case Is:Q.command(Hr(Re)&&Re.length===4,"uniform "+q,et.commandStr),Ot="4i";break;case Qf:Q.command(Hr(Re)&&Re.length===4,"uniform "+q,et.commandStr),Ot="4i";break}$(mt,".uniform",Ot,"(",ye,",",Hr(Re)?Array.prototype.slice.call(Re):Re,");")}continue}else ae=Vt.append(et,$)}else{if(!Ft(vg))continue;ae=$.def(_t.uniforms,"[",X.id(q),"]")}Lt===nl?(Q(!Array.isArray(ae),"must specify a scalar prop for textures"),$("if(",ae,"&&",ae,'._reglType==="framebuffer"){',ae,"=",ae,".color[0];","}")):Lt===ac&&(Q(!Array.isArray(ae),"must specify a scalar prop for cube maps"),$("if(",ae,"&&",ae,'._reglType==="framebufferCube"){',ae,"=",ae,".color[0];","}")),Q.optional(function(){function fs(Lo,ih){et.assert($,Lo,'bad data or missing for uniform "'+q+'".  '+ih)}function xg(Lo){Q(!Array.isArray(ae),"must not specify an array type for uniform"),fs("typeof "+ae+'==="'+Lo+'"',"invalid type, expected "+Lo)}function Gr(Lo,ih){Array.isArray(ae)?Q(ae.length===Lo,"must have length "+Lo):fs(_t.isArrayLike+"("+ae+")&&"+ae+".length==="+Lo,"invalid vector, should have length "+Lo,et.commandStr)}function rh(Lo){Q(!Array.isArray(ae),"must not specify a value type"),fs("typeof "+ae+'==="function"&&'+ae+'._reglType==="texture'+(Lo===Wo?"2d":"Cube")+'"',"invalid texture type",et.commandStr)}switch(Lt){case tl:xg("number");break;case qf:Gr(2,"number");break;case Jf:Gr(3,"number");break;case Qf:Gr(4,"number");break;case dd:xg("number");break;case lu:Gr(2,"number");break;case Kf:Gr(3,"number");break;case sc:Gr(4,"number");break;case gd:xg("boolean");break;case Yl:Gr(2,"boolean");break;case th:Gr(3,"boolean");break;case Is:Gr(4,"boolean");break;case Xo:Gr(4,"number");break;case el:Gr(9,"number");break;case Kl:Gr(16,"number");break;case nl:rh(Wo);break;case ac:rh(Ju);break}});var Gn=1;switch(Lt){case nl:case ac:var Xn=$.def(ae,"._texture");$(mt,".uniform1i(",ye,",",Xn,".bind());"),$.exit(Xn,".unbind();");continue;case tl:case gd:Ot="1i";break;case qf:case Yl:Ot="2i",Gn=2;break;case Jf:case th:Ot="3i",Gn=3;break;case Qf:case Is:Ot="4i",Gn=4;break;case dd:Ot="1f";break;case lu:Ot="2f",Gn=2;break;case Kf:Ot="3f",Gn=3;break;case sc:Ot="4f",Gn=4;break;case Xo:Ot="Matrix2fv";break;case el:Ot="Matrix3fv";break;case Kl:Ot="Matrix4fv";break}if($(mt,".uniform",Ot,"(",ye,","),Ot.charAt(0)==="M"){var kr=Math.pow(Lt-Xo+2,2),Vi=et.global.def("new Float32Array(",kr,")");Array.isArray(ae)?$("false,(",ci(kr,function(fs){return Vi+"["+fs+"]="+ae[fs]}),",",Vi,")"):$("false,(Array.isArray(",ae,")||",ae," instanceof Float32Array)?",ae,":(",ci(kr,function(fs){return Vi+"["+fs+"]="+ae+"["+fs+"]"}),",",Vi,")")}else Gn>1?$(ci(Gn,function(fs){return Array.isArray(ae)?ae[fs]:ae+"["+fs+"]"})):(Q(!Array.isArray(ae),"uniform value must not be an array"),$(ae));$(");")}}function gn(et,$,pt,Rt){var Ft=et.shared,_t=Ft.gl,mt=Ft.draw,Ot=Rt.draw;function tt(){var Xn=Ot.elements,kr,Vi=$;return Xn?((Xn.contextDep&&Rt.contextDynamic||Xn.propDep)&&(Vi=pt),kr=Xn.append(et,Vi)):kr=Vi.def(mt,".",Cc),kr&&Vi("if("+kr+")"+_t+".bindBuffer("+fd+","+kr+".buffer.buffer);"),kr}function dt(){var Xn=Ot.count,kr,Vi=$;return Xn?((Xn.contextDep&&Rt.contextDynamic||Xn.propDep)&&(Vi=pt),kr=Xn.append(et,Vi),Q.optional(function(){Xn.MISSING&&et.assert($,"false","missing vertex count"),Xn.DYNAMIC&&et.assert(Vi,kr+">=0","missing vertex count")})):(kr=Vi.def(mt,".",Tc),Q.optional(function(){et.assert(Vi,kr+">=0","missing vertex count")})),kr}var q=tt();function Lt(Xn){var kr=Ot[Xn];return kr?kr.contextDep&&Rt.contextDynamic||kr.propDep?kr.append(et,pt):kr.append(et,$):$.def(mt,".",Xn)}var Vt=Lt(cu),de=Lt($f),ye=dt();if(typeof ye=="number"){if(ye===0)return}else pt("if(",ye,"){"),pt.exit("}");var ae,Re;ke&&(ae=Lt($l),Re=et.instancing);var Ye=q+".type",ir=Ot.elements&&Mc(Ot.elements);function ln(){function Xn(){pt(Re,".drawElementsInstancedANGLE(",[Vt,ye,Ye,de+"<<(("+Ye+"-"+su+")>>1)",ae],");")}function kr(){pt(Re,".drawArraysInstancedANGLE(",[Vt,de,ye,ae],");")}q?ir?Xn():(pt("if(",q,"){"),Xn(),pt("}else{"),kr(),pt("}")):kr()}function Gn(){function Xn(){pt(_t+".drawElements("+[Vt,ye,Ye,de+"<<(("+Ye+"-"+su+")>>1)"]+");")}function kr(){pt(_t+".drawArrays("+[Vt,de,ye]+");")}q?ir?Xn():(pt("if(",q,"){"),Xn(),pt("}else{"),kr(),pt("}")):kr()}ke&&(typeof ae!="number"||ae>=0)?typeof ae=="string"?(pt("if(",ae,">0){"),ln(),pt("}else if(",ae,"<0){"),Gn(),pt("}")):ln():Gn()}function Er(et,$,pt,Rt,Ft){var _t=Zn(),mt=_t.proc("body",Ft);return Q.optional(function(){_t.commandStr=$.commandStr,_t.command=_t.link($.commandStr)}),ke&&(_t.instancing=mt.def(_t.shared.extensions,".angle_instanced_arrays")),et(_t,mt,pt,Rt),_t.compile().body}function Pr(et,$,pt,Rt){Si(et,$),pt.useVAO?pt.drawVAO?$(et.shared.vao,".setVAO(",pt.drawVAO.append(et,$),");"):$(et.shared.vao,".setVAO(",et.shared.vao,".targetVAO);"):($(et.shared.vao,".setVAO(null);"),Ui(et,$,pt,Rt.attributes,function(){return!0})),xr(et,$,pt,Rt.uniforms,function(){return!0}),gn(et,$,$,pt)}function gi(et,$){var pt=et.proc("draw",1);Si(et,pt),di(et,pt,$.context),tr(et,pt,$.framebuffer),ei(et,pt,$),oo(et,pt,$.state),ur(et,pt,$,!1,!0);var Rt=$.shader.progVar.append(et,pt);if(pt(et.shared.gl,".useProgram(",Rt,".program);"),$.shader.program)Pr(et,pt,$,$.shader.program);else{pt(et.shared.vao,".setVAO(null);");var Ft=et.global.def("{}"),_t=pt.def(Rt,".id"),mt=pt.def(Ft,"[",_t,"]");pt(et.cond(mt).then(mt,".call(this,a0);").else(mt,"=",Ft,"[",_t,"]=",et.link(function(Ot){return Er(Pr,et,$,Ot,1)}),"(",Rt,");",mt,".call(this,a0);"))}Object.keys($.state).length>0&&pt(et.shared.current,".dirty=true;")}function wo(et,$,pt,Rt){et.batchId="a1",Si(et,$);function Ft(){return!0}Ui(et,$,pt,Rt.attributes,Ft),xr(et,$,pt,Rt.uniforms,Ft),gn(et,$,$,pt)}function Vs(et,$,pt,Rt){Si(et,$);var Ft=pt.contextDep,_t=$.def(),mt="a0",Ot="a1",tt=$.def();et.shared.props=tt,et.batchId=_t;var dt=et.scope(),q=et.scope();$(dt.entry,"for(",_t,"=0;",_t,"<",Ot,";++",_t,"){",tt,"=",mt,"[",_t,"];",q,"}",dt.exit);function Lt(Ye){return Ye.contextDep&&Ft||Ye.propDep}function Vt(Ye){return!Lt(Ye)}if(pt.needsContext&&di(et,q,pt.context),pt.needsFramebuffer&&tr(et,q,pt.framebuffer),oo(et,q,pt.state,Lt),pt.profile&&Lt(pt.profile)&&ur(et,q,pt,!1,!0),Rt)pt.useVAO?pt.drawVAO?Lt(pt.drawVAO)?q(et.shared.vao,".setVAO(",pt.drawVAO.append(et,q),");"):dt(et.shared.vao,".setVAO(",pt.drawVAO.append(et,dt),");"):dt(et.shared.vao,".setVAO(",et.shared.vao,".targetVAO);"):(dt(et.shared.vao,".setVAO(null);"),Ui(et,dt,pt,Rt.attributes,Vt),Ui(et,q,pt,Rt.attributes,Lt)),xr(et,dt,pt,Rt.uniforms,Vt),xr(et,q,pt,Rt.uniforms,Lt),gn(et,dt,q,pt);else{var de=et.global.def("{}"),ye=pt.shader.progVar.append(et,q),ae=q.def(ye,".id"),Re=q.def(de,"[",ae,"]");q(et.shared.gl,".useProgram(",ye,".program);","if(!",Re,"){",Re,"=",de,"[",ae,"]=",et.link(function(Ye){return Er(wo,et,pt,Ye,2)}),"(",ye,");}",Re,".call(this,a0[",_t,"],",_t,");")}}function it(et,$){var pt=et.proc("batch",2);et.batchId="0",Si(et,pt);var Rt=!1,Ft=!0;Object.keys($.context).forEach(function(de){Rt=Rt||$.context[de].propDep}),Rt||(di(et,pt,$.context),Ft=!1);var _t=$.framebuffer,mt=!1;_t?(_t.propDep?Rt=mt=!0:_t.contextDep&&Rt&&(mt=!0),mt||tr(et,pt,_t)):tr(et,pt,null),$.state.viewport&&$.state.viewport.propDep&&(Rt=!0);function Ot(de){return de.contextDep&&Rt||de.propDep}ei(et,pt,$),oo(et,pt,$.state,function(de){return!Ot(de)}),(!$.profile||!Ot($.profile))&&ur(et,pt,$,!1,"a1"),$.contextDep=Rt,$.needsContext=Ft,$.needsFramebuffer=mt;var tt=$.shader.progVar;if(tt.contextDep&&Rt||tt.propDep)Vs(et,pt,$,null);else{var dt=tt.append(et,pt);if(pt(et.shared.gl,".useProgram(",dt,".program);"),$.shader.program)Vs(et,pt,$,$.shader.program);else{pt(et.shared.vao,".setVAO(null);");var q=et.global.def("{}"),Lt=pt.def(dt,".id"),Vt=pt.def(q,"[",Lt,"]");pt(et.cond(Vt).then(Vt,".call(this,a0,a1);").else(Vt,"=",q,"[",Lt,"]=",et.link(function(de){return Er(Vs,et,$,de,2)}),"(",dt,");",Vt,".call(this,a0,a1);"))}}Object.keys($.state).length>0&&pt(et.shared.current,".dirty=true;")}function te(et,$){var pt=et.proc("scope",3);et.batchId="a2";var Rt=et.shared,Ft=Rt.current;di(et,pt,$.context),$.framebuffer&&$.framebuffer.append(et,pt),ol(Object.keys($.state)).forEach(function(mt){var Ot=$.state[mt],tt=Ot.append(et,pt);Hr(tt)?tt.forEach(function(dt,q){pt.set(et.next[mt],"["+q+"]",dt)}):pt.set(Rt.next,"."+mt,tt)}),ur(et,pt,$,!0,!0),[Cc,$f,Tc,$l,cu].forEach(function(mt){var Ot=$.draw[mt];Ot&&pt.set(Rt.draw,"."+mt,""+Ot.append(et,pt))}),Object.keys($.uniforms).forEach(function(mt){var Ot=$.uniforms[mt].append(et,pt);Array.isArray(Ot)&&(Ot="["+Ot.join()+"]"),pt.set(Rt.uniforms,"["+X.id(mt)+"]",Ot)}),Object.keys($.attributes).forEach(function(mt){var Ot=$.attributes[mt].append(et,pt),tt=et.scopeAttrib(mt);Object.keys(new Nt).forEach(function(dt){pt.set(tt,"."+dt,Ot[dt])})}),$.scopeVAO&&pt.set(Rt.vao,".targetVAO",$.scopeVAO.append(et,pt));function _t(mt){var Ot=$.shader[mt];Ot&&pt.set(Rt.shader,"."+mt,Ot.append(et,pt))}_t(Wu),_t(Xu),Object.keys($.state).length>0&&(pt(Ft,".dirty=true;"),pt.exit(Ft,".dirty=true;")),pt("a1(",et.shared.context,",a0,",et.batchId,");")}function Yt(et){if(!(typeof et!="object"||Hr(et))){for(var $=Object.keys(et),pt=0;pt<$.length;++pt)if(ai.isDynamic(et[$[pt]]))return!0;return!1}}function un(et,$,pt){var Rt=$.static[pt];if(!Rt||!Yt(Rt))return;var Ft=et.global,_t=Object.keys(Rt),mt=!1,Ot=!1,tt=!1,dt=et.global.def("{}");_t.forEach(function(Lt){var Vt=Rt[Lt];if(ai.isDynamic(Vt)){typeof Vt=="function"&&(Vt=Rt[Lt]=ai.unbox(Vt));var de=ls(Vt,null);mt=mt||de.thisDep,tt=tt||de.propDep,Ot=Ot||de.contextDep}else{switch(Ft(dt,".",Lt,"="),typeof Vt){case"number":Ft(Vt);break;case"string":Ft('"',Vt,'"');break;case"object":Array.isArray(Vt)&&Ft("[",Vt.join(),"]");break;default:Ft(et.link(Vt));break}Ft(";")}});function q(Lt,Vt){_t.forEach(function(de){var ye=Rt[de];if(ai.isDynamic(ye)){var ae=Lt.invoke(Vt,ye);Vt(dt,".",de,"=",ae,";")}})}$.dynamic[pt]=new ai.DynamicVariable(zf,{thisDep:mt,contextDep:Ot,propDep:tt,ref:dt,append:q}),delete $.static[pt]}function wr(et,$,pt,Rt,Ft){var _t=Zn();_t.stats=_t.link(Ft),Object.keys($.static).forEach(function(Ot){un(_t,$,Ot)}),Wl.forEach(function(Ot){un(_t,et,Ot)});var mt=li(et,$,pt,Rt,_t);return gi(_t,mt),te(_t,mt),it(_t,mt),O(_t.compile(),{destroy:function(){mt.shader.program.destroy()}})}return{next:cn,current:ie,procs:function(){var et=Zn(),$=et.proc("poll"),pt=et.proc("refresh"),Rt=et.block();$(Rt),pt(Rt);var Ft=et.shared,_t=Ft.gl,mt=Ft.next,Ot=Ft.current;Rt(Ot,".dirty=false;"),tr(et,$),tr(et,pt,null,!0);var tt;ke&&(tt=et.link(ke)),lt.oes_vertex_array_object&&pt(et.link(lt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var dt=0;dt<ee.maxAttributes;++dt){var q=pt.def(Ft.attributes,"[",dt,"]"),Lt=et.cond(q,".buffer");Lt.then(_t,".enableVertexAttribArray(",dt,");",_t,".bindBuffer(",Ia,",",q,".buffer.buffer);",_t,".vertexAttribPointer(",dt,",",q,".size,",q,".type,",q,".normalized,",q,".stride,",q,".offset);").else(_t,".disableVertexAttribArray(",dt,");",_t,".vertexAttrib4f(",dt,",",q,".x,",q,".y,",q,".z,",q,".w);",q,".buffer=null;"),pt(Lt),ke&&pt(tt,".vertexAttribDivisorANGLE(",dt,",",q,".divisor);")}return pt(et.shared.vao,".currentVAO=null;",et.shared.vao,".setVAO(",et.shared.vao,".targetVAO);"),Object.keys(Ge).forEach(function(Vt){var de=Ge[Vt],ye=Rt.def(mt,".",Vt),ae=et.block();ae("if(",ye,"){",_t,".enable(",de,")}else{",_t,".disable(",de,")}",Ot,".",Vt,"=",ye,";"),pt(ae),$("if(",ye,"!==",Ot,".",Vt,"){",ae,"}")}),Object.keys(Ce).forEach(function(Vt){var de=Ce[Vt],ye=ie[Vt],ae,Re,Ye=et.block();if(Ye(_t,".",de,"("),Hr(ye)){var ir=ye.length;ae=et.global.def(mt,".",Vt),Re=et.global.def(Ot,".",Vt),Ye(ci(ir,function(ln){return ae+"["+ln+"]"}),");",ci(ir,function(ln){return Re+"["+ln+"]="+ae+"["+ln+"];"}).join("")),$("if(",ci(ir,function(ln){return ae+"["+ln+"]!=="+Re+"["+ln+"]"}).join("||"),"){",Ye,"}")}else ae=Rt.def(mt,".",Vt),Re=Rt.def(Ot,".",Vt),Ye(ae,");",Ot,".",Vt,"=",ae,";"),$("if(",ae,"!==",Re,"){",Ye,"}");pt(Ye)}),et.compile()}(),compile:wr}}function wp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var mg=34918,sl=34919,xd=35007,Sp=function(N,X){if(!X.ext_disjoint_timer_query)return null;var lt=[];function ee(){return lt.pop()||X.ext_disjoint_timer_query.createQueryEXT()}function ge(ke){lt.push(ke)}var Kt=[];function oe(ke){var He=ee();X.ext_disjoint_timer_query.beginQueryEXT(xd,He),Kt.push(He),ve(Kt.length-1,Kt.length,ke)}function _e(){X.ext_disjoint_timer_query.endQueryEXT(xd)}function Ie(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Be=[];function Pe(){return Be.pop()||new Ie}function Ve(ke){Be.push(ke)}var $e=[];function ve(ke,He,ie){var cn=Pe();cn.startQueryIndex=ke,cn.endQueryIndex=He,cn.sum=0,cn.stats=ie,$e.push(cn)}var Ze=[],Nt=[];function se(){var ke,He,ie=Kt.length;if(ie!==0){Nt.length=Math.max(Nt.length,ie+1),Ze.length=Math.max(Ze.length,ie+1),Ze[0]=0,Nt[0]=0;var cn=0;for(ke=0,He=0;He<Kt.length;++He){var Ee=Kt[He];X.ext_disjoint_timer_query.getQueryObjectEXT(Ee,sl)?(cn+=X.ext_disjoint_timer_query.getQueryObjectEXT(Ee,mg),ge(Ee)):Kt[ke++]=Ee,Ze[He+1]=cn,Nt[He+1]=ke}for(Kt.length=ke,ke=0,He=0;He<$e.length;++He){var Ge=$e[He],Ce=Ge.startQueryIndex,je=Ge.endQueryIndex;Ge.sum+=Ze[je]-Ze[Ce];var Ln=Nt[Ce],Wn=Nt[je];Wn===Ln?(Ge.stats.gpuTime+=Ge.sum/1e6,Ve(Ge)):(Ge.startQueryIndex=Ln,Ge.endQueryIndex=Wn,$e[ke++]=Ge)}$e.length=ke}}return{beginQuery:oe,endQuery:_e,pushScopeStats:ve,update:se,getNumPendingQueries:function(){return Kt.length},clear:function(){lt.push.apply(lt,Kt);for(var ke=0;ke<lt.length;ke++)X.ext_disjoint_timer_query.deleteQueryEXT(lt[ke]);Kt.length=0,lt.length=0},restore:function(){Kt.length=0,lt.length=0}}},tf=16384,eh=256,_p=1024,Cp=34962,nh="webglcontextlost",yg="webglcontextrestored",hu=1,Ra=2,bg=3;function cc(N,X){for(var lt=0;lt<N.length;++lt)if(N[lt]===X)return lt;return-1}function ef(N){var X=Uo(N);if(!X)return null;var lt=X.gl,ee=lt.getContextAttributes(),ge=lt.isContextLost(),Kt=ao(lt,X);if(!Kt)return null;var oe=Ea(),_e=wp(),Ie=Kt.extensions,Be=Sp(lt,Ie),Pe=Fs(),Ve=lt.drawingBufferWidth,$e=lt.drawingBufferHeight,ve={tick:0,time:0,viewportWidth:Ve,viewportHeight:$e,framebufferWidth:Ve,framebufferHeight:$e,drawingBufferWidth:Ve,drawingBufferHeight:$e,pixelRatio:X.pixelRatio},Ze={},Nt={elements:null,primitive:4,count:-1,offset:0,instances:-1},se=rs(lt,Ie),ke=An(lt,_e,X,ie),He=zl(lt,Ie,se,_e,ke);function ie(gn){return He.destroyBuffer(gn)}var cn=io(lt,Ie,ke,_e),Ee=fp(lt,oe,_e,X),Ge=ru(lt,Ie,se,function(){Ln.procs.poll()},ve,_e,X),Ce=qd(lt,Ie,se,_e,X),je=Ma(lt,Ie,se,Ge,Ce,_e),Ln=Ql(lt,oe,Ie,se,ke,cn,Ge,je,Ze,He,Ee,Nt,ve,Be,X),Wn=dp(lt,je,Ln.procs.poll,ve,ee,Ie,se),Xe=Ln.next,Fe=lt.canvas,we=[],Zn=[],cr=[],dn=[X.onDestroy],Qn=null;function Vn(){if(we.length===0){Be&&Be.update(),Qn=null;return}Qn=xa.next(Vn),oo();for(var gn=we.length-1;gn>=0;--gn){var Er=we[gn];Er&&Er(ve,null,0)}lt.flush(),Be&&Be.update()}function gr(){!Qn&&we.length>0&&(Qn=xa.next(Vn))}function Lr(){Qn&&(xa.cancel(Vn),Qn=null)}function zi(gn){gn.preventDefault(),ge=!0,Lr(),Zn.forEach(function(Er){Er()})}function mi(gn){lt.getError(),ge=!1,Kt.restore(),Ee.restore(),ke.restore(),Ge.restore(),Ce.restore(),je.restore(),He.restore(),Be&&Be.restore(),Ln.procs.refresh(),gr(),cr.forEach(function(Er){Er()})}Fe&&(Fe.addEventListener(nh,zi,!1),Fe.addEventListener(yg,mi,!1));function ar(){we.length=0,Lr(),Fe&&(Fe.removeEventListener(nh,zi),Fe.removeEventListener(yg,mi)),Ee.clear(),je.clear(),Ce.clear(),Ge.clear(),cn.clear(),ke.clear(),He.clear(),Be&&Be.clear(),dn.forEach(function(gn){gn()})}function ji(gn){Q(!!gn,"invalid args to regl({...})"),Q.type(gn,"object","invalid args to regl({...})");function Er(Ft){var _t=O({},Ft);delete _t.uniforms,delete _t.attributes,delete _t.context,delete _t.vao,"stencil"in _t&&_t.stencil.op&&(_t.stencil.opBack=_t.stencil.opFront=_t.stencil.op,delete _t.stencil.op);function mt(Ot){if(Ot in _t){var tt=_t[Ot];delete _t[Ot],Object.keys(tt).forEach(function(dt){_t[Ot+"."+dt]=tt[dt]})}}return mt("blend"),mt("depth"),mt("cull"),mt("stencil"),mt("polygonOffset"),mt("scissor"),mt("sample"),"vao"in Ft&&(_t.vao=Ft.vao),_t}function Pr(Ft,_t){var mt={},Ot={};return Object.keys(Ft).forEach(function(tt){var dt=Ft[tt];if(ai.isDynamic(dt)){Ot[tt]=ai.unbox(dt,tt);return}else if(_t&&Array.isArray(dt)){for(var q=0;q<dt.length;++q)if(ai.isDynamic(dt[q])){Ot[tt]=ai.unbox(dt,tt);return}}mt[tt]=dt}),{dynamic:Ot,static:mt}}var gi=Pr(gn.context||{},!0),wo=Pr(gn.uniforms||{},!0),Vs=Pr(gn.attributes||{},!1),it=Pr(Er(gn),!1),te={gpuTime:0,cpuTime:0,count:0},Yt=Ln.compile(it,Vs,wo,gi,te),un=Yt.draw,wr=Yt.batch,et=Yt.scope,$=[];function pt(Ft){for(;$.length<Ft;)$.push(null);return $}function Rt(Ft,_t){var mt;if(ge&&Q.raise("context lost"),typeof Ft=="function")return et.call(this,null,Ft,0);if(typeof _t=="function")if(typeof Ft=="number")for(mt=0;mt<Ft;++mt)et.call(this,null,_t,mt);else if(Array.isArray(Ft))for(mt=0;mt<Ft.length;++mt)et.call(this,Ft[mt],_t,mt);else return et.call(this,Ft,_t,0);else if(typeof Ft=="number"){if(Ft>0)return wr.call(this,pt(Ft|0),Ft|0)}else if(Array.isArray(Ft)){if(Ft.length)return wr.call(this,Ft,Ft.length)}else return un.call(this,Ft)}return O(Rt,{stats:te,destroy:function(){Yt.destroy()}})}var Wr=je.setFBO=ji({framebuffer:ai.define.call(null,hu,"framebuffer")});function li(gn,Er){var Pr=0;Ln.procs.poll();var gi=Er.color;gi&&(lt.clearColor(+gi[0]||0,+gi[1]||0,+gi[2]||0,+gi[3]||0),Pr|=tf),"depth"in Er&&(lt.clearDepth(+Er.depth),Pr|=eh),"stencil"in Er&&(lt.clearStencil(Er.stencil|0),Pr|=_p),Q(!!Pr,"called regl.clear with no buffer specified"),lt.clear(Pr)}function di(gn){if(Q(typeof gn=="object"&&gn,"regl.clear() takes an object as input"),"framebuffer"in gn)if(gn.framebuffer&&gn.framebuffer_reglType==="framebufferCube")for(var Er=0;Er<6;++Er)Wr(O({framebuffer:gn.framebuffer.faces[Er]},gn),li);else Wr(gn,li);else li(null,gn)}function tr(gn){Q.type(gn,"function","regl.frame() callback must be a function"),we.push(gn);function Er(){var Pr=cc(we,gn);Q(Pr>=0,"cannot cancel a frame twice");function gi(){var wo=cc(we,gi);we[wo]=we[we.length-1],we.length-=1,we.length<=0&&Lr()}we[Pr]=gi}return gr(),{cancel:Er}}function ei(){var gn=Xe.viewport,Er=Xe.scissor_box;gn[0]=gn[1]=Er[0]=Er[1]=0,ve.viewportWidth=ve.framebufferWidth=ve.drawingBufferWidth=gn[2]=Er[2]=lt.drawingBufferWidth,ve.viewportHeight=ve.framebufferHeight=ve.drawingBufferHeight=gn[3]=Er[3]=lt.drawingBufferHeight}function oo(){ve.tick+=1,ve.time=ur(),ei(),Ln.procs.poll()}function Si(){Ge.refresh(),ei(),Ln.procs.refresh(),Be&&Be.update()}function ur(){return(Fs()-Pe)/1e3}Si();function Ui(gn,Er){Q.type(Er,"function","listener callback must be a function");var Pr;switch(gn){case"frame":return tr(Er);case"lost":Pr=Zn;break;case"restore":Pr=cr;break;case"destroy":Pr=dn;break;default:Q.raise("invalid event, must be one of frame,lost,restore,destroy")}return Pr.push(Er),{cancel:function(){for(var gi=0;gi<Pr.length;++gi)if(Pr[gi]===Er){Pr[gi]=Pr[Pr.length-1],Pr.pop();return}}}}var xr=O(ji,{clear:di,prop:ai.define.bind(null,hu),context:ai.define.bind(null,Ra),this:ai.define.bind(null,bg),draw:ji({}),buffer:function(gn){return ke.create(gn,Cp,!1,!1)},elements:function(gn){return cn.create(gn,!1)},texture:Ge.create2D,cube:Ge.createCube,renderbuffer:Ce.create,framebuffer:je.create,framebufferCube:je.createCube,vao:He.createVAO,attributes:ee,frame:tr,on:Ui,limits:se,hasExtension:function(gn){return se.extensions.indexOf(gn.toLowerCase())>=0},read:Wn,destroy:ar,_gl:lt,_refresh:Si,poll:function(){oo(),Be&&Be.update()},now:ur,stats:_e});return X.onDone(null,xr),xr}return ef})},30006:function(At,yt,O){var V=O(25705);function ft(rt){if(Array.isArray(rt))return V(rt)}At.exports=ft,At.exports.__esModule=!0,At.exports.default=At.exports},68608:function(At){function yt(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}At.exports=yt,At.exports.__esModule=!0,At.exports.default=At.exports},21140:function(At){function yt(O,V){if(!(O instanceof V))throw new TypeError("Cannot call a class as a function")}At.exports=yt,At.exports.__esModule=!0,At.exports.default=At.exports},63466:function(At,yt,O){var V=O(26982);function ft(wt,Tt){for(var Zt=0;Zt<Tt.length;Zt++){var K=Tt[Zt];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(wt,V(K.key),K)}}function rt(wt,Tt,Zt){return Tt&&ft(wt.prototype,Tt),Zt&&ft(wt,Zt),Object.defineProperty(wt,"prototype",{writable:!1}),wt}At.exports=rt,At.exports.__esModule=!0,At.exports.default=At.exports},38888:function(At,yt,O){var V=O(44908),ft=O(14614),rt=O(91621);function wt(Tt){var Zt=ft();return function(){var Z=V(Tt),ot;if(Zt){var gt=V(this).constructor;ot=Reflect.construct(Z,arguments,gt)}else ot=Z.apply(this,arguments);return rt(this,ot)}}At.exports=wt,At.exports.__esModule=!0,At.exports.default=At.exports},44908:function(At){function yt(O){return At.exports=yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ft){return ft.__proto__||Object.getPrototypeOf(ft)},At.exports.__esModule=!0,At.exports.default=At.exports,yt(O)}At.exports=yt,At.exports.__esModule=!0,At.exports.default=At.exports},58853:function(At,yt,O){var V=O(49154);function ft(rt,wt){if(typeof wt!="function"&&wt!==null)throw new TypeError("Super expression must either be null or a function");rt.prototype=Object.create(wt&&wt.prototype,{constructor:{value:rt,writable:!0,configurable:!0}}),Object.defineProperty(rt,"prototype",{writable:!1}),wt&&V(rt,wt)}At.exports=ft,At.exports.__esModule=!0,At.exports.default=At.exports},14614:function(At){function yt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(O){return!1}}At.exports=yt,At.exports.__esModule=!0,At.exports.default=At.exports},16660:function(At){function yt(O){if(typeof Symbol!="undefined"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}At.exports=yt,At.exports.__esModule=!0,At.exports.default=At.exports},95848:function(At){function yt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}At.exports=yt,At.exports.__esModule=!0,At.exports.default=At.exports},91621:function(At,yt,O){var V=O(37635).default,ft=O(68608);function rt(wt,Tt){if(Tt&&(V(Tt)==="object"||typeof Tt=="function"))return Tt;if(Tt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ft(wt)}At.exports=rt,At.exports.__esModule=!0,At.exports.default=At.exports},49154:function(At){function yt(O,V){return At.exports=yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,wt){return rt.__proto__=wt,rt},At.exports.__esModule=!0,At.exports.default=At.exports,yt(O,V)}At.exports=yt,At.exports.__esModule=!0,At.exports.default=At.exports},93525:function(At,yt,O){var V=O(30006),ft=O(16660),rt=O(41442),wt=O(95848);function Tt(Zt){return V(Zt)||ft(Zt)||rt(Zt)||wt()}At.exports=Tt,At.exports.__esModule=!0,At.exports.default=At.exports},48724:function(At,yt,O){var V=O(92057).default;function ft(){"use strict";At.exports=ft=function(){return rt},At.exports.__esModule=!0,At.exports.default=At.exports;var rt={},wt=Object.prototype,Tt=wt.hasOwnProperty,Zt=Object.defineProperty||function(Je,kt,vt){Je[kt]=vt.value},K=typeof Symbol=="function"?Symbol:{},Z=K.iterator||"@@iterator",ot=K.asyncIterator||"@@asyncIterator",gt=K.toStringTag||"@@toStringTag";function $t(Je,kt,vt){return Object.defineProperty(Je,kt,{value:vt,enumerable:!0,configurable:!0,writable:!0}),Je[kt]}try{$t({},"")}catch(Je){$t=function(vt,Qt,jt){return vt[Qt]=jt}}function ht(Je,kt,vt,Qt){var jt=kt&&kt.prototype instanceof ut?kt:ut,Dt=Object.create(jt.prototype),on=new rn(Qt||[]);return Zt(Dt,"_invoke",{value:Ht(Je,vt,on)}),Dt}function bt(Je,kt,vt){try{return{type:"normal",arg:Je.call(kt,vt)}}catch(Qt){return{type:"throw",arg:Qt}}}rt.wrap=ht;var Ut={};function ut(){}function Bt(){}function Gt(){}var fe={};$t(fe,Z,function(){return this});var ue=Object.getPrototypeOf,xe=ue&&ue(ue(lr([])));xe&&xe!==wt&&Tt.call(xe,Z)&&(fe=xe);var Qe=Gt.prototype=ut.prototype=Object.create(fe);function Pn(Je){["next","throw","return"].forEach(function(kt){$t(Je,kt,function(vt){return this._invoke(kt,vt)})})}function yn(Je,kt){function vt(jt,Dt,on,Oe){var Jn=bt(Je[jt],Je,Dt);if(Jn.type!=="throw"){var Cn=Jn.arg,Tn=Cn.value;return Tn&&V(Tn)=="object"&&Tt.call(Tn,"__await")?kt.resolve(Tn.__await).then(function(zn){vt("next",zn,on,Oe)},function(zn){vt("throw",zn,on,Oe)}):kt.resolve(Tn).then(function(zn){Cn.value=zn,on(Cn)},function(zn){return vt("throw",zn,on,Oe)})}Oe(Jn.arg)}var Qt;Zt(this,"_invoke",{value:function(Dt,on){function Oe(){return new kt(function(Jn,Cn){vt(Dt,on,Jn,Cn)})}return Qt=Qt?Qt.then(Oe,Oe):Oe()}})}function Ht(Je,kt,vt){var Qt="suspendedStart";return function(jt,Dt){if(Qt==="executing")throw new Error("Generator is already running");if(Qt==="completed"){if(jt==="throw")throw Dt;return bn()}for(vt.method=jt,vt.arg=Dt;;){var on=vt.delegate;if(on){var Oe=Yn(on,vt);if(Oe){if(Oe===Ut)continue;return Oe}}if(vt.method==="next")vt.sent=vt._sent=vt.arg;else if(vt.method==="throw"){if(Qt==="suspendedStart")throw Qt="completed",vt.arg;vt.dispatchException(vt.arg)}else vt.method==="return"&&vt.abrupt("return",vt.arg);Qt="executing";var Jn=bt(Je,kt,vt);if(Jn.type==="normal"){if(Qt=vt.done?"completed":"suspendedYield",Jn.arg===Ut)continue;return{value:Jn.arg,done:vt.done}}Jn.type==="throw"&&(Qt="completed",vt.method="throw",vt.arg=Jn.arg)}}}function Yn(Je,kt){var vt=kt.method,Qt=Je.iterator[vt];if(Qt===void 0)return kt.delegate=null,vt==="throw"&&Je.iterator.return&&(kt.method="return",kt.arg=void 0,Yn(Je,kt),kt.method==="throw")||vt!=="return"&&(kt.method="throw",kt.arg=new TypeError("The iterator does not provide a '"+vt+"' method")),Ut;var jt=bt(Qt,Je.iterator,kt.arg);if(jt.type==="throw")return kt.method="throw",kt.arg=jt.arg,kt.delegate=null,Ut;var Dt=jt.arg;return Dt?Dt.done?(kt[Je.resultName]=Dt.value,kt.next=Je.nextLoc,kt.method!=="return"&&(kt.method="next",kt.arg=void 0),kt.delegate=null,Ut):Dt:(kt.method="throw",kt.arg=new TypeError("iterator result is not an object"),kt.delegate=null,Ut)}function Hn(Je){var kt={tryLoc:Je[0]};1 in Je&&(kt.catchLoc=Je[1]),2 in Je&&(kt.finallyLoc=Je[2],kt.afterLoc=Je[3]),this.tryEntries.push(kt)}function _r(Je){var kt=Je.completion||{};kt.type="normal",delete kt.arg,Je.completion=kt}function rn(Je){this.tryEntries=[{tryLoc:"root"}],Je.forEach(Hn,this),this.reset(!0)}function lr(Je){if(Je){var kt=Je[Z];if(kt)return kt.call(Je);if(typeof Je.next=="function")return Je;if(!isNaN(Je.length)){var vt=-1,Qt=function jt(){for(;++vt<Je.length;)if(Tt.call(Je,vt))return jt.value=Je[vt],jt.done=!1,jt;return jt.value=void 0,jt.done=!0,jt};return Qt.next=Qt}}return{next:bn}}function bn(){return{value:void 0,done:!0}}return Bt.prototype=Gt,Zt(Qe,"constructor",{value:Gt,configurable:!0}),Zt(Gt,"constructor",{value:Bt,configurable:!0}),Bt.displayName=$t(Gt,gt,"GeneratorFunction"),rt.isGeneratorFunction=function(Je){var kt=typeof Je=="function"&&Je.constructor;return!!kt&&(kt===Bt||(kt.displayName||kt.name)==="GeneratorFunction")},rt.mark=function(Je){return Object.setPrototypeOf?Object.setPrototypeOf(Je,Gt):(Je.__proto__=Gt,$t(Je,gt,"GeneratorFunction")),Je.prototype=Object.create(Qe),Je},rt.awrap=function(Je){return{__await:Je}},Pn(yn.prototype),$t(yn.prototype,ot,function(){return this}),rt.AsyncIterator=yn,rt.async=function(Je,kt,vt,Qt,jt){jt===void 0&&(jt=Promise);var Dt=new yn(ht(Je,kt,vt,Qt),jt);return rt.isGeneratorFunction(kt)?Dt:Dt.next().then(function(on){return on.done?on.value:Dt.next()})},Pn(Qe),$t(Qe,gt,"Generator"),$t(Qe,Z,function(){return this}),$t(Qe,"toString",function(){return"[object Generator]"}),rt.keys=function(Je){var kt=Object(Je),vt=[];for(var Qt in kt)vt.push(Qt);return vt.reverse(),function jt(){for(;vt.length;){var Dt=vt.pop();if(Dt in kt)return jt.value=Dt,jt.done=!1,jt}return jt.done=!0,jt}},rt.values=lr,rn.prototype={constructor:rn,reset:function(kt){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_r),!kt)for(var vt in this)vt.charAt(0)==="t"&&Tt.call(this,vt)&&!isNaN(+vt.slice(1))&&(this[vt]=void 0)},stop:function(){this.done=!0;var kt=this.tryEntries[0].completion;if(kt.type==="throw")throw kt.arg;return this.rval},dispatchException:function(kt){if(this.done)throw kt;var vt=this;function Qt(Cn,Tn){return on.type="throw",on.arg=kt,vt.next=Cn,Tn&&(vt.method="next",vt.arg=void 0),!!Tn}for(var jt=this.tryEntries.length-1;jt>=0;--jt){var Dt=this.tryEntries[jt],on=Dt.completion;if(Dt.tryLoc==="root")return Qt("end");if(Dt.tryLoc<=this.prev){var Oe=Tt.call(Dt,"catchLoc"),Jn=Tt.call(Dt,"finallyLoc");if(Oe&&Jn){if(this.prev<Dt.catchLoc)return Qt(Dt.catchLoc,!0);if(this.prev<Dt.finallyLoc)return Qt(Dt.finallyLoc)}else if(Oe){if(this.prev<Dt.catchLoc)return Qt(Dt.catchLoc,!0)}else{if(!Jn)throw new Error("try statement without catch or finally");if(this.prev<Dt.finallyLoc)return Qt(Dt.finallyLoc)}}}},abrupt:function(kt,vt){for(var Qt=this.tryEntries.length-1;Qt>=0;--Qt){var jt=this.tryEntries[Qt];if(jt.tryLoc<=this.prev&&Tt.call(jt,"finallyLoc")&&this.prev<jt.finallyLoc){var Dt=jt;break}}Dt&&(kt==="break"||kt==="continue")&&Dt.tryLoc<=vt&&vt<=Dt.finallyLoc&&(Dt=null);var on=Dt?Dt.completion:{};return on.type=kt,on.arg=vt,Dt?(this.method="next",this.next=Dt.finallyLoc,Ut):this.complete(on)},complete:function(kt,vt){if(kt.type==="throw")throw kt.arg;return kt.type==="break"||kt.type==="continue"?this.next=kt.arg:kt.type==="return"?(this.rval=this.arg=kt.arg,this.method="return",this.next="end"):kt.type==="normal"&&vt&&(this.next=vt),Ut},finish:function(kt){for(var vt=this.tryEntries.length-1;vt>=0;--vt){var Qt=this.tryEntries[vt];if(Qt.finallyLoc===kt)return this.complete(Qt.completion,Qt.afterLoc),_r(Qt),Ut}},catch:function(kt){for(var vt=this.tryEntries.length-1;vt>=0;--vt){var Qt=this.tryEntries[vt];if(Qt.tryLoc===kt){var jt=Qt.completion;if(jt.type==="throw"){var Dt=jt.arg;_r(Qt)}return Dt}}throw new Error("illegal catch attempt")},delegateYield:function(kt,vt,Qt){return this.delegate={iterator:lr(kt),resultName:vt,nextLoc:Qt},this.method==="next"&&(this.arg=void 0),Ut}},rt}At.exports=ft,At.exports.__esModule=!0,At.exports.default=At.exports},92057:function(At){function yt(O){return At.exports=yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},At.exports.__esModule=!0,At.exports.default=At.exports,yt(O)}At.exports=yt,At.exports.__esModule=!0,At.exports.default=At.exports},10995:function(At,yt,O){var V=O(48724)();At.exports=V;try{regeneratorRuntime=V}catch(ft){typeof globalThis=="object"?globalThis.regeneratorRuntime=V:Function("r","regeneratorRuntime = r")(V)}},11779:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Gt}});function V(){this.__data__=[],this.size=0}var ft=V,rt=O(54523);function wt(fe,ue){for(var xe=fe.length;xe--;)if((0,rt.Z)(fe[xe][0],ue))return xe;return-1}var Tt=wt,Zt=Array.prototype,K=Zt.splice;function Z(fe){var ue=this.__data__,xe=Tt(ue,fe);if(xe<0)return!1;var Qe=ue.length-1;return xe==Qe?ue.pop():K.call(ue,xe,1),--this.size,!0}var ot=Z;function gt(fe){var ue=this.__data__,xe=Tt(ue,fe);return xe<0?void 0:ue[xe][1]}var $t=gt;function ht(fe){return Tt(this.__data__,fe)>-1}var bt=ht;function Ut(fe,ue){var xe=this.__data__,Qe=Tt(xe,fe);return Qe<0?(++this.size,xe.push([fe,ue])):xe[Qe][1]=ue,this}var ut=Ut;function Bt(fe){var ue=-1,xe=fe==null?0:fe.length;for(this.clear();++ue<xe;){var Qe=fe[ue];this.set(Qe[0],Qe[1])}}Bt.prototype.clear=ft,Bt.prototype.delete=ot,Bt.prototype.get=$t,Bt.prototype.has=bt,Bt.prototype.set=ut;var Gt=Bt},19385:function(At,yt,O){"use strict";var V=O(1311),ft=O(99615),rt=(0,V.Z)(ft.Z,"Map");yt.Z=rt},91380:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Jn}});var V=O(1311),ft=(0,V.Z)(Object,"create"),rt=ft;function wt(){this.__data__=rt?rt(null):{},this.size=0}var Tt=wt;function Zt(Cn){var Tn=this.has(Cn)&&delete this.__data__[Cn];return this.size-=Tn?1:0,Tn}var K=Zt,Z="__lodash_hash_undefined__",ot=Object.prototype,gt=ot.hasOwnProperty;function $t(Cn){var Tn=this.__data__;if(rt){var zn=Tn[Cn];return zn===Z?void 0:zn}return gt.call(Tn,Cn)?Tn[Cn]:void 0}var ht=$t,bt=Object.prototype,Ut=bt.hasOwnProperty;function ut(Cn){var Tn=this.__data__;return rt?Tn[Cn]!==void 0:Ut.call(Tn,Cn)}var Bt=ut,Gt="__lodash_hash_undefined__";function fe(Cn,Tn){var zn=this.__data__;return this.size+=this.has(Cn)?0:1,zn[Cn]=rt&&Tn===void 0?Gt:Tn,this}var ue=fe;function xe(Cn){var Tn=-1,zn=Cn==null?0:Cn.length;for(this.clear();++Tn<zn;){var Rn=Cn[Tn];this.set(Rn[0],Rn[1])}}xe.prototype.clear=Tt,xe.prototype.delete=K,xe.prototype.get=ht,xe.prototype.has=Bt,xe.prototype.set=ue;var Qe=xe,Pn=O(11779),yn=O(19385);function Ht(){this.size=0,this.__data__={hash:new Qe,map:new(yn.Z||Pn.Z),string:new Qe}}var Yn=Ht;function Hn(Cn){var Tn=typeof Cn;return Tn=="string"||Tn=="number"||Tn=="symbol"||Tn=="boolean"?Cn!=="__proto__":Cn===null}var _r=Hn;function rn(Cn,Tn){var zn=Cn.__data__;return _r(Tn)?zn[typeof Tn=="string"?"string":"hash"]:zn.map}var lr=rn;function bn(Cn){var Tn=lr(this,Cn).delete(Cn);return this.size-=Tn?1:0,Tn}var Je=bn;function kt(Cn){return lr(this,Cn).get(Cn)}var vt=kt;function Qt(Cn){return lr(this,Cn).has(Cn)}var jt=Qt;function Dt(Cn,Tn){var zn=lr(this,Cn),Rn=zn.size;return zn.set(Cn,Tn),this.size+=zn.size==Rn?0:1,this}var on=Dt;function Oe(Cn){var Tn=-1,zn=Cn==null?0:Cn.length;for(this.clear();++Tn<zn;){var Rn=Cn[Tn];this.set(Rn[0],Rn[1])}}Oe.prototype.clear=Yn,Oe.prototype.delete=Je,Oe.prototype.get=vt,Oe.prototype.has=jt,Oe.prototype.set=on;var Jn=Oe},36169:function(At,yt,O){"use strict";var V=O(1311),ft=O(99615),rt=(0,V.Z)(ft.Z,"Set");yt.Z=rt},24507:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Bt}});var V=O(11779);function ft(){this.__data__=new V.Z,this.size=0}var rt=ft;function wt(Gt){var fe=this.__data__,ue=fe.delete(Gt);return this.size=fe.size,ue}var Tt=wt;function Zt(Gt){return this.__data__.get(Gt)}var K=Zt;function Z(Gt){return this.__data__.has(Gt)}var ot=Z,gt=O(19385),$t=O(91380),ht=200;function bt(Gt,fe){var ue=this.__data__;if(ue instanceof V.Z){var xe=ue.__data__;if(!gt.Z||xe.length<ht-1)return xe.push([Gt,fe]),this.size=++ue.size,this;ue=this.__data__=new $t.Z(xe)}return ue.set(Gt,fe),this.size=ue.size,this}var Ut=bt;function ut(Gt){var fe=this.__data__=new V.Z(Gt);this.size=fe.size}ut.prototype.clear=rt,ut.prototype.delete=Tt,ut.prototype.get=K,ut.prototype.has=ot,ut.prototype.set=Ut;var Bt=ut},66711:function(At,yt,O){"use strict";var V=O(99615),ft=V.Z.Symbol;yt.Z=ft},16299:function(At,yt,O){"use strict";var V=O(99615),ft=V.Z.Uint8Array;yt.Z=ft},28087:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return $t}});function V(ht,bt){for(var Ut=-1,ut=Array(ht);++Ut<ht;)ut[Ut]=bt(Ut);return ut}var ft=V,rt=O(65380),wt=O(56052),Tt=O(45673),Zt=O(99313),K=O(79064),Z=Object.prototype,ot=Z.hasOwnProperty;function gt(ht,bt){var Ut=(0,wt.Z)(ht),ut=!Ut&&(0,rt.Z)(ht),Bt=!Ut&&!ut&&(0,Tt.Z)(ht),Gt=!Ut&&!ut&&!Bt&&(0,K.Z)(ht),fe=Ut||ut||Bt||Gt,ue=fe?ft(ht.length,String):[],xe=ue.length;for(var Qe in ht)(bt||ot.call(ht,Qe))&&!(fe&&(Qe=="length"||Bt&&(Qe=="offset"||Qe=="parent")||Gt&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||(0,Zt.Z)(Qe,xe)))&&ue.push(Qe);return ue}var $t=gt},28019:function(At,yt){"use strict";function O(V,ft){for(var rt=-1,wt=V==null?0:V.length,Tt=Array(wt);++rt<wt;)Tt[rt]=ft(V[rt],rt,V);return Tt}yt.Z=O},18573:function(At,yt){"use strict";function O(V,ft){for(var rt=-1,wt=ft.length,Tt=V.length;++rt<wt;)V[Tt+rt]=ft[rt];return V}yt.Z=O},61572:function(At,yt,O){"use strict";var V=O(857),ft=O(54523),rt=Object.prototype,wt=rt.hasOwnProperty;function Tt(Zt,K,Z){var ot=Zt[K];(!(wt.call(Zt,K)&&(0,ft.Z)(ot,Z))||Z===void 0&&!(K in Zt))&&(0,V.Z)(Zt,K,Z)}yt.Z=Tt},857:function(At,yt,O){"use strict";var V=O(55136);function ft(rt,wt,Tt){wt=="__proto__"&&V.Z?(0,V.Z)(rt,wt,{configurable:!0,enumerable:!0,value:Tt,writable:!0}):rt[wt]=Tt}yt.Z=ft},12653:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return yi}});var V=O(24507);function ft(Ke,Ir){for(var bi=-1,ns=Ke==null?0:Ke.length;++bi<ns&&Ir(Ke[bi],bi,Ke)!==!1;);return Ke}var rt=ft,wt=O(61572),Tt=O(52949),Zt=O(77251);function K(Ke,Ir){return Ke&&(0,Tt.Z)(Ir,(0,Zt.Z)(Ir),Ke)}var Z=K,ot=O(32817);function gt(Ke,Ir){return Ke&&(0,Tt.Z)(Ir,(0,ot.Z)(Ir),Ke)}var $t=gt,ht=O(14054),bt=O(32126),Ut=O(98409);function ut(Ke,Ir){return(0,Tt.Z)(Ke,(0,Ut.Z)(Ke),Ir)}var Bt=ut,Gt=O(18573),fe=O(10964),ue=O(69043),xe=Object.getOwnPropertySymbols,Qe=xe?function(Ke){for(var Ir=[];Ke;)(0,Gt.Z)(Ir,(0,Ut.Z)(Ke)),Ke=(0,fe.Z)(Ke);return Ir}:ue.Z,Pn=Qe;function yn(Ke,Ir){return(0,Tt.Z)(Ke,Pn(Ke),Ir)}var Ht=yn,Yn=O(38366),Hn=O(96909);function _r(Ke){return(0,Hn.Z)(Ke,ot.Z,Pn)}var rn=_r,lr=O(23313),bn=Object.prototype,Je=bn.hasOwnProperty;function kt(Ke){var Ir=Ke.length,bi=new Ke.constructor(Ir);return Ir&&typeof Ke[0]=="string"&&Je.call(Ke,"index")&&(bi.index=Ke.index,bi.input=Ke.input),bi}var vt=kt,Qt=O(97990);function jt(Ke,Ir){var bi=Ir?(0,Qt.Z)(Ke.buffer):Ke.buffer;return new Ke.constructor(bi,Ke.byteOffset,Ke.byteLength)}var Dt=jt,on=/\w*$/;function Oe(Ke){var Ir=new Ke.constructor(Ke.source,on.exec(Ke));return Ir.lastIndex=Ke.lastIndex,Ir}var Jn=Oe,Cn=O(66711),Tn=Cn.Z?Cn.Z.prototype:void 0,zn=Tn?Tn.valueOf:void 0;function Rn(Ke){return zn?Object(zn.call(Ke)):{}}var si=Rn,Kr=O(11523),qr="[object Boolean]",Fi="[object Date]",to="[object Map]",Ks="[object Number]",ps="[object RegExp]",Oi="[object Set]",Ls="[object String]",jo="[object Symbol]",ba="[object ArrayBuffer]",ks="[object DataView]",Q="[object Float32Array]",kc="[object Float64Array]",Bi="[object Int8Array]",yo="[object Int16Array]",Fc="[object Int32Array]",ii="[object Uint8Array]",Bc="[object Uint8ClampedArray]",vs="[object Uint16Array]",za="[object Uint32Array]";function ja(Ke,Ir,bi){var ns=Ke.constructor;switch(Ir){case ba:return(0,Qt.Z)(Ke);case qr:case Fi:return new ns(+Ke);case ks:return Dt(Ke,bi);case Q:case kc:case Bi:case yo:case Fc:case ii:case Bc:case vs:case za:return(0,Kr.Z)(Ke,bi);case to:return new ns;case Ks:case Ls:return new ns(Ke);case ps:return Jn(Ke);case Oi:return new ns;case jo:return si(Ke)}}var Tu=ja,Hi=O(16448),ai=O(56052),xa=O(45673),Fs=O(13795),Ea="[object Map]";function Gc(Ke){return(0,Fs.Z)(Ke)&&(0,lr.Z)(Ke)==Ea}var qs=Gc,vc=O(5467),Qo=O(92350),To=Qo.Z&&Qo.Z.isMap,eo=To?(0,vc.Z)(To):qs,Uo=eo,ao=O(82433),ci="[object Set]";function ms(Ke){return(0,Fs.Z)(Ke)&&(0,lr.Z)(Ke)==ci}var Or=ms,Vo=Qo.Z&&Qo.Z.isSet,wa=Vo?(0,vc.Z)(Vo):Or,ys=wa,Bs=1,Ua=2,bo=4,Vr="[object Arguments]",bs="[object Array]",Jr="[object Boolean]",zc="[object Date]",jc="[object Error]",Js="[object Function]",no="[object GeneratorFunction]",Zo="[object Map]",Qs="[object Number]",xs="[object Object]",Es="[object RegExp]",Sa="[object Set]",_a="[object String]",ts="[object Symbol]",Ao="[object WeakMap]",Ca="[object ArrayBuffer]",No="[object DataView]",mc="[object Float32Array]",Gs="[object Float64Array]",Mi="[object Int8Array]",yc="[object Int16Array]",oa="[object Int32Array]",Ro="[object Uint8Array]",es="[object Uint8ClampedArray]",Ta="[object Uint16Array]",Va="[object Uint32Array]",Xr={};Xr[Vr]=Xr[bs]=Xr[Ca]=Xr[No]=Xr[Jr]=Xr[zc]=Xr[mc]=Xr[Gs]=Xr[Mi]=Xr[yc]=Xr[oa]=Xr[Zo]=Xr[Qs]=Xr[xs]=Xr[Es]=Xr[Sa]=Xr[_a]=Xr[ts]=Xr[Ro]=Xr[es]=Xr[Ta]=Xr[Va]=!0,Xr[jc]=Xr[Js]=Xr[Ao]=!1;function sa(Ke,Ir,bi,ns,Ii,co){var ro,ta=Ir&Bs,zs=Ir&Ua,Za=Ir&bo;if(bi&&(ro=Ii?bi(Ke,ns,Ii,co):bi(Ke)),ro!==void 0)return ro;if(!(0,ao.Z)(Ke))return Ke;var bc=(0,ai.Z)(Ke);if(bc){if(ro=vt(Ke),!ta)return(0,bt.Z)(Ke,ro)}else{var ws=(0,lr.Z)(Ke),rs=ws==Js||ws==no;if((0,xa.Z)(Ke))return(0,ht.Z)(Ke,ta);if(ws==xs||ws==Vr||rs&&!Ii){if(ro=zs||rs?{}:(0,Hi.Z)(Ke),!ta)return zs?Ht(Ke,$t(ro,Ke)):Bt(Ke,Z(ro,Ke))}else{if(!Xr[ws])return Ii?Ke:{};ro=Tu(Ke,ws,ta)}}co||(co=new V.Z);var Wi=co.get(Ke);if(Wi)return Wi;co.set(Ke,ro),ys(Ke)?Ke.forEach(function(Do){ro.add(sa(Do,Ir,bi,Do,Ke,co))}):Uo(Ke)&&Ke.forEach(function(Do,uo){ro.set(uo,sa(Do,Ir,bi,uo,Ke,co))});var Xi=Za?zs?rn:Yn.Z:zs?ot.Z:Zt.Z,Ss=bc?void 0:Xi(Ke);return rt(Ss||Ke,function(Do,uo){Ss&&(uo=Do,Do=Ke[uo]),(0,wt.Z)(ro,uo,sa(Do,Ir,bi,uo,Ke,co))}),ro}var yi=sa},96909:function(At,yt,O){"use strict";var V=O(18573),ft=O(56052);function rt(wt,Tt,Zt){var K=Tt(wt);return(0,ft.Z)(wt)?K:(0,V.Z)(K,Zt(wt))}yt.Z=rt},33918:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Bt}});var V=O(66711),ft=Object.prototype,rt=ft.hasOwnProperty,wt=ft.toString,Tt=V.Z?V.Z.toStringTag:void 0;function Zt(Gt){var fe=rt.call(Gt,Tt),ue=Gt[Tt];try{Gt[Tt]=void 0;var xe=!0}catch(Pn){}var Qe=wt.call(Gt);return xe&&(fe?Gt[Tt]=ue:delete Gt[Tt]),Qe}var K=Zt,Z=Object.prototype,ot=Z.toString;function gt(Gt){return ot.call(Gt)}var $t=gt,ht="[object Null]",bt="[object Undefined]",Ut=V.Z?V.Z.toStringTag:void 0;function ut(Gt){return Gt==null?Gt===void 0?bt:ht:Ut&&Ut in Object(Gt)?K(Gt):$t(Gt)}var Bt=ut},88343:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Z}});var V=O(5196),ft=O(45635),rt=(0,ft.Z)(Object.keys,Object),wt=rt,Tt=Object.prototype,Zt=Tt.hasOwnProperty;function K(ot){if(!(0,V.Z)(ot))return wt(ot);var gt=[];for(var $t in Object(ot))Zt.call(ot,$t)&&$t!="constructor"&&gt.push($t);return gt}var Z=K},23188:function(At,yt,O){"use strict";var V=O(61572),ft=O(64765),rt=O(99313),wt=O(82433),Tt=O(13383);function Zt(K,Z,ot,gt){if(!(0,wt.Z)(K))return K;Z=(0,ft.Z)(Z,K);for(var $t=-1,ht=Z.length,bt=ht-1,Ut=K;Ut!=null&&++$t<ht;){var ut=(0,Tt.Z)(Z[$t]),Bt=ot;if(ut==="__proto__"||ut==="constructor"||ut==="prototype")return K;if($t!=bt){var Gt=Ut[ut];Bt=gt?gt(Gt,ut,Ut):void 0,Bt===void 0&&(Bt=(0,wt.Z)(Gt)?Gt:(0,rt.Z)(Z[$t+1])?[]:{})}(0,V.Z)(Ut,ut,Bt),Ut=Ut[ut]}return K}yt.Z=Zt},5467:function(At,yt){"use strict";function O(V){return function(ft){return V(ft)}}yt.Z=O},64765:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Bt}});var V=O(56052),ft=O(61070),rt=O(91380),wt="Expected a function";function Tt(Gt,fe){if(typeof Gt!="function"||fe!=null&&typeof fe!="function")throw new TypeError(wt);var ue=function(){var xe=arguments,Qe=fe?fe.apply(this,xe):xe[0],Pn=ue.cache;if(Pn.has(Qe))return Pn.get(Qe);var yn=Gt.apply(this,xe);return ue.cache=Pn.set(Qe,yn)||Pn,yn};return ue.cache=new(Tt.Cache||rt.Z),ue}Tt.Cache=rt.Z;var Zt=Tt,K=500;function Z(Gt){var fe=Zt(Gt,function(xe){return ue.size===K&&ue.clear(),xe}),ue=fe.cache;return fe}var ot=Z,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$t=/\\(\\)?/g,ht=ot(function(Gt){var fe=[];return Gt.charCodeAt(0)===46&&fe.push(""),Gt.replace(gt,function(ue,xe,Qe,Pn){fe.push(Qe?Pn.replace($t,"$1"):xe||ue)}),fe}),bt=ht,Ut=O(99757);function ut(Gt,fe){return(0,V.Z)(Gt)?Gt:(0,ft.Z)(Gt,fe)?[Gt]:bt((0,Ut.Z)(Gt))}var Bt=ut},97990:function(At,yt,O){"use strict";var V=O(16299);function ft(rt){var wt=new rt.constructor(rt.byteLength);return new V.Z(wt).set(new V.Z(rt)),wt}yt.Z=ft},14054:function(At,yt,O){"use strict";var V=O(99615),ft=typeof exports=="object"&&exports&&!exports.nodeType&&exports,rt=ft&&typeof module=="object"&&module&&!module.nodeType&&module,wt=rt&&rt.exports===ft,Tt=wt?V.Z.Buffer:void 0,Zt=Tt?Tt.allocUnsafe:void 0;function K(Z,ot){if(ot)return Z.slice();var gt=Z.length,$t=Zt?Zt(gt):new Z.constructor(gt);return Z.copy($t),$t}yt.Z=K},11523:function(At,yt,O){"use strict";var V=O(97990);function ft(rt,wt){var Tt=wt?(0,V.Z)(rt.buffer):rt.buffer;return new rt.constructor(Tt,rt.byteOffset,rt.length)}yt.Z=ft},32126:function(At,yt){"use strict";function O(V,ft){var rt=-1,wt=V.length;for(ft||(ft=Array(wt));++rt<wt;)ft[rt]=V[rt];return ft}yt.Z=O},52949:function(At,yt,O){"use strict";var V=O(61572),ft=O(857);function rt(wt,Tt,Zt,K){var Z=!Zt;Zt||(Zt={});for(var ot=-1,gt=Tt.length;++ot<gt;){var $t=Tt[ot],ht=K?K(Zt[$t],wt[$t],$t,Zt,wt):void 0;ht===void 0&&(ht=wt[$t]),Z?(0,ft.Z)(Zt,$t,ht):(0,V.Z)(Zt,$t,ht)}return Zt}yt.Z=rt},55136:function(At,yt,O){"use strict";var V=O(1311),ft=function(){try{var rt=(0,V.Z)(Object,"defineProperty");return rt({},"",{}),rt}catch(wt){}}();yt.Z=ft},97889:function(At,yt){"use strict";var O=typeof global=="object"&&global&&global.Object===Object&&global;yt.Z=O},38366:function(At,yt,O){"use strict";var V=O(96909),ft=O(98409),rt=O(77251);function wt(Tt){return(0,V.Z)(Tt,rt.Z,ft.Z)}yt.Z=wt},1311:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Pn}});var V=O(88987),ft=O(99615),rt=ft.Z["__core-js_shared__"],wt=rt,Tt=function(){var yn=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||"");return yn?"Symbol(src)_1."+yn:""}();function Zt(yn){return!!Tt&&Tt in yn}var K=Zt,Z=O(82433),ot=O(65114),gt=/[\\^$.*+?()[\]{}|]/g,$t=/^\[object .+?Constructor\]$/,ht=Function.prototype,bt=Object.prototype,Ut=ht.toString,ut=bt.hasOwnProperty,Bt=RegExp("^"+Ut.call(ut).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gt(yn){if(!(0,Z.Z)(yn)||K(yn))return!1;var Ht=(0,V.Z)(yn)?Bt:$t;return Ht.test((0,ot.Z)(yn))}var fe=Gt;function ue(yn,Ht){return yn==null?void 0:yn[Ht]}var xe=ue;function Qe(yn,Ht){var Yn=xe(yn,Ht);return fe(Yn)?Yn:void 0}var Pn=Qe},10964:function(At,yt,O){"use strict";var V=O(45635),ft=(0,V.Z)(Object.getPrototypeOf,Object);yt.Z=ft},98409:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Z}});function V(ot,gt){for(var $t=-1,ht=ot==null?0:ot.length,bt=0,Ut=[];++$t<ht;){var ut=ot[$t];gt(ut,$t,ot)&&(Ut[bt++]=ut)}return Ut}var ft=V,rt=O(69043),wt=Object.prototype,Tt=wt.propertyIsEnumerable,Zt=Object.getOwnPropertySymbols,K=Zt?function(ot){return ot==null?[]:(ot=Object(ot),ft(Zt(ot),function(gt){return Tt.call(ot,gt)}))}:rt.Z,Z=K},23313:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Yn}});var V=O(1311),ft=O(99615),rt=(0,V.Z)(ft.Z,"DataView"),wt=rt,Tt=O(19385),Zt=(0,V.Z)(ft.Z,"Promise"),K=Zt,Z=O(36169),ot=(0,V.Z)(ft.Z,"WeakMap"),gt=ot,$t=O(33918),ht=O(65114),bt="[object Map]",Ut="[object Object]",ut="[object Promise]",Bt="[object Set]",Gt="[object WeakMap]",fe="[object DataView]",ue=(0,ht.Z)(wt),xe=(0,ht.Z)(Tt.Z),Qe=(0,ht.Z)(K),Pn=(0,ht.Z)(Z.Z),yn=(0,ht.Z)(gt),Ht=$t.Z;(wt&&Ht(new wt(new ArrayBuffer(1)))!=fe||Tt.Z&&Ht(new Tt.Z)!=bt||K&&Ht(K.resolve())!=ut||Z.Z&&Ht(new Z.Z)!=Bt||gt&&Ht(new gt)!=Gt)&&(Ht=function(Hn){var _r=(0,$t.Z)(Hn),rn=_r==Ut?Hn.constructor:void 0,lr=rn?(0,ht.Z)(rn):"";if(lr)switch(lr){case ue:return fe;case xe:return bt;case Qe:return ut;case Pn:return Bt;case yn:return Gt}return _r});var Yn=Ht},16448:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return Z}});var V=O(82433),ft=Object.create,rt=function(){function ot(){}return function(gt){if(!(0,V.Z)(gt))return{};if(ft)return ft(gt);ot.prototype=gt;var $t=new ot;return ot.prototype=void 0,$t}}(),wt=rt,Tt=O(10964),Zt=O(5196);function K(ot){return typeof ot.constructor=="function"&&!(0,Zt.Z)(ot)?wt((0,Tt.Z)(ot)):{}}var Z=K},99313:function(At,yt){"use strict";var O=9007199254740991,V=/^(?:0|[1-9]\d*)$/;function ft(rt,wt){var Tt=typeof rt;return wt=wt==null?O:wt,!!wt&&(Tt=="number"||Tt!="symbol"&&V.test(rt))&&rt>-1&&rt%1==0&&rt<wt}yt.Z=ft},61070:function(At,yt,O){"use strict";var V=O(56052),ft=O(98111),rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wt=/^\w*$/;function Tt(Zt,K){if((0,V.Z)(Zt))return!1;var Z=typeof Zt;return Z=="number"||Z=="symbol"||Z=="boolean"||Zt==null||(0,ft.Z)(Zt)?!0:wt.test(Zt)||!rt.test(Zt)||K!=null&&Zt in Object(K)}yt.Z=Tt},5196:function(At,yt){"use strict";var O=Object.prototype;function V(ft){var rt=ft&&ft.constructor,wt=typeof rt=="function"&&rt.prototype||O;return ft===wt}yt.Z=V},92350:function(At,yt,O){"use strict";var V=O(97889),ft=typeof exports=="object"&&exports&&!exports.nodeType&&exports,rt=ft&&typeof module=="object"&&module&&!module.nodeType&&module,wt=rt&&rt.exports===ft,Tt=wt&&V.Z.process,Zt=function(){try{var K=rt&&rt.require&&rt.require("util").types;return K||Tt&&Tt.binding&&Tt.binding("util")}catch(Z){}}();yt.Z=Zt},45635:function(At,yt){"use strict";function O(V,ft){return function(rt){return V(ft(rt))}}yt.Z=O},99615:function(At,yt,O){"use strict";var V=O(97889),ft=typeof self=="object"&&self&&self.Object===Object&&self,rt=V.Z||ft||Function("return this")();yt.Z=rt},13383:function(At,yt,O){"use strict";var V=O(98111),ft=1/0;function rt(wt){if(typeof wt=="string"||(0,V.Z)(wt))return wt;var Tt=wt+"";return Tt=="0"&&1/wt==-ft?"-0":Tt}yt.Z=rt},65114:function(At,yt){"use strict";var O=Function.prototype,V=O.toString;function ft(rt){if(rt!=null){try{return V.call(rt)}catch(wt){}try{return rt+""}catch(wt){}}return""}yt.Z=ft},54834:function(At,yt,O){"use strict";var V=O(12653),ft=1,rt=4;function wt(Tt){return(0,V.Z)(Tt,ft|rt)}yt.Z=wt},48831:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return gt}});var V=O(82433),ft=O(99615),rt=function(){return ft.Z.Date.now()},wt=rt,Tt=O(28106),Zt="Expected a function",K=Math.max,Z=Math.min;function ot($t,ht,bt){var Ut,ut,Bt,Gt,fe,ue,xe=0,Qe=!1,Pn=!1,yn=!0;if(typeof $t!="function")throw new TypeError(Zt);ht=(0,Tt.Z)(ht)||0,(0,V.Z)(bt)&&(Qe=!!bt.leading,Pn="maxWait"in bt,Bt=Pn?K((0,Tt.Z)(bt.maxWait)||0,ht):Bt,yn="trailing"in bt?!!bt.trailing:yn);function Ht(vt){var Qt=Ut,jt=ut;return Ut=ut=void 0,xe=vt,Gt=$t.apply(jt,Qt),Gt}function Yn(vt){return xe=vt,fe=setTimeout(rn,ht),Qe?Ht(vt):Gt}function Hn(vt){var Qt=vt-ue,jt=vt-xe,Dt=ht-Qt;return Pn?Z(Dt,Bt-jt):Dt}function _r(vt){var Qt=vt-ue,jt=vt-xe;return ue===void 0||Qt>=ht||Qt<0||Pn&&jt>=Bt}function rn(){var vt=wt();if(_r(vt))return lr(vt);fe=setTimeout(rn,Hn(vt))}function lr(vt){return fe=void 0,yn&&Ut?Ht(vt):(Ut=ut=void 0,Gt)}function bn(){fe!==void 0&&clearTimeout(fe),xe=0,Ut=ue=ut=fe=void 0}function Je(){return fe===void 0?Gt:lr(wt())}function kt(){var vt=wt(),Qt=_r(vt);if(Ut=arguments,ut=this,ue=vt,Qt){if(fe===void 0)return Yn(ue);if(Pn)return clearTimeout(fe),fe=setTimeout(rn,ht),Ht(ue)}return fe===void 0&&(fe=setTimeout(rn,ht)),Gt}return kt.cancel=bn,kt.flush=Je,kt}var gt=ot},54523:function(At,yt){"use strict";function O(V,ft){return V===ft||V!==V&&ft!==ft}yt.Z=O},65380:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return gt}});var V=O(33918),ft=O(13795),rt="[object Arguments]";function wt($t){return(0,ft.Z)($t)&&(0,V.Z)($t)==rt}var Tt=wt,Zt=Object.prototype,K=Zt.hasOwnProperty,Z=Zt.propertyIsEnumerable,ot=Tt(function(){return arguments}())?Tt:function($t){return(0,ft.Z)($t)&&K.call($t,"callee")&&!Z.call($t,"callee")},gt=ot},56052:function(At,yt){"use strict";var O=Array.isArray;yt.Z=O},49634:function(At,yt,O){"use strict";var V=O(88987),ft=O(65743);function rt(wt){return wt!=null&&(0,ft.Z)(wt.length)&&!(0,V.Z)(wt)}yt.Z=rt},45673:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return gt}});var V=O(99615);function ft(){return!1}var rt=ft,wt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tt=wt&&typeof module=="object"&&module&&!module.nodeType&&module,Zt=Tt&&Tt.exports===wt,K=Zt?V.Z.Buffer:void 0,Z=K?K.isBuffer:void 0,ot=Z||rt,gt=ot},88987:function(At,yt,O){"use strict";var V=O(33918),ft=O(82433),rt="[object AsyncFunction]",wt="[object Function]",Tt="[object GeneratorFunction]",Zt="[object Proxy]";function K(Z){if(!(0,ft.Z)(Z))return!1;var ot=(0,V.Z)(Z);return ot==wt||ot==Tt||ot==rt||ot==Zt}yt.Z=K},65743:function(At,yt){"use strict";var O=9007199254740991;function V(ft){return typeof ft=="number"&&ft>-1&&ft%1==0&&ft<=O}yt.Z=V},82433:function(At,yt){"use strict";function O(V){var ft=typeof V;return V!=null&&(ft=="object"||ft=="function")}yt.Z=O},13795:function(At,yt){"use strict";function O(V){return V!=null&&typeof V=="object"}yt.Z=O},98111:function(At,yt,O){"use strict";var V=O(33918),ft=O(13795),rt="[object Symbol]";function wt(Tt){return typeof Tt=="symbol"||(0,ft.Z)(Tt)&&(0,V.Z)(Tt)==rt}yt.Z=wt},79064:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return jt}});var V=O(33918),ft=O(65743),rt=O(13795),wt="[object Arguments]",Tt="[object Array]",Zt="[object Boolean]",K="[object Date]",Z="[object Error]",ot="[object Function]",gt="[object Map]",$t="[object Number]",ht="[object Object]",bt="[object RegExp]",Ut="[object Set]",ut="[object String]",Bt="[object WeakMap]",Gt="[object ArrayBuffer]",fe="[object DataView]",ue="[object Float32Array]",xe="[object Float64Array]",Qe="[object Int8Array]",Pn="[object Int16Array]",yn="[object Int32Array]",Ht="[object Uint8Array]",Yn="[object Uint8ClampedArray]",Hn="[object Uint16Array]",_r="[object Uint32Array]",rn={};rn[ue]=rn[xe]=rn[Qe]=rn[Pn]=rn[yn]=rn[Ht]=rn[Yn]=rn[Hn]=rn[_r]=!0,rn[wt]=rn[Tt]=rn[Gt]=rn[Zt]=rn[fe]=rn[K]=rn[Z]=rn[ot]=rn[gt]=rn[$t]=rn[ht]=rn[bt]=rn[Ut]=rn[ut]=rn[Bt]=!1;function lr(Dt){return(0,rt.Z)(Dt)&&(0,ft.Z)(Dt.length)&&!!rn[(0,V.Z)(Dt)]}var bn=lr,Je=O(5467),kt=O(92350),vt=kt.Z&&kt.Z.isTypedArray,Qt=vt?(0,Je.Z)(vt):bn,jt=Qt},77251:function(At,yt,O){"use strict";var V=O(28087),ft=O(88343),rt=O(49634);function wt(Tt){return(0,rt.Z)(Tt)?(0,V.Z)(Tt):(0,ft.Z)(Tt)}yt.Z=wt},32817:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return ht}});var V=O(28087),ft=O(82433),rt=O(5196);function wt(bt){var Ut=[];if(bt!=null)for(var ut in Object(bt))Ut.push(ut);return Ut}var Tt=wt,Zt=Object.prototype,K=Zt.hasOwnProperty;function Z(bt){if(!(0,ft.Z)(bt))return Tt(bt);var Ut=(0,rt.Z)(bt),ut=[];for(var Bt in bt)Bt=="constructor"&&(Ut||!K.call(bt,Bt))||ut.push(Bt);return ut}var ot=Z,gt=O(49634);function $t(bt){return(0,gt.Z)(bt)?(0,V.Z)(bt,!0):ot(bt)}var ht=$t},19780:function(At,yt,O){"use strict";var V=O(23188);function ft(rt,wt,Tt){return rt==null?rt:(0,V.Z)(rt,wt,Tt)}yt.Z=ft},69043:function(At,yt){"use strict";function O(){return[]}yt.Z=O},28106:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return ut}});var V=/\s/;function ft(Bt){for(var Gt=Bt.length;Gt--&&V.test(Bt.charAt(Gt)););return Gt}var rt=ft,wt=/^\s+/;function Tt(Bt){return Bt&&Bt.slice(0,rt(Bt)+1).replace(wt,"")}var Zt=Tt,K=O(82433),Z=O(98111),ot=0/0,gt=/^[-+]0x[0-9a-f]+$/i,$t=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,bt=parseInt;function Ut(Bt){if(typeof Bt=="number")return Bt;if((0,Z.Z)(Bt))return ot;if((0,K.Z)(Bt)){var Gt=typeof Bt.valueOf=="function"?Bt.valueOf():Bt;Bt=(0,K.Z)(Gt)?Gt+"":Gt}if(typeof Bt!="string")return Bt===0?Bt:+Bt;Bt=Zt(Bt);var fe=$t.test(Bt);return fe||ht.test(Bt)?bt(Bt.slice(2),fe?2:8):gt.test(Bt)?ot:+Bt}var ut=Ut},99757:function(At,yt,O){"use strict";O.d(yt,{Z:function(){return $t}});var V=O(66711),ft=O(28019),rt=O(56052),wt=O(98111),Tt=1/0,Zt=V.Z?V.Z.prototype:void 0,K=Zt?Zt.toString:void 0;function Z(ht){if(typeof ht=="string")return ht;if((0,rt.Z)(ht))return(0,ft.Z)(ht,Z)+"";if((0,wt.Z)(ht))return K?K.call(ht):"";var bt=ht+"";return bt=="0"&&1/ht==-Tt?"-0":bt}var ot=Z;function gt(ht){return ht==null?"":ot(ht)}var $t=gt}}]);
